function DrawCommandHandler(){yy.CommandHandler.call(this),this._arrowKeyBehavior="move"}function PoolLink(){yy.Link.call(this)}function BPMNLinkingTool(){yy.LinkingTool.call(this),this.direction=yy.LinkingTool.ForwardsOnly,this.temporaryLink.routing=yy.Link.Orthogonal}function init(){function P(a){var b=["Empty","BpmnTaskMessage","BpmnTaskUser","BpmnTaskManual","BpmnTaskScript","BpmnTaskMessage","BpmnTaskService","InternalStorage"];return a<b.length?b[a]:"NotAllowed"}function Q(a){var b=10+r/2;return 0===a?new yy.Spot(0,1,b,0):1===a?new yy.Spot(1,1,-b,0):2===a?new yy.Spot(1,0,-b,0):new yy.Spot(1,0,-b-(a-2)*r,0)}function R(a){return 5==a?"dimgray":"white"}function S(a){var b=["NotAllowed","Empty","BpmnTaskMessage","BpmnEventTimer","BpmnEventEscalation","BpmnEventConditional","Arrow","BpmnEventError","ThinX","BpmnActivityCompensation","Triangle","Pentagon","ThickCross","Circle"];return a<b.length?b[a]:"NotAllowed"}function T(a){return 8===a?z:y}function U(a){return 6>=a?w:x}function W(a){var b,c,d;for(myDiagram.startTransaction("removeBoundaryEvent"),b=a.portId,c=a.panel.itemArray,d=0;d<c.length;d++)if(c[d].portId===b){myDiagram.model.removeArrayItem(c,d);break}myDiagram.commitTransaction("removeBoundaryEvent")}function Z(a){return a?[d("SubGraphExpanderButton"),{name:"subExpandBtn",margin:2,visible:!1},new yy.Binding("visible","isSubProcess")]:[]}function $(a,b){return d(yy.Panel,"Horizontal",{alignment:yy.Spot.MiddleBottom,alignmentFocus:yy.Spot.MiddleBottom},d(yy.Shape,"BpmnActivityLoop",{width:12/b,height:12/b,margin:2,visible:!1,strokeWidth:k},new yy.Binding("visible","isLoop")),d(yy.Shape,"BpmnActivityParallel",{width:12/b,height:12/b,margin:2,visible:!1,strokeWidth:k},new yy.Binding("visible","isParallel")),d(yy.Shape,"BpmnActivitySequential",{width:12/b,height:12/b,margin:2,visible:!1,strokeWidth:k},new yy.Binding("visible","isSequential")),d(yy.Shape,"BpmnActivityAdHoc",{width:12/b,height:12/b,margin:2,visible:!1,strokeWidth:k},new yy.Binding("visible","isAdHoc")),d(yy.Shape,"BpmnActivityCompensation",{width:12/b,height:12/b,margin:2,visible:!1,strokeWidth:k,fill:null},new yy.Binding("visible","isCompensation")),Z(a))}function eb(a){var b=["NotAllowed","ThinCross","Circle","AsteriskLine","ThinX","BpmnTaskManual","BpmnTaskUser","BpmnTaskMessage"];return a<b.length?b[a]:"NotAllowed"}function fb(a){var b=new yy.Size(C,C);return 4===a&&(b.width=3*(b.width/4),b.height=3*(b.height/4)),b}function gb(a){var b=fb(a);return b.width=b.width/2,b.height=b.height/2,b}function pb(a,b){var c=a.findObject(b),d=c.findObject("ButtonBorder");d instanceof yy.Shape&&(d.figure="Rectangle",d.spot1=new yy.Spot(0,0,2,2),d.spot2=new yy.Spot(1,1,-2,-2))}function vb(a){myDiagram.startTransaction("setSequenceLinkDefaultFlow");var b=myDiagram.model;b.setDataProperty(a.data,"isDefault",!0),a.fromNode.findLinksOutOf().each(function(c){c!==a&&c.data.isDefault&&b.setDataProperty(c.data,"isDefault",null)}),myDiagram.commitTransaction("setSequenceLinkDefaultFlow")}function wb(a){myDiagram.startTransaction("setSequenceLinkConditionalFlow");var b=myDiagram.model;b.setDataProperty(a.data,"isDefault",!1),myDiagram.commitTransaction("setSequenceLinkConditionalFlow")}function Ab(a,b,c){return a.containingGroup===c.containingGroup}var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,V,X,Y,_,ab,bb,cb,db,hb,ib,jb,kb,lb,mb,nb,ob,qb,rb,sb,tb,ub,xb,yb,zb,Bb,Cb,Db,Eb,Fb,Gb,Hb;for("undefined"==typeof Storage&&(a=document.getElementById("currentFile"),a.textContent="Sorry! No web storage support.\nIf you're using Internet Explorer, you must load the page from a server for local storage to work."),b=document.getElementById("openDocument"),b.style.visibility="hidden",c=document.getElementById("removeDocument"),c.style.visibility="hidden",d=yy.GraphObject.make,e=d(yy.Brush,yy.Brush.Linear,{0:"LightGoldenRodYellow ",1:"#FFFF66"}),f=d(yy.Brush,yy.Brush.Linear,{0:"OldLace",1:"PapayaWhip"}),g=d(yy.Brush,yy.Brush.Linear,{0:"#E0FEE0",1:"PaleGreen"}),h=d(yy.Brush,yy.Brush.Linear,{0:"White",1:"#DADADA"}),i=f,j="#CDAA7D",k=1.5,l=120,m=80,n=1,o=4,p=i,q=j,r=42,s=r-6,t=s-14,u="pink",v=g,w="white",x="dimgray",y="green",z="red",A=4,B=80,C=45,D=e,E="gold",F="gold",G=e,H=3,I=h,window.myDiagram=d(yy.Diagram,"myDiagram",{allowDrop:!0,commandHandler:new DrawCommandHandler,"commandHandler.arrowKeyBehavior":"move",mouseDrop:function(){var b=myDiagram.commandHandler.addTopLevelParts(myDiagram.selection,!0);b||myDiagram.currentTool.doCancel()},linkingTool:new BPMNLinkingTool,"linkingTool.linkValidation":Ab,"relinkingTool.linkValidation":Ab,InitialLayoutCompleted:loadDiagramProperties}),yy.Shape.defineFigureGenerator("Empty",function(){return new yy.Geometry}),J="M 150,0L 0,0L 0,600L 150,600 M 800,0",K=yy.Geometry.parse(J),K.normalize(),yy.Shape.defineFigureGenerator("Annotation",function(a,b,c){var d=K.copy(),e=d.bounds,f=Math.min(b/e.width,c/e.height);return d.scale(f,f),d}),L="F M 391,5L 419,14L 444.5,30.5L 451,120.5L 485.5,126L 522,141L 595,83L 618.5,92L 644,106.5L 660.5,132L 670,158L 616,220L 640.5,265.5L 658.122,317.809L 753.122,322.809L 770.122,348.309L 774.622,374.309L 769.5,402L 756.622,420.309L 659.122,428.809L 640.5,475L 616.5,519.5L 670,573.5L 663,600L 646,626.5L 622,639L 595,645.5L 531.5,597.5L 493.192,613.462L 450,627.5L 444.5,718.5L 421.5,733L 393,740.5L 361.5,733.5L 336.5,719L 330,627.5L 277.5,611.5L 227.5,584.167L 156.5,646L 124.5,641L 102,626.5L 82,602.5L 78.5,572.5L 148.167,500.833L 133.5,466.833L 122,432.5L 26.5,421L 11,400.5L 5,373.5L 12,347.5L 26.5,324L 123.5,317.5L 136.833,274.167L 154,241L 75.5,152.5L 85.5,128.5L 103,105.5L 128.5,88.5001L 154.872,82.4758L 237,155L 280.5,132L 330,121L 336,30L 361,15L 391,5 Z M 398.201,232L 510.201,275L 556.201,385L 505.201,491L 399.201,537L 284.201,489L 242.201,385L 282.201,273L 398.201,232 Z",M=yy.Geometry.parse(L),M.normalize(),yy.Shape.defineFigureGenerator("BpmnTaskService",function(a,b,c){var d=M.copy(),e=d.bounds,f=Math.min(b/e.width,c/e.height);return d.scale(f,f),d.spot1=new yy.Spot(0,.6,10,0),d.spot2=new yy.Spot(1,1),d}),N=yy.Geometry.parse("F1M18.13,10.06 C18.18,10.07 18.22,10.07 18.26,10.08 18.91,10.20 21.20,10.12 21.28,12.93 21.36,15.75 21.42,32.40 21.42,32.40 21.42,32.40 21.12,34.10 23.08,33.06 23.08,33.06 22.89,24.76 23.80,24.17 24.72,23.59 26.69,23.81 27.19,24.40 27.69,24.98 28.03,24.97 28.03,33.34 28.03,33.34 29.32,34.54 29.93,33.12 30.47,31.84 29.71,27.11 30.86,26.56 31.80,26.12 34.53,26.12 34.72,28.29 34.94,30.82 34.22,36.12 35.64,35.79 35.64,35.79 36.64,36.08 36.72,34.54 36.80,33.00 37.17,30.15 38.42,29.90 39.67,29.65 41.22,30.20 41.30,32.29 41.39,34.37 42.30,46.69 38.86,55.40 35.75,63.29 36.42,62.62 33.47,63.12 30.76,63.58 26.69,63.12 26.69,63.12 26.69,63.12 17.72,64.45 15.64,57.62 13.55,50.79 10.80,40.95 7.30,38.95 3.80,36.95 4.24,36.37 4.28,35.35 4.32,34.33 7.60,31.25 12.97,35.75 12.97,35.75 16.10,39.79 16.10,42.00 16.10,42.00 15.69,14.30 15.80,12.79 15.96,10.75 17.42,10.04 18.13,10.06z "),N.rotate(90,0,0),N.normalize(),yy.Shape.defineFigureGenerator("BpmnTaskManual",function(a,b,c){var d=N.copy(),e=d.bounds,f=Math.min(b/e.width,c/e.height);return d.scale(f,f),d.spot1=new yy.Spot(0,.6,10,0),d.spot2=new yy.Spot(1,1),d}),O=d(yy.Adornment,yy.Panel.Auto,d(yy.Shape,"RoundedRectangle",{fill:"whitesmoke",stroke:"gray"}),d(yy.TextBlock,{margin:3,editable:!0},new yy.Binding("text","",function(a){return void 0!==a.item?a.item:"(unnamed item)"}))),V=d(yy.Adornment,"Vertical",d("ContextMenuButton",d(yy.TextBlock,"Remove event"),{click:function(a,b){W(b.part.adornedObject)}})),X=d(yy.Panel,"Spot",{contextMenu:V,alignmentFocus:yy.Spot.Center,fromLinkable:!0,toLinkable:!1,cursor:"pointer",fromSpot:yy.Spot.Bottom,fromMaxLinks:1,toMaxLinks:0},new yy.Binding("portId","portId"),new yy.Binding("alignment","alignmentIndex",Q),d(yy.Shape,"Circle",{desiredSize:new yy.Size(r,r)},new yy.Binding("fromSpot","alignmentIndex",function(a){return 2>a?yy.Spot.Bottom:yy.Spot.Top}),new yy.Binding("fill","color")),d(yy.Shape,"Circle",{alignment:yy.Spot.Center,desiredSize:new yy.Size(s,s),fill:null}),d(yy.Shape,"NotAllowed",{alignment:yy.Spot.Center,desiredSize:new yy.Size(t,t),fill:"white"},new yy.Binding("figure","eventType",S))),Y=d(yy.Adornment,"Vertical",d("ContextMenuButton",d(yy.TextBlock,"Create sub process",{margin:3}),{click:function(){alert("TODO")}}),d("ContextMenuButton",d(yy.TextBlock,"Un do",{margin:3}),{click:function(){alert("TODO")}}),d("ContextMenuButton",d(yy.TextBlock,"Rename",{margin:3}),{click:function(a,b){rename(b)}})),_=d(yy.Node,"Spot",{locationObjectName:"SHAPE",locationSpot:yy.Spot.Center,resizable:!0,resizeObjectName:"PANEL",toolTip:O,selectionAdorned:!1,contextMenu:Y,itemTemplate:X},new yy.Binding("itemArray","boundaryEventArray"),new yy.Binding("location","loc",yy.Point.parse).makeTwoWay(yy.Point.stringify),new yy.Binding("layerName","isSelected",function(a){return a?"Foreground":""}).ofObject(),d(yy.Panel,"Auto",{name:"PANEL",minSize:new yy.Size(l,m),desiredSize:new yy.Size(l,m)},new yy.Binding("desiredSize","size",yy.Size.parse).makeTwoWay(yy.Size.stringify),d(yy.Panel,"Spot",d(yy.Shape,"RoundedRectangle",{name:"SHAPE",fill:i,stroke:j,parameter1:10,portId:"",fromLinkable:!0,toLinkable:!0,cursor:"pointer",fromSpot:yy.Spot.AllSides,toSpot:yy.Spot.AllSides},new yy.Binding("fill","color"),new yy.Binding("strokeWidth","isCall",function(a){return a?o:n})),d(yy.Shape,"RoundedRectangle",{margin:3,stretch:yy.GraphObject.Fill,stroke:j,parameter1:8,fill:null,visible:!1},new yy.Binding("visible","isTransaction")),d(yy.Shape,"BpmnTaskScript",{alignment:new yy.Spot(0,0,5,5),alignmentFocus:yy.Spot.TopLeft,width:22,height:22},new yy.Binding("fill","taskType",R),new yy.Binding("figure","taskType",P)),$(!1,1)),d(yy.TextBlock,{alignment:yy.Spot.Center,textAlign:"center",margin:12,editable:!0},new yy.Binding("text").makeTwoWay()))),ab=2,bb=d(yy.Node,"Vertical",{locationObjectName:"SHAPE",locationSpot:yy.Spot.Center,selectionAdorned:!1},d(yy.Panel,"Auto",{name:"PANEL",desiredSize:new yy.Size(l/ab,m/ab)},d(yy.Panel,"Spot",d(yy.Shape,"RoundedRectangle",{name:"SHAPE",fill:i,stroke:j,parameter1:10/ab},new yy.Binding("strokeWidth","isCall",function(a){return a?o:n})),d(yy.Shape,"RoundedRectangle",{margin:3,stretch:yy.GraphObject.Fill,stroke:j,parameter1:8/ab,fill:null,visible:!1},new yy.Binding("visible","isTransaction")),d(yy.Shape,"BpmnTaskScript",{alignment:new yy.Spot(0,0,5,5),alignmentFocus:yy.Spot.TopLeft,width:22/ab,height:22/ab},new yy.Binding("fill","taskType",R),new yy.Binding("figure","taskType",P)),$(!1,ab))),d(yy.TextBlock,{alignment:yy.Spot.Center,textAlign:"center",margin:2},new yy.Binding("text"))),cb=d(yy.Group,"Vertical",{locationObjectName:"SHAPE",locationSpot:yy.Spot.Center,isSubGraphExpanded:!1,selectionAdorned:!1},d(yy.Panel,"Auto",{name:"PANEL",desiredSize:new yy.Size(l/ab,m/ab)},d(yy.Panel,"Spot",d(yy.Shape,"RoundedRectangle",{name:"SHAPE",fill:i,stroke:j,parameter1:10/ab},new yy.Binding("strokeWidth","isCall",function(a){return a?o:n})),d(yy.Shape,"RoundedRectangle",{margin:3,stretch:yy.GraphObject.Fill,stroke:j,parameter1:8/ab,fill:null,visible:!1},new yy.Binding("visible","isTransaction")),d(yy.Panel,"Horizontal",{alignment:yy.Spot.MiddleBottom,alignmentFocus:yy.Spot.MiddleBottom},d(yy.Shape,"BpmnActivityLoop",{width:12/ab,height:12/ab,margin:2,visible:!1,strokeWidth:k},new yy.Binding("visible","isLoop")),d(yy.Shape,"BpmnActivityParallel",{width:12/ab,height:12/ab,margin:2,visible:!1,strokeWidth:k},new yy.Binding("visible","isParallel")),d(yy.Shape,"BpmnActivitySequential",{width:12/ab,height:12/ab,margin:2,visible:!1,strokeWidth:k},new yy.Binding("visible","isSequential")),d(yy.Shape,"BpmnActivityAdHoc",{width:12/ab,height:12/ab,margin:2,visible:!1,strokeWidth:k},new yy.Binding("visible","isAdHoc")),d(yy.Shape,"BpmnActivityCompensation",{width:12/ab,height:12/ab,margin:2,visible:!1,strokeWidth:k,fill:null},new yy.Binding("visible","isCompensation")),d(yy.Panel,"Auto",{margin:2,visible:!1},d(yy.Shape,"Rectangle",{width:12/ab,height:12/ab,strokeWidth:k,fill:null}),d(yy.Shape,"PlusLine",{width:8/ab,height:8/ab,strokeWidth:k}),new yy.Binding("visible","isSubProcess"))))),d(yy.TextBlock,{alignment:yy.Spot.Center,textAlign:"center",margin:2},new yy.Binding("text"))),db=d(yy.Node,"Vertical",{locationObjectName:"SHAPE",locationSpot:yy.Spot.Center,toolTip:O},new yy.Binding("location","loc",yy.Point.parse).makeTwoWay(yy.Point.stringify),new yy.Binding("layerName","isSelected",function(a){return a?"Foreground":""}).ofObject(),{resizable:!1,resizeObjectName:"SHAPE"},d(yy.Panel,"Spot",d(yy.Shape,"Circle",{strokeWidth:1,name:"SHAPE",desiredSize:new yy.Size(r,r),portId:"",fromLinkable:!0,toLinkable:!0,cursor:"pointer"},new yy.Binding("fill","eventDimension",function(a){return 8===a?u:v}),new yy.Binding("strokeWidth","eventDimension",function(a){return 8===a?A:1}),new yy.Binding("stroke","eventDimension",T),new yy.Binding("strokeDashArray","eventDimension",function(a){return 3===a||6===a?[4,2]:null}),new yy.Binding("desiredSize","size",yy.Size.parse).makeTwoWay(yy.Size.stringify)),d(yy.Shape,"Circle",{alignment:yy.Spot.Center,desiredSize:new yy.Size(s,s),fill:null},new yy.Binding("stroke","eventDimension",T),new yy.Binding("strokeDashArray","eventDimension",function(a){return 3===a||6===a?[4,2]:null}),new yy.Binding("visible","eventDimension",function(a){return a>3&&7>=a})),d(yy.Shape,"NotAllowed",{alignment:yy.Spot.Center,desiredSize:new yy.Size(t,t),stroke:"black"},new yy.Binding("figure","eventType",S),new yy.Binding("fill","eventDimension",U))),d(yy.TextBlock,{alignment:yy.Spot.Center,textAlign:"center",margin:5,editable:!0},new yy.Binding("text").makeTwoWay())),hb=d(yy.Node,"Vertical",{locationObjectName:"SHAPE",locationSpot:yy.Spot.Center,toolTip:O},new yy.Binding("location","loc",yy.Point.parse).makeTwoWay(yy.Point.stringify),new yy.Binding("layerName","isSelected",function(a){return a?"Foreground":""}).ofObject(),{resizable:!1,resizeObjectName:"SHAPE"},d(yy.Panel,"Spot",d(yy.Shape,"Diamond",{strokeWidth:1,fill:D,stroke:E,name:"SHAPE",desiredSize:new yy.Size(B,B),portId:"",fromLinkable:!0,toLinkable:!0,cursor:"pointer",fromSpot:yy.Spot.AllSides,toSpot:yy.Spot.AllSides},new yy.Binding("desiredSize","size",yy.Size.parse).makeTwoWay(yy.Size.stringify)),d(yy.Shape,"NotAllowed",{alignment:yy.Spot.Center,stroke:F,strokeWidth:H,fill:G},new yy.Binding("figure","gatewayType",eb),new yy.Binding("desiredSize","gatewayType",fb))),d(yy.TextBlock,{alignment:yy.Spot.Center,textAlign:"center",margin:5,editable:!0},new yy.Binding("text").makeTwoWay())),ib=d(yy.Node,"Vertical",{toolTip:O,resizable:!1,locationObjectName:"SHAPE",locationSpot:yy.Spot.Center,resizeObjectName:"SHAPE"},d(yy.Panel,"Spot",d(yy.Shape,"Diamond",{strokeWidth:1,fill:D,stroke:E,name:"SHAPE",desiredSize:new yy.Size(B/2,B/2)}),d(yy.Shape,"NotAllowed",{alignment:yy.Spot.Center,stroke:F,strokeWidth:H,fill:G},new yy.Binding("figure","gatewayType",eb),new yy.Binding("desiredSize","gatewayType",gb))),d(yy.TextBlock,{alignment:yy.Spot.Center,textAlign:"center",margin:5,editable:!1},new yy.Binding("text"))),jb=d(yy.Node,"Auto",{background:h},new yy.Binding("location","loc",yy.Point.parse).makeTwoWay(yy.Point.stringify),d(yy.Shape,"Annotation",{portId:"",fromLinkable:!0,cursor:"pointer",fromSpot:yy.Spot.Left,strokeWidth:2,stroke:"gray"}),d(yy.TextBlock,{margin:5,editable:!0},new yy.Binding("text").makeTwoWay())),kb=d(yy.Node,"Vertical",{locationObjectName:"SHAPE",locationSpot:yy.Spot.Center},new yy.Binding("location","loc",yy.Point.parse).makeTwoWay(yy.Point.stringify),d(yy.Shape,"File",{name:"SHAPE",portId:"",fromLinkable:!0,toLinkable:!0,cursor:"pointer",fill:I,desiredSize:new yy.Size(.8*r,r)}),d(yy.TextBlock,{margin:5,editable:!0},new yy.Binding("text").makeTwoWay())),lb=d(yy.Node,"Vertical",{locationObjectName:"SHAPE",locationSpot:yy.Spot.Center},new yy.Binding("location","loc",yy.Point.parse).makeTwoWay(yy.Point.stringify),d(yy.Shape,"Database",{name:"SHAPE",portId:"",fromLinkable:!0,toLinkable:!0,cursor:"pointer",fill:I,desiredSize:new yy.Size(r,r)}),d(yy.TextBlock,{margin:5,editable:!0},new yy.Binding("text").makeTwoWay())),mb=d(yy.Node,"Auto",{layerName:"Background",resizable:!0,resizeObjectName:"LANE"},new yy.Binding("location","loc",yy.Point.parse).makeTwoWay(yy.Point.stringify),d(yy.Shape,"Rectangle",{fill:null}),d(yy.Panel,"Table",{desiredSize:new yy.Size(6*l,m),background:I,name:"LANE",minSize:new yy.Size(l,.667*m)},new yy.Binding("desiredSize","size",yy.Size.parse).makeTwoWay(yy.Size.stringify),d(yy.TextBlock,{row:0,column:0,angle:270,margin:5,editable:!0,textAlign:"center"},new yy.Binding("text").makeTwoWay()),d(yy.RowColumnDefinition,{column:1,separatorStrokeWidth:1,separatorStroke:"black"}),d(yy.Shape,"Rectangle",{row:0,column:1,stroke:null,fill:"transparent",portId:"",fromLinkable:!0,toLinkable:!0,fromSpot:yy.Spot.TopBottomSides,toSpot:yy.Spot.TopBottomSides,cursor:"pointer",stretch:yy.GraphObject.Fill}))),nb=d(yy.Node,"Vertical",{locationSpot:yy.Spot.Center},d(yy.Shape,"Process",{fill:I,desiredSize:new yy.Size(B/2,B/4)}),d(yy.TextBlock,{margin:5,editable:!0},new yy.Binding("text"))),ob=d(yy.Group,"Spot",{locationSpot:yy.Spot.Center,locationObjectName:"PH",isSubGraphExpanded:!1,mouseDrop:function(a,b){var c=b.addMembers(b.diagram.selection,!0);c||b.diagram.currentTool.doCancel()},contextMenu:Y,itemTemplate:X},new yy.Binding("itemArray","boundaryEventArray"),new yy.Binding("location","loc",yy.Point.parse).makeTwoWay(yy.Point.stringify),d(yy.Panel,"Auto",d(yy.Shape,"RoundedRectangle",{name:"PH",fill:p,stroke:q,minSize:new yy.Size(l,m),portId:"",fromLinkable:!0,toLinkable:!0,cursor:"pointer"},new yy.Binding("desiredSize","size",yy.Size.parse).makeTwoWay(yy.Size.stringify),new yy.Binding("strokeWidth","isCall",function(a){return a?o:n})),d(yy.Panel,"Vertical",{defaultAlignment:yy.Spot.Left},d(yy.TextBlock,{margin:3,editable:!0},new yy.Binding("text","text")),new yy.Binding("alignment","isSubGraphExpanded",function(a){return a?yy.Spot.TopLeft:yy.Spot.Center}),d(yy.Placeholder,{padding:new yy.Margin(10,10)}),$(!0,1)))),pb(ob,"subExpandBtn"),qb=new yy.Map("string",yy.Group),qb.add("subprocess",ob),myDiagram.groupTemplateMap=qb,rb=new yy.Map("string",yy.Node),rb.add("activity",_),rb.add("event",db),rb.add("gateway",hb),rb.add("annotation",jb),rb.add("dataobject",kb),rb.add("datastore",lb),rb.add("privateProcess",mb),rb.add("",myDiagram.nodeTemplate),myDiagram.nodeTemplateMap=rb,sb=new yy.Map("string",yy.Node),sb.add("activity",bb),sb.add("event",db),sb.add("gateway",ib),sb.add("annotation",jb),sb.add("dataobject",kb),sb.add("datastore",lb),sb.add("privateProcess",nb),tb=new yy.Map("string",yy.Group),tb.add("subprocess",cb),ub=d(yy.Link,{contextMenu:d(yy.Adornment,"Vertical",d("ContextMenuButton",d(yy.TextBlock,"Default Flow"),{click:function(a,b){vb(b.part.adornedObject)}}),d("ContextMenuButton",d(yy.TextBlock,"Conditional Flow"),{click:function(a,b){wb(b.part.adornedObject)}})),routing:yy.Link.AvoidsNodes,curve:yy.Link.JumpGap,corner:10,reshapable:!0,relinkableFrom:!0,relinkableTo:!0,toEndSegmentLength:20},new yy.Binding("points").makeTwoWay(),d(yy.Shape,{isPanelMain:!0,stroke:"black",strokeWidth:1}),d(yy.Shape,{toArrow:"Triangle",scale:1.2,fill:"black",stroke:null}),d(yy.Shape,{fromArrow:"",scale:1.5,stroke:"black",fill:"white"},new yy.Binding("fromArrow","isDefault",function(a){return null===a?"":a?"BackSlash":"StretchedDiamond"}),new yy.Binding("segmentOffset","isDefault",function(a){return a?new yy.Point(5,0):new yy.Point(0,0)})),d(yy.TextBlock,{name:"Label",editable:!0,text:"label",segmentOffset:new yy.Point(-10,-10),visible:!1},new yy.Binding("text","text").makeTwoWay(),new yy.Binding("visible","visible").makeTwoWay())),xb=d(PoolLink,{routing:yy.Link.Orthogonal,curve:yy.Link.JumpGap,corner:10,reshapable:!0,relinkableTo:!0,toEndSegmentLength:20},new yy.Binding("points").makeTwoWay(),d(yy.Shape,{isPanelMain:!0,stroke:"black",strokeWidth:1,strokeDashArray:[6,2]}),d(yy.Shape,{toArrow:"Triangle",scale:1,fill:"white",stroke:"black"}),d(yy.Shape,{fromArrow:"Circle",scale:1,visible:!0,stroke:"black",fill:"white"}),d(yy.TextBlock,{editable:!0,text:"label"},new yy.Binding("text","text").makeTwoWay())),yb=d(yy.Link,{routing:yy.Link.AvoidsNodes,curve:yy.Link.JumpGap,corner:10,reshapable:!0,relinkableFrom:!0,relinkableTo:!0},new yy.Binding("points").makeTwoWay(),d(yy.Shape,{stroke:"black",strokeWidth:1,strokeDashArray:[1,3]}),d(yy.Shape,{toArrow:"OpenTriangle",scale:1,fill:null,stroke:"blue"})),zb=d(yy.Link,{reshapable:!0,relinkableFrom:!0,relinkableTo:!0,toEndSegmentLength:20,fromEndSegmentLength:40},new yy.Binding("points").makeTwoWay(),d(yy.Shape,{stroke:"black",strokeWidth:1,strokeDashArray:[1,3]}),d(yy.Shape,{toArrow:"OpenTriangle",scale:1,stroke:"black"})),Bb=new yy.Map("string",yy.Link),Bb.add("msg",xb),Bb.add("annotation",zb),Bb.add("data",yb),Bb.add("",ub),myDiagram.linkTemplateMap=Bb,myDiagram.addDiagramListener("LinkDrawn",function(a){"annotation"===a.subject.fromNode.category?a.subject.category="annotation":"dataobject"===a.subject.fromNode.category||"dataobject"===a.subject.toNode.category?a.subject.category="data":("datastore"===a.subject.fromNode.category||"datastore"===a.subject.toNode.category)&&(a.subject.category="data")}),myDiagram.addDiagramListener("ExternalObjectsDropped",function(a){a.subject.each(function(a){a instanceof yy.Node&&"end"===a.data.item&&a.moveTo(a.location.x+350,a.location.y)}),myDiagram.commandHandler.expandSubGraph()}),myDiagram.addDiagramListener("Modified",function(){var b=document.getElementById("currentFile"),c=b.textContent.indexOf("*");myDiagram.isModified?0>c&&(b.textContent=b.textContent+"*"):c>=0&&(b.textContent=b.textContent.substr(0,c))}),Cb=d(yy.Palette,"myPalette",{nodeTemplateMap:sb,groupTemplateMap:tb,"contextMenuTool.isEnabled":!1,allowZoom:!1,layout:d(yy.GridLayout,{cellSize:new yy.Size(1,1),spacing:new yy.Size(5,5)})}),Db=d(yy.GraphLinksModel,{nodeDataArray:[{key:701,category:"annotation",text:"note"},{key:101,category:"event",text:"Start",eventType:1,eventDimension:1,item:"start"},{key:104,category:"event",text:"End",eventType:1,eventDimension:8,item:"End"},{key:106,category:"event",text:"Timer",eventType:3,eventDimension:8,item:"Timer"},{key:5,category:"activity",text:"Task",item:"generic task",taskType:0},{key:6,category:"activity",text:"Service\nTask",item:"service task",taskType:6},{key:7,category:"activity",text:"User Task",item:"User task",taskType:2},{key:301,category:"dataobject",text:"Data\nObject"}]}),Cb.model=Db,Eb=[{key:1,category:"activity",taskType:1,text:"Message",item:"Message Task"}],Fb=0;Fb<Eb.length;Fb++)Cb.model.addNodeData(Eb[Fb]);for(Gb=[{key:110,category:"event",eventType:10,eventDimension:8,text:"Signal",item:"Signal"}],Fb=0;Fb<Gb.length;Fb++)Cb.model.addNodeData(Gb[Fb]);Hb=d(yy.Overview,"myOverview",{observed:myDiagram,maxScale:.5,contentAlignment:yy.Spot.Center}),Hb.box.elt(0).stroke="dodgerblue",loadModel()}function copyNodeData(a){var b={};return b.category=a.category,b.item=a.item,b.key=a.key,b.loc=a.loc,b.text=a.text,a.isGroup&&(b.isGroup=!0),"event"===a.category?(b.eventType=a.eventType,b.eventDimension=a.eventDimension):"activity"===a.category||"subprocess"===a.category?(b.taskType=a.taskType,b.isTransaction=a.isTransaction,b.isCall=a.isCall,b.isLoop=a.isLoop,b.isSubProcess=a.isSubProcess,b.isParallel=a.isParallel,b.isSequential=a.isSequential,b.isAdHoc=a.isAdHoc,b.isCompensation=a.isCompensation,b.boundaryEventArray=copyBoundaryEventArray(a.boundaryEventArray)):"gateway"===a.category&&(b.gatewayType=a.gatewayType),b}function copyBoundaryEventArray(a){var c,b=[];if(Array.isArray(a))for(c=0;c<a.length;c++)b.push(copyBoundaryEventData(a[c]));return b}function copyBoundaryEventData(a){var b={};return b.portId=a.portId,b.alignmentIndex=a.alignmentIndex,b.eventType=a.eventType,b.color=a.color,b}function addActivityNodeBoundaryEvent(a){myDiagram.startTransaction("addBoundaryEvent"),myDiagram.selection.each(function(b){var c,d,e,f,g;if(b instanceof yy.Node&&("activity"===b.data.category||"subprocess"===b.data.category)){for(c=0,d=b.findPort("");b.findPort("be"+c.toString())!==d;)c++;e="be"+c.toString(),f=b.data["boundaryEventArray"],f&&(g={portId:e,eventType:a,color:"white",alignmentIndex:c},myDiagram.model.insertArrayItem(f,-1,g))}}),myDiagram.commitTransaction("addBoundaryEvent")}function rename(a){myDiagram.startTransaction("rename");var b=prompt("Rename "+a.part.data.item+" to:");myDiagram.model.setDataProperty(a.part.data,"item",b),myDiagram.commitTransaction("rename")}function updateGridOption(){myDiagram.startTransaction("grid");var a=document.getElementById("grid");myDiagram.grid.visible=a.checked,myDiagram.commitTransaction("grid")}function updateSnapOption(){var a=document.getElementById("snap");a.checked?(myDiagram.toolManager.draggingTool.isGridSnapEnabled=!0,myDiagram.toolManager.resizingTool.isGridSnapEnabled=!0):(myDiagram.toolManager.draggingTool.isGridSnapEnabled=!1,myDiagram.toolManager.resizingTool.isGridSnapEnabled=!1)}function askSpace(){var a=prompt("Desired space between nodes (in pixels):","0");return a}function getCurrentFileName(){var a=document.getElementById("currentFile"),b=a.textContent;return"*"===b[b.length-1]?b.substr(0,b.length-1):b}function setCurrentFileName(a){var b=document.getElementById("currentFile");myDiagram.isModified&&(a+="*"),b.textContent=a}function newDocument(){if(myDiagram.isModified){var a=confirm("Would you like to save changes to "+getCurrentFileName()+"?");a&&saveDocument()}setCurrentFileName(UnsavedFileName),myDiagram.model=new yy.GraphLinksModel,myDiagram.model.undoManager.isEnabled=!0,myDiagram.isModified=!1,ModelReset()}function ModelReset(){myDiagram.model.undoManager.isEnabled=!0,myDiagram.model.linkFromPortIdProperty="fromPort",myDiagram.model.linkToPortIdProperty="toPort",myDiagram.isModified=!1,myDiagram.model.copyNodeDataFunction=copyNodeData}function checkLocalStorage(){return"undefined"!=typeof Storage&&void 0!==window.localStorage}function saveDocument(){if(checkLocalStorage()){var a=getCurrentFileName();a===UnsavedFileName?saveDocumentAs():(saveDiagramProperties(),window.localStorage.setItem(a,myDiagram.model.toJson()),myDiagram.isModified=!1)}}function saveDocumentAs(){if(checkLocalStorage()){var a=prompt("Save file as...",getCurrentFileName());a&&a!==UnsavedFileName&&(setCurrentFileName(a),saveDiagramProperties(),window.localStorage.setItem(a,myDiagram.model.toJson()),myDiagram.isModified=!1)}}function openDocument(){if(checkLocalStorage()){if(myDiagram.isModified){var a=confirm("Would you like to save changes to "+getCurrentFileName()+"?");a&&saveDocument()}openElement("openDocument","mySavedFiles")}}function removeDocument(){checkLocalStorage()&&openElement("removeDocument","mySavedFiles2")}function loadFile(){var c,d,a=document.getElementById("mySavedFiles"),b=void 0;for(c=0;c<a.options.length;c++)a.options[c].selected&&(b=a.options[c].text);void 0!==b&&(setCurrentFileName(b),d=window.localStorage.getItem(b),myDiagram.model=yy.Model.fromJson(d),myDiagram.model.undoManager.isEnabled=!0,myDiagram.isModified=!1),closeElement("openDocument")}function saveDiagramProperties(){myDiagram.model.modelData.position=yy.Point.stringify(myDiagram.position)}function loadDiagramProperties(){var b=myDiagram.model.modelData.position;b&&(myDiagram.position=yy.Point.parse(b))}function removeFile(){var c,a=document.getElementById("mySavedFiles2"),b=void 0;for(c=0;c<a.options.length;c++)a.options[c].selected&&(b=a.options[c].text);void 0!==b&&window.localStorage.removeItem(b),closeElement("removeDocument")}function updateFileList(a){for(var c,d,e,f,b=document.getElementById(a);c=b.lastChild;)b.removeChild(c);for(d in window.localStorage)e=window.localStorage.getItem(d),e&&(f=document.createElement("option"),f.value=d,f.text=d,b.add(f,null))}function openElement(a,b){var c=document.getElementById(a);"hidden"===c.style.visibility&&(updateFileList(b),c.style.visibility="visible")}function closeElement(a){var b=document.getElementById(a);"visible"===b.style.visibility&&(b.style.visibility="hidden")}function saveModel(){var a=myDiagram.model.toJson();document.getElementById("mySavedModel").value=a}function loadModel(){var a=document.getElementById("mySavedModel").value;""!==a&&(myDiagram.model=yy.Model.fromJson(a),myDiagram.undoManager.isEnabled=!0,ModelReset())}!function(window){function oa(a,b,c){t.Fc(this),this.kC=a,this.ec=b,this.UH=c}function Ka(){this.jC=[]}function La(){}function Ma(a){this.key=-1,this.value=a}function Oa(a){this.Ld=a,this.Xj=null,this.reset()}function Qa(a){this.Ld=a,this.reset()}function H(a){t.Fc(this),this.tb=!1,this.n=[],this.Y=0,this.yo=this.Kd=null,void 0===a||null===a?this.ga=null:"string"==typeof a?"object"===a||"string"===a||"number"===a||"boolean"===a||"function"===a?this.ga=a:t.ha(a,"the string 'object', 'number', 'string', 'boolean', or 'function'","List constructor: type"):"function"==typeof a?this.ga=a===Object?"object":a===String?"string":a===Number?"number":a===Boolean?"boolean":a===Function?"function":a:t.ha(a,"null, a primitive type name, or a class type","List constructor: type")}function Ra(a){this.p=a,this.reset()}function I(a){t.Fc(this),this.tb=!1,void 0===a||null===a?this.ga=null:"string"==typeof a?"object"===a||"string"===a||"number"===a?this.ga=a:t.ha(a,"the string 'object', 'number' or 'string'","Set constructor: type"):"function"==typeof a?this.ga=a===Object?"object":a===String?"string":a===Number?"number":a:t.ha(a,"null, a primitive type name, or a class type","Set constructor: type"),this.md={},this.ld=0,this.Kd=null,this.Y=0,this.Vh=this.kb=null}function Ua(a){this.bb=a,this.reset()}function Va(a){t.Fc(this),this.tb=!0,this.bb=a}function Wa(a){this.bb=a,this.reset()}function Sa(a,b){this.key=a,this.value=b,this.Ko=this.Yb=null}function ab(a){this.bb=a,this.reset()}function wa(a,b){t.Fc(this),this.tb=!1,void 0===a||null===a?this.Uh=null:"string"==typeof a?"object"===a||"string"===a||"number"===a?this.Uh=a:t.ha(a,"the string 'object', 'number' or 'string'","Map constructor: keytype"):"function"==typeof a?this.Uh=a===Object?"object":a===String?"string":a===Number?"number":a:t.ha(a,"null, a primitive type name, or a class type","Map constructor: keytype"),void 0===b||null===b?this.dj=null:"string"==typeof b?"object"===b||"string"===b||"boolean"===b||"number"===b||"function"===b?this.dj=b:t.ha(b,"the string 'object', 'number', 'string', 'boolean', or 'function'","Map constructor: valtype"):"function"==typeof b?this.dj=b===Object?"object":b===String?"string":b===Number?"number":b===Boolean?"boolean":b===Function?"function":b:t.ha(b,"null, a primitive type name, or a class type","Map constructor: valtype"),this.md={},this.ld=0,this.zo=this.Kd=null,this.Y=0,this.Vh=this.kb=null}function cb(a,b){null!==a.Uh&&("string"==typeof a.Uh?typeof b===a.Uh&&null!==b||t.jc(b,a.Uh):b instanceof a.Uh||t.jc(b,a.Uh))}function E(a,b){void 0===a?this.L=this.K=0:"number"==typeof a&&"number"==typeof b?(this.K=a,this.L=b):t.m("Invalid arguments to Point constructor")}function eb(a,b){if(0===a)return b>0?90:0>b?270:0;if(0===b)return a>0?0:180;if(isNaN(a)||isNaN(b))return 0;var c=180*Math.atan(Math.abs(b/a))/Math.PI;return 0>a?c=0>b?c+180:180-c:0>b&&(c=360-c),c}function hb(a,b){return e&&t.l(b,sa,E,"transformInverted:t"),b.ni(a),a}function ra(a,b){void 0===a?this.Aa=this.Ba=0:"number"==typeof a&&(a>=0||isNaN(a))&&"number"==typeof b&&(b>=0||isNaN(b))?(this.Ba=a,this.Aa=b):t.m("Invalid arguments to Size constructor")}function F(a,b,c,d){void 0===a?this.Aa=this.Ba=this.L=this.K=0:a instanceof E?b instanceof E?(this.K=Math.min(a.K,b.K),this.L=Math.min(a.L,b.L),this.Ba=Math.abs(a.K-b.K),this.Aa=Math.abs(a.L-b.L)):b instanceof ra?(this.K=a.K,this.L=a.L,this.Ba=b.Ba,this.Aa=b.Aa):t.m("Incorrect arguments supplied"):"number"==typeof a&&"number"==typeof b&&"number"==typeof c&&(c>=0||isNaN(c))&&"number"==typeof d&&(d>=0||isNaN(d))?(this.K=a,this.L=b,this.Ba=c,this.Aa=d):t.m("Invalid arguments to Rect constructor")}function ub(a,b,c){a.Ba=b,a.Aa=c}function vb(a,b,c,d,e){t.J(a);
var f=a.Ba;return-f>=c+e?(a.K+=f/2,a.Ba=0):(a.K-=e,a.Ba+=c+e),c=a.Aa,-c>=b+d?(a.L+=c/2,a.Aa=0):(a.L-=b,a.Aa+=b+d),a}function xb(a,b,c,d,e){t.J(a);var f=Math.max(a.K,b),g=Math.max(a.L,c);return b=Math.min(a.K+a.Ba,b+d),c=Math.min(a.L+a.Aa,c+e),a.K=f,a.L=g,a.Ba=Math.max(0,b-f),a.Aa=Math.max(0,c-g),a}function Eb(a,b){var c=a.Ba,d=b.width+10+10,e=a.K,f=b.x-10;return e>d+f||f>c+e?!1:(c=a.Aa,d=b.height+10+10,e=a.L,f=b.y-10,e>d+f||f>c+e?!1:!0)}function Fb(a,b,c,d,e){var f=Math.min(a.K,b),g=Math.min(a.L,c);return b=Math.max(a.K+a.Ba,b+d),c=Math.max(a.L+a.Aa,c+e),a.K=f,a.L=g,a.Ba=b-f,a.Aa=c-g,a}function wb(a,b,c,d){void 0===a?this.hh=this.Zg=this.mh=this.oh=0:void 0===b?this.left=this.bottom=this.right=this.top=a:void 0===c?(d=b,this.top=a,this.right=b,this.bottom=a,this.left=d):void 0!==d?(this.top=a,this.right=b,this.bottom=c,this.left=d):t.m("Invalid arguments to Margin constructor")}function sa(){this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0}function L(a,b,c,d){void 0===a?this.vg=this.ug=this.L=this.K=0:(void 0===b&&(b=0),void 0===c&&(c=0),void 0===d&&(d=0),this.x=a,this.y=b,this.offsetX=c,this.offsetY=d)}function Mb(a,b){return a.K=0/0,a.L=0/0,a.ug=b,a}function Kb(a,b){(isNaN(a)||a>1||0>a)&&t.ha(a,"0 <= "+b+" <= 1",L,b)}function Lb(a,b){(isNaN(a)||1/0===a||-1/0===a)&&t.ha(a,"real number, not NaN or Infinity",L,b)}function wc(){this.jf=[1,0,0,1,0,0]}function zc(a){this.type=a,this.r2=this.y2=this.x2=this.r1=this.y1=this.x1=0,this.AE=[]}function Ac(a,b,c){this.fillStyle="#000000",this.font="10px sans-serif",this.globalAlpha=1,this.lineCap="butt",this.ux=0,this.lineJoin="miter",this.lineWidth=1,this.miterLimit=10,this.shadowBlur=0,this.shadowColor="rgba(0, 0, 0, 0)",this.shadowOffsetY=this.shadowOffsetX=0,this.strokeStyle="#000000",this.textAlign="start",this.document=b||document,this.bF=c,this.qx=null,this.path=[],this.mj=new wc,this.stack=[],this.Df=[],this.OG=this.oF=this.Dw=0,this.Rw=a,this.WJ="http://www.w3.org/2000/svg",this.width=this.Rw.width,this.height=this.Rw.height,this.Ll=Bc(this,"svg",{width:this.width+"px",height:this.height+"px",jL:"0 0 "+this.Rw.width+" "+this.Rw.height}),this.Ll.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg"),this.Ll.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),Cc(this,1,0,0,1,0,0),a=Bc(this,"clipPath",{id:"mainClip"}),a.appendChild(Bc(this,"rect",{x:0,y:0,width:this.width,height:this.height})),this.Ll.appendChild(a),this.Df[0].setAttributeNS(null,"clip-path","url(#mainClip)")}function Bc(a,b,c,d){if(a=a.document.createElementNS(a.WJ,b),c)for(var e in c)a.setAttributeNS("href"===e?"http://www.w3.org/1999/xlink":"",e,c[e]);return d&&(a.textContent=d),a}function Mc(a,b,c,d,e){1!==a.globalAlpha&&(c.opacity=a.globalAlpha),"fill"==b?(/^rgba\(/.test(a.fillStyle)?(a=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(a.fillStyle),c.fill="rgb("+a[1]+","+a[2]+","+a[3]+")",c["fill-opacity"]=a[4]):c.fill=a.fillStyle instanceof zc?Oc(a,a.fillStyle):a.fillStyle,c.stroke="none"):"stroke"==b&&(c.fill="none",/^rgba\(/.test(a.strokeStyle)?(b=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(a.strokeStyle),c.stroke="rgb("+b[1]+","+b[2]+","+b[3]+")",c["stroke-opacity"]=b[4]):c.stroke=a.strokeStyle instanceof zc?Oc(a,a.strokeStyle):a.strokeStyle,c["stroke-width"]=a.lineWidth,c["stroke-linecap"]=a.lineCap,c["stroke-linejoin"]=a.lineJoin,c["stroke-miterlimit"]=a.miterLimit),d=d.jf,d="matrix("+d[0]+", "+d[1]+", "+d[2]+", "+d[3]+", "+d[4]+", "+d[5]+")",void 0!==e&&(d+=e),c.transform=d}function Oc(a,b){var d,e,f,g,h,i,j,c="GRAD"+a.oF;if(a.oF++,"linear"===b.type)d={x1:b.x1,x2:b.x2,y1:b.y1,y2:b.y2,id:c,gradientUnits:"userSpaceOnUse"},d=Bc(a,"linearGradient",d);else{if("radial"!==b.type)throw Error("invalid gradient");d={x1:b.x1,x2:b.x2,y1:b.y1,y2:b.y2,r1:b.r1,r2:b.r2,id:c},d=Bc(a,"radialGradient",d)}for(e=b.AE,f=e.length,g=[],h=0;f>h;h++)i=e[h],j=i.color,i={offset:i.offset,"stop-color":j},/^rgba\(/.test(j)&&(j=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(j),i["stop-color"]="rgb("+j[1]+","+j[2]+","+j[3]+")",i["stop-opacity"]=j[4]),g.push(i);for(g.sort(function(a,b){return a.offset>b.offset?1:-1}),h=0;f>h;h++)d.appendChild(Bc(a,"stop",g[h]));return a.Ll.appendChild(d),"url(#"+c+")"}function Nc(a,b,c,d){c={x:c[0],y:c[1],width:c[2],height:c[3]},Mc(a,b,c,d),a.addElement("rect",c)}function Ec(a,b,c,d){var e,f,g,h;for(e=[],f=0;f<c.length;f++){if(g=Array.prototype.slice.call(c[f]),h=[g.shift()],"A"==h[0])h.push(g.shift()+","+g.shift(),g.shift(),g.shift()+","+g.shift(),g.shift()+","+g.shift());else for(;g.length;)h.push(g.shift()+","+g.shift());e.push(h.join(" "))}c={d:e.join(" ")},Mc(a,b,c,d),"clipPath"===b?(b="CLIP"+a.Dw,a.Dw++,d=Bc(a,"clipPath",{id:b}),d.appendChild(Bc(a,"path",c)),a.Ll.appendChild(d),0<a.Df.length&&a.Df[a.Df.length-1].setAttributeNS(null,"clip-path","url(#"+b+")")):a.addElement("path",c)}function Dc(a,b,c,d,e,f,g){var i,h=Math.abs(e-f);e!=f&&(i=b+d*Math.cos(f),f=c+d*Math.sin(f),h>=2*Math.PI?(Dc(a,b,c,d,e,e+Math.PI,g),Dc(a,b,c,d,e+Math.PI,e+2*Math.PI,g),a.path.push(["M",i,f])):(b+=d*Math.cos(e),c+=d*Math.sin(e),h=180*h/Math.PI,e=g?0:1,g=h>=180==!!g?0:1,0!==a.path.length?a.path.push(["L",b,c]):a.path.push(["M",b,c]),a.path.push(["A",d,d,h,g,e,i,f])))}function Cc(a,b,c,d,e,f,g){var h=new wc;h.jf=[b,c,d,e,f,g],b={},Mc(a,"g",b,h),h=a.addElement("g",b),a.Df.push(h)}function Pc(a){1<arguments.length&&t.m("Geometry constructor can take at most one optional argument, the Geometry type."),t.Fc(this),void 0===a?a=Qc:e&&t.Fa(a,Pc,Pc,"constructor:type"),this.ga=a,this.Bb=this.pb=this.Cc=this.tc=0,this.Pk=new H(Rc),this.Zu=this.Pk.Y,this.Ku=(new F).freeze(),this.$a=!0,this.Zi=Vb,this.$i=bc,this.so=this.to=0/0,this.Ac=Sc}function ad(a,b){if(a.type!==Tc||b.type!==Qc)return!1;if(1===b.Fb.count){var c=b.Fb.wa(0);if(1===c.Ka.count&&K.I(a.sa,c.sa)&&K.I(a.ta,c.ta)&&(c=c.Ka.wa(0),c.type===bd&&K.I(a.D,c.D)&&K.I(a.F,c.F)))return!0}return!1}function id(a,b){var c,d,e,f;for(c=a.length,d=t.N(),e=0;c>e;e++)f=a[e],d.x=f.x1,d.y=f.y1,b.Xa(d),f.x1=d.x,f.y1=d.y,d.x=f.x2,d.y=f.y2,b.Xa(d),f.x2=d.x,f.y2=d.y,d.x=f.pe,d.y=f.qe,b.Xa(d),f.pe=d.x,f.qe=d.y,d.x=f.$b,d.y=f.ac,b.Xa(d),f.$b=d.x,f.ac=d.y;t.B(d)}function jd(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o;switch(a.type){case Tc:case Uc:case $c:c?b.p(a.tc,a.Cc,0,0):Fb(b,a.tc,a.Cc,0,0),Fb(b,a.pb,a.Bb,0,0);break;case Qc:for(a=a.Fb,d=a.length,e=0;d>e;e++)for(f=a.n[e],c&&0===e?b.p(f.sa,f.ta,0,0):Fb(b,f.sa,f.ta,0,0),g=f.Ka,h=g.length,i=f.sa,j=f.ta,k=0;h>k;k++)switch(l=g.n[k],l.type){case bd:case kd:i=l.D,j=l.F,Fb(b,i,j,0,0);break;case ld:K.fp(i,j,l.Gb,l.Xb,l.xe,l.ye,l.D,l.F,.5,b),i=l.D,j=l.F;break;case md:K.iB(i,j,l.Gb,l.Xb,l.D,l.F,.5,b),i=l.D,j=l.F;break;case sd:case ud:for(l=l.type===sd?vd(l,f):wd(l,f,i,j),m=l.length,n=null,o=0;m>o;o++)n=l[o],K.fp(n.x1,n.y1,n.x2,n.y2,n.pe,n.qe,n.$b,n.ac,.5,b);null!==n&&(i=n.$b,j=n.ac);break;default:t.m("Unknown Segment type: "+l.type)}break;default:t.m("Unknown Geometry type: "+a.type)}}function yd(a,b,c,d,e,f,g,h){var i,j;if(K.Ud(e,f,g,h,.05,a,b))return!0;if(i=(a-c)*(f-h),0===i)return 0;if(j=((a*d-b*c)*(e-g)-(a-c)*(e*h-f*g))/i,b=(a*d-b*c)*(f-h)/i,j>=a)return 0;if((f>h?f-h:h-f)>(e>g?e-g:g-e)){if(h>f?(a=f,e=h):(a=h,e=f),a>b||b>e)return 0}else if(g>e?(a=e,e=g):a=g,a>j||j>e)return 0;return i>0?1:-1}function zd(a,b,c,d){for(var e=a.Fb.length,f=0;e>f;f++)if(a.Fb.n[f].La(b,c,d))return!0;return!1}function Rc(a,b,c){t.Fc(this),void 0===c&&(c=!0),this.hm=c,this.vo=!0,void 0!==a?(e&&t.q(a,Rc,"sx"),this.tc=a):this.tc=0,void 0!==b?(e&&t.q(b,Rc,"sy"),this.Cc=b):this.Cc=0,this.ws=new H(xd),this.Yv=this.ws.Y,this.$a=!0}function xd(a,b,c,d,f,g,h,i){t.Fc(this),void 0===a?a=bd:e&&t.Fa(a,xd,xd,"constructor:type"),this.ga=a,void 0!==b?(e&&t.q(b,xd,"ex"),this.pb=b):this.pb=0,void 0!==c?(e&&t.q(c,xd,"ey"),this.Bb=c):this.Bb=0,a===ud?(void 0!==g&&(a=g%360,0>a&&(a+=360),this.pd=a),void 0!==d&&(e&&t.q(d,xd,"x1"),this.xg=Math.max(d,0)),void 0!==f&&(e&&t.q(f,xd,"y1"),this.yg=Math.max(f,0)),this.Bo=!!h,this.Qn=!!i):(void 0!==d&&(e&&t.q(d,xd,"x1"),this.pd=d),void 0!==f&&(e&&t.q(f,xd,"y1"),this.Ee=f),void 0!==g&&(e&&t.q(g,xd,"x2"),a===sd&&(g=Math.max(g,0)),this.xg=g),void 0!==h&&"number"==typeof h&&(e&&t.q(h,xd,"y2"),a===sd&&(h=Math.max(h,0)),this.yg=h)),this.Th=!1,this.$a=!0,this.Cj=null}function vd(a,b){var c,d,e,f,g,h,i,j;if(null!==a.Cj&&!1===b.$a)return a.Cj;if(c=a.radiusX,d=a.radiusY,void 0===d&&(d=c),e=a.pd,f=a.Ee,g=K.JE(0,0,d>c?c:d,a.zh,a.zh+a.vi),c!==d){for(h=t.Bh(),h.reset(),d>c?h.scale(1,d/c):h.scale(c/d,1),c=g.length,d=t.N(),i=0;c>i;i++)j=g[i],d.x=j.x1,d.y=j.y1,h.Xa(d),j.x1=d.x,j.y1=d.y,d.x=j.x2,d.y=j.y2,h.Xa(d),j.x2=d.x,j.y2=d.y,d.x=j.pe,d.y=j.qe,h.Xa(d),j.pe=d.x,j.qe=d.y,d.x=j.$b,d.y=j.ac,h.Xa(d),j.$b=d.x,j.ac=d.y;t.B(d),t.cf(h)}for(h=g.length,c=0;h>c;c++)d=g[c],d.x1+=e,d.y1+=f,d.x2+=e,d.y2+=f,d.pe+=e,d.qe+=f,d.$b+=e,d.ac+=f;return a.Cj=g,a.Cj}function wd(a,b,c,d){function e(a,b){return(a[0]*b[1]<a[1]*b[0]?-1:1)*Math.acos(f(a,b))}function f(a,b){return(a[0]*b[0]+a[1]*b[1])/(Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2))*Math.sqrt(Math.pow(b[0],2)+Math.pow(b[1],2)))}if(null!==a.Cj&&!1===b.$a)return a.Cj;b=a.xg;var g=a.yg,h=Math.PI/180*a.pd,i=a.Bo,j=a.Qn,k=a.pb,l=a.Bb,m=Math.cos(h)*(c-k)/2+Math.sin(h)*(d-l)/2,n=-Math.sin(h)*(c-k)/2+Math.cos(h)*(d-l)/2,o=Math.pow(m,2)/Math.pow(b,2)+Math.pow(n,2)/Math.pow(g,2);return o>1&&(b*=Math.sqrt(o),g*=Math.sqrt(o)),o=(i===j?-1:1)*Math.sqrt((Math.pow(b,2)*Math.pow(g,2)-Math.pow(b,2)*Math.pow(n,2)-Math.pow(g,2)*Math.pow(m,2))/(Math.pow(b,2)*Math.pow(n,2)+Math.pow(g,2)*Math.pow(m,2))),isNaN(o)&&(o=0),i=o*b*n/g,o=o*-g*m/b,isNaN(i)&&(i=0),isNaN(o)&&(o=0),c=(c+k)/2+Math.cos(h)*i-Math.sin(h)*o,d=(d+l)/2+Math.sin(h)*i+Math.cos(h)*o,h=e([1,0],[(m-i)/b,(n-o)/g]),l=[(m-i)/b,(n-o)/g],n=[(-m-i)/b,(-n-o)/g],m=e(l,n),-1>=f(l,n)&&(m=Math.PI),1<=f(l,n)&&(m=0),!j&&m>0&&(m-=2*Math.PI),j&&0>m&&(m+=2*Math.PI),j=b>g?1:b/g,n=b>g?g/b:1,b=K.JE(0,0,b>g?b:g,h,h+m,!0),g=t.Bh(),g.reset(),g.translate(c,d),g.rotate(a.pd,0,0),g.scale(j,n),id(b,g),t.cf(g),a.Cj=b,a.Cj}function Ad(){this.W=null,this.Tz=new E(0,0).freeze(),this.Zy=new E(0,0).freeze(),this.Hu=this.Av=0,this.ov="",this.lw=this.Wu=!1,this.Tu=this.Ju=0,this.Dj=this.dv=!1,this.ar=null,this.jw=0,this.zg=this.hw=null}function Bd(){this.W=null,this.ec="",this.Ov=this.dw=null,this.Iu=!1}function Cd(){this.clear()}function J(a){1<arguments.length&&t.m("Model constructor can only take one optional argument, the Array of node data."),t.Fc(this),this.Ty=this.ec="",this.Wk=this.aD=!1,this.yz={},this.Te=[],this.Gc=new wa(null,Object),this.wm="key",this.Nu=this.sv=null,this.Ly=this.My=!1,this.Xr="category",this.lg=new wa(null,I),this.Qj=null,this.Yi=!1,this.Sz=null,this.ma=new Od,void 0!==a&&(this.Qg=a)}function ae(a,b,c){var f,g,d=t.ub(b),e="[ ";for(c&&d>1&&(e+="\n"),f=0;d>f;f++)g=t.rb(b,f),void 0!==g&&(f>0&&(e+=",",c&&(e+="\n")),e+=a.ru(g));return c&&d>1&&(e+="\n"),e+" ]"}function Zd(a,b){return void 0===b||"__gohashid"===a||"_"===a[0]||"function"==typeof b?!0:!1}function de(a){return isNaN(a)?"NaN":1/0===a?"9e9999":-1/0===a?"-9e9999":a}function $d(a,b){var d,f,e,g,h,c=b;if(c instanceof E)b={"class":"yy.Point",x:de(c.x),y:de(c.y)};else if(c instanceof ra)b={"class":"yy.Size",width:de(c.width),height:de(c.height)};else if(c instanceof F)b={"class":"yy.Rect",x:de(c.x),y:de(c.y),width:de(c.width),height:de(c.height)};else if(c instanceof wb)b={"class":"yy.Margin",top:de(c.top),right:de(c.right),bottom:de(c.bottom),left:de(c.left)};else if(c instanceof L)b=c.Cd()?{"class":"yy.Spot",x:de(c.x),y:de(c.y),offsetX:de(c.offsetX),offsetY:de(c.offsetY)}:{"class":"yy.Spot","enum":c.toString()};else if(c instanceof qa){if(b={"class":"yy.Brush",type:c.type.name},c.type===ne?b.color=c.color:(c.type===oe||c.type===pe)&&(b.start=c.start,b.end=c.end,c.type===pe&&(0!==c.jq&&(b.startRadius=de(c.jq)),isNaN(c.op)||(b.endRadius=de(c.op)))),null!==c.ip){for(d={},c=c.ip.k;c.next();)d[c.key.toString()]=c.value;b.colorStops=d}}else if(c instanceof Pc)b={"class":"yy.Geometry",type:c.type.name},0!==c.sa&&(b.startX=de(c.sa)),0!==c.ta&&(b.startY=de(c.ta)),0!==c.D&&(b.endX=de(c.D)),0!==c.F&&(b.endY=de(c.F)),c.G.O(Vb)||(b.spot1=c.G),c.H.O(bc)||(b.spot2=c.H),c.type===Qc&&(b.path=cd(c));else if(c instanceof V||c instanceof v||c instanceof qe||c instanceof J||c instanceof re||c instanceof Ba||c instanceof ze||c instanceof Ea||c instanceof Od||c instanceof Ae)return t.trace("ERROR: trying to convert a GraphObject or Diagram or Model or Tool or Layout or UndoManager into JSON text: "+c.toString()),"{}";d="{",e=!0;for(f in b)if(c=t.nb(b,f),!Zd(f,c))if(e?e=!1:d+=", ",d+='"'+f+'":',"points"===f&&c instanceof H&&c.ga===E){for(g="[",c=c.k;c.next();)h=c.value,1<g.length&&(g+=","),g+=a.ru(h.x),g+=",",g+=a.ru(h.y);g+="]",d+=g}else d+=a.ru(c);return d+"}"}function ce(a){return"number"==typeof a?a:"NaN"===a?0/0:"9e9999"===a?1/0:"-9e9999"===a?-1/0:parseFloat(a)}function Be(a,b,c,d,e,f,g,h,i){void 0===h&&(h=null),void 0===i&&(i=null);var j=new Cd;j.ea=a,j.Bd=c,j.If=b,j.propertyName=d,j.object=e,j.oldValue=f,j.fg=h,j.newValue=g,j.dg=i,a.zw(j)}function Ce(a,b,c){"string"!=typeof a&&"function"!=typeof a&&t.jc(a,"string or function",b,c)}function De(a){return"number"==typeof a||"string"==typeof a}function Fe(a,b,c){if(void 0!==b){var d=a.lg.Da(b);null===d&&(d=new I,a.lg.add(b,d)),d.add(c)}}function Ge(a,b,c){if(void 0!==b){var d=a.lg.Da(b);d instanceof I&&(void 0===c||null===c?a.lg.remove(b):(d.remove(c),0===d.count&&a.lg.remove(b)))}}function Ee(a,b){if(void 0===b)return null;var c=a.lg.Da(b);return c instanceof I?c:null}function He(a,b,c){return c instanceof V||c instanceof v||c instanceof qe||c instanceof Ie||c instanceof Je||c instanceof re||c instanceof Ba||c instanceof ze||c instanceof Ad||c instanceof Bd?("_"!==b[0]&&t.trace("Warning: found GraphObject or Diagram reference when copying model data on property '"+b+"' of data object: "+a.toString()+"  \nModel data should not have any references to a Diagram or any part of a diagram, such as: "+c.toString()),!0):c instanceof J||c instanceof Od||c instanceof Ae||c instanceof Cd?!0:!1}function T(a,b){2<arguments.length&&t.m("GraphLinksModel constructor can only take two optional arguments, the Array of node data and the Array of link data."),J.call(this),this.ih=[],this.qm=new I(Object),this.Kk=this.Mu=null,this.Mj="from",this.Pj="to",this.Er=this.Dr="",this.Ar="category",this.Wh=this.Gv="",this.Fv="isGroup",this.Vj="group",this.Ny=!1,void 0!==a&&(this.Qg=a),void 0!==b&&(this.uj=b)}function Ke(a,b){var d,e,f,c=a.vl(b);if(c=a.tn(c),null===a.Bf(c)&&Fe(a,c,b),c=a.zl(b),c=a.tn(c),null===a.Bf(c)&&Fe(a,c,b),d=a.xl(b),t.isArray(d))for(e=t.ub(d),f=0;e>f;f++)c=t.rb(d,f),null===a.Bf(c)&&Fe(a,c,b)}function be(a){1<arguments.length&&t.m("TreeModel constructor can only take one optional argument, the Array of node data."),J.call(this),this.Wj="parent",this.Oy=!1,this.as="parentLinkCategory",void 0!==a&&(this.Qg=a)}function Le(a,b,c){t.Fc(this),void 0===a?a="":t.i(a,"string",Le,"constructor:targetprop"),void 0===b?b=a:t.i(b,"string",Le,"constructor:sourceprop"),void 0===c?c=null:null!==c&&t.i(c,"function",Le,"constructor:conv"),this.OD="",this.zg=null,this.iw=a,this.gw=this.Oz=0,this.JD=null,this.aw=b,this.Ky=c,this.xz=Me,this.Dy=null}function Ae(){this.EH=new H(Cd).freeze(),this.ec="",this.QC=!1}function Od(){this.zz=new I(J),this.Se=!1,this.KH=new H(Ae).freeze(),this.eh=-1,this.eD=999,this.Ki=!1,this.Su=null,this.hl=0,this.Ey=!1,e&&(this.Ey=!0),this.lh=new H("string").freeze(),this.Ho=new H("number"),this.gz=!0,this.tz=!1}function Ye(a,b,c){var d,e,f;if(a.yb)return!1;if(a.iA&&1>a.Qe&&t.trace("Ending transaction without having started a transaction: "+c),d=1===a.Qe,d&&b&&a.isEnabled&&a.cd("CommittingTransaction",c,a.lj),e=0,0<a.Qe&&(a.hl--,a.isEnabled)&&(f=a.lh.count,f>0&&(""===c&&(c=a.lh.wa(0)),a.lh.Ra(),a.lh.wd(f-1),a.lh.freeze()),f=a.Ho.count,f>0&&(e=a.Ho.wa(f-1),a.Ho.wd(f-1))),f=a.lj,d){if(b){if(a.tz=!1,a.isEnabled&&null!==f){for(b=f,b.Dp=!0,b.name=c,d=a.history,d.Ra(),e=d.count-1;e>a.qj;e--)f=d.wa(e),null!==f&&f.clear(),d.wd(e),a.tz=!0;e=a.UA,0===e&&(e=1),e>0&&d.count>=e&&(f=d.wa(0),null!==f&&f.clear(),d.wd(0),a.eh--),d.add(b),a.eh++,d.freeze(),f=b}a.cd("CommittedTransaction",c,f)}else{a.Ki=!0;try{a.isEnabled&&null!==f&&(f.Dp=!0,f.undo())}finally{a.cd("RolledBackTransaction",c,f),a.Ki=!1}null!==f&&f.clear()}return a.Su=null,!0}if(a.isEnabled&&!b&&null!==f){for(a=e,c=f.ph,b=c.count-1;b>=a;b--)d=c.wa(b),null!==d&&d.undo(),c.Ra(),c.wd(b);c.freeze()}return!1}function Ba(){0<arguments.length&&t.gd(Ba),t.Fc(this),this.W=null,this.nC=this.oC=this.zC=this.pC=!1,this.al=this.Ay=null,this.fE=1.05,this.xC=1,this.uz=0/0,this.bD=null,this.gE=0/0}function $e(a,b,c,d,e){var f,g,h,i;if(!(a.contains(b)||(void 0===e&&(e=null),null!==e&&!e(b)||b instanceof ea)))if(a.add(b),b instanceof y){if(c&&b instanceof z)for(f=b.Nc;f.next();)g=f.value,$e(a,g,c,d,e);for(g=b.Vd;g.next();)f=g.value,a.contains(f)||(h=f.ca,i=f.fa,null!==h&&a.contains(h)&&null!==i&&a.contains(i)?$e(a,f,c,d,e):null!==h&&null!==i||$e(a,f,c,d,e));if(d>1)for(b=b.gF();b.next();)g=b.value,$e(a,g,c,d-1,e)}else if(b instanceof B)for(g=b.tj;g.next();)$e(a,g.value,c,d,e)}function af(a,b,c,d,e){var f,g,h,i;if(null===b||e&&!b.canCopy())return null;if(d.contains(b))return a=d.Da(b),a instanceof x?a:null;if(f=null,g=b.data,null!==g&&null!==c?(h=c.ea,b instanceof B?h instanceof T&&(g=h.IE(g),t.xb(g)&&(h.rw(g),f=c.Zf(g))):(g=h.copyNodeData(g),t.xb(g)&&(h.Pm(g),f=c.sh(g)))):(bf(b),f=b.copy(),null!==c&&f instanceof x&&c.add(f)),!(f instanceof x))return null;if(f.ib=!1,f.Jg=!1,d.add(b,f),b instanceof y){for(h=b.Vd;h.next();)g=h.value,g.ca===b&&(i=d.Da(g),null!==i&&(i.ca=f)),g.fa===b&&(i=d.Da(g),null!==i&&(i.fa=f));if(b instanceof z&&f instanceof z)for(b=b.Nc;b.next();)h=af(a,b.value,c,d,e),h instanceof B||null===h||(h.fb=f)}else if(b instanceof B)for(h=b.ca,null!==h&&(h=d.Da(h),null!==h&&(f.ca=h)),h=b.fa,null!==h&&(h=d.Da(h),null!==h&&(f.fa=h)),b=b.tj;b.next();)h=af(a,b.value,c,d,e),null!==h&&(h.Dd=f);return f}function ef(a){var c,d,e,f,g,b=t.Hb();for(a=a.k;a.next();)c=a.value,c instanceof B||b.push(c);for(a=new I(x),c=b.length,d=0;c>d;d++){for(e=b[d],f=!0,g=0;c>g;g++)if(e.Al(b[g])){f=!1;break}f&&a.add(e)}return t.Ca(b),a}function re(){0<arguments.length&&t.gd(re),t.Fc(this),this.W=null,this.ec="",this.Se=!0,this.OC=!1,this.bE=null,this.pw=-1}function gf(a,b,c){var e,d=0;if(b.left?d=1===b.Ge?1:2===b.Ge?2:1:b.right&&1===b.Ge&&(d=3),e="",null!==a){switch(d){case 1:e="ObjectSingleClicked";break;case 2:e="ObjectDoubleClicked";break;case 3:e="ObjectContextClicked"}0!==d&&c.Ga(e,a)}else{switch(d){case 1:e="BackgroundSingleClicked";break;case 2:e="BackgroundDoubleClicked";break;case 3:e="BackgroundContextClicked"}0!==d&&c.Ga(e)}if(null!==a)for(;null!==a;){switch(e=null,d){case 1:e=a.click;break;case 2:e=a.dn?a.dn:a.click;break;case 3:e=a.jt}if(null!==e&&(e(b,a),b.Ke))break;a=a.ia}else{switch(e=null,d){case 1:e=c.click;break;case 2:e=c.dn?c.dn:c.click;break;case 3:e=c.jt}null!==e&&e(b)}}function kf(){0<arguments.length&&t.gd(kf),re.call(this),this.name="Dragging",this.mC=this.SC=!0,this.kr=this.EC=!1,this.WC=!0,this.iz=new ra(0/0,0/0).freeze(),this.jz=Vb,this.kz=new E(0/0,0/0).freeze(),this.DC=!1,this.BC=this.lC=this.CC=this.sC=this.Xi=null,this.Xq=this.UC=!1,this.Ro=new E(0/0,0/0),this.bw=new E,this.ew=!1,this.$v=this.RC=!0,this.co=100,this.Yl=this.Qv=null}function lf(a,b){if(a.li){var c=a.h;null!==c&&c.gk&&(c.ea instanceof T&&1===b.count&&b.gb()instanceof B?(a.Tc=b.gb(),a.Tc.canRelinkFrom()&&a.Tc.canRelinkTo()&&a.Tc.Yf(),a.Xi=c.Cb.mB,null===a.Xi&&(a.Xi=new xf,a.Xi.h=c)):(a.Tc=null,a.Xi=null))}}function zf(a){return void 0===a?{point:K.Bj,Kz:K.Bj}:{point:a.copy(),Kz:K.Bj}}function yf(a,b,c,d){var e,f,g,h;if(!b.contains(c)&&(!d||c.canMove()||c.canCopy()))if(c instanceof y){if(b.add(c,zf(c.location)),c instanceof z)for(e=c.Nc;e.next();)f=e.value,yf(a,b,f,d);for(f=c.Vd;f.next();)e=f.value,b.contains(e)||(g=e.ca,h=e.fa,null!==g&&b.contains(g)&&null!==h&&b.contains(h)&&yf(a,b,e,d));if(a.XE)for(c=c.gF();c.next();)f=c.value,yf(a,b,f,d)}else if(c instanceof B)for(e=c,b.add(e,zf()),f=e.tj;f.next();)yf(a,b,f.value,d);else c instanceof ea||b.add(c,zf(c.location))}function Bf(a){var c,d,e,f,b=a.h;if(null!==b){for(c=b.ab,b.ab=!0,d=b.T,e=a.Yl;null!==e&&(f=e.WA,null===f||(f(d,e,null),!d.Ke));)e=e.ia;b.ab=c}a.Qv=null,a.Yl=null}function Gf(){var b,a=vf;Ff(a),Hf(a),b=a.h,null!==b&&a.Ro.P()&&(b.position=a.Ro),null!==b&&Af(b)}function uf(a,b){var c,d;if(null!==b)for(a.ew=!0,c=b.k;c.next();)d=c.key,d instanceof B&&(d.kq=!0)}function Cf(a,b){var c,d;if(null!==b){for(c=b.k;c.next();)d=c.key,d instanceof B&&(d.kq=!1,d.rj&&If(d)&&d.hc());a.ew=!1}}function Tf(a,b){var c,d,e,f,g,h,i;for(c=1/0,d=1/0,e=-1/0,f=-1/0,g=a.k;g.next();)h=g.value,h.Td()&&h.Va()&&(i=h.location,h=i.x,i=i.y,isNaN(h)||isNaN(i)||(c>h&&(c=h),d>i&&(d=i),h>e&&(e=h),i>f&&(f=i)));1/0===c?b.p(0,0,0,0):b.p(c,d,e-c,f-d)}function Uf(a,b){var c,d,e,f;if(null===a.Hc&&(c=a.h,!(null===c||b&&(c.hb||c.ff))&&null!==a.Ic)){for(d=c.ma,d.isEnabled&&d.HF?null!==d.lj&&0<d.lj.ph.count&&(c.ma.bq(),c.yc("Drag")):Hf(a),c.ab=!b,c.Mn=!b,a.xj=c.Uc.da,d=a.GE?a.Ic.Pl():c.selection,c=c.jp(d,c,!0),d=c.k;d.next();)d.value.location=d.key.location;for(d=t.Nf(),Tf(c,d),t.oc(d),d=new wa(x,Object),e=a.Ic.k;e.next();)f=e.key,f.Td()&&f.canCopy()&&(f=c.Da(f),null!==f&&(f.zf(),d.add(f,zf(f.location))));for(c=c.k;c.next();)e=c.value,e instanceof B&&e.canCopy()&&d.add(e,zf());a.Hc=d,lf(a,d.Pl()),null!==a.Tc&&(c=a.Tc,d=c.Jj(),c.Dl(a.xj.x-(d.x+d.width/2),a.xj.y-(d.y+d.height/2)))}}function Ff(a){var b=a.h;null!==b&&(null!==a.Hc&&(b.pB(a.Hc.Pl(),!1),a.Hc=null),b.ab=!1,b.Mn=!1,a.xj=b.Uc.da)}function Ef(a){if(null!==a.Tc){if(a.li&&null!==a.Xi){var b=a.Xi;b.h.remove(b.ne),b.h.remove(b.oe)}a.Tc=null,a.Xi=null}}function Vf(a,b,c){var e,f,d=a.h;null!==d&&(e=a.xj,f=t.N(),f.assign(d.T.da),a.moveParts(b,f.ku(e),c),t.B(f))}function Wf(a,b,c){if(b=b.fb,null!==b){if(a=Wf(a,b,c),null!==a)return a;if(a=c.Da(b),null!==a)return a}return null}function Hf(a){var b,c,d,e;if(null!==a.Ic){for(b=a.h,c=a.Ic.k;c.next();)d=c.key,d.Td()&&(d.location=c.value.point);for(c=a.Ic.k;c.next();)d=c.key,d instanceof B&&d.kq&&(e=c.value.point,a.Ic.add(d,zf()),d.Dl(-e.x,-e.y));b.bg()}}function Xf(a,b){if(null===b)return!0;var c=b.U;return null===c||c instanceof ea||c.layer.Dc||a.Ic&&a.Ic.contains(c)||a.Hc&&a.Hc.contains(c)?!0:!1}function Yf(a,b,c,d){var f,g,h,i,j,k,l,e=a.h;if(null!==e){if(a.li&&(null!==a.Tc&&(a.Tc.ca=null,a.Tc.fa=null),Zf(a,!1)),f=!1,!1===a.$v&&(f=e.ab,e.ab=!0),g=!1,h=$f(e,b,null,function(b){return!Xf(a,b)}),i=e.T,i.me=h,j=e.ab,e.ab=!0,h!==a.Yl){for(k=a.Yl,a.Qv=k,a.Yl=h;null!==k;){if(l=k.WA,null!==l){if(h===k)break;if(null!==h&&h.sj(k))break;if(l(i,k,h),g=!0,i.Ke)break}k=k.ia}if(k=a.Qv,!a.la&&null===vf)return;for(;null!==h;){if(l=h.dG,null!==l){if(k===h)break;if(null!==k&&k.sj(h))break;if(l(i,h,k),g=!0,i.Ke)break}h=h.ia}if(h=a.Yl,!a.la&&null===vf)return}null===h&&(l=e.eG,null!==l&&(l(i),g=!0)),(a.la||null!==vf)&&(a.doDragOver(b,h),(a.la||null!==vf)&&(e.ab=j,g&&e.bg(),!1===a.$v&&(e.ab=f),(e.vf||e.wf)&&(c||d)&&ag(e,i.Yd)))}}function bg(a,b,c){var e,f,g,h,i,d=a.Xi;if(null===d)return null;for(e=a.h.fn(b,d.gB,function(a){return d.findValidLinkablePort(a,c)}),a=t.N(),f=1/0,g=null,e=e.k;e.next();)h=e.value,null!==h.U&&(i=h.wb(Yb,a),i=b.nk(i),f>i&&(g=h,f=i));return t.B(a),g}function Zf(a,b){var d,e,f,g,h,i,c=a.Tc;null===c||2>c.ra||(d=a.h,null===d||d.hb||(d=a.Xi,null===d)||(e=null,f=null,null===c.ca&&(e=bg(a,c.o(0),!1),null!==e&&(f=e.U)),g=null,h=null,null===c.fa&&(g=bg(a,c.o(c.ra-1),!0),null!==g&&(h=g.U)),(null===f||f instanceof y)&&(null===h||h instanceof y)&&(i=d.isValidLink(f,e,h,g),b?(c.Xn=c.o(0).copy(),c.ao=c.o(c.ra-1).copy(),c.kq=!1,c.ca=f,null!==e&&(c.Cf=e.Wd),c.fa=h,null!==g&&(c.hg=g.Wd)):i?cg(d,f,e,h,g):cg(d,null,null,null,null))))}function dg(a,b){var d,e,f,g,c=a.h;if(null!==c&&null!==c.ea){if(a.li&&Zf(a,!0),Bf(a),d=$f(c,b,null,function(b){return!Xf(a,b)}),e=c.T,e.me=d,null!==d)for(f=d;null!==f&&(g=f.Mt,null===g||(g(e,f),!e.Ke));)f=f.ia;else g=c.Mt,null!==g&&g(e);if((a.la||null!==vf)&&(a.doDropOnto(b,d),a.la||null!==vf))for(d=c.selection.k;d.next();)e=d.value,e instanceof y&&eg(c,e.pa)}}function fg(a,b,c){var d,e,f,g,h,i,j;if(null===a.Hc&&(d=a.h,null!==d&&!d.hb&&!d.ff&&null!==d.ea)){for(d.ab=!c,d.Mn=!c,a.xj=d.T.da,d=d.jp(b,d,!0),c=t.Nf(),Tf(b,c),e=c.x+c.width/2,f=c.y+c.height/2,t.oc(c),g=a.bw,c=new wa(x,Object),h=t.N(),b=b.k;b.next();)i=b.value,i.Td()&&i.canCopy()&&(j=i.location,i=d.Da(i),h.p(g.x-(e-j.x),g.y-(f-j.y)),i.location=h,i.zf(),c.add(i,zf(h)));for(t.B(h),d=d.k;d.next();)e=d.value,e instanceof B&&e.canCopy()&&c.add(e,zf());a.Hc=c,lf(a,c.Pl()),null!==a.Tc&&(c=a.Tc,d=c.Jj(),c.Dl(a.xj.x-(d.x+d.width/2),a.xj.y-(d.y+d.height/2)))}}function gg(){0<arguments.length&&t.gd(gg),re.call(this),this.zD=100,this.ZC=!1;var a=new B,b=new W;b.pi=!0,b.stroke="blue",a.add(b),b=new W,b.Hn="Standard",b.fill="blue",b.stroke="blue",a.add(b),a.Ne="Tool",this.VD=a,a=new y,b=new W,b.Wd="",b.Eb="Rectangle",b.fill=null,b.stroke="magenta",b.lb=2,b.Ea=K.my,a.add(b),a.uk=!1,a.Ne="Tool",this.TD=a,this.UD=b,a=new y,b=new W,b.Wd="",b.Eb="Rectangle",b.fill=null,b.stroke="magenta",b.lb=2,b.Ea=K.my,a.add(b),a.uk=!1,a.Ne="Tool",this.WD=a,this.XD=b,this.xD=this.wD=this.sD=this.rD=this.tD=null,this.VC=!0,this.TH=new wa(V,"boolean"),this.AD=this.Yk=this.PD=null}function ng(a,b,c){var d,e;return null===b?!1:(d=b.Dd,null===d?!1:d===c?!0:(e=new I(y),e.add(b),pg(a,d,c,e)))}function pg(a,b,c,d){if(b===c)return!0;var e=b.ca;return null!==e&&e.oi&&(d.add(e),pg(a,e.Dd,c,d))?!0:(b=b.fa,null!==b&&b.oi&&(d.add(b),pg(a,b.Dd,c,d))?!0:!1)}function og(a,b,c,d){var e,f;if(null===b||null===c)return a.mn;if(e=a.h.lH,e!==qg){if(e===rg){if(null!==d&&!d.Jc)return!0;for(e=c.Vd;e.next();)if(f=e.value,f!==d&&f.Jc&&f.fa===c)return!1;return!sg(a,b,c,d,!0)}if(e===tg){if(null!==d&&!d.Jc)return!0;for(e=b.Vd;e.next();)if(f=e.value,f!==d&&f.Jc&&f.ca===b)return!1;return!sg(a,b,c,d,!0)}if(e===ug)return b===c?a=!0:(e=new I(y),e.add(c),a=vg(a,e,b,c,d)),!a;if(e===wg)return!sg(a,b,c,d,!1);if(e===xg)return b===c?a=!0:(e=new I(y),e.add(c),a=yg(a,e,b,c,d)),!a}return!0}function sg(a,b,c,d,e){var f,g;if(b===c)return!0;if(null===b||null===c)return!1;for(f=b.Vd;f.next();)if(g=f.value,g!==d&&(!e||g.Jc)&&g.fa===b&&(g=g.ca,g!==b&&sg(a,g,c,d,e)))return!0;return!1}function vg(a,b,c,d,e){var f,g;if(c===d)return!0;if(null===c||null===d||b.contains(c))return!1;for(b.add(c),f=c.Vd;f.next();)if(g=f.value,g!==e&&g.fa===c&&(g=g.ca,g!==c&&vg(a,b,g,d,e)))return!0;return!1}function yg(a,b,c,d,e){var f,g,h;if(c===d)return!0;if(null===c||null===d||b.contains(c))return!1;for(b.add(c),f=c.Vd;f.next();)if(g=f.value,g!==e&&(h=g.ca,g=g.fa,h=h===c?g:h,h!==c&&yg(a,b,h,d,e)))return!0;return!1}function Ca(){0<arguments.length&&t.gd(Ca),gg.call(this),this.name="Linking",this.Cy={},this.By=null,this.ua=zg,this.Lz=this.LD=null}function xf(){0<arguments.length&&t.gd(xf),gg.call(this),this.name="Relinking";var a=new W;a.Eb="Diamond",a.Ea=K.ey,a.fill="lightblue",a.stroke="dodgerblue",a.cursor="pointer",a.Jf=0,this.KC=a,a=new W,a.Eb="Diamond",a.Ea=K.ey,a.fill="lightblue",a.stroke="dodgerblue",a.cursor="pointer",a.Jf=-1,this.YD=a,this.kc=null,this.uD=new F}function cg(a,b,c,d,e){null!==b?(a.copyPortProperties(b,c,a.ne,a.Nl,!1),a.h.add(a.ne)):a.h.remove(a.ne),null!==d?(a.copyPortProperties(d,e,a.oe,a.Ol,!0),a.h.add(a.oe)):a.h.remove(a.oe)}function Pg(){0<arguments.length&&t.gd(Pg),re.call(this),this.name="LinkReshaping";var a=new W;a.Eb="Rectangle",a.Ea=K.sq,a.fill="lightblue",a.stroke="dodgerblue",this.Sk=a,a=new W,a.Eb="Diamond",a.Ea=K.sq,a.fill="lightblue",a.stroke="dodgerblue",this.fD=a,this.BD=3,this.zy=this.kc=null,this.vD=new E,this.Dz=null}function Ug(a,b){t.l(a,V,Pg,"setReshapingBehavior:obj"),t.Fa(b,Pg,Pg,"setReshapingBehavior:behavior"),a.Rv=b}function Wg(a,b,c,d,e,f){return f?Math.abs(b.y-c.y)<a.Vg&&Math.abs(c.y-d.y)<a.Vg&&Math.abs(d.y-e.y)<a.Vg:Math.abs(b.x-c.x)<a.Vg&&Math.abs(c.x-d.x)<a.Vg&&Math.abs(d.x-e.x)<a.Vg}function Xg(){0<arguments.length&&t.gd(Xg),re.call(this),this.name="Resizing",this.Tj=new ra(1,1).freeze(),this.Sj=new ra(9999,9999).freeze(),this.Ej=new ra(0/0,0/0).freeze(),this.kr=!1,this.ob=null;var a=new W;a.ek=Yb,a.Eb="Rectangle",a.Ea=K.sq,a.fill="lightblue",a.stroke="dodgerblue",a.lb=1,a.cursor="pointer",this.Sk=a,this.kc=null,this.Mv=new ra,this.Cz=new E,this.fz=new ra(0,0),this.ez=new ra(1/0,1/0),this.dz=new ra(1,1),this.oD=!0}function Yg(a,b,c){if(null!==b)if(b.alignment.Wc()||""===b.cursor){if(b instanceof C)for(b=b.elements;b.next();)Yg(a,b.value,c)}else a:{if(a=b.alignment,a.Me()&&(a=Yb),0>=a.x)c=0>=a.y?c+225:1<=a.y?c+135:c+180;else if(1<=a.x)0>=a.y?c+=315:1<=a.y&&(c+=45);else if(0>=a.y)c+=270;else{if(!(1<=a.y))break a;c+=90}0>c?c+=360:c>=360&&(c-=360),b.cursor=22.5>c?"e-resize":67.5>c?"se-resize":112.5>c?"s-resize":157.5>c?"sw-resize":202.5>c?"w-resize":247.5>c?"nw-resize":292.5>c?"n-resize":337.5>c?"ne-resize":"e-resize"}}function eh(){0<arguments.length&&t.gd(eh),re.call(this),this.name="Rotating",this.HD=45,this.GD=2,this.ob=null;var a=new W;a.Eb="Ellipse",a.Ea=K.ey,a.fill="lightblue",a.stroke="dodgerblue",a.lb=1,a.cursor="pointer",this.Sk=a,this.kc=null,this.Lv=0,this.CD=new E}function gh(){0<arguments.length&&t.gd(gh),re.call(this),this.name="ClickSelecting"}function hh(){0<arguments.length&&t.gd(hh),re.call(this),this.name="Action",this.Ln=null}function Da(){0<arguments.length&&t.gd(Da),re.call(this),this.name="ClickCreating",this.Kk=null,this.TC=!0,this.JC=new E(0,0)}function ih(){var a,b,c,d;0<arguments.length&&t.gd(ih),re.call(this),this.name="ContextMenu",this.Un=this.qC=null,this.iD=new E,this.bo=null,!0===t.FB&&(this.bo=new ea,this.Uy=null,a=this,this.ZD=function(){a.stopTool()},!1===t.OE&&(b=document.createElement("div"),c=document.createElement("div"),b.style.cssText="top: 0px;z-index:300;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px",c.style.cssText="z-index:299;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;-moz-opacity: 0.8;opacity:.80;filter: alpha(opacity=80);",d=document.createElement("style"),document.getElementsByTagName("head")[0].appendChild(d),d.sheet.insertRule(".defaultCXul { list-style: none; }",0),d.sheet.insertRule(".defaultCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }",0),d.sheet.insertRule(".defaultCXa {color: #444;display: inline-block;padding: 4px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }",0),b.addEventListener("contextmenu",function(a){return a.preventDefault(),!1},!1),b.addEventListener("selectstart",function(a){return a.preventDefault(),!1},!1),c.addEventListener("contextmenu",function(a){return a.preventDefault(),!1},!1),document.body&&(document.body.appendChild(b),document.body.appendChild(c)),t.it=b,t.ht=c,t.OE=!0))}function ff(a,b,c){a.la=!0,b&&a.standardMouseSelect(),a.standardMouseClick(),a.Un=null,void 0===c&&(c=a.findObjectWithContextMenu()),null!==c?(b=c.contextMenu,null!==b?(a.Un=c instanceof V?c:null,a.showContextMenu(b,a.Un)):a.showDefaultContextMenu()):a.showDefaultContextMenu()}function jh(){var a,b;0<arguments.length&&t.gd(jh),re.call(this),this.name="DragSelecting",this.co=175,this.YC=!1,a=new x,a.Ne="Tool",a.uk=!1,b=new W,b.name="SHAPE",b.Eb="Rectangle",b.fill=null,b.stroke="magenta",a.add(b),this.Vl=a}function kh(){0<arguments.length&&t.gd(kh),re.call(this),this.name="Panning",this.Ez=new E,this.Dj=!1;var a=this;this.ND=function(){document.removeEventListener("scroll",a.ND,!1),a.stopTool()}}function lh(){0<arguments.length&&t.gd(lh),re.call(this),this.name="TextEditing",this.tC=this.Rz=this.RD=null,this.MD=mh,this.fl=null,this.cb=vh,this.bl=null;var a=document.createElement("textarea");a.dC=!0,this.yC=a,a.addEventListener("input",function(){var a=this.textEditingTool.RD;a.text=this.value,wh(a,1/0,1/0),this.style.width=20+a.Ha.width*this.DK+"px",this.rows=a.RF
},!1),a.addEventListener("keydown",function(a){var b=a.which,c=this.textEditingTool;if(null!==c)if(13===b)c.acceptText(xh);else{if(9===b)return c.acceptText(yh),a.preventDefault(),!1;27===b&&(c.doCancel(),c.h&&c.h.focus())}},!1),a.addEventListener("focus",function(){var a=this.textEditingTool;a.cb===zh?a.cb=Ah:a.cb===Bh?a.cb=Ch:a.cb===Ch&&(a.cb=Ah),this.select()},!1),a.addEventListener("blur",function(){this.focus(),this.select()},!1)}function Hh(a){if(null!==a.Xg&&null!==a.rh){var b=a.Xg,c=a.Xg.text,d=a.rh.value,e="",e="function"==typeof d?d():d;if(!a.isValidText(a.Xg,c,e))return a.cb=Ah,null!==b.pt&&b.pt(a,c,e),null===a.bl&&(a.bl=a.rh.style.border,a.rh.style.border="3px solid red"),a.rh.focus(),void 0;a.yc(a.name),a.cb=Bh,c!==e&&(a.Xg.text=e),a.of=a.name,b=a.h,null!==b&&b.Ga("TextEdited",a.Xg,c),a.vk(),a.stopTool(),null!==b&&b.focus()}null!==a.bl&&(a.rh.style.border=a.bl,a.bl=null)}function Ze(){re.call(this),this.name="ToolManager",this.jD=new H(re),this.kD=new H(re),this.lD=new H(re),this.MC=this.NC=1e3,this.AC=new ra(2,2).Oa(),this.Ru=this.Sy=null,this.mD=jf}function Ih(a,b,c,d){t.i(b,"string",Ze,"replaceStandardTool:name"),t.l(d,H,Ze,"replaceStandardTool:list"),null!==c&&(t.l(c,re,Ze,"replaceStandardTool:newtool"),c.h&&c.h!==a.h&&t.m("Cannot share tools between Diagrams: "+c.toString()),c.name=b,c.Ed(a.h)),a.findTool(b)?a.replaceTool(b,c):null!==c&&d.add(c)}function Je(){this.HH=Jh,this.W=null,new wa,this.cm=this.dm=null,this.gC=this.zd=this.rr=this.Lj=!1,this.Se=!0,this.Qu=this.Pu=this.rC=null,this.Qy=0,this.az=600,this.NH=new E(0,0),this.iC=this.hC=this.cE=!1,this.Io=new wa}function Jh(a,b,c,d){return a/=d/2,1>a?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b}function Kh(a){a.Se&&requestAnimationFrame(function(){!1===a.zd||a.Lj||(a.zd=!1,a.W.Ga("AnimationStarting"),Lh(a))})}function Mh(a,b,c,d){if(a.zd&&(e&&(b instanceof V||t.m("addToAnimation:object must be a GraphObject.")),!(b instanceof x)||b.JA)){var g,f=a.Io;f.contains(b)?(b=f.Da(b),a=b[0],g=b[1],void 0===a.position&&(a.position=Nh(c)),g.position=Nh(d)):(a={},g={},a.position=Nh(c),g.position=Nh(d),f.add(b,[a,g]))}}function Nh(a){return a instanceof E?a.copy():a instanceof ra?a.copy():a}function Lh(a){var b,d,e,f,g,h,i,j,c=a.W;if(null!==c)if(0===a.Io.count)a.Lj=!1,c.bg();else{for(a.Lj=!0,b||(b={}),d=b.OK||a.HH,e=b.$K||null,f=b.aL||null,g=b.duration||a.az,b=a.Io.k,h=a.NH;b.next();)i=b.value[0].position,i&&!i.P()&&i.assign(h);a.rC=d,a.Pu=e,a.Qu=f,a.Qy=g,j=a.GH=a.Io,Oh(a),Ph(a,c,j,d,0,g,null!==a.dm&&null!==a.cm),Qh(a.W),Rh(a),requestAnimationFrame(function(b){var h,e=b||+new Date,f=e+g;!function i(b){!1!==a.Lj&&(h=b||+new Date,b=h>f?g:h-e,Oh(a),Ph(a,c,j,d,b,g,null!==a.dm&&null!==a.cm),a.Pu&&a.Pu(),Qh(c),Rh(a),h>f?Sh(a):requestAnimationFrame(i))}(e)})}}function Oh(a){if(!a.rr){var b=a.W;a.cE=b.ab,a.hC=b.iu,a.iC=b.Oo,b.ab=!0,b.iu=!0,b.Oo=!0,a.rr=!0}}function Rh(a){var b=a.W;b.ab=a.cE,b.iu=a.hC,b.Oo=a.iC,a.rr=!1}function Ph(a,b,c,d,e,f,g){for(c=c.k;c.next();){var k,h=c.key,i=c.value,j=i[0],i=i[1];for(k in i)void 0!==Th[k]&&Th[k](h,j[k],i[k],d,e,f)}g&&(g=a.dm,a=a.cm,k=a.y-g.y,a=d(e,g.x,a.x-g.x,f),d=d(e,g.y,k,f),e=b.cc,b.cc=!0,b.position=new E(a,d),b.cc=e)}function Sh(a){var b,c;for(a.Lj=!1,a.dm=null,a.cm=null,a.Io=new wa,Oh(a),b=a.W.links;b.next();)c=b.value,null!==c.No&&(c.points=c.No,c.No=null);b=a.W,b.Vc(),b.bg(),Rh(a),a.Qu&&a.Qu(),a.Qu=null,a.Pu=null,b.Ga("AnimationFinished")}function Uh(a,b,c){var d=b.pa,e=c.pa;c instanceof z&&c.placeholder?(c=c.placeholder,d=c.wb(Vb),d.x+=c.padding.left,d.y+=c.padding.top,Mh(a,b,d,b.position)):Mh(a,b,new E(e.x+e.width/2-d.width/2,e.y+e.height/2-d.height/2),b.position)}function Vh(a,b,c){a.zd&&(null===a.dm&&b.P()&&null===a.cm&&(a.dm=b.copy()),a.cm=c.copy())}function qe(){0<arguments.length&&t.gd(qe),t.Fc(this),this.W=null,this.mb=new H(x),this.ec="",this.Uf=1,this.sz=!1,this.dl=this.Uz=this.Hk=this.Gk=this.Fk=this.Ek=this.Ck=this.Dk=this.Bk=this.Jk=this.Ak=this.Ik=this.zk=this.yk=!0,this.pz=!1,this.Nv=[]}function Zh(a,b,c,d){var e,f,g,h,i,j,l,k,m,n,o,p,q,r;if(a.visible){for(b.globalAlpha=a.Uf,e=a.mb,a=a.Nv,a.length=0,f=c.scale,g=e.length,h=d.length,i=0;g>i;i++)if(j=e.n[i],Wh(j)){if(j instanceof B&&(j.pc&&a.push(j),!1===j.Bg))continue;k=$h(j,j.pa);a:{for(l=k,m=d,n=h,o=2/f,p=4/f,q=0;n>q;q++)if(r=m[q],0!==r[2]&&0!==r[3]&&l.DF(r[0]-o,r[1]-o,r[2]+p,r[3]+p)){l=!0;break a}l=!1}l&&(1<k.width*f||1<k.height*f?j.af(b,c):Yh(j,b))}b.globalAlpha=1}}function v(a){function b(){document.removeEventListener("DOMContentLoaded",b,!1),ai(c)}var c,d;1<arguments.length&&t.m("Diagram constructor can only take one optional argument, the DIV HTML element or its id."),t.Fc(this),t.rA=[],this.cc=!0,this.yi=new Je,this.yi.W=this,this.uf=17,c=this,null!==document.body?ai(this):document.addEventListener("DOMContentLoaded",b,!1),this.Tb=new H(qe),this.Ib=this.Jb=0,this.Rb=this.Re=this.Za=null,this.el={},this.sG(),this.oz={},this.oz.twoTouchPan=!0,this.Pa=new E(0/0,0/0).freeze(),this.lc=1,this.iv=new E(0/0,0/0).freeze(),this.jv=0/0,this.yv=1e-4,this.vv=100,this.Rc=new sa,this.qw=new E(0/0,0/0).freeze(),this.$u=new F(0/0,0/0,0/0,0/0).freeze(),this.Sl=df,this.Sn=Ub,this.Uk=df,this.qo=Ub,this.kv=this.hv=Vb,this.pg=new I(V),this.Be=!0,this.bm=new wa(B,F),this.eo=!0,this.DH=250,this.Tl=null,this.Fu=new wb(16,16,16,16).freeze(),this.Uu=this.Wf=!1,this.jo=!0,this.Qk=new Ad,this.Md=new Ad,this.dc=new Ad,this.Fj=null,this.fw=-1,this.Nz=!1,this.Yy=new wa("string",H),this.Xy=new wa("string","string"),bi(this),this.Iv=new I(y),this.gl=new I(z),this.rv=new I(B),this.mb=new I(x),this.mv=!0,this.PC=!1,this.mw=qg,this.Nj=10,this.Ry=this.Vy=this.kw=null,this.Py="",this.Vq="auto",this.Di=this.aj=this.Oi=this.Bv=this.Pi=this.Qi=this.Ri=this.Ci=this.Gi=this.Ai=null,this.Ii=!0,this.Az=!1,this.Gy=null,this.nv=this.Mn=this.Wy=this.Oo=this.FD=this.Yi=!1,this.$C=!0,this.Jd=!1,this.re=null,d=this,this.gD=function(a){if(a.ea===d.ea&&d.Sa){d.Sa=!1;try{var b=a.Bd;""===a.If&&b===Ld&&ci(d,a.object,a.propertyName)}finally{d.Sa=!0}}},this.hD=function(a){di(d,a)},this.eE=!0,this.eh=-2,this.Ei=new wa(Object,x),this.Nk=new wa(Object,B),this.lm=new wa(Object,Array),this.Wk=!1,this.zk=this.yk=this.vu=this.Se=!0,this.xu=this.wu=!1,this.Cu=this.Au=this.Hk=this.Gk=this.Fk=this.Ek=this.Ck=this.Dk=this.Bk=this.zu=this.Jk=this.Ak=this.Ik=!0,this.uo=this.XC=!1,this.Bu=this.yu=this.fv=this.ev=!0,this.Wv=this.Vv=16,this.Hz=this.Uv=!1,this.Jz=this.Iz=this.$j=this.Zj=null,this.Ue=new wb(5).freeze(),this.Zv=new I(x).freeze(),this.wv=999999999,this.gv=new I(x).freeze(),this.Vk=this.Kj=this.Ji=!0,this.gm=this.fm=!1,this.nz=this.mz=0,this.$d=null,this.Du=!0,this.sf=!1,this.be=null,this.xm=1,this.no=!1,this.KD=0,this.yy=null,this.dE=new F(0/0,0/0,0/0,0/0).freeze(),this.Vu=new F(0/0,0/0,0/0,0/0).freeze(),this.ym=new I,ei(this),this.qv=this.bv=this.Hv=this.vC=this.uC=this.wC=this.Oj=this.Rk=this.Si=null,fi(this),this.nd=null,this.av=!1,this.Tn=null,this.Cb=new Ze,this.Cb.initializeStandardTools(),this.Ya=this.Mw=this.Cb,this.Ze=new Ba,this.ea=new T,this.Yi=!0,this.ic=new ze,this.Yi=!1,void 0===a&&(a=document.createElement("div")),this.FC=this.$y=null,this.ow=!0,t.yJ&&(this.ow=!1),this.Gz=!1,this.Ij=null,this.wg=1,this.Tk=new gi,qi(this,a),this.nm=1,this.om=0,this.cD=new E,this.aE=500,this.Eu=new E,this.Cs=null,this.cc=!1}function fi(a){var b,c,d;a.Si=new wa("string",x),b=new y,c=new za,c.bind(new Le("text","",na)),b.add(c),a.wC=b,a.Si.add("",b),b=new y,c=new za,c.stroke="brown",c.bind(new Le("text","",na)),b.add(c),a.Si.add("Comment",b),b=new y,b.uk=!1,b.gA=!1,c=new W,c.Eb="Ellipse",c.fill="black",c.stroke=null,c.Ea=new ra(3,3).Oa(),b.add(c),a.Si.add("LinkLabel",b),a.Rk=new wa("string",z),b=new z,b.eu="GROUPPANEL",b.type=ri,c=new za,c.font="bold 12pt sans-serif",c.bind(new Le("text","",na)),b.add(c),c=new C(si),c.name="GROUPPANEL",d=new W,d.Eb="Rectangle",d.fill="rgba(128,128,128,0.2)",d.stroke="black",c.add(d),d=new $g,d.padding=new wb(5,5,5,5).Oa(),c.add(d),b.add(c),a.uC=b,a.Rk.add("",b),a.Oj=new wa("string",B),b=new B,c=new W,c.pi=!0,b.add(c),c=new W,c.Hn="Standard",c.fill="black",c.stroke=null,c.lb=0,b.add(c),a.vC=b,a.Oj.add("",b),b=new B,c=new W,c.pi=!0,c.stroke="brown",b.add(c),a.Oj.add("Comment",b),b=new ea,b.type=si,c=new W,c.fill=null,c.stroke="dodgerblue",c.lb=3,b.add(c),c=new $g,c.margin=new wb(1.5,1.5,1.5,1.5).Oa(),b.add(c),a.Hv=b,a.bv=b,b=new ea,b.type=Jg,c=new W,c.pi=!0,c.fill=null,c.stroke="dodgerblue",c.lb=3,b.add(c),a.qv=b}function ai(a){var c,d,b=document.createElement("p");b.style.width="100%",b.style.height="200px",b.style.boxSizing="content-box",c=document.createElement("div"),c.style.position="absolute",c.style.visibility="hidden",c.style.width="200px",c.style.height="150px",c.style.overflow="hidden",c.style.boxSizing="content-box",c.appendChild(b),document.body.appendChild(c),d=b.offsetWidth,c.style.overflow="scroll",b=b.offsetWidth,d===b&&(b=c.clientWidth),document.body.removeChild(c),a.uf=d-b}function gi(){this.SH="63ad05bbe23a1786468a4c741b6d2",this.SH===this._tk?this.Lh=!0:ti(this,!1)}function ti(a,b){var f,g,c="p",d=window[t.Ma("76a715b2f73f148a")][t.Ma("72ba13b5")];if(t.Ma("77bb5bb2f32603de")===window[t.Ma("76a715b2f73f148a")][t.Ma("6aba19a7ec351488")])try{if(a.Lh=!window[t.Ma("4da118b7ec2108")]([t.Ma("5bb806bfea351a904a84515e1b6d38b6")])([t.Ma("49bc19a1e6")])([t.Ma("59bd04a1e6380fa5539b")])([t.Ma("7bb8069ae7")]===t.Ma(t.uw)),!1===a.Lh)return;if(a.Lh=!window[t.Ma("4da118b7ec2108")]([t.Ma("5bb806bfea351a904a84515e1b6d38b6")])([t.Ma("49bc19a1e6")])([t.Ma("59bd04a1e6380fa5539b6c7a197c31bb4cfd3e")])([t.Ma("7bb8069ae7")]===t.Ma(t.uw)),!1===a.Lh)return}catch(e){}for(f=d[t.Ma("76ad18b4f73e")],g=d[t.Ma("73a612b6fb191d")](t.Ma("35e7"))+2;f>g;g++)c+=d[g];d=c[t.Ma("73a612b6fb191d")](t.Ma(t.uw)),0>=d&&t.Ma(t.uw)!==t.Ma("7da71ca0ad381e90")&&(d=c[t.Ma("73a612b6fb191d")](t.Ma("76a715b2ef3e149757"))),a.Lh=!(d>0&&d<c[t.Ma("73a612b6fb191d")](t.Ma("35"))),a.Lh&&(c=document[t.Ma("79ba13b2f7333e8846865a7d00")]("div"),d=t.Ma("02cncncn"),"."===d[0]&&(d=d[t.Ma("69bd14a0f724128a44")](1)),c[t.Ma("79a417a0f0181a8946")]=d,document[t.Ma("78a712aa")]?(document[t.Ma("78a712aa")][t.Ma("7bb806b6ed32388c4a875b")](c),d=window[t.Ma("7dad0290ec3b0b91578e5b40007031bf")](c)[t.Ma("7dad0283f1390b81519f4645156528bf")](t.Ma("78a704b7e62456904c9b12701b6532a8")),document[t.Ma("78a712aa")][t.Ma('"68ad1bbcf533388c4a875b')](c),d&&-1!==d.indexOf(t.Ma(t.xI))&&-1!==d.indexOf(t.Ma(t.yI))&&(a.Lh=!1)):(a.Lh=null,b&&(a.Lh=!1)))}function qi(a,b){var c,d,f,g,h,i;void 0!==b&&null!==b||t.m("Diagram setup requires an argument DIV."),null!==a.Rb&&t.m("Diagram has already completed setup."),"string"==typeof b?a.Rb=document.getElementById(b):b instanceof HTMLDivElement?a.Rb=b:t.m("No DIV or DIV id supplied: "+b),null===a.Rb&&t.m("Invalid DIV id; could not get element with id: "+b),void 0!==a.Rb.W&&t.m("Invalid div id; div already has a Diagram associated with it."),"static"===window.getComputedStyle(a.Rb,null).position&&(a.Rb.style.position="relative"),a.Rb.style["-webkit-tap-highlight-color"]="rgba(255, 255, 255, 0)",a.Rb.style["-ms-touch-action"]="none",a.Rb.innerHTML="",a.Rb.W=a,c=document.createElement("canvas"),c.getContext&&c.getContext("2d")?(c.innerHTML="This text is displayed if your browser does not support the Canvas HTML element.",void 0!==c.style&&(c.style.position="absolute",c.style.top="0px",c.style.left="0px",c.style.zIndex="2",c.style.iL="none",c.style.webkitUserSelect="none",c.style.MozUserSelect="none"),a.Jb=a.Rb.clientWidth||1,a.Ib=a.Rb.clientHeight||1,a.Za=c,a.Re=c.getContext("2d"),d=a.Re,a.wg=a.computePixelRatio(),ui(a,a.Jb,a.Ib),a.nz=0,a.mz=0,document.body?(f=document.body.parentNode,a.nz=f.offsetTop||0,a.mz=f.offsetLeft||0):document.addEventListener("load",function(){if(document.body){var b=document.body.parentNode;a.nz=b.offsetTop||0,a.mz=b.offsetLeft||0}},!1),c.W=a,a.yy=d[t.Ma("7eba17a4ca3b1a8346")][t.Ma("78a118b7")](d,t.Ql,4,4),a.Rb.insertBefore(c,a.Rb.firstChild),d=document.createElement("canvas"),d.width=1,d.height=1,a.$y=d,a.FC=d.getContext("2d"),f=document.createElement("div"),g=document.createElement("div"),h=document.createElement("div"),i=document.createElement("div"),f.style.position="absolute",f.style.overflow="auto",f.style.width=a.Jb+"px",f.style.height=a.Ib+"px",f.style.zIndex="1",g.style.position="absolute",g.style.overflow="auto",g.style.width=a.Jb+"px",g.style.height=a.Ib+"px",g.style.zIndex="1",h.style.position="absolute",h.style.width="1px",h.style.height="1px",i.style.position="absolute",i.style.width="1px",i.style.height="1px",a.Rb.appendChild(f),a.Rb.appendChild(g),f.appendChild(h),g.appendChild(i),f.onscroll=a.pD,f.onmousedown=a.qD,f.W=a,f.DD=!0,g.onscroll=a.pD,g.onmousedown=a.qD,g.W=a,g.ED=!0,a.Zj=f,a.$j=g,a.Iz=h,a.Jz=i,a.hK=t.LE(function(){a.na()},300,!1),a.tH=t.LE(function(){vi(a)},250,!1),a.preventDefault=function(a){return a.preventDefault(),!1},a.Sp=function(b){if(a.isEnabled){a.uo=!0;var c=a.Md;t.kn&&c.px?(b.preventDefault(),b.simulated=!0,a.Cs=b):(a.Md=a.dc,a.dc=c,wi(a,a,b,c,!0),a.CB(b,null,b.target.W)||(a.doMouseMove(),a.Ya.isBeyondDragSize()&&(xi(a),a.nm=0)))}},a.Rp=function(b){if(a.isEnabled){a.uo=!0;var c=a.Md;if(t.kn&&null!==a.Cs)a.Cs=b,b.preventDefault();else if(t.kn&&400>b.timeStamp-a.om)b.preventDefault();else if(a.Md=a.dc,a.dc=c,wi(a,a,b,c,!0),c.ok=!0,c.Ge=b.detail,a.Qk=c.copy(),!0===c.ar.simulated)b.preventDefault(),b.simulated=!0;else if(e&&e.gG&&(window.gG=a.qp(c.da)),vf=null,a.doMouseDown(),1===b.button)return b.preventDefault(),!1}},a.Up=function(b){if(a.isEnabled){a.uo=!0;var c=a.Md;if(t.kn){if(400>b.timeStamp-a.om)return b.preventDefault(),void 0;a.om=b.timeStamp}t.kn&&null!==a.Cs?(a.Cs=null,b.preventDefault()):(a.Md=a.dc,a.dc=c,wi(a,a,b,c,!0),c.Aj=!0,c.Ge=b.detail,(t.kx||t.OA)&&(b.timeStamp-a.om<a.aE&&!a.Ya.isBeyondDragSize()?a.nm++:a.nm=1,a.om=b.timeStamp,c.Ge=a.nm),c.bubbles=b.bubbles,b.target.W&&(c.Ah=b.target.W),a.PG(b,null,new E,c.Ah)||(a.doMouseUp(),Af(a),ha(a,c,b)))}},a.uh=function(b){if(a.isEnabled){var c=a.Md;a.Md=a.dc,a.dc=c,wi(a,a,b,c,!0),c.bubbles=!0,c.mk=void 0!==b.wheelDelta?b.wheelDelta:-40*b.detail,a.doMouseWheel(),ha(a,c,b)}},a.Tp=function(){if(a.isEnabled){a.uo=!1;var b=a.Ya;b.cancelWaitAfter(),b instanceof Ze&&b.hideToolTip()}},a.bH=function(b){if(a.isEnabled){if(a.Nz=!1,1<b.touches.length){if(a.Ya.doCancel(),a.Ii){a.no=!0,a.xm=a.scale;var c=a.Jb,d=a.Ib,e=a.Za.getBoundingClientRect(),f=b.targetTouches[0],g=f.clientX-c/e.width*e.left,h=f.clientY-d/e.height*e.top,f=b.targetTouches[1],c=f.clientX-c/e.width*e.left-g,d=f.clientY-d/e.height*e.top-h,d=Math.sqrt(c*c+d*d);return a.KD=d,b.preventDefault(),b.cancelBubble=!0,!1}return xi(a),b.cancelBubble=!1,!0}d=a.Md,a.Md=a.dc,a.dc=d,d.h=a,yi(a,b.targetTouches[0],d),d.fd=0,d.button=0,d.ok=!0,d.Aj=!1,d.Ge=1,d.mk=0,d.Ke=!1,d.bubbles=!1,d.event=b,d.timestamp=Date.now(),d.Ah=b.target.W?b.target.W:null,d.me=null,a.Qk=d.copy(),vf=null,a.doMouseDown(),zi(a,d),ha(a,d,b)}},a.aH=function(b){if(a.isEnabled){if(1<b.touches.length){if(a.Ya.doCancel(),xi(a),a.Ii&&a.no&&1<b.targetTouches.length){var c=a.Jb,d=a.Ib,e=a.Za.getBoundingClientRect(),f=b.targetTouches[0],g=f.clientX-c/e.width*e.left,h=f.clientY-d/e.height*e.top,f=b.targetTouches[1],c=f.clientX-c/e.width*e.left,f=f.clientY-d/e.height*e.top,d=c-g,e=f-h,d=Math.sqrt(d*d+e*e)/a.KD,f=new E((Math.min(c,g)+Math.max(c,g))/2,(Math.min(f,h)+Math.max(f,h))/2),g=a.xm*d,h=a.Ze;return g!==a.scale&&h.canResetZoom(g)&&(c=a.ig,a.ig=f,h.resetZoom(g),a.ig=c),b.preventDefault(),b.cancelBubble=!0,!1}return b.cancelBubble=!1,!0}g=a.Md,a.Md=a.dc,a.dc=g,f=h=null,0<b.changedTouches.length?f=b.changedTouches[0]:0<b.targetTouches.length&&(f=b.targetTouches[0]),g.h=a,f?((h=document.elementFromPoint(f.clientX,f.clientY))&&h.W?(d=f,c=h.W):(d=b.changedTouches[0],c=a),yi(c,d,g)):null!==a.Md?(g.da=a.Md.da,g.Yd=a.Md.Yd,h=a.Md.Ah):null!==a.Qk&&(g.da=a.Qk.da,g.Yd=a.Qk.Yd,h=a.Qk.Ah),g.fd=0,g.button=0,g.ok=!1,g.Aj=!1,g.Ge=1,g.mk=0,g.Ke=!1,g.bubbles=!1,g.event=b,g.timestamp=Date.now(),g.Ah=null===h?b.target.W:h.W?h.W:null,g.me=null,a.Ya.isBeyondDragSize()&&xi(a),a.CB(f?f:b,null,g.Ah)||(a.doMouseMove(),ha(a,g,b))}},a.$G=function(b){var c,d,e,f,g,h;if(a.isEnabled){if(xi(a),a.Nz)return b.preventDefault(),!1;c=a.Md,a.Md=a.dc,a.dc=c,1<b.touches.length?a.Ii&&(a.no=!1):(d=null,e=null,0<b.changedTouches.length?e=b.changedTouches[0]:0<b.targetTouches.length&&(e=b.targetTouches[0]),c.h=a,c.Ge=1,e?(d=document.elementFromPoint(e.clientX,e.clientY),d&&d.W?(g=e,f=d.W):(g=b.changedTouches[0],f=a),yi(f,g,c),f=e.screenX,g=e.screenY,h=a.cD,b.timeStamp-a.om<a.aE&&!(25<Math.abs(h.x-f)||25<Math.abs(h.y-g))?a.nm++:a.nm=1,c.Ge=a.nm,a.om=b.timeStamp,a.cD.p(f,g)):d=c.Ah,c.fd=0,c.button=0,c.ok=!1,c.Aj=!0,c.mk=0,c.Ke=!1,c.bubbles=!1,c.event=b,c.timestamp=Date.now(),c.Ah=null===d?b.target.W:d.W?d.W:null,c.me=null,a.PG(e?e:b,null,new E,c.Ah)||(a.doMouseUp(),ha(a,c,b)))}},c.addEventListener("touchstart",a.bH,!1),c.addEventListener("touchmove",a.aH,!1),c.addEventListener("touchend",a.$G,!1),c.addEventListener("gesturestart",function(){!1!==a.Ii&&(a.xm=a.scale,a.Ya.doCancel(),a.LC=0)},!1),c.addEventListener("gesturechange",function(b){var c,d,e,f;if(!1!==a.Ii){if(c=b.scale,a.LC++,a.oz.twoTouchPan){if(1===a.LC){if(!(c>1.02||.98>c))return a.xm=null,void 0;b.preventDefault()}}else b.preventDefault();null!==a.xm&&(d=a.Jb,e=a.Ib,f=a.Za.getBoundingClientRect(),b=new E(b.pageX-window.scrollX-d/f.width*f.left,b.pageY-window.scrollY-e/f.height*f.top),c*=a.xm,d=a.Ze,c!==a.scale&&d.canResetZoom(c)&&(e=a.ig,a.ig=b,d.resetZoom(c),a.ig=e))}},!1),window.MSGesture&&(a.yy=new window.MSGesture,a.yy.target=d,c.addEventListener("pointerdown",function(b){a.yy.addPointer(b.pointerId)},!1),c.addEventListener("MSGestureStart",function(b){!1!==a.Ii&&(a.xm=a.scale,a.no=!0,b.preventDefault())},!1),c.addEventListener("MSGestureChange",function(b){var c,d,e;!1!==a.Ii&&(c=b.scale,1===c?(b.gestureObject.stop(),b.preventDefault()):(a.no&&(a.Ya.doCancel(),a.no=!1),b=a.MB(a.em(b)),c=a.scale*c,d=a.Ze,c!==a.scale&&d.canResetZoom(c)&&(e=a.ig,a.ig=b,d.resetZoom(c),a.ig=e)))},!1)),c.addEventListener("mousemove",a.Sp,!1),c.addEventListener("mousedown",a.Rp,!1),c.addEventListener("mouseup",a.Up,!1),c.addEventListener("mousewheel",a.uh,!1),c.addEventListener("DOMMouseScroll",a.uh,!1),c.addEventListener("mouseout",a.Tp,!1),c.addEventListener("keydown",a.JJ,!1),c.addEventListener("keyup",a.KJ,!1),c.addEventListener("selectstart",function(a){return a.preventDefault(),!1},!1),c.addEventListener("contextmenu",function(a){return a.preventDefault(),!1},!1),window.addEventListener("resize",a.tH,!1),c.tabIndex=0,da(a)):a.Rb.innerHTML="This text is displayed if your browser does not support the Canvas HTML element."}function vi(a){var b,c,d,e;null!==a.Za&&(b=a.Rb,0!==b.clientWidth&&0!==b.clientHeight&&(c=a.gm?a.uf:0,d=a.fm?a.uf:0,e=a.wg,a.wg=a.computePixelRatio(),a.wg!==e&&(ui(a,a.Jb,a.Ib),da(a),a.ze()),(b.clientWidth!==a.Jb+c||b.clientHeight!==a.Ib+d)&&(a.Kj=!0,a.Be=!0,b=a.ic,null!==b&&b.Gt&&b.M(),a.Jd||a.ze())))}function da(a,b,c){void 0===b&&(b=a.Re),void 0===c&&(c=!0),c&&(b.uu=""),b.Kn="",b.Rl=""}function ei(a){var b=new qe;b.name="Background",a.Ys(b),b=new qe,b.name="",a.Ys(b),b=new qe,b.name="Foreground",a.Ys(b),b=new qe,b.name="Adornment",b.Dc=!0,a.Ys(b),b=new qe,b.name="Tool",b.Dc=!0,b.KA=!0,a.Ys(b),b=new qe,b.name="Grid",b.We=!1,b.mf=!1,b.Dc=!0,a.ZH(b,a.sl("Background"))}function Ai(a){a.nd=new C(Bi),a.nd.name="GRID";var b=new W;b.Eb="LineH",b.stroke="lightgray",b.lb=.5,b.interval=1,a.nd.add(b),b=new W,b.Eb="LineH",b.stroke="gray",b.lb=.5,b.interval=5,a.nd.add(b),b=new W,b.Eb="LineH",b.stroke="gray",b.lb=1,b.interval=10,a.nd.add(b),b=new W,b.Eb="LineV",b.stroke="lightgray",b.lb=.5,b.interval=1,a.nd.add(b),b=new W,b.Eb="LineV",b.stroke="gray",b.lb=.5,b.interval=5,a.nd.add(b),b=new W,b.Eb="LineV",b.stroke="gray",b.lb=1,b.interval=10,a.nd.add(b),b=new x,b.add(a.nd),b.Ne="Grid",b.lx=!1,b.JA=!1,b.mf=!1,b.Jt="GRID",a.add(b),a.mb.remove(b),a.nd.visible=!1}function Fi(a){var b,c,d,e,f,g,h,i,j;if(a.yA.P())return b=a.yA.copy(),b.sw(a.padding),b;for(c=!0,d=a.Tb.n,e=d.length,f=0;e>f;f++)if(g=d[f],g.visible&&(!g.Dc||g.KA))for(g=g.mb.n,h=g.length,i=0;h>i;i++)j=g[i],j.lx&&j.Va()&&(j=j.pa,j.P()&&(c?(c=!1,b=j.copy()):b.zj(j)));return c&&(b=new F(0,0,0,0)),b.sw(a.padding),b}function Gi(a,b){var c,d,e,f,g,h,i;a.fc.Ig||(void 0===b&&(b=!1),!b&&!a.sf||a.cc||!a.Mc.P()||null===a.Za)||(a.cc=!0,c=a.Sl,b&&a.Uk!==df&&(c=a.Uk),d=c!==df?Hi(a,c):a.scale,c=a.Ab.copy(),e=a.Jb/d,f=a.Ib/d,g=null,h=a.fc,h.zd&&(g=a.Pa.copy()),a.position.Ra(),i=a.Sn,b&&a.qo.Cd()&&(i=a.qo),Ii(a,a.Pa,a.Mc,e,f,i),a.position.freeze(),null!==g&&Vh(h,g,a.Pa),a.scale=d,a.cc=!1,d=a.Ab,d.Af(c)||a.Ut(c,d))}function Hi(a,b){var c,d,e,f,g,h,i;return null!==a.Za?(a.Ji&&Ji(a,a.xf()),c=a.Ze.mt,d=a.Mc,d.P()?(e=d.width,d=d.height,f=a.Jb,g=a.Ib,h=f/e,i=g/d,b===Ki?(e=Math.min(i,h),e>c&&(e=c),e<a.Mg&&(e=a.Mg),e>a.Lg&&(e=a.Lg),e):b===Li?(e=i>h?(g-a.uf)/d:(f-a.uf)/e,e>c&&(e=c),e<a.Mg&&(e=a.Mg),e>a.Lg&&(e=a.Lg),e):a.scale):c):void 0}function Ii(a,b,c,d,e,f){var g=b.x,h=b.y;f.Cd()&&(d>c.width&&(g=c.x+(f.x*c.width+f.offsetX)-(f.x*d-f.offsetX)),e>c.height&&(h=c.y+(f.y*c.height+f.offsetY)-(f.y*e-f.offsetY))),d<c.width?(g=Math.min(g+d/2,c.right-d/2),g=Math.max(g,c.left+d/2),g-=d/2):g>c.left?g=c.left:g<c.right-d&&(g=c.right-d),e<c.height?(d=Math.min(h+e/2,c.bottom-e/2),d=Math.max(d,c.top+e/2),h=d-e/2):h>c.top?h=c.top:h<c.bottom-e&&(h=c.bottom-e),b.x=isFinite(g)?g:-a.padding.left,b.y=isFinite(h)?h:-a.padding.top}function $f(a,b,c,d){void 0===c&&(c=null),void 0===d&&(d=null);var e=a.Tb.nn;for(Ei(a);e.next();)if(a=e.value,a.visible&&!a.Dc&&(a=a.fe(b,c,d),null!==a))return a;return null}function xi(a){-1!==a.fw&&(clearTimeout(a.fw),a.fw=-1)}function zi(a,b){var c=b.copy();a.fw=setTimeout(function(){c.button=2,a.T=c,a.Nz=!0,a.doMouseUp()},850)}function wi(a,b,c,d,e){d.h=b,e?yi(a,c,d):(d.Yd=b.dc.Yd,d.da=b.dc.da),a=0,c.ctrlKey&&(a+=1),c.altKey&&(a+=2),c.shiftKey&&(a+=4),c.metaKey&&(a+=8),d.fd=a,d.button=c.button,t.ln&&0===c.button&&c.ctrlKey&&(d.button=2),d.ok=!1,d.Aj=!1,d.Ge=1,d.mk=0,d.Ke=!1,d.bubbles=!1,d.event=c,d.timestamp=Date.now(),d.Ah=c.target.W?c.target.W:null,d.me=null}function ha(a,b,c){return b.bubbles?(e&&e.tF&&t.trace("NOT handled "+c.type+" "+b.toString()),!0):(e&&e.tF&&t.trace("handled "+c.type+" "+a.Ya.name+" "+b.toString()),void 0!==c.stopPropagation&&c.stopPropagation(),(void 0===c.touches||2>c.touches.length)&&c.preventDefault(),c.cancelBubble=!0,!1)}function yi(a,b,c){var d=a.Za,e=a.Jb,f=a.Ib,g=0,h=0;null!==d&&(d=d.getBoundingClientRect(),g=b.clientX-e/d.width*d.left,h=b.clientY-f/d.height*d.top),c.Yd.p(g,h),null!==a.Rc?(b=t.qc(g,h),a.Rc.ni(b),c.da.assign(b),t.B(b)):c.da.p(g,h)}function Mi(a){for(a.Jd||Ei(a),a.Ji&&Ji(a,a.xf()),Gi(a),a=a.ym.k;a.next();)Mi(a.value)}function Qh(a){var b,c,d,e,f;a.Jd||(a.Wf=!1,null===a.Rb)||(a.Jd=!0,b=a.yi,c=!1,d=!1,b.Ig?(d=!0,c=a.ab,a.ab=!0):b.zd||vi(a),a.cc||b.Ig||!a.Kj||Di(a)||Di(a),null!==a.nd&&(a.nd.visible&&!a.av&&(Oi(a),a.av=!0),!a.nd.visible&&a.av&&(a.av=!1)),Ei(a),0!==a.bm.count&&(Pi(a),Ei(a)),e=!1,(!a.sf||a.Du)&&(a.sf?Qi(a,!a.Uu):(a.yc("Initial Layout"),!1===b.isEnabled&&b.Fn(),Qi(a,!1)),e=!0),a.Uu=!1,Ei(a),a.Oo||b.Ig||Mi(a),e&&(a.sf||(f=a.Tb.n,a.Kf(f,f.length,a),Ri(a),Oi(a)),a.Ga("LayoutCompleted")),Ei(a),a.cc||b.Ig||!a.Kj||Di(a)||(Di(a),Ei(a)),e&&!a.sf&&(a.sf=!0,a.Ie("Initial Layout"),a.ab||a.ma.clear(),setTimeout(function(){a.th=!1},1)),a.af(),d&&(a.ab=c),a.Jd=!1)}function Ri(a){var b,c,d;a.Uk!==df?a.scale=Hi(a,a.Uk):a.Sl!==df?a.scale=Hi(a,a.Sl):(b=a.AF,isFinite(b)&&b>0&&(a.scale=b)),a.Ji&&Ji(a,a.xf()),b=a.zF,b.P()?a.position=b:(b=t.N(),b.fu(a.Mc,a.yF),c=a.Ab,c=t.wk(0,0,c.width,c.height),d=t.N(),d.fu(c,a.BF),a.position=new E(b.x-d.x,b.y-d.y),t.oc(c),t.B(d),t.B(b),Gi(a,!0)),a.Ga("InitialLayoutCompleted")}function Ei(a){var b,c,d,e,f;if((a.Jd||!a.fc.Ig)&&0!==a.pg.count)for(b=0;23>b&&(c=a.pg.k,null!==c&&0!==a.pg.count);b++){for(a.pg=new I(V),d=a,e=a.pg,c.reset();c.next();)f=c.value,!f.Td()||f instanceof z||(f.Bl()?(wh(f,1/0,1/0),f.Sc()):e.add(f));for(c.reset();c.next();)f=c.value,f instanceof z&&Si(d,f);for(c.reset();c.next();)d=c.value,d instanceof B&&(d.Bl()?(wh(d,1/0,1/0),d.Sc(),d.wx()):e.add(d));for(c.reset();c.next();)d=c.value,d instanceof ea&&(d.Bl()?(wh(d,1/0,1/0),d.Sc()):e.add(d))}}function Si(a,b){var c,d,e,f;for(c=b.Nc,d=t.Hb();c.next();)e=c.value,e.Va()&&(e instanceof z?(Ti(e)||Ui(e)||Vi(e))&&Si(a,e):e instanceof B?d.push(e):(wh(e,1/0,1/0),e.Sc()));for(c=d.length,e=0;c>e;e++)f=d[e],wh(f,1/0,1/0),f.Sc();t.Ca(d),wh(b,1/0,1/0),b.Sc()}function Xi(a,b,c,d,f){var g,h,i,j,k;if(null===a.Rb&&t.m("No div specified"),g=a.Za,null===g&&t.m("No canvas specified"),h=a.Re,a.Be){for(i=a.wg,t.kn?(g.width=g.width,da(a,h)):(h.setTransform(1,0,0,1,0,0),h.clearRect(0,0,a.Jb*i,a.Ib*i)),h.xF=!1,h.drawImage(a.$y,d>0?0:Math.round(-d),f>0?0:Math.round(-f)),f=a.Pa,g=a.lc,j=Math.round(f.x*g)/g,k=Math.round(f.y*g)/g,d=a.Rc,d.reset(),1!==g&&d.scale(g),0===f.x&&0===f.y||d.translate(-j,-k),h.save(),h.beginPath(),f=c.length,g=0;f>g;g++)j=c[g],0!==j[2]&&0!==j[3]&&h.rect(Math.floor(j[0]),Math.floor(j[1]),Math.ceil(j[2]),Math.ceil(j[3]));for(h.clip(),h.setTransform(1,0,0,1,0,0),h.scale(i,i),h.transform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy),e&&e.hj&&e.$E(a,h),c=a.Tb.n,f=c.length,a.Kf(c,f,a),Wi(a,h),g=0;f>g;g++)Zh(c[g],h,a,b);h.restore(),da(a),e&&(e.uA||e.hj)&&e.tA(h,a,d),a.Tk?a.Tk.Ql(a)&&a.yy():a.em=function(){},a.Vk=!1,a.Be=!1,a.hK()}}function Yi(a,b,c,d,e,f,g,h,i,j){var k,l,m,n,o,p,q;if(null===a.Rb&&t.m("No div specified"),null===a.Za&&t.m("No canvas specified"),da(a),Ci(a),k=void 0,f&&d&&e&&(k=new F(f.x,f.y,d.width/e,d.height/e)),l=k.copy(),l.sw(c),Oi(a,l),Ei(a),l=a.Tb.n,m=l.length,a.Kf(l,m,a,k),n=a.wg,b.setTransform(1,0,0,1,0,0),b.scale(n,n),b.clearRect(0,0,d.width,d.height),h&&(b.fillStyle=h,b.fillRect(0,0,d.width,d.height)),d=t.Bh(),d.reset(),d.translate(c.left,c.top),d.scale(e),0===f.x&&0===f.y||d.translate(-f.x,-f.y),b.setTransform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy),t.cf(d),Wi(a,b),g){for(o=new I,c=g.k,c.reset();c.next();)e=c.value.U,!1===j&&"Grid"===e.layer.name||null===e||o.add(e);c=function(c){var e,f,g,h,j,d=i;if(c.visible&&(void 0===d&&(d=!0),d||!c.Dc)){for(b.globalAlpha=c.Uf,d=c.mb,c=c.Nv,c.length=0,e=a.scale,f=d.length,g=0;f>g;g++)if(h=d.n[g],Wh(h)&&o.contains(h)){if(h instanceof B&&(h.pc&&c.push(h),!1===h.Bg))continue;j=h.pa,1<j.width*e||1<j.height*e?h.af(b,a):Yh(h,b)}b.globalAlpha=1}}}else!i&&j?(p=a.zp.U,q=p.layer,c=function(c){c===q?p.af(b,a):c.af(b,a,k,i,j)}):c=function(c){c.af(b,a,k,i,j)};for(e=0;m>e;e++)c(l[e]);a.Tk?a.Tk.Ql(a)&&a.yy():a.em=function(){},da(a),Ci(a),a.Kf(l,m,a),Oi(a)}function Wi(a,b){var d,c=a.el;null!==c&&(void 0!==c.imageSmoothingEnabled&&(d=!!c.imageSmoothingEnabled,b.xF=d,b.ZK=d),c=c.defaultFont,void 0!==c&&null!==c&&(b.font=c,b.uu=c))}function Pi(a){var b,c,d;if(0===a.ma.Qe){for(b=a.bm.k;b.next();)c=b.key,d=b.value,c.ef(),Og(c,d);a.bm.clear()}}function Zi(a,b,c,d,e){var f,g,h,i,j;for(b=Math.floor(b),c=Math.floor(c),d=Math.ceil(d),e=Math.ceil(e),f=a.Ij,g=f.length,h=0;g>h;h++){if(i=f[h],b>=i[0]&&c>=i[1]&&b+d<=i[0]+i[2]&&c+e<=i[1]+i[3])return!1;b<=i[0]&&c<=i[1]&&b+d>=i[0]+i[2]&&c+e>=i[1]+i[3]?(f[h][2]=0,f[h][3]=0):b>=i[0]&&b<i[0]+i[2]&&c>=i[1]&&c+e<=i[1]+i[3]?(d=b+d-(i[0]+i[2]),b=i[0]+i[2],h=-1):b+d>i[0]&&b+d<=i[0]+i[2]&&c>=i[1]&&c+e<=i[1]+i[3]?(d=i[0]-b,h=-1):b>=i[0]&&b+d<=i[0]+i[2]&&c>=i[1]&&c<i[1]+i[3]?(e=c+e-(i[1]+i[3]),c=i[1]+i[3],h=-1):b>=i[0]&&b+d<=i[0]+i[2]&&c+e>i[1]&&c+e<=i[1]+i[3]?(e=i[1]-c,h=-1):f[h][0]>=b&&f[h][0]<b+d&&f[h][1]>=c&&f[h][1]+f[h][3]<=c+e?(f[h][2]-=b+d-f[h][0],f[h][0]=b+d,h=-1):f[h][0]+f[h][2]>b&&f[h][0]+f[h][2]<=b+d&&f[h][1]>=c&&f[h][1]+f[h][3]<=c+e?(f[h][2]=b-f[h][0],h=-1):f[h][0]>=b&&f[h][0]+f[h][2]<=b+d&&f[h][1]>=c&&f[h][1]<c+e?(f[h][3]-=c+e-f[h][1],f[h][1]=c+e,h=-1):f[h][0]>=b&&f[h][0]+f[h][2]<=b+d&&f[h][1]+f[h][3]>c&&f[h][1]+f[h][3]<=c+e&&(f[h][3]=c-f[h][1],h=-1)}for(h=0;g>h;h++)if(i=f[h],d>0&&e>0&&0<i[2]&&0<i[3]&&(Math.max(b+d,i[0]+i[2])-Math.min(b,i[0]))*(Math.max(c+e,i[1]+i[3])-Math.min(c,i[1]))<d*e+i[2]*i[3]+50)return g=Math.min(i[0],b),j=Math.min(i[1],c),b=Math.max(b+d,i[0]+i[2])-Math.min(i[0],b),c=Math.max(c+e,i[1]+i[3])-Math.min(i[1],c),f[h][2]=0,f[h][3]=0,Zi(a,g,j,b,c);return f.push([b,c,d,e]),!0}function $i(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q;if(!0!==a.Be)for(a.Be=!0,a instanceof aj?bj(a):!0===a.ow&&c.width===b.width&&c.height===b.height?(d=a.scale,e=t.Nf(),f=Math.max(b.x,c.x),g=Math.max(b.y,c.y),h=Math.min(b.x+b.width,c.x+c.width),i=Math.min(b.y+b.height,c.y+c.height),e.x=f,e.y=g,e.width=Math.max(0,h-f)*d,e.height=Math.max(0,i-g)*d,0<e.width&&0<e.height?a.Jd||(a.Wf=!1,null===a.Rb)||(a.Jd=!0,Ei(a),0!==a.bm.count&&(Pi(a),Ei(a)),a.Mc.P()||Ji(a,a.xf()),j=a.Za,null!==j&&(h=a.wg,f=a.Jb*h,g=a.Ib*h,i=a.scale*h,d=Math.round(Math.round(c.x*i)-Math.round(b.x*i)),b=Math.round(Math.round(c.y*i)-Math.round(b.y*i)),c=a.$y,k=a.FC,c.width!==f&&(c.width=f),c.height!==g&&(c.height=g),k.clearRect(0,0,f,g),c=190*a.wg,i=70*a.wg,l=Math.max(d,0),m=Math.max(b,0),n=f-l,o=g-m,k.xF=!1,k.drawImage(j,l,m,n,o,0,0,n,o),a.Tk.Ql(a)&&k.clearRect(0,0,c,i),j=t.Hb(),k=t.Hb(),o=Math.abs(d),n=Math.abs(b),p=0===l?0:f-o,l=t.qc(p,0),o=t.qc(o+p,g),k.push([Math.min(l.x,o.x),Math.min(l.y,o.y),Math.abs(l.x-o.x),Math.abs(l.y-o.y)]),q=a.Rc,q.reset(),q.scale(h,h),1!==a.lc&&q.scale(a.lc),h=a.Pa,(0!==h.x||0!==h.y)&&isFinite(h.x)&&isFinite(h.y)&&q.translate(-h.x,-h.y),hb(l,q),hb(o,q),j.push([Math.min(l.x,o.x),Math.min(l.y,o.y),Math.abs(l.x-o.x),Math.abs(l.y-o.y)]),p=0===m?0:g-n,l.p(0,p),o.p(f,n+p),k.push([Math.min(l.x,o.x),Math.min(l.y,o.y),Math.abs(l.x-o.x),Math.abs(l.y-o.y)]),hb(l,q),hb(o,q),j.push([Math.min(l.x,o.x),Math.min(l.y,o.y),Math.abs(l.x-o.x),Math.abs(l.y-o.y)]),a.Tk.Ql(a)&&(f=d>0?0:-d,g=b>0?0:-b,l.p(f,g),o.p(c+f,i+g),k.push([Math.min(l.x,o.x),Math.min(l.y,o.y),Math.abs(l.x-o.x),Math.abs(l.y-o.y)]),hb(l,q),hb(o,q),j.push([Math.min(l.x,o.x),Math.min(l.y,o.y),Math.abs(l.x-o.x),Math.abs(l.y-o.y)])),t.B(l),t.B(o),!a.cc&&a.Kj&&(Di(a)||Di(a)),Xi(a,j,k,d,b),t.Ca(j),t.Ca(k),a.Jd=!1)):a.bg(),t.oc(e)):a.bg(),a=a.ym.k;a.next();)$i(a.value)}function Ni(a){!1===a.Kj&&(a.Kj=!0)}function Ci(a){!1===a.Vk&&(a.Vk=!0)}function ui(a,b,c){var d=a.Za,e=a.wg,f=b*e,e=c*e;(d.width!==f||d.height!==e)&&(d.width=f,d.height=e,d.style.width=b+"px",d.style.height=c+"px",a.Be=!0)}function Di(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;if(null!==a.Za&&!a.fc.zd){if(b=a.Rb,c=a.Jb,d=a.Ib,e=a.dE.copy(),f=!1,g=a.gm?a.uf:0,h=a.fm?a.uf:0,i=b.clientWidth||c+g,b=b.clientHeight||d+h,(i!==c+g||b!==d+h)&&(a.gm=!1,a.fm=!1,a.Jb=i,a.Ib=b,ui(a,i,b),f=!0),a.Kj=!1,!a.Uv)return j=a.Ab,k=a.Mc,g=k.width,h=k.height,l=j.width,m=j.height,n=k.x,o=j.x,p=k.right,q=j.right,r=k.y,s=j.y,t=k.bottom,u=j.bottom,k=j="1px",v=a.scale,i/v>g&&b/v>h||(a.uF&&a.vf&&(g>l+1?(j=(g-l)*v+a.Jb+"px",a.Zj.scrollLeft=(a.position.x-n)*v):o>n+1?(j=(o-n)*v+a.Jb+"px",a.Zj.scrollLeft=a.Zj.scrollWidth-a.Zj.clientWidth):p>q+1&&(j=(p-q)*v+a.Jb+"px",a.Zj.scrollLeft=a.position.x*v)),a.vF&&a.wf&&(h>m+1?(k=(h-m)*v+a.Ib+"px",a.$j.scrollTop=(a.position.y-r)*v):s>r+1?(k=(s-r)*v+a.Ib+"px",a.$j.scrollTop=a.$j.scrollHeight-a.$j.clientHeight):t>u+1&&(k=(t-u)*v+a.Ib+"px",a.$j.scrollTop=a.position.y*v))),i="1px"!==j,b="1px"!==k,i!==a.fm&&(a.Ib="1px"===j?a.Ib+a.uf:Math.max(a.Ib-a.uf,1),f=!0),a.fm=i,a.Iz.style.width=j,b!==a.gm&&(a.Jb="1px"===k?a.Jb+a.uf:Math.max(a.Jb-a.uf,1),f=!0),a.gm=b,a.Jz.style.height=k,f&&(ui(a,a.Jb,a.Ib),da(a)),i=a.Jb,b=a.Ib,a.$j.style.height=b+"px",a.$j.style.width=i+(a.gm?a.uf:0)+"px",a.Zj.style.width=i+"px",a.Zj.style.height=b+(a.fm?a.uf:0)+"px",a.Hz=!1,c!==i||d!==b?(j=a.Ab,a.Ut(e,j,f?!0:void 0),!1):!0;c===a.Jb&&d===a.Ib||a.bg()}}function jj(a,b,c){if(t.l(b,qe,v,"addLayer:layer"),null!==b.h&&b.h!==a&&t.m("Cannot share a Layer with another Diagram: "+b+" of "+b.h),null===c?null!==b.h&&t.m("Cannot add an existing Layer to this Diagram again: "+b):(t.l(c,qe,v,"addLayer:existingLayer"),c.h!==a&&t.m("Existing Layer must be in this Diagram: "+c+" not in "+c.h),b===c&&t.m("Cannot move a Layer before or after itself: "+b)),b.h!==a){b=b.name,a=a.Tb,c=a.count;for(var d=0;c>d;d++)a.wa(d).name===b&&t.m("Cannot add Layer with the name '"+b+"'; a Layer with the same name is already present in this Diagram.")
}}function Oi(a,b){var d,e,f,g,h,i,j,c=a.nd;if(null!==c&&c.visible){for(d=t.Ml(),e=1,f=1,g=c.va.length,h=0;g>h;h++)i=c.va.n[h],j=i.interval,2>j||(lj(i.Eb)?f=f*j/K.lF(f,j):e=e*j/K.lF(e,j));if(g=c.vt,d.p(f*g.width,e*g.height),b)h=b.width,i=b.height,f=b.x,g=b.y;else{for(e=t.Nf(),f=a.Ab,e.p(f.x,f.y,f.width,f.height),g=a.ym.k;g.next();)f=g.value.Ab,f.P()&&Fb(e,f.x,f.y,f.width,f.height);if(h=e.width,i=e.height,f=e.x,g=e.y,!e.P())return}c.width=h+2*d.width,c.height=i+2*d.height,e=t.N(),K.rt(f,g,0,0,d.width,d.height,e),e.offset(-d.width,-d.height),t.qk(d),c.U.location=e,t.B(e)}}function cf(a){if(a=a.selection,0<a.count){for(var b=a.Pe(),c=b.length,d=0;c>d;d++)b[d].ib=!1;a.Ra(),a.clear(),a.freeze()}}function ga(a,b){var c=a.Rc,d=b[0],e=b[1],f=d+b[2],g=e+b[3],h=c.m11,i=c.m12,j=c.m21,k=c.m22,l=c.dx,m=c.dy,n=d*h+e*j+l,o=d*i+e*k+m,c=f*h+e*j+l,e=f*i+e*k+m,p=d*h+g*j+l,d=d*i+g*k+m,h=f*h+g*j+l,f=f*i+g*k+m,g=n,i=o,n=Math.min(n,c),g=Math.max(g,c),i=Math.min(i,e),o=Math.max(o,e),n=Math.min(n,p),g=Math.max(g,p),i=Math.min(i,d),o=Math.max(o,d),n=Math.min(n,h),g=Math.max(g,h),i=Math.min(i,f),o=Math.max(o,f);return[n,i,g-n,o-i]}function mj(a){var b=a.th;a.eE!==b&&(a.eE=b,a.Ga("Modified"))}function di(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,u,v,w,x,y,A,B,C,D,E,F;if(b.ea===a.ea)if(c=b.Bd,d=b.propertyName,c===Kd&&"S"===d[0])if("StartingFirstTransaction"===d){for(c=a.Cb,d=c.lf.k;d.next();)d.value.Ed(a);for(d=c.Ng.k;d.next();)d.value.Ed(a);for(d=c.Og.k;d.next();)d.value.Ed(a);a.Jd||a.sf||(a.Uu=!0,a.jo&&(a.Wf=!0),a.yi.Gl())}else"StartingUndo"===d||"StartingRedo"===d?(e=a.fc,e.Ig&&!a.ab&&e.Fn(),a.Ga("ChangingSelection")):"StartedTransaction"===d&&(e=a.fc,e.Ig&&!a.ab&&e.Fn(),a.nv&&e.Gl());else if(a.Sa){a.Sa=!1;try{if(f=b.If,""!==f)if(c===Ld){if("linkFromKey"===f)g=b.object,h=a.Zf(g),null!==h&&(i=b.newValue,j=a.bf(i),h.ca=j);else if("linkToKey"===f)g=b.object,h=a.Zf(g),null!==h&&(i=b.newValue,j=a.bf(i),h.fa=j);else if("linkFromPortId"===f)g=b.object,h=a.Zf(g),null!==h&&(k=b.newValue,"string"==typeof k&&(h.Cf=k));else if("linkToPortId"===f)g=b.object,h=a.Zf(g),null!==h&&(k=b.newValue,"string"==typeof k&&(h.hg=k));else if("nodeGroupKey"===f)g=b.object,l=a.sh(g),null!==l&&(m=b.newValue,void 0!==m?(n=a.bf(m),l.fb=n instanceof z?n:null):l.fb=null);else if("linkLabelKeys"===f){if(g=b.object,h=a.Zf(g),null!==h){if(o=b.oldValue,p=b.newValue,t.isArray(o))for(q=t.ub(o),r=0;q>r;r++)s=t.rb(o,r),j=a.bf(s),null!==j&&(j.Dd=null);if(t.isArray(p))for(q=t.ub(p),r=0;q>r;r++)s=t.rb(p,r),j=a.bf(s),null!==j&&(j.Dd=h)}}else"nodeParentKey"===f?(u=b.object,v=a.bf(b.newValue),w=a.Ww(u),null!==w&&(x=w.tt(),null!==x?null===v?a.remove(x):a.vd?x.ca=v:x.fa=v:qj(a,v,w))):"parentLinkCategory"===f?(u=b.object,w=a.Ww(u),y=b.newValue,null!==w&&"string"==typeof y&&(x=w.tt(),null!==x&&(x.ed=y))):"nodeCategory"===f?(g=b.object,A=a.sh(g),y=b.newValue,null!==A&&"string"==typeof y&&(A.ed=y)):"linkCategory"===f?(g=b.object,B=a.Zf(g),y=b.newValue,null!==B&&"string"==typeof y&&(B.ed=y)):"nodeDataArray"===f?(a.na(),C=b.oldValue,nj(a,C),D=b.newValue,oj(a,D)):"linkDataArray"===f&&(a.na(),C=b.oldValue,nj(a,C),D=b.newValue,pj(a,D));a.th=!0}else c===Md?(D=b.newValue,"nodeDataArray"===f&&t.xb(D)?rj(a,D):"linkDataArray"===f&&t.xb(D)?sj(a,D):"linkLabelKeys"===f&&De(D)&&(h=a.Zf(b.object),j=a.bf(D),null!==h&&null!==j&&(j.Dd=h)),a.th=!0):c===Nd?(C=b.oldValue,"nodeDataArray"===f&&t.xb(C)?tj(a,C):"linkDataArray"===f&&t.xb(C)?tj(a,C):"linkLabelKeys"===f&&De(C)&&(j=a.bf(C),null!==j&&(j.Dd=null)),a.th=!0):c===Kd&&"SourceChanged"===f&&(l=a.sh(b.object),E=b.propertyName,null!==l&&"string"==typeof E&&(l.Wb(E),a.ea instanceof be&&(h=a.Zf(b.object),null!==h&&h.Wb(E))));else c===Ld?(F=b.propertyName,g=b.object,g===a.ea?("nodeKeyProperty"===F||"nodeCategoryProperty"===F||"linkFromKeyProperty"===F||"linkToKeyProperty"===F||"linkFromPortIdProperty"===F||"linkToPortIdProperty"===F||"linkLabelKeysProperty"===F||"nodeIsGroupProperty"===F||"nodeGroupKeyProperty"===F||"nodeParentKeyProperty"===F||"linkCategoryProperty"===F)&&(a.ma.yb||a.zn()):ci(a,g,F),a.th=!0):c===Md||c===Nd?(uj(a,b),a.th=!0):c===Kd&&(("FinishedUndo"===d||"FinishedRedo"===d)&&(a.ma.Ki=!0,a.Ga("ChangedSelection"),Ei(a),a.ma.Ki=!1),a.Uu=!0,a.bg(),e=a.yi,e.zd&&0===a.ma.Qe&&Kh(e),"CommittedTransaction"===d&&a.ma.tz&&(a.eh=Math.min(a.eh,a.ma.qj-1)),mj(a),a.Az||"CommittedTransaction"!==d||(a.Az=!0,setTimeout(function(){a.Ya.standardMouseOver(),a.Az=!1},10)))}finally{a.Sa=!0}}}function ci(a,b,c){var e,f,g,d=a.sh(b);if(null!==d&&"string"==typeof c)d.Wb(c),a.ea instanceof be&&(b=a.Zf(b),null!==b&&b.Wb(c));else if("string"==typeof c){for(d=null,a=a.lm.k;a.next();){for(e=a.value,f=0;f<e.length;f++)g=e[f],null!==g.qg&&(g=g.qg.Da(b),null!==g&&(null===d&&(d=t.Hb()),d.push(g)));if(null!==d)break}if(b=d,null!==b){for(d=0;d<b.length;d++)b[d].Wb(c);t.Ca(b)}}}function uj(a,b){var g,h,c=b.Bd===Md,d=c?b.dg:b.fg,e=c?b.newValue:b.oldValue,f=a.lm.Da(b.object);if(Array.isArray(f)&&"number"==typeof d)for(g=0;g<f.length;g++)h=f[g],h.type!==Zg&&h.type!==si||d++,c?vj(h,e,d):(h.df(d),yj(h,d-1))}function ej(a,b){var d,c=b.Li;if(t.isArray(c))if(d=a.lm.Da(c),null===d)a.lm.add(c,[b]);else{for(c=0;c<d.length;c++)if(d[c]===b)return;d.push(b)}}function hj(a,b){var d,e,c=b.Li;if(t.isArray(c)&&(d=a.lm.Da(c),null!==d))for(e=0;e<d.length;e++)if(d[e]===b){d.splice(e,1),0===d.length&&a.lm.remove(c);break}}function oj(a,b){var c,d,e,f;if(null!==b){for(c=a.ea,d=t.ub(b),e=0;d>e;e++)f=t.rb(b,e),c.ve(f)?rj(a,f,!1):c instanceof T&&sj(a,f);if(c instanceof T||c instanceof be){for(e=0;d>e;e++)f=t.rb(b,e),c.ve(f)&&Jj(a,f);if(c instanceof T)for(c=a.links;c.next();)Kj(c.value)}Lj(a,!1)}}function rj(a,b,c){if(void 0!==b&&null!==b&&!a.ma.yb&&!a.Ei.contains(b)){void 0===c&&(c=!0);var d=a.getCategoryForNodeData(b),e=a.findTemplateForNodeData(b,d);e instanceof x&&(bf(e),e=e.copy(),e instanceof x&&(e.Fh=d,a.Mn&&(e.Xk="Tool"),a.add(e),e.data=b,c&&Jj(a,b)))}}function Jj(a,b){var d,e,f,g,h,i,c=a.ea;if((c instanceof T||c instanceof be)&&(d=c.Lb(b),void 0!==d)){if(e=Ee(c,d),f=a.sh(b),null!==e&&null!==f){for(e=e.k;e.next();)if(g=e.value,c instanceof T){if(c.ve(g))f instanceof z&&c.hn(g)===d&&(h=a.sh(g),null!==h&&(h.fb=f));else if(h=a.Zf(g),null!==h&&f instanceof y&&(c.vl(g)===d&&(h.ca=f),c.zl(g)===d&&(h.fa=f),g=c.xl(g),t.isArray(g)))for(i=0;i<t.ub(g);i++)if(t.rb(g,i)===d){f.Dd=h;break}}else c instanceof be&&c.ve(g)&&f instanceof y&&c.jn(g)===d&&(h=a.Ww(g),qj(a,f,h));Ge(c,d)}c instanceof T?(c=c.hn(b),void 0!==c&&(c=a.bf(c),c instanceof z&&(f.fb=c))):c instanceof be&&(c=c.jn(b),void 0!==c&&f instanceof y&&(c=a.bf(c),qj(a,c,f)))}}function qj(a,b,c){var d,e,f,g;if(null!==b&&null!==c){if(d=a.Cb.TA,e=b,f=c,a.vd){for(b=f.Vd;b.next();)if(g=b.value,g.fa===f)return}else for(e=c,f=b,b=e.Vd;b.next();)if(g=b.value,g.ca===e)return;null!==d&&sg(d,e,f,null,!0)||(d=a.getCategoryForLinkData(c.data),b=a.findTemplateForLinkData(c.data,d),b instanceof B&&(bf(b),b=b.copy(),b instanceof B&&(b.Fh=d,b.ca=e,b.fa=f,a.add(b),b.data=c.data)))}}function pj(a,b){var c,d,e;if(null!==b){for(c=t.ub(b),d=0;c>d;d++)e=t.rb(b,d),sj(a,e);Lj(a,!1)}}function sj(a,b){var c,d,e,f,g;if(void 0!==b&&null!==b&&!a.ma.yb&&!a.Nk.contains(b)&&(c=a.getCategoryForLinkData(b),d=a.findTemplateForLinkData(b,c),d instanceof B&&(bf(d),d=d.copy(),d instanceof B))){if(d.Fh=c,c=a.ea,e=c.kJ(b),""!==e&&(d.Cf=e),e=c.vl(b),void 0!==e&&(e=a.bf(e),e instanceof y&&(d.ca=e)),e=c.nJ(b),""!==e&&(d.hg=e),e=c.zl(b),void 0!==e&&(e=a.bf(e),e instanceof y&&(d.fa=e)),c=c.xl(b),t.isArray(c))for(e=t.ub(c),f=0;e>f;f++)g=t.rb(c,f),g=a.bf(g),null!==g&&(g.Dd=d);a.add(d),d.data=b}}function nj(a,b){var c,d,e;for(c=t.ub(b),d=0;c>d;d++)e=t.rb(b,d),tj(a,e)}function tj(a,b){var c,d,e,f,g,h,i;if(void 0!==b&&null!==b&&(c=a.sh(b),c instanceof x&&(c.ib=!1,c.Jg=!1,d=c.layer,null!==d&&d.h===a))){if(e=a.ea,e instanceof T&&c instanceof y){if(f=e.Lb(c.data),void 0!==f){for(g=c.Vd;g.next();)h=g.value.data,Fe(e,f,h);if(c.oi&&(g=c.Dd,null!==g&&(h=g.data,Fe(e,f,h))),c instanceof z)for(g=c.Nc;g.next();)h=g.value.data,e.ve(h)&&Fe(e,f,h)}}else if(e instanceof be&&c instanceof y)for(g=a.Zf(c.data),null!==g&&(g.ib=!1,g.Jg=!1,h=g.layer,null!==h)&&(i=h.df(-1,g,!1),i>=0&&a.Oc(Nd,"parts",h,g,null,i,null),i=g.Ip,null!==i&&i(g,h,null)),g=a.vd,h=c.Vd;h.next();)i=h.value,i=(g?i.fa:i.ca).data,e.ve(i)&&Fe(e,f,i);e=d.df(-1,c,!1),e>=0&&a.Oc(Nd,"parts",d,c,null,e,null),e=c.Ip,null!==e&&e(c,d,null)}}function Ji(a,b){a.Ji=!1;var c=a.Vu;c.O(b)||(b=b.ba(),a.Vu=b,a.Ij=null,Gi(a),a.Ga("DocumentBoundsChanged",null,c.copy()),Ni(a))}function Lj(a,b){for(var c=a.gl.k;c.next();)Mj(a,c.value,b);null!==a.ic&&(b?a.ic.gf=!1:a.ic.M())}function Mj(a,b,c){if(null!==b){for(var d=b.vm.k;d.next();)Mj(a,d.value,c);null!==b.ic&&(c?b.ic.gf=!1:b.ic.M())}}function Qi(a,b){var c,d,e,f;if(!a.Wy){c=a.ic,d=a.nv,a.nv=!0,e=a.Sa,a.Sa=!0;try{for(f=a.gl.k;f.next();)Nj(a,f.value,b);c.gf||b&&!c.QA||(c.doLayout(a),Ei(a),c.gf=!0)}finally{a.Du=!c.gf,a.nv=d,a.Sa=e}}}function Nj(a,b,c){if(null!==b){for(var d=b.vm.k;d.next();)Nj(a,d.value,c);d=b.ic,null===d||d.gf||c&&!d.QA||(b.nD=!b.location.P(),d.doLayout(b),b.M(Oj),d.gf=!0,Si(a,b))}}function bi(a){function b(a){var b=a.toLowerCase(),e=new H("function");c.add(a,e),c.add(b,e),d.add(a,a),d.add(b,a)}var c=new wa("string",H),d=new wa("string","string");b("AnimationStarting"),b("AnimationFinished"),b("BackgroundSingleClicked"),b("BackgroundDoubleClicked"),b("BackgroundContextClicked"),b("ClipboardChanged"),b("ClipboardPasted"),b("DocumentBoundsChanged"),b("ExternalObjectsDropped"),b("InitialLayoutCompleted"),b("LayoutCompleted"),b("LinkDrawn"),b("LinkRelinked"),b("LinkReshaped"),b("Modified"),b("ObjectSingleClicked"),b("ObjectDoubleClicked"),b("ObjectContextClicked"),b("PartCreated"),b("PartResized"),b("PartRotated"),b("SelectionMoved"),b("SelectionCopied"),b("SelectionDeleting"),b("SelectionDeleted"),b("SelectionGrouped"),b("SelectionUngrouped"),b("ChangingSelection"),b("ChangedSelection"),b("SubGraphCollapsed"),b("SubGraphExpanded"),b("TextEdited"),b("TreeCollapsed"),b("TreeExpanded"),b("ViewportBoundsChanged"),a.Yy=c,a.Xy=d}function xa(a,b){var c=a.Xy.Da(b);return null!==c?c:a.Xy.Da(b.toLowerCase())}function Qj(a,b){var c=a.Yy.Da(b);return null!==c?c:(c=a.Yy.Da(b.toLowerCase()),null!==c?c:(t.m("Unknown DiagramEvent name: "+b),null))}function eg(a,b){var d,c=!1;if(a.Ab.kk(b)&&(c=!0),c=a.wA(b,function(a){return a.U},function(a){return a instanceof B},!0,function(a){return a instanceof B},c),0!==c.count)for(c=c.k;c.next();)d=c.value,d.rj&&d.hc()}function ia(a,b,c){var d,e,f;if(null===a.be&&(a.be=new Rj),c=null!==c?c.fb:null,a.be.Cp||a.be.group!==c){if(null===c)for(b=a.Ji?Fi(a):a.Mc.copy(),b.$f(100,100),a.be.initialize(b),b=t.Nf(),d=a.wh;d.next();)e=d.value,f=e.layer,null!==f&&f.visible&&!f.Dc&&Sj(a,e,null,b);else for(c.pa.P()||c.zf(),b=c.pa.copy(),b.$f(20,20),a.be.initialize(b),b=t.Nf(),d=c.Nc;d.next();)e=d.value,e instanceof y&&Sj(a,e,null,b);t.oc(b),a.be.group=c,a.be.Cp=!1}else b&&Tj(a.be);return a.be}function Sj(a,b,c,d){var e,f,g,h;if(b!==c)if(b.Va()&&b.canAvoid()){for(c=b.getAvoidableRect(d),d=a.be.Wm,b=a.be.Vm,e=c.x+c.width,f=c.y+c.height,g=c.x;e>g;g+=d){for(h=c.y;f>h;h+=b)Uj(a.be,g,h);Uj(a.be,g,f)}for(h=c.y;f>h;h+=b)Uj(a.be,e,h);Uj(a.be,e,f)}else if(b instanceof z)for(b=b.Nc;b.next();)e=b.value,e instanceof y&&Sj(a,e,c,d)}function Vj(a,b){null===a.be||a.be.Cp||null!==b&&!b.canAvoid()||(a.be.Cp=!0)}function ag(a,b){a.Eu.assign(b),Wj(a,a.Eu).Af(a.position)?Af(a):Xj(a)}function Xj(a){null===a.Tl&&(a.Tl={},a.Tl.id=setInterval(function(){var b,c;null!==a.Tl&&(Af(a),b=a.T.event,null!==b&&(c=Wj(a,a.Eu),c.Af(a.position)||(a.position=c,a.T.da=a.fH(a.Eu),a.CB(b,null,b.target.W)||a.doMouseMove(),a.Ji=!0,Ji(a,a.xf()),a.Be=!0,a.bg(),Xj(a))))},a.DH))}function Af(a){null!==a.Tl&&(clearInterval(a.Tl.id),a.Tl=null)}function Wj(a,b){var e,f,g,h,c=a.position,d=a.rE;return 0>=d.top&&0>=d.left&&0>=d.right&&0>=d.bottom?c:(e=a.Ab,f=a.scale,e=t.wk(0,0,e.width*f,e.height*f),g=t.qc(0,0),b.x>=e.x&&b.x<e.x+d.left?(h=Math.max(a.eq,1),h=0|h,g.x-=h,b.x<e.x+d.left/2&&(g.x-=h),b.x<e.x+d.left/4&&(g.x-=4*h)):b.x<=e.x+e.width&&b.x>e.x+e.width-d.right&&(h=Math.max(a.eq,1),h|=0,g.x+=h,b.x>e.x+e.width-d.right/2&&(g.x+=h),b.x>e.x+e.width-d.right/4&&(g.x+=4*h)),b.y>=e.y&&b.y<e.y+d.top?(h=Math.max(a.fq,1),h|=0,g.y-=h,b.y<e.y+d.top/2&&(g.y-=h),b.y<e.y+d.top/4&&(g.y-=4*h)):b.y<=e.y+e.height&&b.y>e.y+e.height-d.bottom&&(h=Math.max(a.fq,1),h|=0,g.y+=h,b.y>e.y+e.height-d.bottom/2&&(g.y+=h),b.y>e.y+e.height-d.bottom/4&&(g.y+=4*h)),g.Af(K.Bj)||(c=new E(c.x+g.x/f,c.y+g.y/f)),t.oc(e),t.B(g),c)}function Yj(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,s,r,u,v,w,y,z;if(a.fc.Fn(),a.bg(),null===a.Za)return null;if("object"!=typeof b&&t.m("properties argument must be an Object."),c=!1,d=b.size||null,e=b.scale||null,void 0!==b.scale&&isNaN(b.scale)&&(e="NaN"),f=b.maxSize,void 0===b.maxSize&&(c=!0,f="svg"===b.context?new ra(1/0,1/0):new ra(2e3,2e3)),g=b.position||null,h=b.parts||null,i=void 0===b.padding?1:b.padding,j=b.background||null,k=b.omitTemporary,void 0===k&&(k=!0),l=b.document||document,m=b.elementFinished||null,n=b.showTemporary,void 0===n&&(n=!k),k=b.showGrid,void 0===k&&(k=n),null!==d&&isNaN(d.width)&&isNaN(d.height)&&(d=null),i&&"number"==typeof i&&(i=new wb(i)),i||(i=new wb(0)),i.left=Math.max(i.left,0),i.right=Math.max(i.right,0),i.top=Math.max(i.top,0),i.bottom=Math.max(i.bottom,0),a.eo=!1,da(a),o=l.createElement("canvas"),p=o.getContext("2d"),q=o,!(d||e||h||g))return o.width=a.Jb+Math.ceil(i.left+i.right),o.height=a.Ib+Math.ceil(i.top+i.bottom),"svg"===b.context&&(p=q=new Ac(o,l,m),p instanceof Ac&&(a.eo=!0)),Yi(a,p,i,new ra(o.width,o.height),a.lc,a.Pa,h,j,n,k),a.eo=!0,q;if(r=a.Ze.mt,u=new E(0,0),s=a.Mc.copy(),s.AK(a.padding),u.x=s.x,u.y=s.y,h){for(w=!0,h=h.k,h.reset();h.next();)y=h.value,y instanceof x&&(z=y.layer,z&&!z.visible||z&&z.Dc||!y.Va()||(y=y.pa,y.P()&&(w?(w=!1,v=y.copy()):v.zj(y))));w&&(v=new F(0,0,0,0)),s.width=v.width,s.height=v.height,u.x=v.x,u.y=v.y}return null!==g&&g.P()&&(u=g,e||(e=r)),v=g=0,i&&(g=i.left+i.right,v=i.top+i.bottom),w=y=0,d&&(y=d.width,w=d.height,isFinite(y)&&(y=Math.max(0,y-g)),isFinite(w)&&(w=Math.max(0,w-v))),d&&e?("NaN"===e&&(e=r),d.P()?(d=y,s=w):isNaN(w)?(d=y,s=s.height*e):(d=s.width*e,s=w)):d?d.P()?(e=Math.min(y/s.width,w/s.height),d=y,s=w):isNaN(w)?(e=y/s.width,d=y,s=s.height*e):(e=w/s.height,d=s.width*e,s=w):e?"NaN"===e&&f.P()?(e=Math.min((f.width-g)/s.width,(f.height-v)/s.height),e>r?(e=r,d=s.width,s=s.height):(d=f.width,s=f.height)):(d=s.width*e,s=s.height*e):(e=r,d=s.width,s=s.height),i?(d+=g,s+=v):i=new wb(0),f&&(r=f.width,f=f.height,"svg"!==b.context&&c&&!t.nH&&(d>r||s>f)&&(t.trace("Diagram.makeImage(data): Diagram width or height is larger than the default max size. ("+Math.ceil(d)+"x"+Math.ceil(s)+" vs 2000x2000) Consider increasing the max size."),t.nH=!0),isNaN(r)&&(r=2e3),isNaN(f)&&(f=2e3),isFinite(r)&&(d=Math.min(d,r)),isFinite(f)&&(s=Math.min(s,f))),o.width=Math.ceil(d),o.height=Math.ceil(s),"svg"===b.context&&(p=q=new Ac(o,l,m),p instanceof Ac&&(a.eo=!0)),Yi(a,p,i,new ra(Math.ceil(d),Math.ceil(s)),e,u,h,j,n,k),a.eo=!0,q}function Zj(a){1<arguments.length&&t.m("Palette constructor can only take one optional argument, the DIV HTML element or its id."),v.call(this,a),this.at=!0,this.fk=!1,this.hb=!0,this.Gw=Wb,this.ic=new ak}function aj(a){var b,c,d;1<arguments.length&&t.m("Overview constructor can only take one optional argument, the DIV HTML element or its id."),v.call(this,a),this.yi.isEnabled=!1,this.cc=!0,this.Ti=null,this.JH=this.Xu=!0,this.rK("drawShadows",!1),b=new x,c=new W,c.stroke="magenta",c.lb=2,c.fill="transparent",c.name="BOXSHAPE",b.eu="BOXSHAPE",b.Jt="BOXSHAPE",b.cursor="move",b.add(c),this.Vl=b,this.Pz=document.createElement("canvas"),this.RH=this.Pz.getContext("2d"),b=new bk,b.Ed(this),this.Cb.lf.Rd(0,b),d=this,this.jG=function(){ck(d)},this.iG=function(){null!==d.Ti&&(d.Vc(),d.na())},this.hb=!0,this.We=!1,this.Um=Ki,this.Cb.un=hf,this.cc=!1}function bj(a){a.cc||a.Jd||!1!==a.Wf||(a.Wf=!0,requestAnimationFrame(function(){var b,c,d;if(a.Wf&&!a.Jd&&(a.Wf=!1,null!==a.Rb)){if(a.Jd=!0,Ei(a),a.Mc.P()||Ji(a,a.xf()),null===a.Rb&&t.m("No div specified"),null===a.Za&&t.m("No canvas specified"),a.Be&&(b=a.Ti,null!==b&&!b.fc.Ig&&!b.fc.zd)){for(b=a.Re,c=a.Pz,b.setTransform(1,0,0,1,0,0),b.clearRect(0,0,a.Za.width,a.Za.height),b.drawImage(c,0,0),c=a.Rc,c.reset(),1!==a.lc&&c.scale(a.scale),0===a.position.x&&0===a.position.y||c.translate(-a.Pa.x,-a.Pa.y),b.setTransform(c.m11,c.m12,c.m21,c.m22,c.dx,c.dy),c=a.Tb.length,d=0;c>d;d++)a.Tb.n[d].af(b,a);a.Vk=!1,a.Be=!1}a.Jd=!1}}))}function ck(a){var c,d,e,b=a.Fg;null!==b&&(c=a.Ti,null!==c&&(a.Be=!0,c=c.Ab,d=b.An,e=t.Ml(),e.p(c.width,c.height),d.Ea=e,t.qk(e),a=2/a.scale,d instanceof W&&(d.lb=a),b.location=new E(c.x-a/2,c.y-a/2)))}function bk(){re.call(this),this.name="MoveBox"}function qa(a){1<arguments.length&&t.m("Brush constructor can take at most one optional argument, the Brush type."),t.Fc(this),this.tb=!1,void 0===a?(this.ga=ne,this.Rn="black"):"string"==typeof a?(this.ga=ne,e&&t.gp("Brush constructor",a),this.Rn=a):(e&&t.Fa(a,qa,qa,"constructor:type"),this.ga=a,this.Rn="black");var b=this.ga;b===oe?(this.Qo=Wb,this.ho=ac):this.ho=this.Qo=b===pe?Yb:Qb,this.cw=0,this.Yu=0/0,this.bh=this.Pv=this.ah=null,this.Iy=this.Jy=0}function V(){t.Fc(this),this.oa=30723,this.Uf=1,this.Vi=null,this.ec="",this.zc=this.Qb=null,this.Pa=new E(0/0,0/0).freeze(),this.qf=new ra(0/0,0/0).freeze(),this.Tj=K.vq,this.Sj=K.BH,this.Rc=new sa,this.Dh=new sa,this.Zk=new sa,this.lc=1,this.On=0,this.ai=bh,this.Hr=K.uq,this.bd=new F(0/0,0/0,0/0,0/0).freeze(),this.Pb=new F(0/0,0/0,0/0,0/0).freeze(),this.od=new F(0,0,0/0,0/0).freeze(),this.Ns=this.br=this.R=this.cs=this.ds=null,this.Os=this.cr=1/0,this.Bq=this.Ae=Ub,this.ps=0,this.Yj=1,this.Iq=0,this.Gj=1,this.ts=-1/0,this.ss=0,this.us=K.Bj,this.vs=Ng,this.Pq="",this.Am=this.Bi=this.Xl=this.Qc=this.S=null}function gk(a){a.S={Ai:null,Gi:null,Ci:null,Tr:null,Ur:null,Ri:null,Qi:null,Pi:null,Rr:null,Sr:null,Oi:null,xq:null,yq:null,zq:null,wq:null,aj:null,Di:null}}function ik(a,b,c,d,e,f,g){var j,k,l,m,n,h=.001,i=f.length;for(a.moveTo(b,c),d-=b,h=e-c,0===d&&(d=.001),e=h/d,j=Math.sqrt(d*d+h*h),k=0,l=!0,m=0===g?!1:!0;j>=.1;){if(m){for(h=f[k++%i],h-=g;0>h;)h+=f[k++%i],l=!l;m=!1}else h=f[k++%i];h>j&&(h=j),n=Math.sqrt(h*h/(1+e*e)),0>d&&(n=-n),b+=n,c+=e*n,l?a.lineTo(b,c):a.moveTo(b,c),j-=h,l=!l}}function jk(a,b,c){var e,f,g,h,i,d=a.sp();if(null!==d)for(e=a.Qc.k;e.next();){if(f=e.value,g=f.ju,null!==g){if(h=d.we(g),null===h)continue;f.PB(a,h,c,null)}else{if(h=d.data,null===h)continue;i=b.h,null!==i&&i.iu||f.PB(a,h,c,i)}null!==g&&(h=d,""!==g&&(h=d.we(g)),null!==h&&(g=f.Gn,i=d,""!==g&&(i=d.we(g)),null!==i&&f.kH(i,h,c)))}}function kk(a,b,c,d,e){var f=a.bd,g=a.Zk;g.reset(),lk(a,g,b,c,d,e),a.Zk=g,f.x=b,f.y=c,f.width=d,f.height=e,g.Et()||g.eH(f)}function mk(a,b,c,d){return!1===a.mf?!1:(d.multiply(a.transform),c?a.ag(b,d):a.Zm(b,d))}function wh(a,b,c,d,e){var f,g,h,i;if(!1!==Ti(a)){switch(f=a.margin,g=f.top+f.bottom,b=Math.max(b-(f.right+f.left),0),c=Math.max(c-g,0),f=a.angle,(90===f||270===f)&&(f=b,b=c,c=f,f=d,d=e,e=f),f=a.Ea,g=0,a.lb&&(g=a.lb),b=isFinite(f.width)?f.width+g:b,c=isFinite(f.height)?f.height+g:c,f=d||0,g=e||0,h=a instanceof C,nk(a)){case ah:g=f=0,h&&(c=b=1/0);break;case Sc:isFinite(b)&&b>d&&(f=b),isFinite(c)&&c>e&&(g=c);break;case fk:isFinite(b)&&b>d&&(f=b),g=0,h&&(c=1/0);break;case ek:isFinite(c)&&c>e&&(g=c),f=0,h&&(b=1/0)}h=a.Oe,i=a.cg,f>h.width&&i.width<h.width&&(f=h.width),g>h.height&&i.height<h.height&&(g=h.height),d=Math.max(f/a.scale,i.width),e=Math.max(g/a.scale,i.height),h.width<d&&(d=Math.min(i.width,d)),h.height<e&&(e=Math.min(i.height,e)),b=Math.min(h.width,b),c=Math.min(h.height,c),b=Math.max(d,b),c=Math.max(e,c),a.bd.Ra(),a.Kt(b,c,d,e),a.bd.freeze(),a.bd.P()||t.m("Non-real measuredBounds has been set. Object "+a+", measuredBounds: "+a.bd.toString()),ok(a,!1)}}function rk(a,b,c,d,e){var g,f=a.pa;if(f.x=b,f.y=c,f.width=d,f.height=e,!a.Ea.P())switch(f=a.bd,c=a.margin,b=c.right+c.left,g=c.top+c.bottom,c=f.width+b,f=f.height+g,d+=b,e+=g,b=nk(a),c===d&&f===e&&(b=ah),b){case ah:(c>d||f>e)&&(ok(a,!0),wh(a,c>d?d:c,f>e?e:f));break;case Sc:ok(a,!0),wh(a,d,e,0,0);break;case fk:ok(a,!0),wh(a,d,f,0,0);break;case ek:ok(a,!0),wh(a,c,e,0,0)}}function qk(a,b,c){var d,e,f,g,h,i,j,k;sk(a,!1),d=a.U,null!==d&&(e=d.h,null!==e&&(tk(d),a instanceof x?(f=!1,d=b.P(),!1===e.Ji&&(g=e.Mc,h=e.padding,i=g.x+h.left,j=g.y+h.top,k=g.width-2*h.right,g=g.height-2*h.bottom,d&&b.x>i&&b.y>j&&b.right<k&&b.bottom<g&&c.x>i&&c.y>j&&c.right<k&&c.bottom<g&&(f=!0)),0!==(65536&a.Z)!=!0&&b.O(c)||fj(a,f,e),e.Gz&&null!==e.Ij?(f=null,d&&(f=t.Nf(),$h(a,b,f)),e.na(c.P()?$h(a,c):null,f),null!==f&&t.oc(f)):e.na()):(uk(a,d),a.na(),b=a.U,null!==b&&(b.An!==a&&b.vG!==a&&b.zG!==a||vk(b,!0)))))}function uk(a,b){if(null!==a.Wd&&vk(b,!0),a instanceof C)for(var c=a.va,d=c.length,e=0;d>e;e++)uk(c.n[e],b)}function yk(a,b,c){var d=a.Pb;0===d.width||0===d.height||isNaN(d.x)||isNaN(d.y)||(null!==a.zc&&(Ak(a,b,a.zc,!0,!0),a.zc instanceof qa&&a.zc.type===pe?(b.beginPath(),b.rect(d.x,d.y,d.width,d.height),Bk(b,a.zc,!0)):b.fillRect(d.x,d.y,d.width,d.height)),null!==a.Qb&&(Ak(a,b,a.Qb,!0),a.Qb instanceof qa&&a.Qb.type===pe?(b.beginPath(),b.rect(d.x,d.y,d.width,d.height),Bk(b,a.Qb,!0)):b.fillRect(d.x,d.y,d.width,d.height)),a.rl(b,c))}function Bk(a,b,c){if(c)if(a instanceof CanvasRenderingContext2D&&b instanceof qa&&b.type===pe){var d=b.Jy;b=b.Iy,b>d?(a.scale(d/b,1),a.translate((b-d)/2,0),c?a.fill():a.stroke(),a.translate(-(b-d)/2,0),a.scale(1/(d/b),1)):d>b?(a.scale(1,b/d),a.translate(0,(d-b)/2),c?a.fill():a.stroke(),a.translate(0,-(d-b)/2),a.scale(1,1/(b/d))):c?a.fill():a.stroke()}else c?a.fill():a.stroke();else a.stroke()}function Ak(a,b,c,d,e){var f,g,h,i,j,k,l,m;if(null!==c)if(f=1,g=1,"string"==typeof c)d?b.Rl!==c&&(b.fillStyle=c,b.Rl=c):b.Kn!==c&&(b.strokeStyle=c,b.Kn=c);else if(c.type===ne)c=c.color,d?b.Rl!==c&&(b.fillStyle=c,b.Rl=c):b.Kn!==c&&(b.strokeStyle=c,b.Kn=c);else{if(g=a.Ja,f=g.width,g=g.height,e&&(i=a.pa,f=i.width,g=i.height),j=b instanceof CanvasRenderingContext2D,j&&(c.bh&&c.type===dk||c.Jy===f&&c.Iy===g))h=c.bh;else{if(m=l=0,e&&(i=a.pa,f=i.width,g=i.height,l=i.x,m=i.y),c.start instanceof E?(a=c.start.x,e=c.start.y):c.start instanceof L?(a=c.start.x*f+c.start.offsetX,e=c.start.y*g+c.start.offsetY):(a=Yb.x*f+c.start.offsetX,e=Yb.y*g+c.start.offsetY),c.end instanceof E?(i=c.end.x,k=c.end.y):c.end instanceof L?(i=c.end.x*f+c.end.offsetX,k=c.end.y*g+c.end.offsetY):c.type===oe?(i=ac.x*f+c.end.offsetX,k=ac.y*g+c.end.offsetY):(i=Yb.x*f+c.end.offsetX,k=Yb.y*g+c.end.offsetY),a+=l,i+=l,e+=m,k+=m,c.type===oe?h=b.createLinearGradient(a,e,i,k):c.type===pe?(l=isNaN(c.op)?Math.max(f,g)/2:c.op,isNaN(c.jq)?(h=0,l=Math.max(f,g)/2):h=c.jq,h=b.createRadialGradient(a,e,h,i,k,l)):c.type===dk?h=b.createPattern(c.pattern,"repeat"):t.jc(c.type,"Brush type"),c.type!==dk&&(l=c.ip))for(l=l.k;l.next();)h.addColorStop(l.key,l.value);j&&(c.bh=h,c.Jy=f,c.Iy=g)}d?b.Rl!==h&&(b.fillStyle=h,b.Rl=h):b.Kn!==h&&(b.strokeStyle=h,b.Kn=h)}}function Dk(a){var b,c;if(0!==(2048&a.oa)==!0){if(b=a.Rc,b.reset(),!a.Pb.P()||!a.bd.P())return Ek(a,!1),void 0;b.translate(a.Pb.x,a.Pb.y),b.translate(-a.Ha.x,-a.Ha.y),c=a.Ja,lk(a,b,c.x,c.y,c.width,c.height),Ek(a,!1),Fk(a,!0)}0!==(4096&a.oa)==!0&&(b=a.ia,null===b?(a.Dh.set(a.Rc),Fk(a,!1)):null!==b.ue&&(c=a.Dh,c.reset(),b.Of()?c.multiply(b.Dh):null!==b.ia&&c.multiply(b.ia.Dh),c.multiply(a.Rc),Fk(a,!1)))}function lk(a,b,c,d,e,f){var g,h;if(1!==a.scale&&b.scale(a.scale),0!==a.angle){if(g=Yb,a.hf&&a.hf.Cd()&&(g=a.hf),h=t.N(),a instanceof x&&a.Zb!==a)for(c=a.Zb,d=c.Ja,h.gu(d.x,d.y,d.width,d.height,g),c.Zk.Xa(h),h.offset(-c.Ha.x,-c.Ha.y),g=c.ia;null!==g&&g!==a;)g.Zk.Xa(h),h.offset(-g.Ha.x,-g.Ha.y),g=g.ia;else h.gu(c,d,e,f,g);b.rotate(a.angle,h.x,h.y),t.B(h)}}function Ik(a){if(!1===Ti(a)&&(ok(a,!0),sk(a,!0),a instanceof C)){a=a.va.n;for(var b=a.length,c=0;b>c;c++)Ik(a[c])}}function Gk(a){if(!1===Ui(a)){if(null!==a.ia)a.ia.ja();else{var b=a.h;null!==b&&(a.Va()&&b.pg.add(a),a instanceof y&&a.Ef(),b.ze())}sk(a,!0)}}function pk(a){if(0!==(2048&a.oa)==!1&&(Ek(a,!0),Fk(a,!0),a instanceof C)){a=a.va.n;for(var b=a.length,c=0;b>c;c++)Jk(a[c])}}function Jk(a){if(Fk(a,!0),a instanceof C){a=a.va.n;for(var b=a.length,c=0;b>c;c++)Jk(a[c])}}function nk(a){var b=a.ui,c=a.ia;return c&&c.ga===fa?Kk(a,c.Qd(a.wc),c.Pd(a.column)):c&&c.ga===si&&c.Vw()===a?Sc:b===bh?c?(c.ga===Zg&&null===c.Uo&&(b=c.va,Hk(c,b,b.length)),c.Uo===a?Sc:(a=c.pA,a===bh?ah:a)):ah:b}function Kk(a,b,c){var e,d=a.ui;if(d!==bh)return d;switch(e=d=void 0,b.ui){case ek:e=!0;break;case Sc:e=!0}switch(c.ui){case fk:d=!0;break;case Sc:d=!0}return a=a.ia.pA,d=void 0!==d||a!==fk&&a!==Sc?!1:!0,e=void 0!==e||a!==ek&&a!==Sc?!1:!0,!0===d&&!0===e?Sc:!0===d?fk:!0===e?ek:ah}function Ck(a,b){a.oa=b?512|a.oa:-513&a.oa}function Mk(a,b){a.oa=b?1024|a.oa:-1025&a.oa}function Ek(a,b){a.oa=b?2048|a.oa:-2049&a.oa}function Fk(a,b){a.oa=b?4096|a.oa:-4097&a.oa}function Ti(a){return 0!==(8192&a.oa)}function ok(a,b){a.oa=b?8192|a.oa:-8193&a.oa}function Ui(a){return 0!==(16384&a.oa)}function sk(a,b){a.oa=b?16384|a.oa:-16385&a.oa}function Qk(a){var b={value:null};return Rk(a,b),b.value}function Rk(a,b){var c=a.ia;return null===c||!Rk(c,b)&&a.visible?(b.value=a,!1):!0}function Lk(a){var b=a.U;b instanceof y&&(a=a.h)&&!a.ma.yb&&b.Ef()}function Wk(a,b){var c,d,e,f;if("string"==typeof b)c=a,c instanceof za?c.text=b:c instanceof W?c.Eb=b:c instanceof Xk?c.source=b:c instanceof C?(d=t.en(C,b),null!==d?c.type=d:t.m("Unknown Panel type as an argument to GraphObject.make: "+b)):c instanceof qa?(d=t.en(qa,b),null!==d?c.type=d:t.m("Unknown Brush type as an argument to GraphObject.make: "+b)):c instanceof Pc?(d=t.en(Pc,b),null!==d?c.type=d:t.m("Unknown Geometry type as an argument to GraphObject.make: "+b)):c instanceof xd?(d=t.en(xd,b),null!==d?c.type=d:t.m("Unknown PathSegment type as an argument to GraphObject.make: "+b)):t.m("Unable to use a string as an argument to GraphObject.make: "+b);else if(b instanceof V)a instanceof C||t.m("A GraphObject can only be added to a Panel, not to: "+a),a.add(b);else if(b instanceof Ie)a instanceof C||t.m("A RowColumnDefinition can only be added to a Panel, not to: "+a),kj(b.Ff?a.Qd(b.index):a.Pd(b.index),b);else if(b instanceof oa)c=a,c instanceof B&&b.Ye===B?2===(2&b.value)?c.bu=b:b===Vg||b===Mg||b===Lg?c.Je=b:b===Yk||b===Zk||b===$k?c.Zo=b:b!==al&&b!==Ng&&t.m("Unknown Link enum value for a Link property: "+b):c instanceof C&&b.Ye===C?c.type=b:c instanceof za&&b.Ye===za?c.RB=b:c instanceof V&&b.Ye===B?0===b.name.indexOf("Orient")?c.du=b:t.m("Unknown Link enum value for GraphObject.segmentOrientation property: "+b):c instanceof V&&b.Ye===V?c.ui=b:c instanceof v&&b.Ye===v?c.Um=b:c instanceof qa&&b.Ye===qa?c.type=b:c instanceof Pc&&b.Ye===Pc?c.type=b:c instanceof xd&&b.Ye===xd?c.type=b:c instanceof Le&&b.Ye===Le?c.mode=b:c instanceof Cd&&b.Ye===Cd?c.Bd=b:c instanceof X&&b.Ye===X?0===b.name.indexOf("Alignment")?c.alignment=b:0===b.name.indexOf("Arrangement")?c.Xe=b:0===b.name.indexOf("Compaction")?c.compaction=b:0===b.name.indexOf("Path")?c.path=b:0===b.name.indexOf("Sorting")?c.sorting=b:0===b.name.indexOf("Style")?c.hH=b:t.m("Unknown enum value: "+b):c instanceof Z&&b.Ye===Z?0===b.name.indexOf("Aggressive")?c.lE=b:0===b.name.indexOf("Cycle")?c.KE=b:0===b.name.indexOf("Init")?c.CF=b:0===b.name.indexOf("Layer")?c.PF=b:t.m("Unknown enum value: "+b):c instanceof ak&&b.Ye===ak?b===bl||b===cl||b===dl||b===el?c.sorting=b:b===fl||b===gl?c.Xe=b:b===hl||b===il?c.alignment=b:t.m("Unknown enum value: "+b):c instanceof jl&&b.Ye===jl?b===kl||b===ll||b===ml||b===nl||b===ol?c.sorting=b:b===pl||b===ql||b===rl||b===sl?c.direction=b:b===tl||b===ul||b===vl||b===wl?c.Xe=b:b===Dl||b===El?c.Rt=b:t.m("Unknown enum value: "+b):t.m("No property to set for this enum value: "+b);else if(b instanceof Le)a instanceof V||a instanceof Ie?(d=b.lu,e=d.indexOf("."),e>0&&a instanceof C&&(c=d.substr(e+1),d=a.we(d.substring(0,e)),null!==d&&(a=d,b.lu=c)),a.bind(b)):t.m("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: "+a);else if(b instanceof Rc)a instanceof Pc?a.Fb.add(b):t.m("A PathFigure can only be added to a Geometry, not to: "+a);else if(b instanceof xd)a instanceof Rc?a.Ka.add(b):t.m("A PathSegment can only be added to a PathFigure, not to: "+a);else if(Array.isArray(b))for(c=0;c<b.length;c++)Wk(a,b[c]);else if("object"==typeof b&&null!==b)if(c=a,c instanceof qa){d={};for(e in b)f=parseFloat(e),isNaN(f)?d[e]=b[e]:c.addColorStop(f,b[e]);t.Kx(c,d)}else c instanceof Ie?(void 0!==b.row?(d=b.row,(void 0===d||null===d||1/0===d||isNaN(d)||0>d)&&t.m("Must specify non-negative integer row for RowColumnDefinition "+b),c.im=!0,c.ad=d):void 0!==b.column?(d=b.column,(void 0===d||null===d||1/0===d||isNaN(d)||0>d)&&t.m("Must specify non-negative integer column for RowColumnDefinition "+b),c.im=!1,c.ad=d):t.m("Must specify row or column value in a RowColumnDefinition "+b),d=t.BI(b,"row","column"),t.Kx(c,d)):t.Kx(c,b);else t.m('Unknown initializer "'+b+'" for object being constructed by GraphObject.make: '+a)}function C(a){V.call(this),void 0===a?0===arguments.length?this.ga=fh:t.m("invalid argument to Panel constructor: undefined"):(t.Fa(a,C,C,"type"),this.ga=a),this.va=new H(V),this.Ue=K.uq,this.fh=!1,this.ga===Bi&&(this.fh=!0),this.Sq=Ub,this.Ac=bh,this.ga===fa&&Fl(this),this.Wo=ch,this.gr=new ra(10,10).freeze(),this.hr=K.Bj,this.Ul=this.Zl=null,this.wr=0/0,this.rg=this.Li=null,this.xo="category",this.qg=null,this.cj=new F(0/0,0/0,0/0,0/0),this.Uo=null,this.Rh=!1,this.qs=null}function Fl(a){a.Hj=K.uq,a.Kh=1,a.Fi=null,a.am=null,a.Jh=1,a.Ih=null,a.$l=null,a.qd=[],a.kd=[],a.Fm=Gl,a.Wl=Gl,a.bj=0,a.Mi=0}function Jl(a,b,c,d){var f,e,g,h,i,j,k,l,m,n;for(e=d.length,g=a.pa,h=c?a.Qd(0):a.Pd(0),i=0;e>i;i++)f=d[i],void 0!==f&&f!==h&&0!==f.mc&&(j=f.Cn,isNaN(j)&&(j=c?a.Kh:a.Jh),k=f.Bn,null===k&&(k=c?a.Fi:a.Ih),0!==j&&null!==k&&(Ak(a,b,k,!1),k=!1,l=f.IG,null!==l&&(m=k=!0,void 0!==b.setLineDash?(b.setLineDash(l),b.lineDashOffset=a.rd):void 0!==b.webkitLineDash?(b.webkitLineDash=l,b.webkitLineDashOffset=a.rd):void 0!==b.mozDash?(b.mozDash=l,b.mozDashOffset=a.rd):m=!1),b.beginPath(),n=f.position+j,c?n>g.height&&(j-=n-g.height):n>g.width&&(j-=n-g.width),f=f.position+j/2,b.lineWidth=j,n=a.padding,c?(f+=n.top,j=n.left,n=g.width-n.right,k&&!m?ik(b,j,f,n,f,l,0):(b.moveTo(j,f),b.lineTo(n,f))):(f+=n.left,j=n.top,n=g.height-n.bottom,k&&!m?ik(b,f,j,f,n,l,0):(b.moveTo(f,j),b.lineTo(f,n))),b.stroke(),k&&(void 0!==b.setLineDash?(b.setLineDash(t.xi),b.lineDashOffset=0):void 0!==b.webkitLineDash?(b.webkitLineDash=t.xi,b.webkitLineDashOffset=0):void 0!==b.mozDash&&(b.mozDash=null,b.mozDashOffset=0))))}function Il(a,b,c,d,e){var g,f,h,i,j,k,l,m;for(f=d.length,h=a.pa,i=0;f>i;i++)g=d[i],void 0!==g&&null!==g.background&&g.Lw!==e&&0!==g.mc&&(j=c?h.height:h.width,g.position>j||(k=Kl(g),l=g.Cn,isNaN(l)&&(l=c?a.Kh:a.Jh),m=g.Bn,null===m&&(m=c?a.Fi:a.Ih),null===m&&(l=0),k-=l,l=g.position+l,k+=g.mc,l+k>j&&(k=j-l),0>=k||(j=a.padding,Ak(a,b,g.background,!0),c?b.fillRect(j.left,l+j.top,h.width-(j.left+j.right),k):b.fillRect(l+j.left,j.top,k,h.height-(j.top+j.bottom)))))}function Hl(a,b,c){if(0!==a%b)return!1;b=c.length;for(var d=0;b>d;d++)if(0===a%c[d])return!1;return!0}function lj(a){return"LineV"===a||"BarV"===a}function Hk(a,b,c){var d,e;for(d=0;c>d;d++)if(e=b.n[d],!0===e.pi)return a.Uo=e;return b=b.n[0],a.Uo=b}function Tl(a,b,c){if(c(a,b),b instanceof C){b=b.va.n;for(var d=b.length,e=0;d>e;e++)Tl(a,b[e],c)}}function dj(a,b){Ul(a,a,b)}function Ul(a,b,c){var d,e,f;for(c(b),b=b.va.n,d=b.length,e=0;d>e;e++)f=b[e],f instanceof C&&Ul(a,f,c)}function Vl(a,b,c){if(c(b),b instanceof C){b=b.va.n;for(var d=b.length,e=0;d>e;e++)Vl(a,b[e],c)}}function Wl(a,b,c){var d,e,f;if(c(b))return b;if(b instanceof C)for(b=b.va.n,d=b.length,e=0;d>e;e++)if(f=Wl(a,b[e],c),null!==f)return f;return null}function Yl(a){var b,c,d,e;for(a=a.va.n,b=a.length,c=0,d=0;b>d;d++)if(e=a[d],e instanceof C)c=Math.max(c,Yl(e));else if(e instanceof W){a:{if(!e.nh)switch(e.io){case"None":case"Square":case"Ellipse":case"Circle":case"LineH":case"LineV":case"FramedRectangle":case"RoundedRectangle":case"Line1":case"Line2":case"Border":case"Cube1":case"Cube2":case"Junction":case"Cylinder1":case"Cylinder2":case"Cylinder3":case"Cylinder4":case"PlusLine":case"XLine":case"ThinCross":case"ThickCross":e=0;
break a}e=e.se/2*e.Lm*e.sk()}c=Math.max(c,e)}return c}function Zl(a,b,c,d){var e,f,g,h;for(e=a.va.length;e--;)f=a.va.n[e],f.visible&&(g=f.pa,h=a.Ja,g.x>h.width||g.y>h.height||0>g.x+g.width||0>g.y+g.height||(f instanceof C&&Zl(f,b,c,d),null!==b&&(f=b(f)),f&&(null===c||c(f))&&d.add(f)))}function Ll(a){var b=a.G;return(void 0===b||b===Ub)&&(b=null),null===b&&a instanceof W&&(a=a.Ta,null!==a&&(b=a.G)),null===b&&(b=Vb),b}function Ml(a){var b=a.H;return(void 0===b||b===Ub)&&(b=null),null===b&&a instanceof W&&(a=a.Ta,null!==a&&(b=a.H)),null===b&&(b=bc),b}function Sk(a){return a=a.Ul,null!==a&&a.tb}function bf(a){var c,d,e,f,g,b=a.Ul;if(null===b)null!==a.data&&t.m("Template cannot have .data be non-null: "+a),a.Ul=b=new H(Le);else if(b.tb)return;for(c=new H(V),Tl(a,a,function(a,d){var f,g,h,i,j,e=d.Qc;if(null!==e)for(Mk(d,!1),f=e.k;f.next();)e=f.value,e.mode===Xe&&Mk(d,!0),g=e.ju,null!==g&&(h=a,""!==g&&(h=a.we(g)),null!==h&&(c.add(h),void 0===h.Gs&&(h.Gs=new H(Le)),h.Gs.add(e))),b.add(e);if(d instanceof C&&d.type===fa){if(0<d.qd.length)for(f=d.qd,g=f.length,h=0;g>h;h++)if(i=f[h],void 0!==i&&null!==i.Qc)for(j=i.Qc.k;j.next();)e=j.value,e.zg=i,e.Oz=2,e.gw=i.index,b.add(e);if(0<d.kd.length)for(f=d.kd,g=f.length,h=0;g>h;h++)if(i=f[h],void 0!==i&&null!==i.Qc)for(j=i.Qc.k;j.next();)e=j.value,e.zg=i,e.Oz=1,e.gw=i.index,b.add(e)}}),d=c.k;d.next();){if(e=d.value,void 0!==e.Gs)for(Mk(e,!0),f=e.Gs.k;f.next();)g=f.value,null===e.Qc&&(e.Qc=new H(Le)),e.Qc.add(g);delete e.Gs}for(d=b.k;d.next();)e=d.value,f=e.zg,null!==f&&(e.zg=null,f===a?e.Gn="":(f instanceof Ie&&(f=f.ia),e.Gn=""!==f.name?f.name:f.name="_"+t.ud(f)));b.freeze(),a instanceof x&&a.Td()&&(wh(a,1/0,1/0),a.Sc())}function Xl(a){return a.type===Zg||a.type===si||a.type===Jg}function vj(a,b,c){if(void 0!==b&&null!==b){var d=a.getCategoryForItemData(b,c),d=a.findTemplateForItemData(b,c,d);d instanceof C&&(bf(d),d=d.copy(),"object"==typeof b&&(null===a.qg&&(a.qg=new wa(Object,C)),a.qg.add(b,d)),a.type!==Zg&&a.type!==si||c++,a.Rd(c,d),$l(d,c),yj(a,c),d.data=b)}}function yj(a,b){var c,d,e;for(c=a.va,d=b+1;d<c.length;)e=c.wa(d),e instanceof C&&$l(e,d),d++}function $l(a,b){a.type===wk?a.wc=b:a.type===xk&&(a.column=b),a.LF=b}function Ie(){t.Fc(this),this.Vi=null,this.im=!0,this.ad=0,this.Vf=0/0,this.tm=0,this.sm=1/0,this.Ae=Ub,this.Pa=this.Ob=0,this.Qc=null,this.Ds=am,this.ai=bh,this.As=this.ak=null,this.Bs=0/0,this.Qb=this.Xh=null,this.Oq=!1}function kj(a,b){t.l(b,Ie,Ie,"copyFrom:pd"),b.Ff?a.height=b.height:a.width=b.width,a.si=b.si,a.Hf=b.Hf,a.alignment=b.alignment,a.hu=b.hu,a.ak=null===b.ak?null:b.ak.ba(),a.Bn=b.Bn,a.Cn=b.Cn,a.Xh=null,b.Xh&&(a.Xh=b.Xh.slice(0)),a.background=b.background,a.Lw=b.Lw,a.Qc=b.Qc}function Ol(a,b){a.Ob=isNaN(a.Vf)?Math.max(Math.min(a.sm,b),a.tm):Math.max(Math.min(a.sm,a.Vf),a.tm)}function Sl(a){var d,b=a.Vi,c=a.Bn;return null===c&&(c=a.Ff?b.Fi:b.Ih),d=a.Cn,isNaN(d)&&(d=a.Ff?b.Kh:b.Jh),d=null!==c?d:0,0===a.index&&(d=0),c=a.xB,null===c&&(c=b.Hj),d+(a.Ff?c.top:c.left)}function Kl(a){var d,b=a.Vi,c=a.Bn;return null===c&&(c=a.Ff?b.Fi:b.Ih),d=a.Cn,isNaN(d)&&(d=a.Ff?b.Kh:b.Jh),d=null!==c?d:0,0===a.index&&(d=0),c=a.xB,null===c&&(c=b.Hj),d+(a.Ff?c.top+c.bottom:c.left+c.right)}function Pl(a){if(a.hu===am){var b=a.Vi;return a.Ff?b.CG:b.BE}return a.hu}function W(){V.call(this),this.Ta=null,this.io="None",this.nh=!1,this.er=bh,this.Lk=null,this.Kb=this.$c="black",this.se=1,this.So="butt",this.To="miter",this.Lm=10,this.Km=null,this.rd=0,this.$i=this.Zi=Ub,this.$r=this.Zr=0,this.jr=!1,this.pr=!0,this.bs=null,this.mo=this.Vo="None",this.ir=1}function bm(a,b,c,d){var h,i,j,k,l,m,n,o,p,q,r,s,u,e=.001,f=d.Ha,g=f.width;if(f=f.height,k=c.length,!(2>k)){for(h=c[0][0],i=c[0][1],p=0,q=t.Hb(),r=1;k>r;r++)l=c[r],e=l[0],j=l[1],l=e-h,h=j-i,0===l&&(l=.001),m=h/l,o=Math.atan2(h,l),h=Math.sqrt(l*l+h*h),q.push([l,o,m,h]),p+=h,h=e,i=j;for(h=c[0][0],i=c[0][1],c=0,e=g,k=g/2,r=0===k?!1:!0,j=0,n=q[j],l=n[0],o=n[1],m=n[2],n=n[3],s=0;p>=.1;){if(0===s&&(r?(e=g,c++,e-=k,p-=k,r=!1):(e=g,c++),0===e&&(e=1)),e>p)return t.Ca(q),void 0;if(e>n?(s=e-n,e=n):s=0,u=Math.sqrt(e*e/(1+m*m)),0>l&&(u=-u),h+=u,i+=m*u,a.translate(h,i),a.rotate(o),a.translate(-(g/2),-(f/2)),0===s&&d.rl(a,b),a.translate(g/2,f/2),a.rotate(-o),a.translate(-h,-i),p-=e,n-=e,0!==s){if(j++,j===q.length)return t.Ca(q),void 0;n=q[j],l=n[0],o=n[1],m=n[2],n=n[3],e=s}}t.Ca(q)}}function cm(a,b,c,d){var g,h,i,k,l,m,n,o,p,q,r,e=.001,f=c.length,j=b.length;if(!(2>j))if(g=b[0][0],h=b[0][1],2===j)ik(a,g,h,b[1][0],b[1][1],c,d);else{for(a.moveTo(g,h),n=0,o=t.Hb(),p=1;j>p;p++)k=b[p],e=k[0],i=k[1],k=e-g,g=i-h,0===k&&(k=.001),l=g/k,g=Math.sqrt(k*k+g*g),o.push([k,l,g]),n+=g,g=e,h=i;for(g=b[0][0],h=b[0][1],b=0,j=!0,e=c[b%f],p=0!==d,i=0,m=o[i],k=m[0],l=m[1],m=m[2],q=0;n>=.1;)if(0===q&&(e=c[b%f],b++,p&&(d%=e,e-=d,p=!1)),e>n&&(e=n),e>m?(q=e-m,e=m):q=0,r=Math.sqrt(e*e/(1+l*l)),0>k&&(r=-r),g+=r,h+=l*r,j?a.lineTo(g,h):a.moveTo(g,h),n-=e,m-=e,0!==q){if(i++,i===o.length)return t.Ca(o),void 0;m=o[i],k=m[0],l=m[1],m=m[2],e=q}else j=!j;t.Ca(o)}}function Rl(a,b,c){var d,e;!1!==Ti(a)&&(a.bd.Ra(),d=a.se,0===d&&(e=a.U,e instanceof ea&&e.type===Jg&&e.uc instanceof W&&(d=e.uc.lb)),d*=a.lc,kk(a,-(d/2),-(d/2),b+d,c+d),b=a.bd,c=a.Oe,d=a.cg,b.width=Math.min(c.width,b.width),b.height=Math.min(c.height,b.height),b.width=Math.max(d.width,b.width),b.height=Math.max(d.height,b.height),a.bd.freeze(),a.bd.P()||t.m("Non-real measuredBounds has been set. Object "+a+", measuredBounds: "+a.bd.toString()),ok(a,!1))}function Nl(a){var b=a.$w;return a.nh?b===bh?Sc:b:b===bh?K.hB[a.Eb].Ac:b}function em(a,b,c,d,e){return a=c.x-a,b=c.y-b,b=a*a+b*b,d>b?(e.x=c.x,e.y=c.y,b):d}function dm(a,b,c,d,e,f,g,h,i){var j=!1,k=(e-g)*(b-d)-(f-h)*(a-c);return 0===k?!1:(i.x=((e*h-f*g)*(a-c)-(e-g)*(a*d-b*c))/k,i.y=((e*h-f*g)*(b-d)-(f-h)*(a*d-b*c))/k,(b>d?b-d:d-b)>(a>c?a-c:c-a)?(e=d>b?b:d,a=d>b?d:b,(i.y>e||K.sb(i.y,e))&&(i.y<a||K.sb(i.y,a))&&(j=!0)):(e=c>a?a:c,a=c>a?c:a,(i.x>e||K.sb(i.x,e))&&(i.x<a||K.sb(i.x,a))&&(j=!0)),j)}function fm(a,b,c,d){var e,f,g;return a.yl(b,c,d)?(a=b.x,b=b.y,e=c.x,f=c.y,c=d.x,d=d.y,a===e?(f>b?(g=b,a=f):(g=f,a=b),d>=g&&a>=d):(e>a?(g=a,a=e):g=e,c>=g&&a>=c)):!1}function gm(a){var b=a.h;null!==b&&b.ma.yb||(a.du=hm,"None"!==a.Vo?(a.Jf=-1,a.ek=hc):"None"!==a.mo&&(a.Jf=0,a.ek=new L(1-hc.x,hc.y)))}function za(){V.call(this),this.te="",this.Kb="black",this.dh="13px sans-serif",this.ce="start",this.mr=!0,this.jm=this.km=!1,this.cl=im,this.Om=jm,this.uv=this.tf=0,this.lo=this.vz=this.wz=null,this.Eo={},this.Zq=!1,this.rf=this.fl=this.Ms=null,this.dk=this.ck=0,this.Ni=1/0}function zk(a,b){var c=a.dh;null!==c&&b.uu!==c&&(b.font=c,b.uu=c)}function nm(a,b,c,d){var f,g,e,h,i,j,k,l;if(b=b.replace(/^\s+|\s+$/g,""),void 0===c.Kg&&(c.Kg=0),void 0===c.Eg&&(c.Eg=[]),void 0===c.Xf&&(c.Xf=[]),e=0,h=a.dh,f=a.ck+a.dk,i=Math.max(0,Gh(a)+f),j=a.cl===mm?rm(h):0,!(a.tf>=a.Ni)){if(a.Om===km){if(c.Ch=1,f=qm(b,h),0===j||d>=f)return c.Kg=f,c.Eg.push(c.Kg),c.Xf.push(b),new ra(f,i);for(k=sm(b),b=b.substr(k.length),g=sm(b),f=qm(k+g,h);0<g.length&&d>=f;)k+=g,b=b.substr(g.length),g=sm(b),f=qm((k+g).replace(/^\s+|\s+$/g,""),h);for(k+=g.replace(/^\s+|\s+$/g,""),d=Math.max(1,d-j);qm(k,h)>d&&1<k.length;)k=k.substr(0,k.length-1);return k+=t.ot,g=qm(k,h),c.Eg.push(g),c.Kg=g,c.Xf.push(k),new ra(g,i)}for(j=0,0===b.length&&(j=1,c.Eg.push(0),c.Xf.push(b));0<b.length;){for(k=sm(b),b=b.substr(k.length);qm(k,h)>d;){for(l=1,f=qm(k.substr(0,l),h),g=0;d>=f;)l++,g=f,f=qm(k.substr(0,l),h);if(1===l?(c.Eg[a.tf+j]=f,e=Math.max(e,f)):(c.Eg[a.tf+j]=g,e=Math.max(e,g)),l--,1>l&&(l=1),c.Xf[a.tf+j]=k.substr(0,l),j++,k=k.substr(l),a.tf+j===a.Ni)break}for(g=sm(b),f=qm(k+g,h);0<g.length&&d>=f;)k+=g,b=b.substr(g.length),g=sm(b),f=qm((k+g).replace(/^\s+|\s+$/g,""),h);if(k=k.replace(/^\s+|\s+$/g,""),""!==k&&(0===g.length?(c.Eg.push(f),e=Math.max(e,f)):(g=qm(k,h),c.Eg.push(g),e=Math.max(e,g)),c.Xf.push(k),j++,a.tf+j===a.Ni))break}return c.Ch=Math.min(a.Ni,j),c.Kg=Math.max(c.Kg,e),new ra(c.Kg,i*c.Ch)}}function sm(a){for(var b=a.length,c=0;b>c&&" "!==a.charAt(c);)c++;for(;b>c&&" "===a.charAt(c);)c++;return c>=b?a:a.substr(0,c)}function qm(a,b){return t.hq!==b&&(t.Dn.font=b,t.hq=b),t.Dn.measureText(a).width}function Gh(a){var b,c;return null!==a.lo?a.lo:(b=a.dh,t.hq!==b&&(t.Dn.font=b,t.hq=b),c=0,void 0!==t.AA[b]&&5e3>t.hF?c=t.AA[b]:(c=1.3*t.Dn.measureText("M").width,t.AA[b]=c,t.hF++),a.lo=c)}function rm(a){t.hq!==a&&(t.Dn.font=a,t.hq=a);var b=0;return void 0!==t.Yw[a]&&5e3>t.zA?b=t.Yw[a]:(b=t.Dn.measureText(t.ot).width,t.Yw[a]=b,t.zA++),b}function pm(a,b,c){void 0===c.Ch&&(c.Ch=0);var d=a.indexOf("\r",b);return-1===d&&(d=a.indexOf("\n",b)),d>=0&&(c.Ch="\r"===a[d]&&d+1<a.length&&"\n"===a[d+1]?d+2:d+1),d}function om(a,b,c){var f,g,h,i,j,d=a.te,e=a.ck+a.dk;if(e=Math.max(0,Gh(a)+e),0===d.length)return c.Kg=0,a.tf=1,e;for(a.ox||(f=pm(d,0,{}),f>=0&&(d=d.substr(0,f))),f=0,g=a.tf=0,h=-1,i={Ch:0},j=!1;!j;)h=pm(d,g,i),-1===h&&(h=d.length,j=!0),h>=g&&(g=d.substr(g,h-g),a.Om!==km?(c.Ch=0,g=nm(a,g,c,b),f+=g.height,a.tf+=c.Ch):(nm(a,g,c,b),f+=e,a.tf++),a.tf===a.Ni&&(j=!0)),g=i.Ch;return a.uv=f}function Xk(){V.call(this),this.ng=null,this.Fs="",this.bk=new F(0/0,0/0,0/0,0/0).freeze(),this.po=Sc,this.Ks=this.rf=null,this.lv=this.cv=this.rm=!1,this.IC=!0,this.Po=null}function ua(){this.s=new Pc,this.bc=null}function P(a,b,c,d,e,f){null===a.s&&t.m("StreamGeometryContext has been closed"),void 0!==e&&!0===e?(null===a.bc&&t.m("Need to call beginFigure first"),d=new xd(kd),d.D=b,d.F=c,a.bc.Ka.add(d)):(a.bc=new Rc,a.bc.sa=b,a.bc.ta=c,a.bc.Ep=d,a.s.Fb.add(a.bc)),void 0!==f&&(a.bc.vo=f)}function S(a){null===a.s&&t.m("StreamGeometryContext has been closed"),null===a.bc&&t.m("Need to call beginFigure first");var b=a.bc.Ka.length;b>0&&a.bc.Ka.n[b-1].close()}function hd(a){null===a.s&&t.m("StreamGeometryContext has been closed"),null===a.bc&&t.m("Need to call beginFigure first"),0<a.bc.Ka.length&&(a.bc.Ep=!0)}function Q(a,b,c,d,e,f,g,h){null===a.s&&t.m("StreamGeometryContext has been closed"),null===a.bc&&t.m("Need to call beginFigure first");var i=new xd(ld);i.Gb=b,i.Xb=c,i.xe=d,i.ye=e,i.D=f,i.F=g,h&&i.close(),a.bc.Ka.add(i)}function fd(a,b,c,d,e){null===a.s&&t.m("StreamGeometryContext has been closed"),null===a.bc&&t.m("Need to call beginFigure first");var f=new xd(md);f.Gb=b,f.Xb=c,f.D=d,f.F=e,a.bc.Ka.add(f)}function gd(a,b,c,d,e,f,g,h){null===a.s&&t.m("StreamGeometryContext has been closed"),null===a.bc&&t.m("Need to call beginFigure first"),b=new xd(ud,g,h,b,c,d,e,f),a.bc.Ka.add(b)}function x(a){0===arguments.length?C.call(this):C.call(this,a),this.Z=311807,this.Xk=this.Fh="",this.ns=this.ks=this.xs=this.yr=null,this.zs="",this.Yg=this.ys=this.Gm=null,this.ms="",this.Lo=null,this.ls=new ra(0/0,0/0).freeze(),this.os="",this.Mo=null,this.te="",this.Co=this.Mq=this.Mk=null,this.jh=new E(0/0,0/0).freeze(),this.Fr="",this.$k=null,this.Gr=Vb,this.Qr=K.yH,this.Ir=K.xH,this.Wq=null,this.zr=vm,this.Jm=new E(6,6).freeze(),this.Im="gray",this.Hm=4,this.dD=-1,this.IH=new F,this.Uj=null,this.Rj=0/0}function wm(a,b){var c,d,e,f,g,h;if(a.ib&&a.wB){if(c=a.An,null===c||!(a.pa.P()&&a.Va()&&c.Cl()&&c.pa.P()))return;if(d=a.pp("Selection"),null===d){if(d=a.GG,null===d&&(a instanceof B?d=b.VF:a instanceof x&&(d=a instanceof z?b.rF:b.hG)),!(d instanceof ea))return;if(bf(d),d=d.copy(),!(d instanceof ea))return;d.ed="Selection",d.uc=c}if(null!==d)return e=d.placeholder,null!==e&&(f=c.sk(),g=0,c instanceof W&&(g=c.lb),h=t.Ml(),h.p((c.Ja.width+g)*f,(c.Ja.height+g)*f),e.Ea=h,t.qk(h)),d.angle=c.ul(),d.type!==Jg?(e=t.N(),d.location=c.wb(Vb,e),t.B(e)):d.ja(),a.il("Selection",d),void 0}a.Hl("Selection")}function xm(a){var b=a.h;null!==b&&(Ci(b),0!==(16384&a.Z)!=!0&&(a.Z|=16384,b.ze()))}function Xh(a){0!==(16384&a.Z)!=!1&&(a.updateAdornments(),a.Z&=-16385,a=a.h,null!==a&&(a.Be=!0))}function Nk(a,b){if(!1===Vi(a)){var c=a.h;null!==c&&(a.Va()&&c.pg.add(a),a instanceof y&&!c.ma.yb&&a.Ef(),b||c.ze()),ym(a,!0)}}function zm(a){var b,c,d;!1!==Vi(a)&&(b=a.position,c=a.location,c.P()&&b.P()||(Am(a,b,c),pk(a)),b=a.Pa,c=a.Pb,d=c.copy(),c.Ra(),c.x=b.x,c.y=b.y,c.freeze(),qk(a,d,c),ym(a,!1))}function Bm(a,b,c,d){void 0===d&&(d=new E),c.Me()&&(c=Yb);var e=b.Ja;if(d.p(e.width*c.x+c.offsetX,e.height*c.y+c.offsetY),null===b||b===a)return d;for(b.transform.Xa(d),b=b.ia;null!==b&&b!==a;)b.transform.Xa(d),b=b.ia;return a.Zk.Xa(d),d.offset(-a.bd.x,-a.bd.y),d}function $h(a,b,c){var d,e,f,g;return c=void 0===c?a.IH:c,isNaN(a.Rj)&&(a.Rj=Yl(a)),d=a.Rj,e=2*d,a.qi?(d=b.x,e=b.y,f=b.width,b=b.height,g=a.shadowBlur,a=a.NG,f+=g,b+=g,d-=g/2,e-=g/2,0<a.x?f+=a.x:(d+=a.x,f-=a.x),0<a.y?b+=a.y:(e+=a.y,b-=a.y),c.p(d-1,e-1,f+2,b+2),c):(c.p(b.x-1-d,b.y-1-d,b.width+2+e,b.height+2+e),c)}function Am(a,b,c){var i,d=0/0,e=0/0,f=t.N(),g=a.hf,h=a.Zb;if(g.Me()&&t.m("determineOffset: Part's locationSpot must be real: "+g.toString()),i=h.Ja,d=0,h.lb&&(d=h.se),f.gu(0,0,i.width+d,i.height+d,g),h!==a)for(h.lb&&f.offset(-d/2,-d/2),h.transform.Xa(f),g=h.ia;null!==g&&g!==a;)g.transform.Xa(f),g=g.ia;a.Zk.Xa(f),f.offset(-a.bd.x,-a.bd.y),g=a.h,c.P()?(h=b.x,i=b.y,d=c.x-f.x,e=c.y-f.y,b.p(d,e),c=!1,null!==g&&(d=g.yi,d.Lj?c=!0:!d.zd||a instanceof ea||Mh(d,a,new E(h,i),b),c||b.x===h&&b.y===i||(d=g.ab,g.ab=!0,a.j("position",new E(h,i),b),g.ab=d))):b.P()&&(d=b.x,e=b.y,b=c.copy(),c.p(d+f.x,e+f.y),c.O(b)||null===g||(d=g.ab,g.ab=!0,a.j("location",b,c),g.ab=d)),t.B(f)}function fj(a,b,c){vk(a,!1),a instanceof y&&Vj(c,a),a.layer.Dc||b||c.Vc(),b=a.Pb;var d=c.Ab;d.P()?(Wh(a)?Eb(b,d)||(a.Kf(!1),xm(a)):b.ag(d)&&a.Kf(!0),a.updateAdornments()):c.Vk=!0}function Yh(a,b){var c,d,e,f;a.visible&&(c=a.Pb,0===c.width||0===c.height||isNaN(c.x)||isNaN(c.y)||(d=a.transform,e=a.ia,f=a.Dh,f.reset(),null!==e&&(e.Of()?f.multiply(e.ue):null!==e.ia&&f.multiply(e.ia.ue)),f.multiply(a.Rc),null!==a.zc&&(Ak(a,b,a.zc,!0,!0),b.fillRect(c.x,c.y,c.width,c.height)),null===a.zc&&null===a.Qb&&(b.fillStyle="rgba(0,0,0,0.4)",b.fillRect(c.x,c.y,c.width,c.height)),null!==a.Qb&&(d.Et()||b.transform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy),e=a.Ja,c=e.width,e=e.height,Ak(a,b,a.Qb,!0),b.fillRect(0,0,c+0,e+0),d.Et()||(c=1/(d.m11*d.m22-d.m12*d.m21),b.transform(d.m22*c,-d.m12*c,-d.m21*c,d.m11*c,c*(d.m21*d.dy-d.m22*d.dx),c*(d.m12*d.dx-d.m11*d.dy))))))}function Cm(a,b,c,d){var e,f,g,h,i,j;b.constructor===a.constructor||t.mH||(t.mH=!0,t.trace('Should not change the class of the Part when changing category from "'+c+'" to "'+d+'"'),t.trace("  Old class: "+t.Hg(a)+", new class: "+t.Hg(b)+", part: "+a.toString())),a.Yf(),e=a.data,c=a.Ne,f=a.ib,g=a.Jg,h=!0,i=!0,j=!1,a instanceof y&&(h=a.ri,i=a.Xc,j=a.In),b.ki(a),b.cloneProtected(a),a.Fh=d,a.ja(),a.na(),b=a.h,d=!0,null!==b&&(d=b.ab,b.ab=!0),a.Zl=e,null!==e&&a.Wb(),null!==b&&(b.ab=d),e=a.Ne,e!==c&&(a.Xk=c,a.Ne=e),a instanceof y&&(a.ri=h,a.Xc=i,a.In=j,a.Td()&&a.M(64)),a.ib=f,a.Jg=g}function Vi(a){return 0!==(32768&a.Z)}function ym(a,b){a.Z=b?32768|a.Z:-32769&a.Z}function vk(a,b){a.Z=b?65536|a.Z:-65537&a.Z}function Wh(a){return 0!==(131072&a.Z)}function tk(a){a=a.fb,null!==a&&(a.ja(),null!==a.Nb&&a.Nb.ja(),a.Ef())}function Fm(a,b){var c=b.fb;return null!==c?Fm(a,c):b instanceof y&&(c=b.Dd,null!==c)?Fm(a,c):b}function Gm(a,b,c){if(b===c||null===c)return!1;var d=b.fb;return null===d||d!==c&&!Gm(a,d,c)?b instanceof y&&(b=b.Dd,null!==b)?Gm(a,b,c):!1:!0}function Hm(a,b,c){var d,e;return null===b||null===c?null:(d=b.fb,null===d?null:b===c?d:(e=c.fb,null===e?null:d===e?e:Gm(a,c,d)?d:Gm(a,b,e)?e:Hm(a,d,e)))}function gj(a){return a.Va()?(a=a.layer,null!==a&&a.Dc?!1:!0):!1}function ea(a){0===arguments.length?x.call(this,fh):x.call(this,a),this.Ne="Adornment",this.ob=null,this.Z&=-257,this.jh=new E(0/0,0/0),this.zi=new H(F),this.Nb=null}function y(a){0===arguments.length?x.call(this,fh):x.call(this,a),this.sc=new H(B),this.Ao=this.Yk=this.Cr=this.Br=null,this.sr=!0,this.Vs=!1,this.Qs=null,this.Fq=this.tr=!0,this.Gq=K.AH,this.Ad=this.Eh=null,this.es=Im,this.gi=!1}function Mm(a,b){null!==b&&(null===a.Eh&&(a.Eh=new I(Nm)),a.Eh.add(b))}function Om(a,b){if(null!==b){b.ds=null;var c=a.fb;null===c||c.ie||Om(c,c.tl(""))}}function Pm(a,b,c){var d,e,f;Om(a,c),a.sc.contains(b)||(a.sc.add(b),d=a.SF,null!==d&&(e=!0,f=a.h,null!==f&&(e=f.Sa,f.Sa=!0),d(a,b,c),null!==f&&(f.Sa=e)),b.Jc&&(c=b.ca,b=b.fa,null!==c&&null!==b&&c!==b&&(d=!0,f=a.h,null!==f&&(d=f.vd),a=d?b:c,e=d?c:b,a.gi||(a.gi=e),!e.ri||null!==f&&f.ma.yb||(d?c===e&&(e.ri=!1):b===e&&(e.ri=!1)))))}function Qm(a,b,c){var d,e,f;Om(a,c),a.sc.remove(b)&&(d=a.TF,e=a.h,null!==d&&(f=!0,null!==e&&(f=e.Sa,e.Sa=!0),d(a,b,c),null!==e&&(e.Sa=f)),b.Jc&&(c=!0,null!==e&&(c=e.vd),a=c?b.fa:b.ca,b=c?b.ca:b.fa,null!==a&&(a.gi=!1),null===b||b.ri||(0===b.sc.count?(b.gi=null,null!==e&&e.ma.yb||(b.ri=!0)):Pj(b))))}function Pj(a){var b,c,d;if(a.gi=!1,0!==a.sc.count&&(b=!0,c=a.h,null===c||!c.ma.yb)){for(null!==c&&(b=c.vd),c=a.sc.k;c.next();)if(d=c.value,d.Jc)if(b){if(d.ca===a)return a.ri=!1,void 0}else if(d.fa===a)return a.ri=!1,void 0;a.ri=!0}}function Pk(a){null===a.Ad?a.Ad=new wa("string",V):a.Ad.clear(),Tl(a,a,function(a,b){var c=b.Wd;null!==c&&a.Ad.add(c,b)}),0===a.Ad.count&&a.Ad.add("",a)}function Ok(a,b,c){var d=b.Wd;if(null!==d&&(null!==a.Ad&&a.Ad.remove(d),b=a.h,null!==b&&c)){for(c=null,a=a.dF(d);a.next();)null===c&&(c=t.Hb()),c.push(a.value);if(null!==c){for(a=0;a<c.length;a++)b.remove(c[a]);t.Ca(c)}}}function Sm(a,b,c,d,e){if(d>1)for(e=c?a.Uw():a.Gg();e.next();){var f=e.value;f.Jc&&(f=f.DA(a),null===f||f===a||b.contains(f)||(b.add(f),Sm(f,b,c,d-1,f.Xc)))}else Tm(a,b,c,e)}function Tm(a,b,c,d){var e,f;for(e=c?a.Uw():a.Gg();e.next();)f=e.value,d&&f.Yf(),f.Jc&&(f=f.DA(a),null===f||f===a||b.contains(f)||(b.add(f),d&&(f.na(),tk(f),f.kf(!1)),f.Xc&&(f.In=f.Xc,Tm(f,b,c,f.In))));a.Xc=!1}function Um(a,b,c,d,e,f,g){var h,i;for(h=c?a.Uw():a.Gg();h.next();)i=h.value,i.Jc&&(e||(i.Bg||i.hc(),i.updateAdornments()),i=i.DA(a),null!==i&&i!==a&&!b.contains(i)&&(b.add(i),e||(i.kf(!0),tk(i),Uh(f,i,g)),d>2||i.In))&&(i.In=!1,Um(i,b,c,d-1,i.Xc,f,g));a.Xc=!0}function B(){x.call(this,Jg),this.og=null,this.Oh="",this.Ag=this.dr=null,this.di="",this.Ps=null,this.js=this.is=this.hs=!1,this.ur=!0,this.Aq=Ng,this.Nq=0,this.Qq=Ng,this.Rq=0/0,this.Cm=al,this.Es=.5,this.Wi=this.Ce=null,this.Bc=new H(E).freeze(),this.No=this.De=null,this.Bg=!1,this.Fz=null,this.Mz=!1,this.Pn=this.Hi=this.Ta=null,this.pf=0,this.ao=this.Xn=null,this.zi=new H(F),this.Qz=new E,this.SD=this.QD=null,this.Hy=!1,this.R=null}function Kj(a){var b=a.ca,c=a.fa;null!==b&&null!==c?en(a,b.hJ(c)):en(a,null)}function en(a,b){var d,e,f,c=a.Mk;c!==b&&(null!==c&&Dm(c,a),a.Mk=b,null!==b&&Em(b,a),d=a.lA,null!==d&&(e=!0,f=a.h,null!==f&&(e=f.Sa,f.Sa=!0),d(a,c,b),null!==f&&(f.Sa=e)),!a.Bg||a.QD!==c&&a.SD!==c||a.hc())}function Rm(a,b){null===a.Ce&&(a.Ce=new I(y)),a.Ce.add(b),a.ja()}function gn(a){0===a.Bc.count?a.Bg=!1:(a.Bg=!0,a.Xn=a.o(0).copy(),a.ao=a.o(a.ra-1).copy(),hn(a,!1))}function ln(a,b){return Math.abs(b.x-a.x)>Math.abs(b.y-a.y)?(b.x=b.x>=a.x?a.x+9e9:a.x-9e9,b.y=a.y):(b.y=b.y>=a.y?a.y+9e9:a.y-9e9,b.x=a.x),b}function mn(a,b){var c=b.ds;return null===c&&(c=new nn,c.port=b,c.Kc=b.U,b.ds=c),on(c,a)}function jn(a,b){if(null===b)return Yb;var c=a.vb;return c.Wc()&&(void 0===b&&(b=a.sd),null!==b&&(c=b.vb)),c===Ub?Qb:c}function kn(a,b){if(null===b)return Yb;var c=a.zb;return c.Wc()&&(void 0===b&&(b=a.Xd),null!==b&&(c=b.zb)),c===Ub?Qb:c}function pn(a){var b=a.wp;return isNaN(b)&&(a=a.sd,null!==a&&(b=a.wp)),isNaN(b)?0:b}function qn(a){var b=a.mq;return isNaN(b)&&(a=a.Xd,null!==a&&(b=a.mq)),isNaN(b)?0:b}function If(a){var b,c,d,e,f;if(!a.rj)return!1;if(b=a.points.n,c=b.length,4>c)return!1;for(a=ia(a.h,!0,a),d=1;c-2>d;d++)if(e=b[d],f=b[d+1],!rn(a,Math.min(e.x,f.x),Math.min(e.y,f.y),Math.abs(e.x-f.x),Math.abs(e.y-f.y)))return!0;return!1}function un(a,b,c,d,e,f){var g=b.Wm,h=b.Vm,i=tn(b,c,d),j=c,k=d;for(0===e?j+=g:90===e?k+=h:180===e?j-=g:k-=h;i>vn&&tn(b,j,k)===i-wn;)c=j,d=k,0===e?j+=g:90===e?k+=h:180===e?j-=g:k-=h,i-=wn;f?i>vn&&(180===e||0===e?c=Math.floor(c/g)*g+g/2:(90===e||270===e)&&(d=Math.floor(d/h)*h+h/2)):(c=Math.floor(c/g)*g+g/2,d=Math.floor(d/h)*h+h/2),i>vn&&(f=e,j=c,k=d,0===e?(f=90,k+=h):90===e?(f=180,j-=g):180===e?(f=270,k-=h):270===e&&(f=0,j+=g),tn(b,j,k)===i-wn?un(a,b,j,k,f,!1):(j=c,k=d,0===e?(f=270,k-=h):90===e?(f=0,j+=g):180===e?(f=90,k+=h):270===e&&(f=180,j-=g),tn(b,j,k)===i-wn&&un(a,b,j,k,f,!1))),a.jl(c,d)}function zn(a,b,c,d){return a=c-a,isNaN(a)||1/0===a||-1/0===a?0/0:(0>a&&(a=-a),b=d-b,isNaN(b)||1/0===b||-1/0===b?0/0:(0>b&&(b=-b),K.sb(a,0)?b:K.sb(b,0)?a:Math.sqrt(a*a+b*b)))}function xn(a,b,c,d){var f,e=a.ra;2>e||(c?(f=a.o(1),c=f.x-d.x,d=f.y-d.y,f=zn(b.x,b.y,c,d),0!==f&&(e=2===e?.5*f:f,a=pn(a),a>e&&(a=e),c=a*(c-b.x)/f,a=a*(d-b.y)/f,b.x+=c,b.y+=a)):(f=a.o(e-2),c=f.x-d.x,d=f.y-d.y,f=zn(b.x,b.y,c,d),0!==f&&(e=2===e?.5*f:f,a=qn(a),a>e&&(a=e),c=a*(b.x-c)/f,a=a*(b.y-d)/f,b.x-=c,b.y-=a)))}function yn(a,b,c,d){var e,f,g;for(e=a.ra,f=b;K.sb(b.x,f.x)&&K.sb(b.y,f.y);){if(c>=e)return e-1;f=a.o(c++)}if(!K.sb(b.x,f.x)&&!K.sb(b.y,f.y))return c-1;for(g=f;K.sb(b.x,f.x)&&K.sb(f.x,g.x)&&(!d||(b.y>=f.y?f.y>=g.y:f.y<=g.y))||K.sb(b.y,f.y)&&K.sb(f.y,g.y)&&(!d||(b.x>=f.x?f.x>=g.x:f.x<=g.x));){if(c>=e)return e-1;g=a.o(c++)}return c-2}function An(a,b,c,d,e,f,g){var h,i,j,k,l,m;if(!g&&fn(a)&&(g=[],h=0,a.Va()&&(h=Bn(a,e,f,g)),i=e.x,i=e.y,h>0))if(K.I(e.y,f.y))if(e.x<f.x)for(j=0;h>j;){for(k=Math.max(e.x,Math.min(g[j++]-5,f.x-10)),b.lineTo(k+c,f.y+d),i=k+c,l=Math.min(k+10,f.x);h>j&&(m=g[j],l+10>m);)j++,l=Math.min(m+5,f.x);m=(k+l)/2+c,m=f.y-10+d,k=l+c,l=f.y+d,a.Je===Mg?P(b,k,l,!1,!1):Q(b,i,m,k,m,k,l)}else for(j=h-1;j>=0;){for(k=Math.min(e.x,Math.max(g[j--]+5,f.x+10)),b.lineTo(k+c,f.y+d),i=k+c,l=Math.max(k-10,f.x);j>=0&&(m=g[j],m>l-10);)j--,l=Math.max(m-5,f.x);m=f.y-10+d,k=l+c,l=f.y+d,a.Je===Mg?P(b,k,l,!1,!1):Q(b,i,m,k,m,k,l)}else if(K.I(e.x,f.x))if(e.y<f.y)for(j=0;h>j;){for(k=Math.max(e.y,Math.min(g[j++]-5,f.y-10)),b.lineTo(f.x+c,k+d),i=k+d,l=Math.min(k+10,f.y);h>j&&(m=g[j],l+10>m);)j++,l=Math.min(m+5,f.y);m=f.x-10+c,k=f.x+c,l+=d,a.Je===Mg?P(b,k,l,!1,!1):Q(b,m,i,m,l,k,l)}else for(j=h-1;j>=0;){for(k=Math.min(e.y,Math.max(g[j--]+5,f.y+10)),b.lineTo(f.x+c,k+d),i=k+d,l=Math.max(k-10,f.y);j>=0&&(m=g[j],m>l-10);)j--,l=Math.max(m-5,f.y);m=f.x-10+c,k=f.x+c,l+=d,a.Je===Mg?P(b,k,l,!1,!1):Q(b,m,i,m,l,k,l)}b.lineTo(f.x+c,f.y+d)}function Bn(a,b,c,d){var f,g,h,i,j,e=a.h;if(null===e||b.O(c))return 0;for(e=e.pn;e.next();)if(f=e.value,null!==f&&f.visible)for(f=f.mb.n,g=f.length,h=0;g>h;h++){if(i=f[h],i===a)return 0<d.length&&d.sort(function(a,b){return a-b}),d.length;i instanceof B&&i.Va()&&fn(i)&&(j=i.Jj(),j.P()&&a.Jj().ag(j)&&!a.usesSamePort(i)&&(j=i.path,null!==j&&j.Cl()&&Cn(b,c,d,i)))}return 0<d.length&&d.sort(function(a,b){return a-b}),d.length}function Cn(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r;for(e=K.I(a.y,b.y),f=d.ra,g=d.o(0),h=t.N(),i=1;f>i;i++){j=d.o(i),f-1>i&&(k=d.o(i+1),g.y===j.y&&j.y===k.y?(j.x>g.x&&k.x>j.x||j.x<g.x&&k.x<j.x)&&(j=k,i++):g.x===j.x&&j.x===k.x&&(j.y>g.y&&k.y>j.y||j.y<g.y&&k.y<j.y)&&(j=k,i++));a:{if(k=h,l=a.x,m=a.y,n=b.x,o=b.y,p=g.x,g=g.y,q=j.x,r=j.y,K.I(l,n)){if(!K.I(m,o)&&K.I(g,r)&&Math.min(m,o)<g&&Math.max(m,o)>g&&Math.min(p,q)<l&&Math.max(p,q)>l&&!K.I(p,q)){k.x=l,k.y=g,k=!0;break a}}else if(K.I(m,o)&&K.I(p,q)&&Math.min(l,n)<p&&Math.max(l,n)>p&&Math.min(g,r)<m&&Math.max(g,r)>m&&!K.I(g,r)){k.x=p,k.y=m,k=!0;break a}k.x=0,k.y=0,k=!1}k&&(e?c.push(h.x):c.push(h.y)),g=j}t.B(h)}function fn(a){return a=a.Je,a===Lg||a===Mg}function hn(a,b){if(b||fn(a)){var c=a.h;null===c||c.bm.contains(a)||null===a.Fz||c.bm.add(a,a.Fz)}}function Og(a,b){var d,e,f,g,h,i,j,c=a.layer;if(null!==c&&c.visible&&!c.Dc&&(d=c.h,null!==d))for(e=!1,d=d.pn;d.next();)if(f=d.value,f.visible)if(f===c)for(e=!0,g=!1,f=f.mb.n,h=f.length,i=0;h>i;i++)j=f[i],j instanceof B&&(j===a?g=!0:g&&Dn(a,j,b));else if(e)for(f=f.mb.n,h=f.length,i=0;h>i;i++)j=f[i],j instanceof B&&Dn(a,j,b)}function Dn(a,b,c){if(null!==b&&fn(b)&&null!==b.Ta){var d=b.Jj();d.P()&&(a.Jj().ag(d)||c.ag(d))&&(a.usesSamePort(b)||b.ef())}}function dn(a){var c,d,e,f,g,h,i,j,k,b=a.og;if(null!==b&&(c=a.Ag,null!==c)){d=a.Oh,e=a.di;a:{if(null!==c&&null!==b.Eh)for(a=b.Eh.k;a.next();)if(f=a.value,f.Wp===b&&f.Qt===c&&f.Ax===d&&f.Bx===e||f.Wp===c&&f.Qt===b&&f.Ax===e&&f.Bx===d){a=f;break a}a=null}for(g=f=null,h=b.sc.n,i=h.length,j=0;i>j;j++)k=h[j],(k.og===b&&k.Oh===d&&k.Ag===c&&k.di===e||k.og===c&&k.Oh===e&&k.Ag===b&&k.di===d)&&(null===g?g=k:(null===f&&(f=new H(B),f.add(g)),f.add(k)));if(null!==f)for(null===a&&(a=new Nm,a.Wp=b,a.Ax=d,a.Qt=c,a.Bx=e,Mm(b,a),Mm(c,a)),a.links=f,j=0;j<f.count;j++)if(k=f.n[j],0===k.pf){for(b=1,c=0;c<f.count;c++)Math.abs(f.n[c].pf)===b&&(b++,c=-1);k.Pn=a,k.pf=k.ca===a.Wp?b:-b,b=k.h,(null===b||b.sf)&&k.hc()}}}function cn(a){var c,d,e,f,b=a.Pn;if(null!==b)if(c=a.pf,a.Pn=null,a.pf=0,b.links.remove(a),2>b.links.count)1===b.links.count&&(c=b.links.n[0],c.Pn=null,c.pf=0,c.hc()),c=b.Wp,null!==b&&null!==c.Eh&&c.Eh.remove(b),c=b.Qt,null!==b&&null!==c.Eh&&c.Eh.remove(b);else for(c=Math.abs(c),a=0===c%2,b=b.links.k;b.next();)d=b.value,e=Math.abs(d.pf),f=0===e%2,e>c&&a===f&&(d.pf=0<d.pf?d.pf-2:d.pf+2,d.hc())}function Nm(){t.Fc(this),this.links=this.Bx=this.Qt=this.Ax=this.Wp=null}function Rj(){t.Fc(this),this.group=null,this.Cp=!0,this.abort=!1,this.Tf=this.Sf=1,this.Kr=this.Jr=-1,this.xd=this.Fd=8,this.rc=null,this.sH=!1,this.QG=22,this.OF=111}function Fn(a,b,c){return a.Sf<=b&&b<=a.Jr&&a.Tf<=c&&c<=a.Kr}function tn(a,b,c){return Fn(a,b,c)?(b-=a.Sf,b/=a.Fd,c-=a.Tf,c/=a.xd,a.rc[0|b][0|c]):0}function Uj(a,b,c){Fn(a,b,c)&&(b-=a.Sf,b/=a.Fd,c-=a.Tf,c/=a.xd,a.rc[0|b][0|c]=ja)}function Tj(a){var b,c;if(null!==a.rc)for(b=0;b<=a.Mm;b++)for(c=0;c<=a.Nm;c++)a.rc[b][c]>=vn&&(a.rc[b][c]|=ka)}function rn(a,b,c,d,e){if(b>a.Jr||b+d<a.Sf||c>a.Kr||c+e<a.Tf)return!0;b=0|(b-a.Sf)/a.Fd,c=0|(c-a.Tf)/a.xd,d=0|Math.max(0,d)/a.Fd+1;var f=0|Math.max(0,e)/a.xd+1;if(0>b&&(d+=b,b=0),0>c&&(f+=c,c=0),0>d||0>f)return!0;for(e=0|Math.min(b+d-1,a.Mm),d=0|Math.min(c+f-1,a.Nm);e>=b;b++)for(f=c;d>=f;f++)if(a.rc[b][f]===ja)return!1;return!0}function Gn(a,b,c,d,e,f,g,h,i){var j,k,l;if(!(f>b||b>g||h>c||c>i)){if(j=0|b,k=0|c,l=a.rc[j][k],l>=vn&&ka>l)for(e?k+=d:j+=d,l+=wn;j>=f&&g>=j&&k>=h&&i>=k&&!(l>=a.rc[j][k]);)a.rc[j][k]=l,l+=wn,e?k+=d:j+=d;if(j=e?k:j,e)if(d>0)for(c+=d;j>c;c+=d)Gn(a,b,c,1,!e,f,g,h,i),Gn(a,b,c,-1,!e,f,g,h,i);else for(c+=d;c>j;c+=d)Gn(a,b,c,1,!e,f,g,h,i),Gn(a,b,c,-1,!e,f,g,h,i);else if(d>0)for(b+=d;j>b;b+=d)Gn(a,b,c,1,!e,f,g,h,i),Gn(a,b,c,-1,!e,f,g,h,i);else for(b+=d;b>j;b+=d)Gn(a,b,c,1,!e,f,g,h,i),Gn(a,b,c,-1,!e,f,g,h,i)}}function Hn(a,b,c,d,e,f,g,h,i,j,k){for(var l=0|b,m=0|c,n=a.rc[l][m];0===n&&l>h&&i>l&&m>j&&k>m;)if(g?m+=f:l+=f,n=a.rc[l][m],1>=Math.abs(l-d)&&1>=Math.abs(m-e))return a.abort=!0,0;for(l=0|b,m=0|c,n=a.rc[l][m],b=vn,a.rc[l][m]=b;0===n&&l>h&&i>l&&m>j&&k>m;)g?m+=f:l+=f,n=a.rc[l][m],a.rc[l][m]=b,b+=wn;return g?m:l}function sn(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p;if(null!==a.rc&&(a.abort=!1,g=b.x,h=b.y,Fn(a,g,h)&&(g-=a.Sf,g/=a.Fd,h-=a.Tf,h/=a.xd,i=d.x,j=d.y,Fn(a,i,j))))if(i-=a.Sf,i/=a.Fd,j-=a.Tf,j/=a.xd,1>=Math.abs(g-i)&&1>=Math.abs(h-j))a.abort=!0;else if(k=f.x,b=f.y,d=f.x+f.width,l=f.y+f.height,k-=a.Sf,k/=a.Fd,b-=a.Tf,b/=a.xd,d-=a.Sf,d/=a.Fd,l-=a.Tf,l/=a.xd,f=Math.max(0,Math.min(a.Mm,0|k)),d=Math.min(a.Mm,Math.max(0,0|d)),b=Math.max(0,Math.min(a.Nm,0|b)),l=Math.min(a.Nm,Math.max(0,0|l)),g=0|g,h=0|h,i=0|i,j=0|j,k=g,m=h,n=0===c||90===c?1:-1,(c=90===c||270===c)?m=Hn(a,g,h,i,j,n,c,f,d,b,l):k=Hn(a,g,h,i,j,n,c,f,d,b,l),!a.abort){a:{for(c=0===e||90===e?1:-1,e=90===e||270===e,n=0|i,o=0|j,p=a.rc[n][o];0===p&&n>f&&d>n&&o>b&&l>o;)if(e?o+=c:n+=c,p=a.rc[n][o],1>=Math.abs(n-g)&&1>=Math.abs(o-h)){a.abort=!0;break a}for(n=0|i,o=0|j,p=a.rc[n][o],a.rc[n][o]=En;0===p&&n>f&&d>n&&o>b&&l>o;)e?o+=c:n+=c,p=a.rc[n][o],a.rc[n][o]=En}a.abort||(Gn(a,k,m,1,!1,f,d,b,l),Gn(a,k,m,-1,!1,f,d,b,l),Gn(a,k,m,1,!0,f,d,b,l),Gn(a,k,m,-1,!0,f,d,b,l))}}function nn(){t.Fc(this),this.port=this.Kc=null,this.Pg=[],this.Vp=!1}function In(a,b,c,d){switch(b=b.offsetY){case t.Yc:return 90;case t.Pc:return 180;case t.hd:return 270;case t.Zc:return 0}switch(b){case t.Yc|t.hd:return c>180?270:90;case t.Pc|t.Zc:return c>90&&270>=c?180:0}switch(a=180*Math.atan2(a.height,a.width)/Math.PI,b){case t.Pc|t.hd:return c>a&&180+a>=c?180:270;case t.hd|t.Zc:return c>180-a&&360-a>=c?270:0;case t.Zc|t.Yc:return c>a&&180+a>=c?90:0;case t.Yc|t.Pc:return c>180-a&&360-a>=c?180:90;case t.Pc|t.hd|t.Zc:return c>90&&180+a>=c?180:c>180+a&&360-a>=c?270:0;case t.hd|t.Zc|t.Yc:return c>180&&360-a>=c?270:c>a&&180>=c?90:0;case t.Zc|t.Yc|t.Pc:return c>a&&180-a>=c?90:c>180-a&&270>=c?180:0;case t.Yc|t.Pc|t.hd:return c>180-a&&180+a>=c?180:c>180+a?270:90}return d&&b!==(t.Pc|t.hd|t.Zc|t.Yc)&&(c-=15,0>c&&(c+=360)),c>a&&180-a>c?90:c>=180-a&&180+a>=c?180:c>180+a&&360-a>c?270:0}function on(a,b){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,s,u,r,v,w,x,y,c=a.Pg;if(0===c.length){a:if(!a.Vp){if(c=a.Vp,a.Vp=!0,e=null,f=a.Kc,f instanceof z&&!f.ie){if(!f.pa.P()){a.Vp=c;break a}e=f,d=e.cF()}else d=a.Kc.dF();for(g=a.Pg.length=0,h=a.port.wb(Vb,t.N()),i=a.port.wb(bc,t.N()),f=t.wk(h.x,h.y,0,0),f.yj(i),t.B(h),t.B(i),h=t.qc(f.x+f.width/2,f.y+f.height/2),d=d.k;d.next();)i=d.value,i.Va()&&(j=Qb,k=i.sd===a.port||i.ca.Al(e),j=k?jn(i,a.port):kn(i,a.port),j.Gp()&&(k=k?i.Xd:i.sd,null!==k)&&(l=k.U,null!==l&&(k=i.computeOtherPoint(l,k),l=h.nj(k),j=In(f,j,l,i.pc),0===j?(m=t.Zc,l>180&&(l-=360)):m=90===j?t.Yc:180===j?t.Pc:t.hd,(j=a.Pg[g])?(j.link=i,j.angle=l,j.le=m):(j=new Jn(i,l,m),a.Pg[g]=j),j.zx.set(k),g++)));for(t.B(h),a.Pg.sort(nn.prototype.UJ),e=a.Pg.length,h=-1,g=d=0;e>g;g++)j=a.Pg[g],null!==j&&(j.le!==h&&(h=j.le,d=0),j.Ap=d,d++);for(h=-1,d=0,g=e-1;g>=0;g--)j=a.Pg[g],null!==j&&(j.le!==h&&(h=j.le,d=j.Ap+1),j.$m=d);if(g=a.Pg,k=a.port,e=a.Kc.fK,h=t.N(),d=t.N(),i=t.N(),j=t.N(),k.wb(Vb,h),k.wb(Xb,d),k.wb(bc,i),k.wb($b,j),n=m=l=k=0,e===Lm)for(o=0;o<g.length;o++)if(p=g[o],null!==p)switch(q=p.link.computeThickness(),p.le){case t.Yc:m+=q;break;case t.Pc:n+=q;break;case t.hd:k+=q;break;default:case t.Zc:l+=q}for(r=0,v=0,w=u=0,x=1,o=0;o<g.length;o++)if(p=g[o],null!==p){if(r!=p.le){switch(r=p.le){case t.Yc:s=i,u=j;break;case t.Pc:s=j,u=h;break;case t.hd:s=h,u=d;break;default:case t.Zc:s=d,u=i}switch(v=u.x-s.x,u=u.y-s.y,r){case t.Yc:m>Math.abs(v)?(x=Math.abs(v)/m,m=Math.abs(v)):x=1;break;case t.Pc:n>Math.abs(u)?(x=Math.abs(u)/n,n=Math.abs(u)):x=1;break;case t.hd:k>Math.abs(v)?(x=Math.abs(v)/k,k=Math.abs(v)):x=1;break;default:case t.Zc:l>Math.abs(u)?(x=Math.abs(u)/l,l=Math.abs(u)):x=1}w=0}if(y=p.Mp,e===Lm){switch(q=p.link.computeThickness(),q*=x,y.set(s),r){case t.Yc:y.x=s.x+v/2+m/2-w-q/2;break;case t.Pc:y.y=s.y+u/2+n/2-w-q/2;break;case t.hd:y.x=s.x+v/2-k/2+w+q/2;break;default:case t.Zc:y.y=s.y+u/2-l/2+w+q/2}w+=q}else q=.5,e===Im&&(q=(p.Ap+1)/(p.$m+1)),y.x=s.x+v*q,y.y=s.y+u*q}for(t.B(h),t.B(d),t.B(i),t.B(j),s=a.Pg,g=0;g<s.length;g++)e=s[g],null!==e&&(e.Sw=a.computeEndSegmentLength(e));a.Vp=c,t.oc(f)}c=a.Pg}for(f=0;f<c.length;f++)if(s=c[f],null!==s&&s.link===b)return s;return null}function Jn(a,b,c){this.link=a,this.angle=b,this.le=c,this.zx=new E,this.$m=this.Ap=0,this.Mp=new E,this.Sw=0}function z(a){0===arguments.length?y.call(this,fh):y.call(this,a),this.Mr=new I(x),this.vm=new I(z),this.al=this.Nr=this.Lr=null,this.Ts=!1,this.qr=!0,this.Us=!1,this.Nb=this.Is=null,this.Jq=!1,this.Kq=!0,this.Lq=!1,this.$d=new ze,this.$d.group=this}function Em(a,b){var c,d,e;a.Mr.add(b)&&(b instanceof z&&a.vm.add(b),c=a.ZF,null!==c&&(d=!0,e=a.h,null!==e&&(d=e.Sa,e.Sa=!0),c(a,b),null!==e&&(e.Sa=d))),c=a.Nb,null===c&&(c=a),c.ja()}function Dm(a,b){var c,d,e;a.Mr.remove(b)&&(b instanceof z&&a.vm.remove(b),c=a.$F,null!==c&&(d=!0,e=a.h,null!==e&&(d=e.Sa,e.Sa=!0),c(a,b),null!==e&&(e.Sa=d))),c=a.Nb,null===c&&(c=a),c.ja()}function Kn(a,b){var c,d,e;for(c=a.Nc;c.next();)if(d=c.value,d.kf(!1),d instanceof z&&(e=d,e.ie&&(e.pu=e.ie,Kn(e,b))),d instanceof y)d.Ef(b);else if(d instanceof B)for(d=d.tj;d.next();)d.value.Ef(b);a.ie=!1}function Ln(a,b,c,d){var e,f,g;for(e=a.Nc;e.next();)if(f=e.value,f.kf(!0),f instanceof z&&(g=f,g.pu&&(g.pu=!1,Ln(g,b,c,d))),f instanceof y)f.Ef(b),Uh(c,f,d);else if(f instanceof B)for(f=f.tj;f.next();)f.value.Ef(b);a.ie=!0}function $g(){V.call(this),this.Ue=K.uq,this.rs=new F(0/0,0/0,0/0,0/0)}function ze(){0<arguments.length&&t.gd(ze),t.Fc(this),this.lz=this.W=null,this.lr=this.nr=!0,this.vr=this.wo=!1,this.Cq=new E(0,0).freeze(),this.rz=!0,this.Bz=null,this.or=!0
}function Nn(a,b,c,d,e,f,g,h){for(c=c.k;c.next();){var i=c.value;d&&!i.Hp||e&&!e(i)||i.canLayout()&&(f&&i instanceof y?i.oi||(i instanceof z&&null===i.ic?Nn(a,b,i.Nc,!1,e,f,g,h):b.add(i)):g&&i instanceof B?b.add(i):!h||!i.Td()||i instanceof y||b.add(i))}}function Ea(){t.Fc(this),this.$d=null,this.clear()}function Mn(a,b){e&&null!==b&&t.l(b,ze,Ea,"setLayout"),a.$d=b}function On(a,b){if(null===b)return!1;var c=a.vertexes.remove(b);return c&&(a.dB.remove(b.Kc),b.network=null),c}function Pn(a,b){null!==b&&a.edges.remove(b)&&(a.SA.remove(b.link),b.network=null)}function Qn(a){var b,c,d;for(b=t.Hb(),c=a.edges.k;c.next();)d=c.value,null!==d.fromVertex&&null!==d.toVertex||b.push(d);for(c=b.length,d=0;c>d;d++)a.mp(b[d]);t.Ca(b)}function Rn(a,b,c){var d,e;if(null!==c&&c.network!==b){for(On(a,c),b.kl(c),d=c.xc;d.next();)e=d.value,e.network!==b&&(Pn(a,e),b.Xo(e),Rn(a,b,e.fromVertex));for(d=c.nc;d.next();)e=d.value,e.network!==b&&(Pn(a,e),b.Xo(e),Rn(a,b,e.toVertex))}}function Fa(){t.Fc(this),this.network=null,this.V=new F(0,0,10,10).freeze(),this.Q=new E(5,5).freeze(),this.clear()}function Ha(){t.Fc(this),this.network=null,this.clear()}function ak(){0<arguments.length&&t.gd(ak),ze.call(this),this.Gt=!0,this.Ws=this.Xs=0/0,this.Ej=new ra(0/0,0/0).freeze(),this.$h=new ra(10,10).freeze(),this.Ae=hl,this.jd=fl,this.Zh=bl,this.Hh=Tn}function jl(){0<arguments.length&&t.gd(jl),ze.call(this),this.cz=this.fo=this.Hd=0,this.Yq=360,this.bz=vl,this.Ok=0,this.HC=vl,this.Lu=this.Dg=this.$D=0,this.nw=new Un,this.Ou=this.zm=0,this.OH=600,this.fs=0/0,this.Eq=1,this.Hs=0,this.Js=360,this.jd=vl,this.ua=rl,this.Zh=ol,this.Hh=Sn,this.$h=6,this.Yr=El}function co(a,b,c,d,e){var h,i,j,k,l,f=a.Yq,g=a.Hd;for(a=a.Dg,d=d*Math.PI/180,c=c*Math.PI/180,h=b.length,i=0;h>i;i++)j=d+(e===rl?i*c/(f>=360?h:h-1):-(i*c)/h),k=b.wa(i),l=g*Math.tan(j)/a,l=Math.sqrt((g*g+a*a*l*l)/(1+l*l)),k.Ia=l*Math.cos(j),k.Ua=l*Math.sin(j),k.actualAngle=180*j/Math.PI}function bo(a,b,c,d){var h,i,j,k,l,e=a.Hd,f=a.Dg,g=a.Ok;for(c=c*Math.PI/180,h=b.length,i=0;h>i;i++)j=b.wa(i),k=b.wa(i===h-1?0:i+1),l=f*Math.sin(c),j.Ia=e*Math.cos(c),j.Ua=l,j.actualAngle=180*c/Math.PI,isNaN(j.diameter)&&Xn(j,0),isNaN(k.diameter)&&Xn(k,0),j=$n(a,e,f,d===rl?c:-c,(j.diameter+k.diameter)/2+g),c+=d===rl?j:-j}function ao(a,b,c,d){var h,i,j,e=a.Hd,f=a.Dg,g=a.Lu;for(c=c*Math.PI/180,h=b.length,i=0;h>i;i++)j=b.wa(i),j.Ia=e*Math.cos(c),j.Ua=f*Math.sin(c),j.actualAngle=180*c/Math.PI,j=$n(a,e,f,d===rl?c:-c,g),c+=d===rl?j:-j}function eo(a,b,c,d,e){var f=a.Ou,f=a.Yq;if(a.zm=0,a.nw=new Un,360>c){for(f=d+(e===rl?f:-f);0>f;)f+=360;f%=360,f>180&&(f-=360),f*=Math.PI/180,a.Ou=f,fo(a,b,c,d,e)}else ho(a,b,c,d,e);a.nw.commit(b)}function ho(a,b,c,d,e){var l,m,n,f=a.Hd,g=a.Ok,h=a.fo,i=f*Math.cos(d*Math.PI/180),j=a.Dg*Math.sin(d*Math.PI/180),k=b.Pe();if(3===k.length)k[0].Ia=f,k[0].Ua=0,k[1].Ia=k[0].Ia-k[0].width/2-k[1].width/2-g,k[1].y=k[0].y,k[2].Ia=(k[0].Ia+k[1].Ia)/2,k[2].y=k[0].y-k[2].height-g;else if(4===k.length)k[0].Ia=f,k[0].Ua=0,k[2].Ia=-k[0].Ia,k[2].Ua=k[0].Ua,k[1].Ia=0,k[1].y=Math.min(k[0].y,k[2].y)-k[1].height-g,k[3].Ia=0,k[3].y=Math.max(k[0].y+k[0].height+g,k[2].y+k[2].height+g);else{for(f=0;f<k.length&&(k[f].Ia=i,k[f].Ua=j,!(f>=k.length-1));f++)l=io(a,i,j,k,f,e),l[0]||(l=jo(a,i,j,k,f,e)),i=l[1],j=l[2];if(a.zm++,!(23<a.zm)){if(i=k[0].Ia,j=k[0].Ua,f=k[k.length-1].Ia,l=k[k.length-1].Ua,m=Math.abs(i-f)-((k[0].width+k[k.length-1].width)/2+g),n=Math.abs(j-l)-((k[0].height+k[k.length-1].height)/2+g),g=0,1>Math.abs(n)?Math.abs(i-f)<(k[0].width+k[k.length-1].width)/2&&(g=0):g=n>0?n:1>Math.abs(m)?0:m,m=!1,m=Math.abs(f)>Math.abs(l)?f>0!=j>l:l>0!=f>i,(m=e===rl?m:!m)&&(g=-Math.abs(g),g=Math.min(g,-k[k.length-1].width),g=Math.min(g,-k[k.length-1].height)),i=a.nw,g>0&&0>i.xp||Math.abs(g)<Math.abs(i.xp)&&!(0>g&&0<i.xp))for(i.xp=g,i.Jn=[],i.oq=[],j=0;j<k.length;j++)i.Jn[j]=k[j].Ub.x,i.oq[j]=k[j].Ub.y;1<Math.abs(g)&&(a.Hd=8>a.zm?a.Hd-g/(2*Math.PI):5>k.length&&g>10?a.Hd/2:a.Hd-(g>0?1.7:-2.3),a.Dg=a.Hd*h,ho(a,b,c,d,e))}}}function fo(a,b,c,d,e){var f,g,h,i,j,k,l,m;for(f=a.Hd,g=a.Dg,h=a.fo,i=f*Math.cos(d*Math.PI/180),j=g*Math.sin(d*Math.PI/180),k=b.Pe(),l=0;l<k.length&&(k[l].Ia=i,k[l].Ua=j,!(l>=k.length-1));l++)m=io(a,i,j,k,l,e),m[0]||(m=jo(a,i,j,k,l,e)),i=m[1],j=m[2];if(a.zm++,!(23<a.zm)){if(i=Math.atan2(j,i),i=e===rl?a.Ou-i:i-a.Ou,i=Math.abs(i)<Math.abs(i-2*Math.PI)?i:i-2*Math.PI,f=i*(f+g)/2,g=a.nw,Math.abs(f)<Math.abs(g.xp))for(g.xp=f,g.Jn=[],g.oq=[],i=0;i<k.length;i++)g.Jn[i]=k[i].Ub.x,g.oq[i]=k[i].Ub.y;1<Math.abs(f)&&(a.Hd=8>a.zm?a.Hd-f/(2*Math.PI):a.Hd-(f>0?1.7:-2.3),a.Dg=a.Hd*h,fo(a,b,c,d,e))}}function io(a,b,c,d,e,f){var k,g=a.Hd,h=a.Dg,i=0,j=0;if(a=(d[e].width+d[e+1].width)/2+a.Ok,k=!1,c>=0!=(f===rl)){if(i=b+a,i>g){if(i=b-a,-g>i)return b=[!1],b[1]=i,b[2]=j,b;k=!0}}else if(i=b-a,-g>i){if(i=b+a,i>g)return b=[!1],b[1]=i,b[2]=j,b;k=!0}return j=Math.sqrt(1-Math.min(1,i*i/(g*g)))*h,0>c!==k&&(j=-j),b=Math.abs(c-j)>(d[e].height+d[e+1].height)/2?[!1]:[!0],b[1]=i,b[2]=j,b}function jo(a,b,c,d,e,f){var k,g=a.Hd,h=a.Dg,i=0,j=0;if(a=(d[e].height+d[e+1].height)/2+a.Ok,k=!1,b>=0!=(f===rl)){if(j=c-a,-h>j){if(j=c+a,j>h)return b=[!1],b[1]=i,b[2]=j,b;k=!0}}else if(j=c+a,j>h){if(j=c-a,-h>j)return b=[!1],b[1]=i,b[2]=j,b;k=!0}return i=Math.sqrt(1-Math.min(1,j*j/(h*h)))*g,0>b!==k&&(i=-i),b=Math.abs(b-i)>(d[e].width+d[e+1].width)/2?[!1]:[!0],b[1]=i,b[2]=j,b}function Un(){this.xp=-1/0,this.oq=this.Jn=null}function Zn(a,b,c,d,e){var h,g,i,j,f=a.OH;if(.001>Math.abs(a.fo-1))return void 0!==d&&void 0!==e?e*b:2*Math.PI*b;for(a=b>c?Math.sqrt(b*b-c*c)/b:Math.sqrt(c*c-b*b)/c,g=0,h=void 0!==d&&void 0!==e?e/(f+1):Math.PI/(2*(f+1)),i=0;f>=i;i++)j=Math.sin(void 0!==d&&void 0!==e?d+i*e/f:i*Math.PI/(2*f)),g+=Math.sqrt(1-a*a*j*j)*h;return void 0!==d&&void 0!==e?(b>c?b:c)*g:4*(b>c?b:c)*g}function Yn(a,b,c,d,e){return a=void 0!==d&&void 0!==e?Zn(a,1,c,d,e):Zn(a,1,c),b/a}function $n(a,b,c,d,e){var f,g,h,i;if(.001>Math.abs(a.fo-1))return e/b;for(f=b>c?Math.sqrt(b*b-c*c)/b:Math.sqrt(c*c-b*b)/c,g=0,a=2*Math.PI/(700*a.network.vertexes.count),b>c&&(d+=Math.PI/2),h=0;;h++)if(i=Math.sin(d+h*a),g+=(b>c?b:c)*Math.sqrt(1-f*f*i*i)*a,g>=e)return h*a;return 0}function Vn(){Ea.call(this)}function Wn(){Fa.call(this),this.actualAngle=this.diameter=0/0}function Xn(a,b){var d,c=a.network;if(null===c)return 0/0;if(c=c.ic,null===c)return 0/0;if(c.Xe===wl)if(c.Rt===Dl)a.diameter=Math.max(a.width,a.height);else{if(c=Math.abs(Math.sin(b)),d=Math.abs(Math.cos(b)),0===c)return a.width;if(0===d)return a.height;a.diameter=Math.min(a.height/c,a.width/d)}else a.diameter=c.Rt===Dl?Math.max(a.width,a.height):Math.sqrt(a.width*a.width+a.height*a.height);return a.diameter}function lo(){Ha.call(this)}function mo(){0<arguments.length&&t.gd(mo),ze.call(this),this.Cg=null,this.xr=0,this.kg=new ra(100,100).freeze(),this.Dq=!1,this.Yh=!0,this.Gh=!1,this.Fo=100,this.$q=1,this.Sh=1e3,this.$n=.05,this.Zn=50,this.Wn=150,this.Yn=0,this.Uq=10,this.Tq=5}function ro(a,b,c){return e&&(t.q(b,mo,"computeClusterLayoutIterations:level"),t.q(c,mo,"computeClusterLayoutIterations:maxiter")),Math.max(Math.min(a.network.vertexes.count,c*(b+1)/11),10)}function oo(a,b,c){var d,f,g;if(e&&(t.q(b,mo,"layoutClusters:level"),t.q(c,mo,"layoutClusters:maxiter")),so(a,b)){for(d=a.Sh,a.Sh*=1+1/(b+1),f=to(a,b),g=Math.max(0,ro(a,b,c)),a.xx+=g,oo(a,b+1,c),qo(a,g),uo(a,f,b),c=a.Cg,null===c?c=new H(vo):c.clear(),c.Ve(f.vertexes),c.sort(function(a,b){return null===a||null===b||a===b?0:b.eg-a.eg}),f=c.k;f.next();)wo(a,f.value,b);a.Sh=d}}function so(a,b){var c,d;if(e&&t.q(b,mo,"hasClusters:level"),b>10||3>a.network.vertexes.count)return!1;for(null===a.Cg?a.Cg=new H(vo):a.Cg.clear(),a.Cg.Ve(a.network.vertexes),c=a.Cg,c.sort(function(a,b){return null===a||null===b||a===b?0:b.eg-a.eg}),d=c.count-1;d>=0&&1>=c.n[d].eg;)d--;return 1<c.count-d}function to(a,b){var c,d,f,g,h,i,j,k,l,m,n,o,p;for(e&&t.q(b,mo,"pushSubNetwork:level"),c=a.network,d=new no,f=a.Cg.k;f.next()&&(g=f.value,1<g.eg);)d.kl(g),h={XB:g.eg,ZB:g.width,WB:g.height,vH:g.Q.x,wH:g.Q.y},null===g.xh&&(g.xh=new H),g.xh.add(h),g.uB=g.xh.count-1;for(i=c.edges.k;i.next();)j=i.value,j.fromVertex.network===d&&j.toVertex.network===d?d.Xo(j):j.fromVertex.network===d?(k=j.fromVertex.Ym,null===k&&(k=new H(vo),j.fromVertex.Ym=k),k.add(j.toVertex),j.fromVertex.eg--,j.fromVertex.tk+=j.toVertex.tk):j.toVertex.network===d&&(k=j.toVertex.Ym,null===k&&(k=new H(vo),j.toVertex.Ym=k),k.add(j.fromVertex),j.toVertex.eg--,j.toVertex.tk+=j.fromVertex.tk);for(i=d.edges.k;i.next();)j=i.value,j.length*=Math.max(1,K.sqrt((j.fromVertex.tk+j.toVertex.tk)/(4*b+1)));for(f=d.vertexes.k;f.next();)if(g=f.value,k=g.Ym,null!==k&&0<k.count&&(h=g.xh.n[g.xh.count-1],h=h.XB-g.eg,!(0>=h))){for(l=0,m=0,n=k.count-h;n<k.count;n++){for(o=k.n[n],j=null,i=o.edges.k;i.next();)if(p=i.value,p.lJ(o)===g){j=p;break}null!==j&&(m+=j.length,l+=o.width*o.height)}k=g.Ia,i=g.Ua,j=g.width,n=g.height,o=g.Q,p=j*n,1>p&&(p=1),l=K.sqrt((l+p+4*m*m/(h*h))/p),h=(l-1)*j/2,l=(l-1)*n/2,g.Ub=new F(k-o.x-h,i-o.y-l,j+2*h,n+2*l),g.focus=new E(o.x+h,o.y+l)}return a.network=d,c}function uo(a,b,c){var d,f,g,h;for(e&&(t.l(b,no,mo,"popNetwork:oldnet"),t.q(c,mo,"popNetwork:level")),c=a.network.vertexes.k;c.next();)d=c.value,d.network=b,null!==d.xh&&(f=d.xh.n[d.uB],d.eg=f.XB,g=f.vH,h=f.wH,d.Ub=new F(d.Ia-g,d.Ua-h,f.ZB,f.WB),d.focus=new E(g,h),d.uB--);for(c=a.network.edges.k;c.next();)c.value.network=b;a.network=b}function wo(a,b,c){var d,f,g,h,i,j,k,l,m,n;if(e&&(t.l(b,vo,mo,"surroundNode:oldnet"),t.q(c,mo,"surroundNode:level")),d=b.Ym,null!==d&&0!==d.count){for(c=b.Ia,f=b.Ua,g=b.width,h=b.height,null!==b.xh&&0<b.xh.count&&(h=b.xh.n[0],g=h.ZB,h=h.WB),g=K.sqrt(g*g+h*h)/2,i=!1,j=h=0,k=0,l=b.vertexes.k;l.next();)m=l.value,1>=m.eg?j++:(i=!0,k++,h+=Math.atan2(b.Ua-m.Ua,b.Ia-m.Ia));if(0!==j)for(k>0&&(h/=k),k=b=0,b=i?2*Math.PI/(j+1):2*Math.PI/j,0===j%2&&(k=b/2),1<d.count&&d.sort(function(a,b){return null===a||null===b||a===b?0:b.width*b.height-a.width*a.height}),i=0===j%2?0:1,l=d.k;l.next();)if(m=l.value,!(1<m.eg||a.isFixed(m))){for(d=null,j=m.edges.k;j.next();){d=j.value;break}j=m.width,n=m.height,j=K.sqrt(j*j+n*n)/2,d=g+d.length+j,j=h+(b*(i/2>>1)+k)*(0===i%2?1:-1),m.Ia=c+d*Math.cos(j),m.Ua=f+d*Math.sin(j),i++}}}function po(a,b,c,d,e,f,g){var k,l,m,h=9e19,i=-1,j=0;a:for(;b>j;j++)if(k=a[j],l=k.x-c,m=k.y-d,l=l*l+m*m,h>l){for(m=j-1;m>=0;m--)if(a[m].y>k.y&&a[m].x-k.x<e+g.width)continue a;for(m=j+1;b>m;m++)if(a[m].x>k.x&&a[m].y-k.y<f+g.height)continue a;i=j,h=l}return i}function xo(a,b){e&&(t.l(a,vo,mo,"getNodeDistance:vertexA"),t.l(b,vo,mo,"getNodeDistance:vertexB"));var c=a.V,d=c.x,f=c.y,g=c.width,c=c.height,h=b.V,i=h.x,j=h.y,k=h.width,h=h.height;return i>d+g?f>j+h?(d=d+g-i,f=f-j-h,K.sqrt(d*d+f*f)):j>f+c?(d=d+g-i,f=f+c-j,K.sqrt(d*d+f*f)):i-(d+g):d>i+k?f>j+h?(d=d-i-k,f=f-j-h,K.sqrt(d*d+f*f)):j>f+c?(d=d-i-k,f=f+c-j,K.sqrt(d*d+f*f)):d-(i+k):f>j+h?f-(j+h):j>f+c?j-(f+c):.1}function qo(a,b){e&&t.q(b,mo,"performIterations:num"),a.Cg=null;for(var c=a.xr+b;a.xr<c&&(a.xr++,yo(a)););a.Cg=null}function yo(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o;if(null===a.Cg&&(a.Cg=new H(vo),a.Cg.Ve(a.network.vertexes)),b=a.Cg.n,0>=b.length)return!1;for(c=b[0],c.forceX=0,c.forceY=0,d=c.Ia,e=d,f=c.Ua,g=f,c=1;c<b.length;c++)h=b[c],h.forceX=0,h.forceY=0,i=h.Ia,h=h.Ua,d=Math.min(d,i),e=Math.max(e,i),f=Math.min(f,h),g=Math.max(g,h);for((f=e-d>g-f)?b.sort(function(a,b){return null===a||null===b||a===b?0:a.Ia-b.Ia}):b.sort(function(a,b){return null===a||null===b||a===b?0:a.Ua-b.Ua}),g=a.Sh,j=0,k=0,l=0,c=0;c<b.length;c++)for(h=b[c],i=h.V,m=h.Q,d=i.x+m.x,i=i.y+m.y,k=h.charge*a.electricalFieldX(d,i),l=h.charge*a.electricalFieldY(d,i),k+=h.mass*a.gravitationalFieldX(d,i),l+=h.mass*a.gravitationalFieldY(d,i),h.forceX+=k,h.forceY+=l,m=c+1;m<b.length;m++)if(e=b[m],e!==h)if(k=e.V,n=e.Q,l=k.x+n.x,n=k.y+n.y,d-l>g||l-d>g){if(f)break}else if(i-n>g||n-i>g){if(!f)break}else o=xo(h,e),1>o?(d>l?(k=Math.abs(e.V.right-h.V.x),k=(1+k)*Math.random()):l>d?(k=Math.abs(e.V.x-h.V.right),k=-(1+k)*Math.random()):(k=Math.max(e.width,h.width),k=(1+k)*Math.random()-k/2),i>n?(l=Math.abs(e.V.bottom-h.V.y),l=(1+l)*Math.random()):l>d?(l=Math.abs(e.V.y-h.V.bottom),l=-(1+l)*Math.random()):(l=Math.max(e.height,h.height),l=(1+l)*Math.random()-l/2)):(j=-(h.charge*e.charge)/(o*o),k=(l-d)/o*j,l=(n-i)/o*j),h.forceX+=k,h.forceY+=l,e.forceX-=k,e.forceY-=l;for(c=a.network.edges.k;c.next();)f=c.value,h=f.fromVertex,e=f.toVertex,i=h.V,m=h.Q,d=i.x+m.x,i=i.y+m.y,k=e.V,n=e.Q,l=k.x+n.x,n=k.y+n.y,o=xo(h,e),1>o?(k=(d>l?1:-1)*(1+(e.width>h.width)?e.width:h.width)*Math.random(),l=(i>n?1:-1)*(1+(e.height>h.height)?e.height:h.height)*Math.random()):(j=f.stiffness*(o-f.length),k=(l-d)/o*j,l=(n-i)/o*j),h.forceX+=k,h.forceY+=l,e.forceX-=k,e.forceY-=l;for(c=0,d=Math.max(a.Sh/20,50),e=0;e<b.length;e++)h=b[e],a.isFixed(h)?a.moveFixedVertex(h):(f=h.forceX,g=h.forceY,-d>f?f=-d:f>d&&(f=d),-d>g?g=-d:g>d&&(g=d),h.Ia+=f,h.Ua+=g,c=Math.max(c,f*f+g*g));return c>a.vA*a.vA}function no(){Ea.call(this)}function vo(){Fa.call(this),this.isFixed=!1,this.mass=this.charge=0/0,this.tk=this.eg=this.forceY=this.forceX=0,this.xh=this.Ym=null,this.uB=0}function zo(){Ha.call(this),this.length=this.stiffness=0/0}function Z(){0<arguments.length&&t.gd(Z),ze.call(this),this.Gd=this.pm=25,this.ua=0,this.Vn=Ao,this.Do=Bo,this.ro=Co,this.mm=4,this.Nn=Do,this.Ui=Eo,this.Yh=!0,this.Nj=4,this.Mb=this.tv=this.qb=-1,this.Rf=this.Pr=0,this.Sb=this.Qf=this.sg=this.gh=this.Zd=null,this.Vr=0,this.Cv=this.um=null,this.tg=0,this.Wr=null,this.kh=[],this.kh.length=100}function $o(a){var b=a.fromVertex.yd;return a=a.toVertex.yd,null===b&&null===a?8:null===b||null===a?4:1}function ap(a){null===a.um&&(a.um=[]);for(var d,b=0,c=a.network.vertexes.k;c.next();)d=c.value,a.um[b]=d.layer,b++,a.um[b]=d.column,b++,a.um[b]=d.index,b++;return a.um}function bp(a,b){for(var e,c=0,d=a.network.vertexes.k;d.next();)e=d.value,e.layer=b[c],c++,e.column=b[c],c++,e.index=b[c],c++}function cp(a,b,c){var d,f,h,g,i,l,m,j,k,n,o,p,q,r,s,u,v;for(e&&(t.q(b,Z,"crossingMatrix:unfixedLayer"),t.q(c,Z,"crossingMatrix:direction")),d=Yo(a,b),f=a.Zd[b],a.Cv||(a.Cv=[]),g=a.Cv,i=0;f>i;i++){if(h=0,j=d[i],k=j.near,null!==k&&k.layer===j.layer)if(j=k.index,j>i)for(m=i+1;j>m;m++)l=d[m],l.near===k&&l.Tm===k.Tm||h++;else for(m=i-1;m>j;m--)l=d[m],l.near===k&&l.Tm===k.Tm||h++;if(c>=0)for(j=d[i].nf,k=0;k<j.count;k++)if(n=j.n[k],n.valid&&n.fromVertex.layer!==b)for(l=n.fromVertex.index,m=n.portToPos,n=n.portFromPos,o=k+1;o<j.count;o++)p=j.n[o],p.valid&&p.fromVertex.layer!==b&&(q=p.fromVertex.index,r=p.portToPos,p=p.portFromPos,r>m&&(l>q||l===q&&n>p)&&h++,m>r&&(q>l||q===l&&p>n)&&h++);if(0>=c)for(j=d[i].$e,k=0;k<j.count;k++)if(n=j.n[k],n.valid&&n.toVertex.layer!==b)for(l=n.toVertex.index,m=n.portToPos,n=n.portFromPos,o=k+1;o<j.count;o++)p=j.n[o],p.valid&&p.toVertex.layer!==b&&(q=p.toVertex.index,r=p.portToPos,p=p.portFromPos,p>n&&(l>q||l===q&&m>r)&&h++,n>p&&(q>l||q===l&&r>m)&&h++);for(g[i*f+i]=h,j=i+1;f>j;j++){if(u=0,v=0,c>=0)for(h=d[i].nf,s=d[j].nf,k=0;k<h.count;k++)if(n=h.n[k],n.valid&&n.fromVertex.layer!==b)for(l=n.fromVertex.index,n=n.portFromPos,o=0;o<s.count;o++)p=s.n[o],p.valid&&p.fromVertex.layer!==b&&(q=p.fromVertex.index,p=p.portFromPos,(q>l||l===q&&p>n)&&v++,(l>q||q===l&&n>p)&&u++);if(0>=c)for(h=d[i].$e,s=d[j].$e,k=0;k<h.count;k++)if(n=h.n[k],n.valid&&n.toVertex.layer!==b)for(l=n.toVertex.index,m=n.portToPos,o=0;o<s.count;o++)p=s.n[o],p.valid&&p.toVertex.layer!==b&&(q=p.toVertex.index,r=p.portToPos,(q>l||l===q&&r>m)&&v++,(l>q||q===l&&m>r)&&u++);g[i*f+j]=u,g[j*f+i]=v}}return Zo(a,b,d),g}function dp(a){var b,c,d,e,f,g,h,i,k,l,m,j,n;for(b=0,c=0;c<=a.qb;c++){for(d=a,e=c,f=Yo(d,e),g=d.Zd[e],h=0,i=void 0,i=0;g>i;i++)if(j=f[i].$e,"undefined"!=typeof j)for(n=0;n<j.count;n++)k=j.n[n],k.valid&&k.toVertex.layer!==e&&(l=k.fromVertex.column+k.portFromColOffset,m=k.toVertex.column+k.portToColOffset,h+=(Math.abs(l-m)+1)*$o(k));Zo(d,e,f),b+=h}return b}function ep(a,b,c){var h,d,f,g,i,j,k,l,m,n,o;for(e&&(t.q(b,Z,"barycenters:unfixedLayer"),t.q(c,Z,"barycenters:direction")),d=Yo(a,b),f=a.Zd[b],g=[],h=0;f>h;h++){if(i=d[h],j=null,0>=c&&(j=i.nf),k=null,c>=0&&(k=i.$e),l=0,m=0,n=i.near,null!==n&&n.layer===i.layer&&(l+=n.column-1,m++),null!==j)for(n=0;n<j.count;n++)i=j.n[n],o=i.fromVertex,i.valid&&!i.rev&&o.layer!==b&&(l+=o.column+i.portFromColOffset,m++);if(null!==k)for(j=0;j<k.count;j++)i=k.n[j],n=i.toVertex,i.valid&&!i.rev&&n.layer!==b&&(l+=n.column+i.portToColOffset,m++);g[h]=0===m?-1:l/m}return Zo(a,b,d),g}function fp(a,b,c){var d,f,g,h,i,j,k,l,m,n,o;for(e&&(t.q(b,Z,"medians:unfixedLayer"),t.q(c,Z,"medians:direction")),d=Yo(a,b),f=a.Zd[b],g=[],h=0;f>h;h++){if(i=d[h],j=null,0>=c&&(j=i.nf),k=null,c>=0&&(k=i.$e),l=0,m=[],n=i.near,null!==n&&n.layer===i.layer&&(m[l]=n.column-1,l++),null!==j)for(n=0;n<j.count;n++)i=j.n[n],o=i.fromVertex,i.valid&&!i.rev&&o.layer!==b&&(m[l]=o.column+i.portFromColOffset,l++);if(null!==k)for(j=0;j<k.count;j++)i=k.n[j],n=i.toVertex,i.valid&&!i.rev&&n.layer!==b&&(m[l]=n.column+i.portToColOffset,l++);0===l?g[h]=-1:(m.sort(function(a,b){return a-b}),k=l>>1,g[h]=1&l?m[k]:m[k-1]+m[k]>>1)}return Zo(a,b,d),g}function gp(a,b,c,d,e,f){var g,h,i,j;if(b.component===d){if(b.component=c,e)for(i=b.nc;i.next();)j=i.value.toVertex,g=b.layer-j.layer,h=a.linkMinLength(i.value),g===h&&gp(a,j,c,d,e,f);if(f)for(i=b.xc;i.next();)j=i.value.fromVertex,g=j.layer-b.layer,h=a.linkMinLength(i.value),g===h&&gp(a,j,c,d,e,f)}}function hp(a,b,c,d,e,f){if(b.component===d){if(b.component=c,e)for(var h,g=b.nc;g.next();)h=g.value.toVertex,hp(a,h,c,d,e,f);if(f)for(b=b.xc;b.next();)g=b.value.fromVertex,hp(a,g,c,d,e,f)}}function Ho(a){for(a=a.vertexes.k;a.next();){var b=a.value;if(b.valid)return b}return null}function Qo(a){var b,c,d;for(a=a.vertexes.k;a.next();)if(b=a.value,b.valid){for(c=!0,d=b.nc;d.next();)if(d.value.toVertex.valid){c=!1;break}if(c)return b}return null}function Uo(a){var b,c,d;for(a=a.vertexes.k;a.next();)if(b=a.value,b.valid){for(c=!0,d=b.xc;d.next();)if(d.value.fromVertex.valid){c=!1;break}if(c)return b}return null}function Vo(a,b){var c,d,e;for(b.np=a.Vr,a.Vr++,c=b.nc;c.next();)d=c.value,e=d.toVertex,-1===e.np&&(d.forest=!0,Vo(a,e));b.finish=a.Vr,a.Vr++}function jp(a){var b,c;for(b=a.network.vertexes.k;b.next();)c=np(a,b.value),a.qb=Math.max(c,a.qb)}function np(a,b){var d,e,f,c=0;if(-1===b.layer){for(d=b.nc;d.next();)e=d.value,f=a.linkMinLength(e),c=Math.max(c,np(a,e.toVertex)+f);b.layer=c}else c=b.layer;return c}function lp(a,b){var d,e,f,c=0;if(-1===b.layer){for(f=b.xc;f.next();)e=f.value,d=a.linkMinLength(e),c=Math.max(c,lp(a,e.fromVertex)+d);b.layer=c}else c=b.layer;return c}function mp(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p;if(!b.valid){for(b.valid=!0,c=b.nc;c.next();)mp(a,c.value.toVertex);for(c=a.network.vertexes.k;c.next();)c.value.component=-1;for(d=b.nf.n,e=d.length,f=0;e>f;f++)g=d[f],h=a.linkMinLength(g),g.fromVertex.layer-g.toVertex.layer>h&&gp(a,g.fromVertex,0,-1,!0,!1);for(gp(a,b,1,-1,!0,!0);0!==b.component;){for(h=0,d=1/0,i=0,j=null,k=a.network.vertexes.k;k.next();)if(l=k.value,1===l.component){for(m=0,n=!1,o=l.nf.n,e=o.length,f=0;e>f;f++)g=o[f],p=g.fromVertex,m+=1,1!==p.component&&(h+=1,p=p.layer-l.layer,g=a.linkMinLength(g),d=Math.min(d,p-g));for(g=l.$e.n,e=g.length,f=0;e>f;f++)o=g[f].toVertex,m-=1,1!==o.component?h-=1:n=!0;(null===j||i>m)&&!n&&(j=l,i=m)}if(h>0){for(c.reset();c.next();)e=c.value,1===e.component&&(e.layer+=d);b.component=0}else j.component=0}for(c=a.network.vertexes.k;c.next();)c.value.component=-1;for(gp(a,b,1,-1,!0,!1);0!==b.component;){for(f=0,e=1/0,d=0,h=null,i=a.network.vertexes.k;i.next();)if(j=i.value,1===j.component){for(k=0,l=!1,g=j.nf.n,m=g.length,n=0;m>n;n++)o=g[n].fromVertex,k+=1,1!==o.component?f+=1:l=!0;for(g=j.$e.n,m=g.length,n=0;m>n;n++)o=g[n],p=o.toVertex,k-=1,1!==p.component&&(f-=1,p=j.layer-p.layer,o=a.linkMinLength(o),e=Math.min(e,p-o));(null===h||k>d)&&!l&&(h=j,d=k)}if(0>f){for(c.reset();c.next();)f=c.value,1===f.component&&(f.layer-=e);b.component=0}else h.component=0}}}function Xo(a,b,c){return 90===a.ua?c&&!b.rev||!c&&b.rev?270:90:180===a.ua?c&&!b.rev||!c&&b.rev?0:180:270===a.ua?c&&!b.rev||!c&&b.rev?90:270:c&&!b.rev||!c&&b.rev?180:0}function pp(a,b){var e,d,f,g,c=b.layer;for(b.index=a.Zd[c],a.Zd[c]++,c=b.$e.Pe(),d=!0;d;)for(d=!1,e=0;e<c.length-1;e++)f=c[e],g=c[e+1],f.portFromColOffset>g.portFromColOffset&&(d=!0,c[e]=g,c[e+1]=f);for(e=0;e<c.length;e++)d=c[e],d.valid&&(d=d.toVertex,-1===d.index&&pp(a,d))}function rp(a,b){var e,d,f,g,c=b.layer;for(b.index=a.Zd[c],a.Zd[c]++,c=b.nf.Pe(),d=!0;d;)for(d=!1,e=0;e<c.length-1;e++)f=c[e],g=c[e+1],f.portToColOffset>g.portToColOffset&&(d=!0,c[e]=g,c[e+1]=f);for(e=0;e<c.length;e++)d=c[e],d.valid&&(d=d.fromVertex,-1===d.index&&rp(a,d))}function sp(a,b,c){var d,f,g,h,j,i;for(e&&(t.q(b,Z,"medianBarycenterCrossingReduction:unfixedLayer"),t.q(c,Z,"medianBarycenterCrossingReduction:direction")),d=Yo(a,b),f=a.Zd[b],g=fp(a,b,c),h=ep(a,b,c),c=0;f>c;c++)-1===h[c]&&(h[c]=d[c].column),-1===g[c]&&(g[c]=d[c].column);for(i=!0;i;)for(i=!1,c=0;f-1>c;c++)(g[c+1]<g[c]||g[c+1]===g[c]&&h[c+1]<h[c])&&(i=!0,j=g[c],g[c]=g[c+1],g[c+1]=j,j=h[c],h[c]=h[c+1],h[c+1]=j,j=d[c],d[c]=d[c+1],d[c+1]=j);for(c=g=0;f>c;c++)j=d[c],j.index=c,g+=a.nodeMinColumnSpace(j,!0),j.column=g,g+=1,g+=a.nodeMinColumnSpace(j,!1);Zo(a,b,d)}function tp(a,b,c){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,d=Yo(a,b),e=a.Zd[b];for(c=cp(a,b,c),g=[],f=0;e>f;f++)g[f]=-1;for(h=[],f=0;e>f;f++)h[f]=-1;for(i=!1,j=!0;j;)for(j=!1,f=0;e-1>f;f++){for(k=c[d[f].index*e+d[f+1].index],l=c[d[f+1].index*e+d[f].index],m=0,n=0,o=d[f].column,p=d[f+1].column,q=a.nodeMinColumnSpace(d[f],!0),r=a.nodeMinColumnSpace(d[f],!1),s=a.nodeMinColumnSpace(d[f+1],!0),t=a.nodeMinColumnSpace(d[f+1],!1),q=o-q+s,r=p-r+t,u=d[f].xc.k,u.reset();u.next();)if(t=u.value,t.valid&&t.fromVertex.layer===b){for(t=t.fromVertex,s=0;d[s]!==t;)s++;f>s&&(m+=2*(f-s),n+=2*(f+1-s)),s===f+1&&(m+=1),s>f+1&&(m+=4*(s-f),n+=4*(s-(f+1)))}for(u=d[f].nc.k,u.reset();u.next();)if(t=u.value,t.valid&&t.toVertex.layer===b){for(t=t.toVertex,s=0;d[s]!==t;)s++;s===f+1&&(n+=1)}for(u=d[f+1].xc.k,u.reset();u.next();)if(t=u.value,t.valid&&t.fromVertex.layer===b){for(t=t.fromVertex,s=0;d[s]!==t;)s++;f>s&&(m+=2*(f+1-s),n+=2*(f-s)),s===f&&(n+=1),s>f+1&&(m+=4*(s-(f+1)),n+=4*(s-f))}for(u=d[f+1].nc.k,u.reset();u.next();)if(t=u.value,t.valid&&t.toVertex.layer===b){for(t=t.toVertex,s=0;d[s]!==t;)s++;s===f&&(m+=1)}s=t=0,u=g[d[f].index],v=h[d[f].index],w=g[d[f+1].index],x=h[d[f+1].index],-1!==u&&(t+=Math.abs(u-o),s+=Math.abs(u-r)),-1!==v&&(t+=Math.abs(v-o),s+=Math.abs(v-r)),-1!==w&&(t+=Math.abs(w-p),s+=Math.abs(w-q)),-1!==x&&(t+=Math.abs(x-p),s+=Math.abs(x-q)),(m-.5>n||n===m&&k-.5>l||n===m&&l===k&&t-.5>s)&&(j=i=!0,d[f].column=r,d[f+1].column=q,k=d[f],d[f]=d[f+1],d[f+1]=k)}for(f=0;e>f;f++)d[f].index=f;return Zo(a,b,d),i}function yp(a,b,c){e&&(t.q(b,Z,"bendStraighten:unfixedLayer"),t.q(c,Z,"bendStraighten:direction"));for(var d=!1;Cp(a,b,c);)d=!0;return d}function Cp(a,b,c){var d,f,g,h,i,j,k,r,s,u,v,l,m,n,o,p,q,w;if(e&&(t.q(b,Z,"shiftbendStraighten:unfixedLayer"),t.q(c,Z,"shiftbendStraighten:direction")),f=Yo(a,b),g=a.Zd[b],h=ep(a,b,-1),c>0)for(d=0;g>d;d++)h[d]=-1;if(i=ep(a,b,1),0>c)for(d=0;g>d;d++)i[d]=-1;for(j=!1,k=!0;k;)for(k=!1,d=0;g>d;d++){if(l=f[d].column,m=a.nodeMinColumnSpace(f[d],!0),n=a.nodeMinColumnSpace(f[d],!1),m=0>d-1||l-f[d-1].column-1>m+a.nodeMinColumnSpace(f[d-1],!1)?l-1:l,n=d+1>=g||f[d+1].column-l-1>n+a.nodeMinColumnSpace(f[d+1],!0)?l+1:l,o=0,p=0,q=0,0>=c)for(w=f[d].xc.k;w.next();)r=w.value,r.valid&&r.fromVertex.layer!==b&&(s=$o(r),u=r.portFromColOffset,v=r.portToColOffset,r=r.fromVertex.column,o+=(Math.abs(l+v-(r+u))+1)*s,p+=(Math.abs(m+v-(r+u))+1)*s,q+=(Math.abs(n+v-(r+u))+1)*s);if(c>=0)for(w=f[d].nc.k;w.next();)r=w.value,r.valid&&r.toVertex.layer!==b&&(s=$o(r),u=r.portFromColOffset,v=r.portToColOffset,r=r.toVertex.column,o+=(Math.abs(l+u-(r+v))+1)*s,p+=(Math.abs(m+u-(r+v))+1)*s,q+=(Math.abs(n+u-(r+v))+1)*s);v=u=s=0,r=h[f[d].index],w=i[f[d].index],-1!==r&&(s+=Math.abs(r-l),u+=Math.abs(r-m),v+=Math.abs(r-n)),-1!==w&&(s+=Math.abs(w-l),u+=Math.abs(w-m),v+=Math.abs(w-n)),(o>p||p===o&&s>u)&&(k=j=!0,f[d].column=m),(o>q||q===o&&s>v)&&(k=j=!0,f[d].column=n)}return Zo(a,b,f),a.normalize(),j}function Ap(a,b,c){var d,f,g,h,m,i,j,k,l;for(e&&(t.q(b,Z,"medianStraighten:unfixedLayer"),t.q(c,Z,"medianStraighten:direction")),d=Yo(a,b),f=a.Zd[b],g=fp(a,b,c),h=[],c=0;f>c;c++)h[c]=g[c];for(g=!0;g;)for(g=!1,c=0;f>c;c++)i=d[c].column,j=a.nodeMinColumnSpace(d[c],!0),k=a.nodeMinColumnSpace(d[c],!1),l=0,-1===h[c]?0===c&&c===f-1?l=i:0===c?(m=d[c+1].column,l=m-i===k+a.nodeMinColumnSpace(d[c+1],!0)?i-1:i):c===f-1?(m=d[c-1].column,l=i-m===j+a.nodeMinColumnSpace(d[c-1],!1)?i+1:i):(m=d[c-1].column,j=m+a.nodeMinColumnSpace(d[c-1],!1)+j+1,m=d[c+1].column,k=m-a.nodeMinColumnSpace(d[c+1],!0)-k-1,l=0|(j+k)/2):0===c&&c===f-1?l=h[c]:0===c?(m=d[c+1].column,k=m-a.nodeMinColumnSpace(d[c+1],!0)-k-1,l=Math.min(h[c],k)):c===f-1?(m=d[c-1].column,j=m+a.nodeMinColumnSpace(d[c-1],!1)+j+1,l=Math.max(h[c],j)):(m=d[c-1].column,j=m+a.nodeMinColumnSpace(d[c-1],!1)+j+1,m=d[c+1].column,k=m-a.nodeMinColumnSpace(d[c+1],!0)-k-1,j<h[c]&&h[c]<k?l=h[c]:j>=h[c]?l=j:k<=h[c]&&(l=k)),l!==i&&(g=!0,d[c].column=l);Zo(a,b,d),a.normalize()}function Dp(a,b){var f,c,d,g,h;for(e&&(t.q(b,Z,"packAux:column"),t.q(1,Z,"packAux:direction")),c=!0,d=a.network.vertexes.k;d.next();)if(f=d.value,g=a.nodeMinColumnSpace(f,!0),h=a.nodeMinColumnSpace(f,!1),f.column-g<=b&&f.column+h>=b){c=!1;break}if(g=!1,c)for(d.reset();d.next();)f=d.value,f.column>b&&(f.column-=1,g=!0);return g}function Ep(a,b){var d,c,f,g,h,i,j;for(e&&(t.q(b,Z,"tightPackAux:column"),t.q(1,Z,"tightPackAux:direction")),c=b,c=b+1,f=[],g=[],d=0;d<=a.qb;d++)f[d]=!1,g[d]=!1;for(h=a.network.vertexes.k;h.next();)d=h.value,i=d.column-a.nodeMinColumnSpace(d,!0),j=d.column+a.nodeMinColumnSpace(d,!1),b>=i&&j>=b&&(f[d.layer]=!0),c>=i&&j>=c&&(g[d.layer]=!0);for(i=!0,c=!1,d=0;d<=a.qb;d++)i=i&&!(f[d]&&g[d]);if(i)for(h.reset();h.next();)d=h.value,d.column>b&&(d.column-=1,c=!0);return c}function Bp(a,b){var c,d,f,g,h;for(e&&t.q(b,Z,"componentPack:direction"),c=0;c<=a.Mb;c++)for(;Dp(a,c););for(a.normalize(),c=0;c<a.Mb;c++)for(;Ep(a,c););if(a.normalize(),b>0)for(c=0;c<=a.Mb;c++)for(d=ap(a),f=dp(a),g=f+1;g>f;)g=f,Fp(a,c,1),h=dp(a),h>f?bp(a,d):f>h&&(f=h,d=ap(a));if(0>b)for(c=a.Mb;c>=0;c--)for(d=ap(a),f=dp(a),g=f+1;g>f;)g=f,Fp(a,c,-1),h=dp(a),h>f?bp(a,d):f>h&&(f=h,d=ap(a));a.normalize()}function Fp(a,b,c){var e,d,f,g,h,i;for(a.tg=0,d=a.network.vertexes.k;d.next();)d.value.component=-1;if(c>0)for(d.reset();d.next();)e=d.value,e.column-a.nodeMinColumnSpace(e,!0)<=b&&(e.component=a.tg);if(0>c)for(d.reset();d.next();)e=d.value,e.column+a.nodeMinColumnSpace(e,!1)>=b&&(e.component=a.tg);for(a.tg++,d.reset();d.next();)e=d.value,-1===e.component&&(hp(a,e,a.tg,-1,!0,!0),a.tg++);for(b=[],e=0;e<a.tg*a.tg;e++)b[e]=!1;for(f=[],e=0;e<(a.qb+1)*(a.Mb+1);e++)f[e]=-1;for(d.reset();d.next();)for(e=d.value,g=e.layer,h=Math.max(0,e.column-a.nodeMinColumnSpace(e,!0)),i=Math.min(a.Mb,e.column+a.nodeMinColumnSpace(e,!1));i>=h;h++)f[g*(a.Mb+1)+h]=e.component;for(e=0;e<=a.qb;e++){if(c>0)for(h=0;h<a.Mb;h++)-1!==f[e*(a.Mb+1)+h]&&-1!==f[e*(a.Mb+1)+h+1]&&f[e*(a.Mb+1)+h]!==f[e*(a.Mb+1)+h+1]&&(b[f[e*(a.Mb+1)+h]*a.tg+f[e*(a.Mb+1)+h+1]]=!0);if(0>c)for(h=a.Mb;h>0;h--)-1!==f[e*(a.Mb+1)+h]&&-1!==f[e*(a.Mb+1)+h-1]&&f[e*(a.Mb+1)+h]!==f[e*(a.Mb+1)+h-1]&&(b[f[e*(a.Mb+1)+h]*a.tg+f[e*(a.Mb+1)+h-1]]=!0)}for(f=[],e=0;e<a.tg;e++)f[e]=!0;for(g=new H("number"),g.add(0);0!==g.count;)if(i=g.n[g.count-1],g.wd(g.count-1),f[i])for(f[i]=!1,e=0;e<a.tg;e++)b[i*a.tg+e]&&g.Rd(0,e);if(c>0)for(d.reset();d.next();)e=d.value,f[e.component]&&(e.column-=1);if(0>c)for(d.reset();d.next();)e=d.value,f[e.component]&&(e.column+=1)}function Wo(a,b){return 270===a.ua?b?cc:mc:90===a.ua?b?mc:cc:180===a.ua?b?gc:hc:b?hc:gc}function Gp(){this.index=this.de=this.He=this.ke=this.gb=this.layer=0,this.link=null,this.wi=0}function Hp(a,b,c,d){return e&&(t.q(a,Z,"isUnoccupied2:px"),t.q(b,Z,"isUnoccupied2:py"),t.q(c,Z,"isUnoccupied2:qx"),t.q(d,Z,"isUnoccupied2:qy")),!0}function Yo(a,b){var c,e,f,d=a.Zd[b];if(d>=a.kh.length){for(c=[],e=0;e<a.kh.length;e++)c[e]=a.kh[e];a.kh=c}for("undefined"==typeof a.kh[d]||null===a.kh[d]?c=[]:(c=a.kh[d],a.kh[d]=null),d=a.Wr[b],e=0;e<d.length;e++)f=d[e],f instanceof Ip&&(c[f.index]=f);return c}function Zo(a,b,c){a.kh[a.Zd[b]]=c}function Fo(){Ea.call(this)}function Ip(){Fa.call(this),this.index=this.column=this.layer=-1,this.component=0/0,this.near=null,this.valid=!1,this.finish=this.np=0/0,this.Tm=0,this.bB=this.cB=void 0}function Jp(){Ha.call(this),this.forest=this.rev=this.valid=!1,this.portToPos=this.portFromPos=0/0,this.portToColOffset=this.portFromColOffset=0}function X(){0<arguments.length&&t.gd(X),ze.call(this),this.dd=new I(Object),this.Wi=Kp,this.Pf=Lp,this.Rs=Mp,this.pv=Np,this.fC=null,this.Gh=!0,this.jd=Op,this.kg=new ra(10,10).freeze(),this.ya=new Pp,this.xa=new Pp}function Rp(a,b,c,d){var e,f;for(c=c.k;c.next();)e=c.value,e instanceof y&&e.canLayout()&&"Comment"!==e.ed&&(!d||e.Hp)&&(e.oi||(e instanceof z&&null===e.ic?Rp(a,b,e.Nc,!1):b.Yo(e)));for(c.reset();c.next();)e=c.value,e instanceof B&&e.canLayout()&&"Comment"!==e.ed&&(!d||e.Hp)&&(f=e.ca,a=e.fa,null!==f&&null!==a&&f!==a&&"Comment"!==f.ed&&"Comment"!==a.ed&&(f=b.findGroupVertex(f),a=b.findGroupVertex(a),null!==f&&null!==a&&b.sn(f,a,e)))}function Up(a,b){var c,d,f,g;if(null!==b){switch(e&&t.l(b,Pp,X,"walkTree:v"),a.Pf){case Lp:if(0<b.nc.count){for(c=new H(Pp),d=b.TI;d.next();)f=d.value,$p(a,b,f)&&c.add(f);0<c.count&&(b.children=c.Pe())}break;case Tp:if(0<b.xc.count){for(c=new H(Pp),d=b.uK;d.next();)f=d.value,$p(a,b,f)&&c.add(f);0<c.count&&(b.children=c.Pe())}break;default:t.m("Unhandled path value"+a.Pf.toString())}for(c=b.children,d=c.length,g=0;d>g;g++)f=c[g],f.initialized=!0,f.level=b.level+1,f.parent=b,a.dd.remove(f);for(g=0;d>g;g++)f=c[g],Up(a,f)}}function $p(a,b,c){if(e&&t.l(b,Pp,X,"walkOK:v"),e&&t.l(c,Pp,X,"walkOK:c"),c.initialized){var d;if(null===b)d=!1;else{for(e&&t.l(c,Pp,X,"isAncestor:a"),e&&t.l(b,Pp,X,"isAncestor:b"),d=b.parent;null!==d&&d!==c;)d=d.parent;d=d===c}if(d||c.level>b.level)return!1;a.removeChild(c.parent,c)}return!0}function Vp(a,b){var c,d,f,g,h,i,j;if(null!==b){for(e&&t.l(b,Pp,X,"initializeTree:v"),a.initializeTreeVertexValues(b),b.alignment===aq&&a.sortTreeVertexChildren(b),c=0,d=b.Xm,f=0,g=b.children,h=g.length,i=0;h>i;i++)j=g[i],Vp(a,j),c+=j.descendantCount+1,d=Math.max(d,j.maxChildrenCount),f=Math.max(f,j.maxGenerationCount);b.descendantCount=c,b.maxChildrenCount=d,b.maxGenerationCount=d>0?f+1:0}}function bq(a,b){var c,d,f,g;switch(e&&t.l(b,Pp,X,"mom:v"),a.Rs){default:case Mp:return null!==b.parent?b.parent:a.ya;case cq:return null===b.parent?a.ya:null===b.parent.parent?a.xa:b.parent;case dq:if(null!==b.parent)return null!==b.parent.parent?b.parent.parent:a.xa;case eq:if(c=!0,0===b.Xm)c=!1;else for(d=b.children,f=d.length,g=0;f>g;g++)if(0<d[g].Xm){c=!1;break}return c&&null!==b.parent?a.xa:null!==b.parent?b.parent:a.ya}}function Wp(a,b){if(null!==b){e&&t.l(b,Pp,X,"assignTree:v"),a.assignTreeVertexValues(b);for(var c=b.children,d=c.length,f=0;d>f;f++)Wp(a,c[f])}}function Xp(a,b){if(null!==b){e&&t.l(b,Pp,X,"sortTree:v"),b.alignment!==aq&&a.sortTreeVertexChildren(b);for(var c=b.children,d=c.length,f=0;d>f;f++)Xp(a,c[f])}}function kq(a){return a===lq||a===aq||a===mq||a===nq}function oq(a){return a===lq||a===aq}function pq(a){var b,c;if(e&&t.l(a,Pp,X,"isLeftSideBus:v"),b=a.parent,null!==b&&(c=b.alignment,kq(c))){if(oq(c)){for(b=b.children,c=0;c<b.length&&a!==b[c];)c++;return 0===c%2}if(c===mq)return!0}return!1}function rq(a,b){var c,d,f,g,h,i,j,k,l,m,n,o,p,q,r,s,u,v,w,x,y,z,A,B,C,D,E,F,G,H;if(e&&t.l(b,Pp,X,"layoutTreeNone:v"),0===b.Xm)c=!1,d=0,f=jq,null!==b.parent&&(d=b.parent.angle,f=b.parent.alignment,c=kq(f)),f=pq(b),b.qa.p(0,0),b.eb.p(b.width,b.height),null===b.parent||null===b.comments||(180!==d&&270!==d||c)&&!f?b.Na.p(0,0):180===d&&!c||(90===d||270===d)&&f?b.Na.p(b.width-2*b.Q.x,0):b.Na.p(0,b.height-2*b.Q.y);else{for(c=tq(b),d=90===c||270===c,g=0,f=b.children,h=f.length,i=0;h>i;i++)j=f[i],g=Math.max(g,d?j.eb.width:j.eb.height);if(k=b.alignment,l=k===uq,m=k===vq,n=kq(k),o=Math.max(0,b.breadthLimit),p=wq(b),q=b.nodeSpacing,r=xq(b),s=l||m?0:r/2,u=b.rowSpacing,v=0,(l||m||b.cq||b.dq&&1===b.maxGenerationCount)&&(v=Math.max(0,b.rowIndent)),l=b.width,w=b.height,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,n&&!oq(k)&&c>135&&f.reverse(),oq(k))if(h>1)for(i=0;h>i;i++)j=f[i],H=j.eb,0===i%2&&i!==h-1?F=Math.max(F,(d?H.width:H.height)+Lq(j)-q):0!==i%2&&(G=Math.max(G,(d?H.width:H.height)+Lq(j)-q));
else 1===h&&(F=d?f[0].eb.width:f[0].eb.height);if(n)switch(k){case lq:case aq:y=135>c?yq(b,f,F,x,y):zq(b,f,F,x,y),F=y[0],x=y[1],y=y[2];break;case mq:for(i=0;h>i;i++)j=f[i],H=j.eb,o=0===D?0:u,d?(j.qa.p(g-H.width,B+o),x=Math.max(x,H.width),y=Math.max(y,B+o+H.height),B+=o+H.height):(j.qa.p(A+o,g-H.height),x=Math.max(x,A+o+H.width),y=Math.max(y,H.height),A+=o+H.width),D++;break;case nq:for(g=0;h>g;g++)j=f[g],H=j.eb,o=0===D?0:u,d?(j.qa.p(q/2+b.Q.x,B+o),x=Math.max(x,H.width),y=Math.max(y,B+o+H.height),B+=o+H.height):(j.qa.p(A+o,q/2+b.Q.y),x=Math.max(x,A+o+H.width),y=Math.max(y,H.height),A+=o+H.width),D++}else for(i=0;h>i;i++)j=f[i],H=j.eb,d?(o>0&&D>0&&A+q+H.width>o&&(g>A&&Bq(b,k,g-A,0,E,i-1),C++,D=0,E=i,z=y,A=0,B=c>135?-y-u:y+u),G=0===D?s:q,Cq(a,j,0,B),j.qa.p(A+G,B),x=Math.max(x,A+G+H.width),y=Math.max(y,z+(0===C?0:u)+H.height),A+=G+H.width):(o>0&&D>0&&B+q+H.height>o&&(g>B&&Bq(b,k,0,g-B,E,i-1),C++,D=0,E=i,z=x,B=0,A=c>135?-x-u:x+u),G=0===D?s:q,Cq(a,j,A,0),j.qa.p(A,B+G),y=Math.max(y,B+G+H.height),x=Math.max(x,z+(0===C?0:u)+H.width),B+=G+H.height),D++;switch(C>0&&(d?(y+=Math.max(0,p),x>A&&Bq(b,k,x-A,0,E,h-1),v>0&&(m||Eq(b,v,0,0,h-1),x+=v)):(x+=Math.max(0,p),y>B&&Bq(b,k,0,y-B,E,h-1),v>0&&(m||Eq(b,0,v,0,h-1),y+=v))),v=m=0,k){case Gq:d?m+=x/2-b.Q.x-r/2:v+=y/2-b.Q.y-r/2;break;case jq:C>0?d?m+=x/2-b.Q.x-r/2:v+=y/2-b.Q.y-r/2:d?(k=f[0].qa.x+f[0].Na.x,q=f[h-1].qa.x+f[h-1].Na.x+2*f[h-1].Q.x,m+=k+(q-k)/2-b.Q.x-r/2):(k=f[0].qa.y+f[0].Na.y,q=f[h-1].qa.y+f[h-1].Na.y+2*f[h-1].Q.y,v+=k+(q-k)/2-b.Q.y-r/2);break;case uq:d?(m-=r,x+=r):(v-=r,y+=r);break;case vq:d?(m+=x-b.width+r,x+=r):(v+=y-b.height+r,y+=r);break;case lq:case aq:d?m=h>1?m+(F+q/2-b.Q.x):m+(f[0].Q.x-b.Q.x+f[0].Na.x):v=h>1?v+(F+q/2-b.Q.y):v+(f[0].Q.y-b.Q.y+f[0].Na.y);break;case mq:d?m+=x+q/2-b.Q.x:v+=y+q/2-b.Q.y;break;case nq:break;default:t.m("Unhandled alignment value "+k.toString())}for(i=0;h>i;i++)j=f[i],d?j.qa.p(j.qa.x+j.Na.x-m,j.qa.y+(c>135?(n?-y:-j.eb.height)+j.Na.y-p:w+p+j.Na.y)):j.qa.p(j.qa.x+(c>135?(n?-x:-j.eb.width)+j.Na.x-p:l+p+j.Na.x),j.qa.y+j.Na.y-v);d?(x=Hq(b,x,m),0>m&&(m=0),c>135&&(v+=y+p),y+=w+p):(c>135&&(m+=x+p),x+=l+p,y=Iq(b,y,v),0>v&&(v=0)),b.Na.p(m,v),b.eb.p(x,y)}}function yq(a,b,c,d,f){var g,h,i,j,k,l,m,n,o,p,q,r,s,u;if(e&&t.l(a,Pp,X,"layoutBusChildrenPosDir:v"),g=b.length,0===g)return a=[],a[0]=c,a[1]=d,a[2]=f,a;if(1===g)return h=b[0],d=h.eb.width,f=h.eb.height,a=[],a[0]=c,a[1]=d,a[2]=f,a;for(i=a.nodeSpacing,j=a.rowSpacing,k=90===tq(a),l=0,m=0,n=0,o=0;g>o;o++)0!==o%2||g>1&&o===g-1||(h=b[o],p=h.eb,q=0===l?0:j,k?(r=Lq(h)-i,h.qa.p(c-(p.width+r),n+q),d=Math.max(d,p.width+r),f=Math.max(f,n+q+p.height),n+=q+p.height):(r=Lq(h)-i,h.qa.p(m+q,c-(p.height+r)),f=Math.max(f,p.height+r),d=Math.max(d,m+q+p.width),m+=q+p.width),l++);for(l=0,s=m,u=n,k?(m=c+i,n=0):(m=0,n=c+i),o=0;g>o;o++)0!==o%2&&(h=b[o],p=h.eb,q=0===l?0:j,k?(r=Lq(h)-i,h.qa.p(m+r,n+q),d=Math.max(d,m+p.width+r),f=Math.max(f,n+q+p.height),n+=q+p.height):(r=Lq(h)-i,h.qa.p(m+q,n+r),d=Math.max(d,m+q+p.width),f=Math.max(f,n+p.height+r),m+=q+p.width),l++);return g>1&&1===g%2&&(h=b[g-1],p=h.eb,b=Mq(h,k?Math.max(Math.abs(u),Math.abs(n)):Math.max(Math.abs(s),Math.abs(m))),k?(h.qa.p(c+i/2-h.Q.x-h.Na.x,f+b),k=c+i/2-h.Q.x-h.Na.x,d=Math.max(d,k+p.width),0>k&&(d-=k),f=Math.max(f,Math.max(u,n)+b+p.height),0>h.qa.x&&(c=Sq(a,h.qa.x,!1,c,i))):(h.qa.p(d+b,c+i/2-h.Q.y-h.Na.y),d=Math.max(d,Math.max(s,m)+b+p.width),k=c+i/2-h.Q.y-h.Na.y,f=Math.max(f,k+p.height),0>k&&(f-=k),0>h.qa.y&&(c=Sq(a,h.qa.y,!0,c,i)))),a=[],a[0]=c,a[1]=d,a[2]=f,a}function zq(a,b,c,d,f){var g,h,i,j,k,l,m,n,o,p,q,r,s,u;if(e&&t.l(a,Pp,X,"layoutBusChildrenNegDir:v"),g=b.length,0===g)return a=[],a[0]=c,a[1]=d,a[2]=f,a;if(1===g)return h=b[0],d=h.eb.width,f=h.eb.height,a=[],a[0]=c,a[1]=d,a[2]=f,a;for(i=a.nodeSpacing,j=a.rowSpacing,k=270===tq(a),l=0,m=0,n=0,o=0;g>o;o++)0!==o%2||g>1&&o===g-1||(h=b[o],p=h.eb,q=0===l?0:j,k?(r=Lq(h)-i,n-=q+p.height,h.qa.p(c-(p.width+r),n),d=Math.max(d,p.width+r),f=Math.max(f,Math.abs(n))):(r=Lq(h)-i,m-=q+p.width,h.qa.p(m,c-(p.height+r)),f=Math.max(f,p.height+r),d=Math.max(d,Math.abs(m))),l++);for(l=0,s=m,u=n,k?(m=c+i,n=0):(m=0,n=c+i),o=0;g>o;o++)0!==o%2&&(h=b[o],p=h.eb,q=0===l?0:j,k?(r=Lq(h)-i,n-=q+p.height,h.qa.p(m+r,n),d=Math.max(d,m+p.width+r),f=Math.max(f,Math.abs(n))):(r=Lq(h)-i,m-=q+p.width,h.qa.p(m,n+r),f=Math.max(f,n+p.height+r),d=Math.max(d,Math.abs(m))),l++);for(g>1&&1===g%2&&(h=b[g-1],p=h.eb,j=Mq(h,k?Math.max(Math.abs(u),Math.abs(n)):Math.max(Math.abs(s),Math.abs(m))),k?(h.qa.p(c+i/2-h.Q.x-h.Na.x,-f-p.height-j),m=c+i/2-h.Q.x-h.Na.x,d=Math.max(d,m+p.width),0>m&&(d-=m),f=Math.max(f,Math.abs(Math.min(u,n))+j+p.height),0>h.qa.x&&(c=Sq(a,h.qa.x,!1,c,i))):(h.qa.p(-d-p.width-j,c+i/2-h.Q.y-h.Na.y),d=Math.max(d,Math.abs(Math.min(s,m))+j+p.width),m=c+i/2-h.Q.y-h.Na.y,f=Math.max(f,m+p.height),0>m&&(f-=m),0>h.qa.y&&(c=Sq(a,h.qa.y,!0,c,i)))),o=0;g>o;o++)h=b[o],k?h.qa.p(h.qa.x,h.qa.y+f):h.qa.p(h.qa.x+d,h.qa.y);return a=[],a[0]=c,a[1]=d,a[2]=f,a}function Lq(a){return e&&t.l(a,Pp,X,"fixRelativePostions:child"),null===a.parent?0:a.parent.nodeSpacing}function Mq(a){return e&&t.l(a,Pp,X,"fixRelativePostions:lastchild"),null===a.parent?0:a.parent.rowSpacing}function Sq(a,b,c,d,f){e&&t.l(a,Pp,X,"fixRelativePostions:v"),a=a.children;for(var g=a.length,h=0;g>h;h++)c?a[h].qa.p(a[h].qa.x,a[h].qa.y-b):a[h].qa.p(a[h].qa.x-b,a[h].qa.y);return b=a[g-1],Math.max(d,c?b.Na.y+b.Q.y-f/2:b.Na.x+b.Q.x-f/2)}function Hq(a,b,c){switch(e&&t.l(a,Pp,X,"calculateSubwidth:v"),a.alignment){case jq:case Gq:var d=b;return c+a.width>d&&(d=c+a.width),0>c&&(d-=c),d;case uq:return a.width>b?a.width:b;case vq:return 2*a.Q.x>b?a.width:b+a.width-2*a.Q.x;case lq:case aq:return d=Math.min(0,c),c=Math.max(b,c+a.width),Math.max(a.width,c-d);case mq:return a.width-a.Q.x+a.nodeSpacing/2+b;case nq:return Math.max(a.width,a.Q.x+a.nodeSpacing/2+b);default:return b}}function Iq(a,b,c){switch(e&&t.l(a,Pp,X,"calculateSubheight:v"),a.alignment){case jq:case Gq:var d=b;return c+a.height>d&&(d=c+a.height),0>c&&(d-=c),d;case uq:return a.height>b?a.height:b;case vq:return 2*a.Q.y>b?a.height:b+a.height-2*a.Q.y;case lq:case aq:return d=Math.min(0,c),c=Math.max(b,c+a.height),Math.max(a.height,c-d);case mq:return a.height-a.Q.y+a.nodeSpacing/2+b;case nq:return Math.max(a.height,a.Q.y+a.nodeSpacing/2+b);default:return b}}function Jq(a,b,c){switch(e&&t.l(a,oa,X,"alignOffset:align"),a){case Gq:b/=2,c/=2;break;case jq:b/=2,c/=2;break;case uq:c=b=0;break;case vq:break;default:t.m("Unhandled alignment value "+a.toString())}return a=[],a[0]=b,a[1]=c,a}function Bq(a,b,c,d,f,g){e&&t.l(a,Pp,X,"shiftRelPosAlign:v"),e&&t.l(b,oa,X,"shiftRelPosAlign:align"),b=Jq(b,c,d),Eq(a,b[0],b[1],f,g)}function Eq(a,b,c,d,f){if(e&&t.l(a,Pp,X,"shiftRelPos:v"),0!==b||0!==c)for(a=a.children;f>=d;d++){var g=a[d].qa;g.x+=b,g.y+=c}}function Cq(a,b,c,d){e&&(t.l(b,Pp,X,"recordMidPoints:v"),t.i(c,"number",X,"recordMidPoints:x"),t.i(d,"number",X,"recordMidPoints:y"));var f=b.parent;switch(a.Pf){case Lp:for(a=b.xc;a.next();)b=a.value,b.fromVertex===f&&b.gs.p(c,d);break;case Tp:for(a=b.nc;a.next();)b=a.value,b.toVertex===f&&b.gs.p(c,d);break;default:t.m("Unhandled path value "+a.Pf.toString())}}function Fq(a,b,c){var d,e;for(d=0;d<a.length;d++)e=a[d],e.x+=b,e.y+=c}function Dq(a,b,c,d,f,g,h){var i,j,k,l,m,n,o,p,q,r,s,u;if(e&&t.l(b,Pp,X,"mergeFringes:parent"),e&&t.l(c,Pp,X,"mergeFringes:child"),i=tq(b),j=90===i||270===i,k=b.nodeSpacing,b=d,l=f,d=g,f=h,m=c.It,n=c.au,h=c.eb,o=j?Math.max(f,h.height):Math.max(d,h.width),(null===m||i!==tq(c))&&(m=Aq(a,2),n=Aq(a,2),j?(m[0].p(0,0),m[1].p(0,h.height),n[0].p(h.width,0),n[1].p(n[0].x,m[1].y)):(m[0].p(0,0),m[1].p(h.width,0),n[0].p(0,h.height),n[1].p(m[1].x,n[0].y))),j){if(c=d,d=9999999,!(null===l||2>l.length||null===m||2>m.length))for(g=f=0;f<l.length&&g<m.length;)i=l[f],p=m[g],j=p.x,q=p.y,j+=c,r=i,f+1<l.length&&(r=l[f+1]),s=p,p=s.x,s=s.y,g+1<m.length&&(s=m[g+1],p=s.x,s=s.y,p+=c),u=d,i.y===q?u=j-i.x:i.y>q&&i.y<s?u=j+(i.y-q)/(s-q)*(p-j)-i.x:q>i.y&&q<r.y&&(u=j-(i.x+(q-i.y)/(r.y-i.y)*(r.x-i.x))),d>u&&(d=u),r.y<=i.y?f++:q>=s?g++:(r.y<=s&&f++,s<=r.y&&g++);if(c-=d,c+=k,f=m,g=c,null===b||2>b.length||null===f||2>f.length)d=null;else{for(k=Aq(a,b.length+f.length),d=j=i=0;j<f.length&&f[j].y<b[0].y;)q=f[j++],k[d++].p(q.x+g,q.y);for(;i<b.length;)q=b[i++],k[d++].p(q.x,q.y);for(i=b[b.length-1].y;j<f.length&&f[j].y<=i;)j++;for(;j<f.length&&f[j].y>i;)q=f[j++],k[d++].p(q.x+g,q.y);for(f=Aq(a,d),i=0;d>i;i++)f[i].assign(k[i]);Kq(a,k),d=f}if(j=n,q=c,null===l||2>l.length||null===j||2>j.length)f=null;else{for(k=Aq(a,l.length+j.length),g=r=f=0;f<l.length&&l[f].y<j[0].y;)i=l[f++],k[g++].p(i.x,i.y);for(;r<j.length;)i=j[r++],k[g++].p(i.x+q,i.y);for(j=j[j.length-1].y;f<l.length&&l[f].y<=j;)f++;for(;f<l.length&&l[f].y>j;)i=l[f++],k[g++].p(i.x,i.y);for(i=Aq(a,g),f=0;g>f;f++)i[f].assign(k[f]);Kq(a,k),f=i}g=Math.max(0,c)+h.width,h=o}else{if(c=f,d=9999999,!(null===l||2>l.length||null===m||2>m.length))for(g=f=0;f<l.length&&g<m.length;)i=l[f],p=m[g],j=p.x,q=p.y,q+=c,r=i,f+1<l.length&&(r=l[f+1]),s=p,p=s.x,s=s.y,g+1<m.length&&(s=m[g+1],p=s.x,s=s.y,s+=c),u=d,i.x===j?u=q-i.y:i.x>j&&i.x<p?u=q+(i.x-j)/(p-j)*(s-q)-i.y:j>i.x&&j<r.x&&(u=q-(i.y+(j-i.x)/(r.x-i.x)*(r.y-i.y))),d>u&&(d=u),r.x<=i.x?f++:j>=p?g++:(r.x<=p&&f++,p<=r.x&&g++);if(c-=d,c+=k,f=m,g=c,null===b||2>b.length||null===f||2>f.length)d=null;else{for(k=Aq(a,b.length+f.length),d=j=i=0;j<f.length&&f[j].x<b[0].x;)q=f[j++],k[d++].p(q.x,q.y+g);for(;i<b.length;)q=b[i++],k[d++].p(q.x,q.y);for(i=b[b.length-1].x;j<f.length&&f[j].x<=i;)j++;for(;j<f.length&&f[j].x>i;)q=f[j++],k[d++].p(q.x,q.y+g);for(f=Aq(a,d),i=0;d>i;i++)f[i].assign(k[i]);Kq(a,k),d=f}if(j=n,q=c,null===l||2>l.length||null===j||2>j.length)f=null;else{for(k=Aq(a,l.length+j.length),g=r=f=0;f<l.length&&l[f].x<j[0].x;)i=l[f++],k[g++].p(i.x,i.y);for(;r<j.length;)i=j[r++],k[g++].p(i.x,i.y+q);for(j=j[j.length-1].x;f<l.length&&l[f].x<=j;)f++;for(;f<l.length&&l[f].x>j;)i=l[f++],k[g++].p(i.x,i.y);for(i=Aq(a,g),f=0;g>f;f++)i[f].assign(k[f]);Kq(a,k),f=i}g=o,h=Math.max(0,c)+h.height}return Kq(a,b),Kq(a,m),Kq(a,l),Kq(a,n),a=[],a[0]=c,a[1]=d,a[2]=f,a[3]=g,a[4]=h,a}function Aq(a,b){var c,d;if(a.Ls||(a.Ls=[]),c=a.Ls[b],void 0!==c&&(c=c.pop(),void 0!==c))return c;for(c=[],d=0;b>d;d++)c[d]=new E;return c}function Kq(a,b){if(a.Ls){var c=b.length,d=a.Ls[c];void 0===d&&(d=[],a.Ls[c]=d),d.push(b)}}function Tq(a,b,c,d){var f,g,h;if(null!==b)for(e&&t.l(b,Pp,X,"assignAbsolutePositions:v"),b.x=c,b.y=d,b=b.children,f=b.length,g=0;f>g;g++)h=b[g],Tq(a,h,c+h.qa.x,d+h.qa.y)}function Vq(a,b){if(null!==b){e&&t.l(b,Pp,X,"setPortSpotsTree:v"),a.setPortSpots(b);for(var c=b.children,d=c.length,f=0;d>f;f++)Vq(a,c[f])}}function tq(a){return a=a.angle,45>=a?0:135>=a?90:225>=a?180:315>=a?270:0}function wq(a){var b,c,d;return e&&t.l(a,Pp,X,"computeLayerSpacing:v"),b=tq(a),b=90===b||270===b,c=a.layerSpacing,0<a.layerSpacingParentOverlap&&(d=Math.min(1,a.layerSpacingParentOverlap),c-=b?a.height*d:a.width*d),c<(b?-a.height:-a.width)&&(c=b?-a.height:-a.width),c}function xq(a){var b,c,d;return e&&t.l(a,Pp,X,"computeNodeIndent:v"),b=tq(a),b=90===b||270===b,c=a.nodeIndent,0<a.nodeIndentPastParent&&(d=Math.min(1,a.nodeIndentPastParent),c+=b?a.width*d:a.height*d),c=Math.max(0,c)}function Qp(){Ea.call(this)}function Pp(){Fa.call(this),this.initialized=!1,this.parent=null,this.children=[],this.maxGenerationCount=this.maxChildrenCount=this.descendantCount=this.level=0,this.comments=null,this.qa=new E(0,0),this.eb=new ra(0,0),this.Na=new E(0,0),this.dq=this.cq=this.pK=!1,this.au=this.It=null,this.sorting=fq,this.comparer=Sn,this.angle=0,this.alignment=jq,this.nodeIndentPastParent=this.nodeIndent=0,this.nodeSpacing=20,this.layerSpacing=50,this.layerSpacingParentOverlap=0,this.compaction=sq,this.breadthLimit=0,this.rowSpacing=25,this.commentSpacing=this.rowIndent=10,this.commentMargin=20,this.setsPortSpot=!0,this.portSpot=Ub,this.setsChildPortSpot=!0,this.childPortSpot=Ub}function Wq(){Ha.call(this),this.gs=new E(0,0)}function Xq(){this.oo=[]}function Tk(a){var c,d,e,f,g,h,i,j,k,l,m,b=new Xq;if("string"==typeof a)c=(new DOMParser).parseFromString(a,"text/xml");else{if(!(a instanceof Document))return null;c=a.implementation.createDocument("http://www.w3.org/2000/svg","svg",null),c.appendChild(c.importNode(a.documentElement,!0))}if(a=c.getElementsByTagName("svg"),0===a.length)return null;for(d=a[0],e=c.getElementsByTagName("linearGradient"),f=c.getElementsByTagName("radialGradient"),a=0;a<e.length;a++){for(g=e[a],h=Uk(qa,oe,{start:nc,end:oc}),i=g.childNodes,j=0;j<i.length;j++)"stop"===i[j].tagName&&(k=Yq(b,i[j],"stop-color"),k&&(l=Yq(b,i[j],"offset"),l||(l="0"),m=parseFloat(l),isNaN(m)&&(m=0),h.addColorStop((-1!==l.indexOf("%")?.01:1)*m,k)));g=g.getAttribute("id"),"string"==typeof g&&(b["_brush"+g]=h)}for(a=0;a<f.length;a++){for(g=f[a],h=Uk(qa,pe,{start:Yb,end:Yb}),i=g.childNodes,j=0;j<i.length;j++)"stop"===i[j].tagName&&(k=Yq(b,i[j],"stop-color"))&&((l=Yq(b,i[j],"offset"))||(l="0"),m=parseFloat(l),isNaN(m)&&(m=0),h.addColorStop((-1!==l.indexOf("%")?.01:1)*m,k));g=g.getAttribute("id"),"string"==typeof g&&(b["_brush"+g]=h)}for(e=!0;e;)for(e=!1,f=c.getElementsByTagName("use"),a=0;a<f.length;a++)h=f[a],0===h.childNodes.length&&(g=h.href,void 0!==g&&(g=c.getElementById(g.baseVal.substring(1)),null!==g&&(g=g.cloneNode(!0),g.removeAttribute("id"),i=parseFloat(h.getAttribute("x")),isNaN(i)&&(i=0),j=parseFloat(h.getAttribute("y")),isNaN(j)&&(j=0),k=h.getAttribute("transform"),null===k&&(k=""),h.setAttribute("transform",k+" translate("+i+","+j+")"),h.appendChild(g),"use"===g.tagName&&(e=!0))));if(Zq(b,d,null),c=new C,0===b.oo.length)return c;if(1===b.oo.length)return b.oo[0];for(a=0;a<b.oo.length;a++)c.add(b.oo[a]);return c}function $q(a,b){var c=a.getAttribute(b);return"string"!=typeof c&&a.style&&(c=a.style[b]),"string"!=typeof c?null:c}function Yq(a,b,c){var d=b.getAttribute(c);return"string"!=typeof d&&b.style&&(d=b.style[c]),"string"!=typeof d||""===d||"inherit"===d?(b=b.parentNode,"g"===b.tagName||"use"===b.tagName?Yq(a,b,c):null):d}function Zq(a,b,c){var e,f,g,h,i,j,k,l,m,n,o,p,d=b.tagName;if(("g"===d||"svg"===d||"use"===d||"symbol"===d)&&"none"!==Yq(a,b,"display")){for(d=b.childNodes,e=0;e<d.length;e++)if(f=d[e],g=null,void 0!==f.getAttribute){switch(h=f.getAttribute("transform"),f.tagName){case"g":null===h?Zq(a,f,null):(g=new C,Zq(a,f,g));break;case"use":null===h?Zq(a,f,null):(g=new C,Zq(a,f,g));break;case"symbol":if("use"!==b.tagName)break;g=new C,Zq(a,f,g),i=g,j=a,k=f,Yq(j,k,"preserveAspectRatio"),Yq(j,k,"viewBox"),i.scale=1;break;case"path":i=f,g=new W,i=i.getAttribute("d"),"string"==typeof i&&(g.mF=dd(i));break;case"line":l=f,g=new W,i=parseFloat(l.getAttribute("x1")),isNaN(i)&&(i=0),j=parseFloat(l.getAttribute("y1")),isNaN(j)&&(j=0),k=parseFloat(l.getAttribute("x2")),isNaN(k)&&(k=0),l=parseFloat(l.getAttribute("y2")),isNaN(l)&&(l=0),m=new Pc(Tc),g.position=new E(Math.min(i,k),Math.min(j,l)),(k-i)/(l-j)>0?(m.sa=0,m.ta=0,m.D=Math.abs(k-i),m.F=Math.abs(l-j)):(m.sa=0,m.ta=Math.abs(l-j),m.D=Math.abs(k-i),m.F=0),g.td=m;break;case"circle":k=f,g=new W,i=parseFloat(k.getAttribute("r")),isNaN(i)||0>i?g=null:(j=parseFloat(k.getAttribute("cx")),isNaN(j)&&(j=0),k=parseFloat(k.getAttribute("cy")),isNaN(k)&&(k=0),l=new Pc($c),l.sa=0,l.ta=0,l.D=2*i,l.F=2*i,g.position=new E(j-i,k-i),g.td=l);break;case"ellipse":l=f,g=new W,i=parseFloat(l.getAttribute("rx")),isNaN(i)||0>i?g=null:(j=parseFloat(l.getAttribute("ry")),isNaN(j)||0>j?g=null:(k=parseFloat(l.getAttribute("cx")),isNaN(k)&&(k=0),l=parseFloat(l.getAttribute("cy")),isNaN(l)&&(l=0),m=new Pc($c),m.sa=0,m.ta=0,m.D=2*i,m.F=2*j,g.position=new E(k-i,l-j),g.td=m));break;case"rect":m=f,g=new W,i=parseFloat(m.getAttribute("width")),isNaN(i)||0>i?g=null:(j=parseFloat(m.getAttribute("height")),isNaN(j)||0>j?g=null:(k=parseFloat(m.getAttribute("x")),isNaN(k)&&(k=0),l=parseFloat(m.getAttribute("y")),isNaN(l)&&(l=0),n=m.getAttribute("rx"),o=m.getAttribute("ry"),m=parseFloat(n),(isNaN(m)||0>m)&&(m=0),p=parseFloat(o),(isNaN(p)||0>p)&&(p=0),!n&&o?m=p:n&&!o&&(p=m),m=Math.min(m,i/2),p=Math.min(p,j/2),o=void 0,0===m&&0===p?(o=new Pc(Uc),o.sa=0,o.ta=0,o.D=i,o.F=j):(o=K.za/2,n=t.u(),P(n,m,0,!0),n.lineTo(i-m,0),Q(n,i-m*o,0,i,p*o,i,p),n.lineTo(i,j-p),Q(n,i,j-p*o,i-m*o,j,i-m,j),n.lineTo(m,j),Q(n,m*o,j,0,j-p*o,0,j-p),n.lineTo(0,p),Q(n,0,p*o,m*o,0,m,0),S(n),o=n.s,t.v(n)),g.position=new E(k,l),g.td=o));break;case"polygon":g=ar(f);break;case"polyline":g=ar(f)}if(null!==g){if(g instanceof W){if(i=Yq(a,f,"fill"),null!==i&&-1!==i.indexOf("url")?(i=i.substring(i.indexOf("#")+1,i.length-1),i=a["_brush"+i],g.fill=i instanceof qa?i:"black"):g.fill=null===i?"black":"none"===i?null:i,i=Yq(a,f,"stroke"),null!==i&&-1!==i.indexOf("url")?(i=i.substring(i.indexOf("#")+1,i.length-1),i=a["_brush"+i],g.stroke=i instanceof qa?i:"black"):g.stroke="none"===i?null:i,i=parseFloat(Yq(a,f,"stroke-width")),isNaN(i)||(g.lb=i),i=Yq(a,f,"stroke-linecap"),null!==i&&(g.UG=i),i=Yq(a,f,"stroke-dasharray")){for(j=i.split(","),k=[],i=0;i<j.length;i++)l=parseFloat(j[i]),!isNaN(l)&&l>0&&k.push(l);g.Qx=k}(f=Yq(a,f,"stroke-dashoffset"))&&(f=parseFloat(f),isNaN(f)||(g.VG=f)),g.MA=!0}if(null!==h){for(h=h.split(")"),f=!0,i=0;i<h.length;i++)/\(.*[^0-9\.,\s-]/.test(h[i])&&(f=!1),/\(.*[0-9]-[0-9]/.test(h[i])&&(f=!1);if(f)for(i=h.length-1;i>=0;i--)if(j=h[i],""!==j)switch(k=j.indexOf("("),f=j.substring(0,k).replace(/\s*/,""),k=j.substring(k+1).split(/\s*[\s,]\s*/),f){case"rotate":br(a,g,k);break;case"translate":f=g,j=parseFloat(k[0]),isNaN(j)&&(j=0),k=parseFloat(k[1]),isNaN(k)&&(k=0),(0!==j||0!==k)&&(l=f.position.copy(),isNaN(l.x)&&(l.x=0),isNaN(l.y)&&(l.y=0),f.position=new E(j+l.x,k+l.y));break;case"scale":cr(a,g,k);break;case"skewX":dr(a,g,k);break;case"skewY":er(a,g,k);break;case"matrix":fr(a,g,k)}}if(g instanceof C){for(h=g.elements.k,i=f=0,j=g.position.copy(),isNaN(j.x)&&(j.x=0),isNaN(j.y)&&(j.y=0);h.next();)k=h.value.position.copy(),isNaN(k.x)&&(k.x=0),isNaN(k.y)&&(k.y=0),k.x<f&&(f=k.x),k.y<i&&(i=k.y);j.x+=f,j.y+=i,g.position=j}null===c?a.oo.push(g):c.add(g)}}null!==g&&(a=$q(b,"visibility"),("hidden"===a||"collapse"===a)&&(g.visible=!1),(b=$q(b,"opacity"))&&(b=parseFloat(b),isNaN(b)||(g.opacity=b)))}}function fr(a,b,c){var j,k,d=parseFloat(c[0]),e=parseFloat(c[1]),f=parseFloat(c[2]),g=parseFloat(c[3]),h=parseFloat(c[4]),i=parseFloat(c[5]);if(!isNaN(d+e+f+g+h+i))if(j=b.position.copy(),isNaN(j.x)&&(j.x=0),isNaN(j.y)&&(j.y=0),b instanceof W)c=b.td.copy(),c.type===Uc?c=a.Ss(c):c.type===$c?c=gr(c):c.type===Tc&&(c.type=Qc,a=new Rc(c.sa,c.ta),k=new xd(bd,c.D,c.F),a.Ka.add(k),c.Fb.add(a)),c.offset(j.x,j.y),c.transform(d,e,f,g,h-j.x,i-j.y),a=c.normalize(),b.td=c,j.x-=a.x,j.y-=a.y,b.position=j;else{for(b=b.elements.k;b.next();)d=b.value.position.copy(),d.x+=j.x,d.y+=j.y,b.value.position=d;for(b.reset();b.next();)fr(a,b.value,c);for(b.reset();b.next();)d=b.value.position.copy(),d.x-=j.x,d.y-=j.y,b.value.position=d}}function br(a,b,c){var e,f,g,h,i,j,k,d=parseFloat(c[0]);if(isNaN(d)&&(d=0),e=parseFloat(c[1]),isNaN(e)&&(e=0),f=parseFloat(c[2]),isNaN(f)&&(f=0),0!==d)if(g=d*Math.PI/180,h=b.position.copy(),isNaN(h.x)&&(h.x=0),isNaN(h.y)&&(h.y=0),b instanceof W)c=b.td.copy(),c.type===$c?c=gr(c):c.type===Uc&&(c=a.Ss(c)),c.type===Qc?(c.rotate(d,e-h.x,f-h.y),f=c.normalize(),b.td=c,h.x-=f.x,h.y-=f.y,b.position=h):(d=c.sa-e+h.x,i=c.ta-f+h.y,j=c.D-e+h.x,k=c.F-f+h.y,a=d*Math.cos(g)-i*Math.sin(g)+e-h.x,d=i*Math.cos(g)+d*Math.sin(g)+f-h.y,e=j*Math.cos(g)-k*Math.sin(g)+e-h.x,f=k*Math.cos(g)+j*Math.sin(g)+f-h.y,j=Math.min(a,e),k=Math.min(d,f),c.sa=a-j,c.ta=d-k,c.D=e-j,c.F=f-k,h.x+=j,h.y+=k,b.position=h,b.td=c),b.fill instanceof qa&&(h=b.fill.copy(),c=Math.atan((.5-h.start.y)/(.5-h.start.x)),isNaN(c)||(c+=g,h.start=new L((1-Math.cos(c))/2,(1-Math.sin(c))/2),h.end=new L((1+Math.cos(c))/2,(1+Math.sin(c))/2)),b.fill=h),b.stroke instanceof qa&&(h=b.stroke.copy(),c=Math.atan((.5-h.start.y)/(.5-h.start.x)),isNaN(c)||(c+=g,h.start=new L((1-Math.cos(c))/2,(1-Math.sin(c))/2),h.end=new L((1+Math.cos(c))/2,(1+Math.sin(c))/2)),b.stroke=h);else{for(b=b.elements.k;b.next();)g=b.value.position.copy(),g.x+=h.x,g.y+=h.y,b.value.position=g;for(b.reset();b.next();)br(a,b.value,c);for(b.reset();b.next();)g=b.value.position.copy(),g.x-=h.x,g.y-=h.y,b.value.position=g}}function cr(a,b,c){var e,f,d=parseFloat(c[0]);if(isNaN(d)&&(d=1),e=parseFloat(c[1]),isNaN(e)&&(e=d),1!==d||1!==e)if(f=b.position.copy(),isNaN(f.x)&&(f.x=0),isNaN(f.y)&&(f.y=0),b instanceof W)a=b.td.copy(),f.x*=d,f.y*=e,b.position=f,a.scale(d,e),b.td=a;else{for(b=b.elements.k;b.next();)d=b.value.position.copy(),d.x+=f.x,d.y+=f.y,b.value.position=d;for(b.reset();b.next();)cr(a,b.value,c);for(b.reset();b.next();)d=b.value.position.copy(),d.x-=f.x,d.y-=f.y,b.value.position=d}}function dr(a,b,c){var e,f,d=parseFloat(c[0]);if(!isNaN(d))if(d=d*Math.PI/180,e=b.position.copy(),isNaN(e.x)&&(e.x=0),isNaN(e.y)&&(e.y=0),b instanceof W)c=b.td.copy(),c.type===Uc?c=a.Ss(c):c.type===$c?c=gr(c):c.type===Tc&&(c.type=Qc,a=new Rc(c.sa,c.ta),f=new xd(bd,c.D,c.F),a.Ka.add(f),c.Fb.add(a)),c.offset(e.x,e.y),c.transform(1,0,Math.tan(d),1,-e.x,-e.y),a=c.normalize(),b.td=c,e.x-=a.x,e.y-=a.y,b.position=e;else{for(b=b.elements.k;b.next();)d=b.value.position.copy(),d.x+=e.x,d.y+=e.y,b.value.position=d;for(b.reset();b.next();)dr(a,b.value,c);for(b.reset();b.next();)d=b.value.position.copy(),d.x-=e.x,d.y-=e.y,b.value.position=d}}function er(a,b,c){var e,f,d=parseFloat(c[0]);if(!isNaN(d))if(d=d*Math.PI/180,e=b.position.copy(),isNaN(e.x)&&(e.x=0),isNaN(e.y)&&(e.y=0),b instanceof W)c=b.td.copy(),c.type===Uc?c=a.Ss(c):c.type===$c?c=gr(c):c.type===Tc&&(c.type=Qc,a=new Rc(c.sa,c.ta),f=new xd(bd,c.D,c.F),a.Ka.add(f),c.Fb.add(a)),c.offset(e.x,e.y),c.transform(1,Math.tan(d),0,1,-e.x,-e.y),a=c.normalize(),b.td=c,e.x-=a.x,e.y-=a.y,b.position=e;else{for(b=b.elements.k;b.next();)d=b.value.position.copy(),d.x+=e.x,d.y+=e.y,b.value.position=d;for(b.reset();b.next();)er(a,b.value,c);for(b.reset();b.next();)d=b.value.position.copy(),d.x-=e.x,d.y-=e.y,b.value.position=d}}function ar(a){var c,d,f,g,h,k,l,m,b=!1;if("polygon"===a.tagName)b=!0;else if("polyline"!==a.tagName)return null;if(c=new W,d=a.getAttribute("points"),a=new Pc,f=new H(Rc),g=d.split(/\s*[\s,]\s*/),4>g.length)return null;for(d=new H(xd),m=1;m<g.length;m+=2){if(k=eval(g[m-1]),l=eval(g[m]),"number"!=typeof k||isNaN(k)||"number"!=typeof l||isNaN(l))return null;1===m?h=new Rc(k,l):d.add(new xd(bd,k,l))}return b&&(b=new xd(bd,h.sa,h.ta),b.close(),d.add(b)),h.Ka=d,f.add(h),a.Fb=f,h=a.normalize(),c.position=new E(-h.x,-h.y),c.td=a,c}function gr(a){var b=a.sa,c=a.ta,d=a.D,e=a.F,f=Math.abs(d-b)/2,g=Math.abs(e-c)/2,b=Math.min(b,d)+f,c=Math.min(c,e)+g;return new E,e=new Rc(b,c-g),d=new xd(ld),d.Gb=b+K.za*f,d.Xb=c-g,d.xe=b+f,d.ye=c-K.za*g,d.D=b+f,d.F=c,e.Ka.add(d),d=new xd(ld),d.Gb=b+f,d.Xb=c+K.za*g,d.xe=b+K.za*f,d.ye=c+g,d.D=b,d.F=c+g,e.Ka.add(d),d=new xd(ld),d.Gb=b-K.za*f,d.Xb=c+g,d.xe=b-f,d.ye=c+K.za*g,d.D=b-f,d.F=c,e.Ka.add(d),d=new xd(ld),d.Gb=b-f,d.Xb=c-K.za*g,d.xe=b-K.za*f,d.ye=c-g,d.D=b,d.F=c-g,e.Ka.add(d),a.type=Qc,a.Fb.add(e),a}var aa,e,t,mb,ob,pb,Gb,Pb,Qb,Ub,Vb,Wb,Xb,Yb,$b,ac,bc,cc,gc,hc,mc,nc,oc,rc,sc,tc,uc,vc,K,Tc,Uc,$c,Qc,cd,dd,ed,kd,bd,ld,md,sd,ud,Kd,Ld,Md,Nd,Me,Xe,na,Df,vf,wf,zg,Ag,Bg,Qg,Rg,Sg,Tg,Dh,Eh,yh,xh,mh,vh,zh,Ah,Ch,Fh,Bh,jf,hf,Th,df,Ki,Li,qg,ug,wg,xg,rg,tg,ne,oe,pe,dk,pa,ah,bh,ek,fk,Sc,ch,dh,Uk,Vk,fh,ri,Zg,si,fa,wk,xk,Jg,Bi,am,Ql,Gl,km,lm,jm,im,mm,tm,um,cj,ij,Oj,vm,Jm,Km,hk,Im,Lm,al,Vm,Ng,Vg,Mg,Lg,Yk,Zk,$k,hm,Wm,Xm,Ym,Zm,$m,an,bn,ja,vn,wn,ka,En,Sn,Tn,il,hl,fl,gl,dl,el,bl,cl,vl,ul,tl,wl,rl,sl,pl,ql,ml,nl,kl,ll,ol,El,Dl,Ao,yy,Bo,ip,kp,Co,qp,op,up,Do,vp,wp,xp,zp,Eo,Kp,Lp,Tp,fq,gq,hq,iq,Gq,jq,uq,vq,lq,aq,mq,nq,qq,sq,Mp,eq,dq,cq,Op,Uq,Sp,Np,Zp,Yp,ca={};if(void 0===document.createElement("canvas").getContext)throw window.console&&window.console.log("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode."),Error("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode.");if(!Object.prototype.__defineGetter__&&!Object.defineProperty)throw Error("GoJS requires a newer version of JavaScript");Object.prototype.__defineGetter__&&!Object.defineProperty&&(Object.defineProperty=function(a,b,c){c.get&&a.__defineGetter__(b,c.get),c.set&&a.__defineSetter__(b,c.set)}),Object.prototype.__lookupGetter__&&!Object.getOwnPropertyDescriptor&&(Object.getOwnPropertyDescriptor=function(a,b){return{get:a.__lookupGetter__(b),set:a.__lookupSetter__(b)}}),Object.getPrototypeOf||(Object.getPrototypeOf=function(a){return a.__proto__}),Object.isFrozen||(Object.isFrozen=function(a){return!0===a.LH}),Object.freeze||(Object.freeze=function(a){a.LH=!0}),Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)}),Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return f.apply(a,e.concat(d.call(arguments)))}function c(){}var d=Array.prototype.slice,e=d.call(arguments,1),f=this;return c.prototype=this.prototype,b.prototype=new c,b}),function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),d=Math.max(8,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);return a=c+d,e}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}(),e={hj:!1,uA:!1,aF:!1,aJ:!1,cJ:!1,gG:!1,tF:!1,qE:!1,assert:function(a,b){if(!a&&e.qE)throw window&&(t.trace(b),window.alert(b)),Error(b)},lt:null,enableBoundsInfo:function(a){e.hj=!0,a&&a.Yt()},disableBoundsInfo:function(a){e.hj=!1,a&&(da(a),a.Yt())},YE:function(a,b){var c,d,f,g,h,i;for(void 0===a&&(a=e.lt),void 0===b&&(b=a.sl("").mb),c=b.length,d=a.Za.getContext("2d"),d.fillStyle="rgba(255,255,0,.3)",f=0;c>f;f++)g=b.wa(f),h=g.pa,null!==g.va?e.YE(a,g.va):(i=g.Dh.copy(),i.$A(g.Rc),d.save(),d.transform(i.m11,i.m12,i.m21,i.m22,i.dx,i.dy),d.fillRect(h.x,h.y,h.width,h.height),d.restore())},ZE:function(a,b){var c,d,f,g,h,i;for(a||(a=e.lt),b||(b=a.sl("").mb),c=a.Za.getContext("2d"),d=b.length,c.fillStyle="rgba(0,0,255,.3)",f=0;d>f;f++)g=b.wa(f),h=g.Ja,i=g.Dh,null!==g.va?e.ZE(a,g.va):(c.save(),c.transform(i.m11,i.m12,i.m21,i.m22,i.dx,i.dy),c.fillRect(h.x,h.y,h.width,h.height),c.restore())},WI:function(a,b){var c,d,f,g,h,i;for(a||(a=e.lt),b||(b=a.sl("").mb),c=a.Za.getContext("2d"),d=b.length,c.fillStyle="rgba(0,0,255,.3)",f=0;d>f;f++)g=b.wa(f),h=g.Ha,i=g.Dh,null!==g.va?e.WI(a,g.va):(c.save(),c.transform(i.m11,i.m12,i.m21,i.m22,i.dx,i.dy),c.fillRect(h.x||0,h.y||0,h.width,h.height),c.restore())},LK:function(){e.ZE(),e.YE()},MK:function(a){a||(a=e.lt);var b=a.Mc;a=a.Za.getContext("2d"),a.strokeStyle="rgba(0,255,0,.9)",a.strokeRect(b.x,b.y,b.width,b.height)},$E:function(a,b){b.fillStyle="red",b.fillRect(0,0,8,8),b.lineWidth=8,b.strokeStyle="rgba(255,255,0,.6)";var c=a.Ab;b.strokeRect(c.x,c.y,c.width,c.height),b.fillStyle="rgba(0,255,0,.2)",b.fillRect(a.Mc.x,a.Mc.y,a.Mc.width,a.Mc.height)},XI:function(a,b){b instanceof ea||(a.lineWidth=2,a.strokeStyle="rgba(255,0,0,.5)",a.strokeRect(b.Pb.x,b.Pb.y,b.Pb.width,b.Pb.height),void 0!==b.stroke&&(a.strokeStyle=b.stroke),void 0!==b.se&&(a.lineWidth=b.se),null!==b.ia&&b.ia.type===fa&&(a.lineWidth=1,a.strokeStyle="rgba(10,200,10,.6)",void 0!==b.stroke&&(a.strokeStyle=b.stroke),void 0!==b.se&&(a.lineWidth=b.se)))},YI:function(a,b){a.lineWidth=1,a.strokeStyle="rgba(0,0,255,.5)",a.strokeRect(b.Ja.x,b.Ja.y,b.Ja.width,b.Ja.height),void 0!==b.stroke&&(a.strokeStyle=b.stroke),void 0!==b.se&&(a.lineWidth=b.se)},tA:function(a,b,c){var d,e,f,g,h,i,j;for(a.setTransform(c.m11,c.m12,c.m21,c.m22,c.dx,c.dy),c=b.Tb.length,d=0;c>d;d++)for(e=b.Tb.wa(d),f=e.mb.length,g=0;f>g;g++)h=e.mb.wa(g),void 0!==h.location&&null!==h.location&&(h.location.P()&&(i=h.location.x,j=h.location.y,a.beginPath(),a.strokeStyle="limegreen",a.lineWidth=2,a.moveTo(i,j+6),a.lineTo(i,j),a.lineTo(i+6,j),a.moveTo(i,j),a.lineTo(i+10,j+20),a.stroke()),i=h.position.x,j=h.position.y,a.beginPath(),a.strokeStyle="red",a.lineWidth=2,a.moveTo(i,j+6),a.lineTo(i,j),a.lineTo(i+6,j),a.moveTo(i,j),a.lineTo(i+20,j+10),a.stroke());a.setTransform(1,0,0,1,0,0)},bJ:function(a,b,c){var e,f,d=a.length;for(b.fillStyle="rgba(255,0,0,.1)",e=0;d>e;e++)f=ga(c,a[e]),b.fillRect(f[0],f[1],f[2],f[3])},ZI:function(a,b,c,d,e){a.fillStyle="rgba(0,255,0,.2)",a.fillRect(b,c,d,e)},$I:function(a,b,c){var d,e;for(a.save(),d=b.Rc,d.reset(),1!==b.lc&&d.scale(b.lc),b=b.Pa,0===b.x&&0===b.y||d.translate(-b.x,-b.y),a.setTransform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy),c=c.Bc.n,d=c.length,b=0;d>b;b++)e=c[b],a.beginPath(),a.moveTo(e.x-4,e.y),a.lineTo(e.x+4,e.y),a.moveTo(e.x,e.y-4),a.lineTo(e.x,e.y+4),a.lineWidth=2,a.strokeStyle="rgba(255,0,0,.9)",a.stroke();a.restore()},KK:function(a){for(a||(a=e.lt),a=a.pn;a.next();)t.trace(a.value.toString())},eL:function(a,b){var c=b.em(a),d=b.dc;return d.Yd=b.MB(c),d.da=c,ha(b,d,a)},bL:function(a,b){b.fe(a.da)&&(b.Re.fillStyle="lime",b.Re.Rl="lime",b.Re.fillRect(a.Yd.x,a.Yd.y,1*b.scale,1*b.scale))},cL:function(a){var c,d,e,f,g,b=ia(a,!1,null);if(!b.Cp)for(a=a.Re,c=0;c<=b.Mm;c++)for(d=0;d<=b.Nm;d++)e=b.rc[c][d],e!==ja&&(f=c*b.Fd+b.Sf,g=d*b.xd+b.Tf,0!==e&&(a.fillStyle="rgba(255, 0, 0, .2)",a.fillRect(f,g,b.Fd,b.xd)),e>=ka||(e%=10,a.fillStyle="blue",a.fillText(e.toString(),f,g+b.xd)))},eJ:function(a){var b,c;if(a instanceof v)for(a=a.pn;a.next();)for(b=a.value,t.trace(b.toString()),b=b.wj;b.next();)e.eJ(b.value);else if(a instanceof x){if(t.trace("References for "+a),a.layer&&t.trace("  "+a.layer.toString()+' LayerName: "'+a.Ne+'"'),a.An!==a&&t.trace("  SelectionObject: "+a.An.toString()+' SelectionObjectName: "'+a.eu+'"'),a.Zb!==a&&t.trace("  LocationObject: "+a.Zb.toString()+' LocationObjectName: "'+a.Jt+'"'),a.Yg){for(c="",b=a.Yg.k;b.next();)c+=b.key+" ";t.trace("  Adornments: "+c)}if(a.fb&&t.trace("  ContainingGroup: "+a.fb.toString()),a instanceof y){if(a.Ad)for(b=a.Ad.k;b.next(););if(0<a.Vd.count){for(c="",b=a.Vd;b.next();)c+=b.value.toString()+", ";t.trace("  Links: "+c)}if(a.Dd&&t.trace("  LabeledLink: "+a.Dd.toString()),a instanceof z){for(t.trace("  Placeholder: "+a.placeholder),c="",b=a.Nc;b.next();)c+=b.value.toString()+", ";for(t.trace("  Members: "+c),c="",b=a.vm.k;b.next();)c+=b.value.toString()+", ";t.trace("  NestedGroups: "+c),t.trace("  Layout: "+a.ic)}}else if(a instanceof B){for(t.trace("  Path: "+a.path),t.trace("  From: "+a.ca+" "+a.sd+' "'+a.Cf+'"'),t.trace("  To: "+a.fa+" "+a.Xd+' "'+a.hg+'"'),c="",b=a.tj;b.next();)c+=b.value.toString()+", ";t.trace("  LabelNodes: "+c)}}},fJ:function(a){if(a instanceof v)for(a=a.pn;a.next();){var b=a.value;for(t.trace(b.toString()),b=b.wj;b.next();)e.fJ(b.value)}else a instanceof x&&(b=" ",a.oA&&(b+="c"),a.qA&&(b+="d"),a.GA&&(b+="g"),a.ZA&&(b+="m"),a.rB&&(b+="h"),a.sB&&(b+="z"),a.tB&&(b+="o"),a.uk&&(b+="s"),a.GB&&(b+="t"),a.wB&&(b+="A"),a.lx&&(b+="B"),a.nx&&(b+="L"),a.ib&&(b+="S"),a.qi&&(b+="H"),e.GC(a,1,b))},GC:function(a,b,c){for(var d="",f=0;b>f;f++)d+="  ";if(d+=a.toString(),c&&(d+=c),c=" ",c=a.visible?c+"v":c+"~",a.mf&&(c+="p"),a.pi&&(c+="m"),a.Bt&&(c+="a"),d=d+c+(" "+a.pa.toString()),a.Ea.P()&&(d+=" d:"+a.Ea.toString()),a.Ja.P()&&(d+=" n:"+a.Ja.toString()),1!==a.scale&&(d+=" s:"+a.scale),0!==a.angle&&(d+=" a:"+a.angle),null!==a.background&&(d+=" b:"+a.background.toString()),null!==a.hk&&(d+=" a:"+a.background.toString()),a instanceof C&&(d+=" elts:"+a.va.count,0!==a.LB&&(d+=" top:"+a.LB),0!==a.RA&&(d+=" left:"+a.RA),null!==a.Ht&&(d+=" itemArray#:"+t.ub(a.Ht)),a.FJ&&(d+=" cat:"+a.FJ),null!==a.data&&(d+=" data:"+a.data)),t.trace(d),a instanceof C)for(a=a.elements;a.next();)e.GC(a.value,b+1,"")},NK:function(a){for(t.trace("DelayedReferences ("+a.lg.count+")"),a=a.lg.k;a.next();){for(var b="",c=a.value.k;c.next();)b+=na(c.value)+", ";t.trace("  "+a.key+": "+b)}}},ca.Debug=e,t={xi:Object.freeze([]),AA:{},hF:0,Yw:{},zA:0,ot:"...",yt:{},gx:0,NB:[],Dx:null,Dn:document.createElement("canvas").getContext("2d"),hq:"",IK:document.createElement("img"),rA:[],FB:"ontouchstart"in window,hL:"ongesturestart"in window,OE:!1,ht:null,it:null,gt:null,Cw:"",kn:window.navigator&&0<window.navigator.userAgent.indexOf("534.30")&&0<window.navigator.userAgent.indexOf("Android"),kx:window.navigator&&0<window.navigator.userAgent.indexOf("MSIE 10.0"),OA:window.navigator&&0<window.navigator.userAgent.indexOf("Trident/7"),ln:0<=navigator.platform.toUpperCase().indexOf("MAC"),yJ:navigator.platform.match(/(iPhone|iPod|iPad)/i),oH:!1,rH:!1,qH:!1,pH:!1,PE:null,nq:!1,mH:!1,nH:!1,LE:function(a,b,c){var d;
return function(){var e=this,f=arguments;clearTimeout(d),d=setTimeout(function(){d=null,c||a.apply(e,f)},b),c&&!d&&a.apply(e,f)}},m:function(a){throw e&&e.qE&&alert(a),Error(a)},J:function(a,b){if(a.tb){var c="The object is frozen, so its properties cannot be set: "+a.toString();void 0!==b&&(c+="  to value: "+b),t.m(c)}},l:function(a,b,c,d){a instanceof b||(c=t.mi(c),void 0!==d&&(c+="."+d),t.jc(a,b,c))},i:function(a,b,c,d){typeof a!==b&&(c=t.mi(c),void 0!==d&&(c+="."+d),t.jc(a,b,c))},q:function(a,b,c){"number"==typeof a&&isFinite(a)||(b=t.mi(b),void 0!==c&&(b+="."+c),t.m(b+" must be a real number type, and not NaN or Infinity: "+a))},Fa:function(a,b,c,d){a instanceof oa&&a.Ye===b||(c=t.mi(c),void 0!==d&&(c+="."+d),t.jc(a,"a constant of class "+t.Hg(b),c))},gp:function(a,b){"string"==typeof a?pa(a)||t.m('Color "'+a+'" is not a valid color string for '+b):a instanceof qa||t.m("Value for "+b+" must be a color string or a Brush, not "+a)},jc:function(a,b,c,d){b=t.mi(b),c=t.mi(c),void 0!==d&&(c+="."+d),"string"==typeof a?t.m(c+" value is not an instance of "+b+': "'+a+'"'):t.m(c+" value is not an instance of "+b+": "+a)},ha:function(a,b,c,d){c=t.mi(c),void 0!==d&&(c+="."+d),t.m(c+" is not in the range "+b+": "+a)},gd:function(a){t.m(t.Hg(a)+" constructor cannot take any arguments.")},Vb:function(a){t.m("Collection was modified during iteration: "+a.toString()+"\n  Perhaps you should iterate over a copy of the collection,\n  or you could collect items to be removed from the collection after the iteration.")},trace:function(a){window&&window.console&&window.console.log(a)},xb:function(a){return"object"==typeof a&&null!==a},Ec:null,on:function(a,b,c,d){for(b=0;b<a.length;b++){var e=a[b];t.xb(e)&&(e=t.Gf(e,c,d)),a[b]=e}return d||t.Ec(a)?a:window.ko.observableArray(a)},Gf:function(a,b,c){if(a)for(var d in a)"__gohashid"!==d&&(a[d]=t.LJ(a,d,b,c));return a},LJ:function(a,b,c,d){var h,g,e=a[b],f=t.Ec(e)?e:Array.isArray(e)?t.on(e,b,c,d):window.ko.observable(e);if(d){if(d=f.eC){g=c.__gohashid,d[g]&&(d[g].dispose(),delete d[g]),g=!1;for(h in d){g=!0;break}}!g&&f.Gu&&(f.Gu.dispose(),delete f.Gu)}else f.Gu||(f.Gu=f.subscribe(function(a){f.Jo=a},null,"beforeChange")),d=f.eC,d||(f.eC=d={}),g=c.__gohashid,d[g]||(d[g]=f.subscribe(function(d){c.Ex(a,b,f.Jo,d)}));return f},isArray:function(a){return Array.isArray(a)||t.Ec&&t.Ec(a)||a instanceof NodeList||a instanceof HTMLCollection},AJ:function(a){return Array.isArray(a)||t.Ec&&t.Ec(a)},ft:function(a,b,c){t.isArray(a)||t.jc(a,"Array or NodeList or HTMLCollection",b,c)},ub:function(a){return t.Ec&&t.Ec(a)&&(a=a()),a.length},rb:function(a,b){return t.Ec&&t.Ec(a)&&(a=a()),Array.isArray(a),a[b]},oE:function(a,b,c){t.Ec&&t.Ec(a)&&(a=a()),Array.isArray(a)?a[b]=c:t.m("Cannot replace an object in an HTMLCollection or NodeList at "+b)},fA:function(a,b){if(t.Ec&&t.Ec(a)&&(a=a()),Array.isArray(a))return a.indexOf(b);for(var c=a.length,d=0;c>d;d++)if(a[d]===b)return d;return-1},fj:function(a,b,c){t.Ec&&t.Ec(a)&&(a=a()),Array.isArray(a)?b>=a.length?a.push(c):a.splice(b,0,c):t.m("Cannot insert an object into an HTMLCollection or NodeList: "+c+" at "+b)},gj:function(a,b){t.Ec&&t.Ec(a)&&(a=a()),Array.isArray(a)?b>=a.length?a.pop():a.splice(b,1):t.m("Cannot remove an object from an HTMLCollection or NodeList at "+b)},vy:[],N:function(){var a=t.vy.pop();return void 0===a?new E:a},qc:function(a,b){var c=t.vy.pop();return void 0===c?new E(a,b):(c.x=a,c.y=b,c)},B:function(a){t.vy.push(a)},aC:[],Ml:function(){var a=t.aC.pop();return void 0===a?new ra:a},qk:function(a){t.aC.push(a)},wy:[],Nf:function(){var a=t.wy.pop();return void 0===a?new F:a},wk:function(a,b,c,d){var e=t.wy.pop();return void 0===e?new F(a,b,c,d):(e.x=a,e.y=b,e.width=c,e.height=d,e)},oc:function(a){t.wy.push(a)},bC:[],Bh:function(){var a=t.bC.pop();return void 0===a?new sa:a},cf:function(a){t.bC.push(a)},xy:null,u:function(){var a=t.xy;return null!==a?(t.xy=null,a):new ua},v:function(a){a.reset(),t.xy=a},$B:[],Hb:function(){var a=t.$B.pop();return void 0===a?[]:a},Ca:function(a){a.length=0,t.$B.push(a)},cC:1,Fc:function(a){a.__gohashid=t.cC++},xt:function(a){var b=a.__gohashid;return void 0===b&&(b=t.cC++,a.__gohashid=b),b},ud:function(a){return a.__gohashid},g:function(a,b,c){"name"!==b&&"length"!==b&&(a[b]=c)},ka:function(a,b){b.Fy=a,ca[a]=b},Qa:function(a,b){function c(){}c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a},ji:function(a){a.PH=!0},defineProperty:function(a,b,c,d,f){var g,h,i,j;t.i(a,"function","Util.defineProperty:classfunc"),t.i(b,"object","Util.defineProperty:propobj"),t.i(c,"function","Util.defineProperty:getter"),t.i(d,"function","Util.defineProperty:setter");for(g in b){if(h=b[g],b={get:c,set:d},void 0!==f)for(i in f)b[i]=f[i];Object.defineProperty(a.prototype,g,b),f=Object.getOwnPropertyDescriptor(a.prototype,g),h&&f&&Object.defineProperty(a.prototype,h,f),e&&h&&(j=h.charAt(0).toUpperCase()+h.slice(1),h===j&&t.m('Defining capitalized property "'+j+'"!?'),Object.defineProperty(a.prototype,j,{get:function(){t.kx||t.OA||t.trace('Getting the property "'+j+'" is probably not what you intended: it is capitalized but should be spelled "'+h+'"')},set:function(){t.m('Setting the property "'+j+'" is probably not what you intended: it is capitalized but should be spelled "'+h+'"')}}));break}},A:function(a,b,c,d){var f,g,h,i;t.i(a,"function","Util.defineReadOnlyProperty:classfunc"),t.i(b,"object","Util.defineReadOnlyProperty:propobj"),t.i(c,"function","Util.defineReadOnlyProperty:getter");for(f in b){if(g=b[f],b={get:c,set:function(a){t.m('The property "'+g+'" is read-only and cannot be set to '+a)}},void 0!==d)for(h in d)b[h]=d[h];Object.defineProperty(a.prototype,f,b),d=Object.getOwnPropertyDescriptor(a.prototype,f),g&&d&&Object.defineProperty(a.prototype,g,d),e&&g&&(i=g.charAt(0).toUpperCase()+g.slice(1),Object.defineProperty(a.prototype,i,{get:function(){t.kx||t.OA||t.trace('Getting the property "'+i+'" is probably not what you intended: it is capitalized but should be spelled "'+g+'"')},set:function(){t.m('Setting the read-only property "'+i+'" is probably not what you intended: it is capitalized but should be spelled "'+g+'", and cannot be set anyway')}}));break}},ee:function(a,b){for(var c in b)b[c]=!0;a.prototype.yD=b},mi:function(a){return void 0===a?"":"string"==typeof a?a:"function"==typeof a?t.Hg(a):null===a?"*":""},Hg:function(a){if("function"==typeof a){if(a.Fy)return a.Fy;if(a.name)return a.name;var b=a.toString(),c=b.indexOf("(");if(b=b.substring(9,c).trim())return a.Fy=b}else if("object"==typeof a&&a.constructor)return t.Hg(a.constructor);return typeof a},w:function(a,b,c){t.i(a,"function","Util.defineEnumValue:classfunc"),t.i(b,"string","Util.defineEnumValue:name"),t.i(c,"number","Util.defineEnumValue:num"),c=new oa(a,b,c),Object.freeze(c),a[b]=c;var d=a.tu;return d||(d=new wa("string",oa),a.tu=d),d.add(b,c),c},en:function(a,b){if(!b)return null;t.i(a,"function","Util.findEnumValueForName:classfunc"),t.i(b,"string","Util.findEnumValueForName:name");var c=a.tu;return c?c.Da(b):null},BI:function(a){var f,g,h,e={};for(f in a){for(g=!1,h=1;h<arguments.length;h++)if(arguments[h]===f){g=!0;break}g||(e[f]=a[f])}return e},nb:function(a,b){if(!a||!b)return null;var c=void 0;try{"function"==typeof b?c=b(a):"function"==typeof a.getAttribute?(c=a.getAttribute(b),null===c&&(c=void 0)):(c=a[b],t.Ec&&t.Ec(c)&&(c=c()))}catch(d){e&&t.trace("property get error: "+d.toString())}return c},Wa:function(a,b,c){if(a&&b)try{if("function"==typeof b)b(a,c);else if("function"==typeof a.setAttribute)a.setAttribute(b,c);else if(t.Ec){var d=a[b];t.Ec(d)?d(c):a[b]=c}else a[b]=c}catch(f){e&&t.trace("property set error: "+f.toString())}},Kx:function(a,b){var c,g,d,f,h,i,j,k;t.i(a,"object","Setting properties requires Objects as arguments"),t.i(b,"object","Setting properties requires Objects as arguments"),c=e,c||(e=t),d=a instanceof C,f=a instanceof v;for(g in b){if(g||t.m("Setting properties requires non-empty property names"),h=a,i=g,(d||f)&&(j=g.indexOf("."),j>0&&(k=g.substring(0,j),d?h=a.we(k):(h=a[k])||(h=a.Cb[k]),h?i=g.substr(j+1):t.m("Unable to find object named: "+k+" in "+a.toString()+" when trying to set property: "+g))),"_"!==i[0]&&!t.bx(h,i))if(f&&t.bx(a.Cb,i))h=a.Cb;else{if(f&&xa(a,i)){a.$z(i,b[i]);continue}t.m('Trying to set undefined property "'+i+'" on object: '+h.toString())}h[i]=b[g],"_"===i[0]&&(j=h.Xl,j||(j=[],h.Xl=j),j.push(i))}return e=c,a},bx:function(a,b){var c,d;for(c=Object.getPrototypeOf(a);c&&c!==Function;){if(c.hasOwnProperty(b))return!0;if(d=c.yD,d&&d[b])return!0;c=Object.getPrototypeOf(c)}return!1},vE:function(a,b){var d,c,e;if(!t.xb(b)||b instanceof Element||b instanceof CanvasRenderingContext2D)return"";c="";for(d in b)"string"!=typeof d?(""===c&&(c=b+"\n"),c+="  "+d+" is not a string property\n"):"_"===d.charAt(0)||2>=d.length||(e=t.nb(b,d),null===e||"function"==typeof e||t.bx(b,d)||(""===c&&(c=b+"\n"),c+='  unknown property "'+d+'" has value: '+e+" at "+a+"\n"));return c},Aw:function(a,b){var c,d;if(b&&"number"!=typeof b&&"string"!=typeof b&&"boolean"!=typeof b&&"function"!=typeof b)if(void 0!==t.ud(b)){if(!t.Xv.contains(b))if(t.Xv.add(b),t.xv.add(t.vE(a,b)),b instanceof H||b instanceof I||b instanceof wa)for(c=b.k;c.next();)t.Aw(a+"["+c.key+"]",c.value);else for(c in b)if(d=t.nb(b,c),void 0!==d&&null!==d&&t.xb(d)&&d!==b.yD){if(b instanceof za){if(d===b.Eo)continue}else if(b instanceof C){if("data"===c||d===b.Zl)continue;if("itemArray"===c||d===b.Li)continue;if(b instanceof x&&d===b.Uj)continue}else if(!(b instanceof v))if(b instanceof Ba){if("archetypeGroupData"===c||d===b.Ay)continue}else if(b instanceof Ca){if("archetypeLinkData"===c||d===b.Cy)continue;if("archetypeLabelNodeData"===c||d===b.By)continue}else if(b instanceof Da){if("archetypeNodeData"===c||d===b.Kk)continue}else if(b instanceof J){if("nodeDataArray"===c||d===b.Te)continue;if("linkDataArray"===c||d===b.ih||d===b.qm)continue;if(d===b.Gc)continue;if(d===b.lg)continue}else if(b instanceof Ea||b instanceof Fa||b instanceof Ha)continue;t.Aw(a+"."+c,d)}}else if(Array.isArray(b))for(c=0;c<b.length;c++)t.Aw(a+"["+c+"]",b[c]);else t.xv.add(t.vE(a,b))},wI:function(a){return void 0===t.Xv?t.Xv=new I:t.Xv.clear(),t.xv=new Ka,t.Aw("",a),a=t.xv.toString(),t.xv=null,a},gK:function(a){var b,c,e,d,f,g;for(b=[],c=0;256>c;c++)b[c]=c;for(d=0,c=0;256>c;c++)d=(d+b[c]+119)%256,e=b[c],b[c]=b[d],b[d]=e;for(d=c=0,f="",g=0;g<a.length;g++)c=(c+1)%256,d=(d+b[c])%256,e=b[c],b[c]=b[d],b[d]=e,f+=String.fromCharCode(a.charCodeAt(g)^b[(b[c]+b[d])%256]);return f},rJ:function(a){var b,c,d,e;for(b=[],c=0;256>c;c++)b["0123456789abcdef".charAt(c>>4)+"0123456789abcdef".charAt(15&c)]=String.fromCharCode(c);for(a.length%2&&(a="0"+a),d=[],e=0,c=0;c<a.length;c+=2)d[e++]=b[a.substr(c,2)];return a=d.join(""),""===a?"0":a},Ma:function(a){return t.gK(t.rJ(a))},Ql:null,uw:"7da71ca0ad381e90",xI:"@COLOR1",yI:"@COLOR2"},t.Ql=function(){var c,d,a=document.createElement("canvas"),b=a.getContext("2d");for(b[t.Ma("7ca11abfd022028846")]=t.Ma("398c3597c01238"),c=["5da73c80a3330d854f9e5e671d6633","32ab5ff3b26f42dc0ed90f22402913b54ae6247590da4bb21c324ba3a84e385776","54a702f3e53909c447824c6706603faf4cfb236cdfda5de14c134ba1a95a2d4c7cc6f93c1387","74bf19bce72555874c86"],d=1;5>d;d++)b[t.Ma("7ca11abfd7330390")](t.Ma(c[d-1]),-350,-350);for(b[t.Ma("7ca11abfd022028846")]=t.Ma("39f046ebb36e4b"),d=1;5>d;d++)b[t.Ma("7ca11abfd7330390")](t.Ma(c[d-1]),-350,-350);return(4!==c.length||"5"!==c[0][0]||"7"!==c[3][0])&&(t.w=function(a,b){var d,c=new oa(a,b,2);return Object.freeze(c),a[b]=c,d=a.tu,d||(d=new wa("string",oa),a.tu=d),d.add(b,c),c}),a}(),oa.prototype.toString=function(){return t.Hg(this.kC)+"."+this.ec},t.A(oa,{Ye:"classType"},function(){return this.kC}),t.A(oa,{name:"name"},function(){return this.ec}),t.A(oa,{value:"value"},function(){return this.UH}),Ka.prototype.toString=function(){return this.jC.join("")},Ka.prototype.add=function(a){a&&this.jC.push(a)},t.A(La,{k:"iterator"},function(){return this}),La.prototype.reset=La.prototype.reset=function(){},La.prototype.next=La.prototype.hasNext=La.prototype.next=function(){return!1},La.prototype.first=La.prototype.gb=function(){return null},La.prototype.any=function(){return!1},La.prototype.all=function(){return!0},La.prototype.each=function(){},t.A(La,{count:"count"},function(){return 0}),La.prototype.mg=function(){},La.prototype.toString=function(){return"EmptyIterator"},t.jg=new La,t.ee(Ma,{key:!0,value:!0}),t.A(Ma,{k:"iterator"},function(){return this}),Ma.prototype.reset=Ma.prototype.reset=function(){this.key=-1},Ma.prototype.next=Ma.prototype.hasNext=Ma.prototype.next=function(){return-1===this.key?(this.key=0,!0):!1},Ma.prototype.first=Ma.prototype.gb=function(){return this.key=0,this.value},Ma.prototype.any=function(a){return this.key=-1,a(this.value)},Ma.prototype.all=function(a){return this.key=-1,a(this.value)},Ma.prototype.each=function(a){this.key=-1,a(this.value)},t.A(Ma,{count:"count"},function(){return 1}),Ma.prototype.mg=function(){this.value=null},Ma.prototype.toString=function(){return"SingletonIterator("+this.value+")"},t.ee(Oa,{key:!0,value:!0}),t.A(Oa,{k:"iterator"},function(){return this}),t.g(Oa,"predicate",Oa.prototype.Fl),t.defineProperty(Oa,{Fl:"predicate"},function(){return this.Xj},function(a){this.Xj=a}),Oa.prototype.reset=Oa.prototype.reset=function(){var a=this.Ld;a.Kd=null,this.cb=a.Y,this.ad=-1},Oa.prototype.next=Oa.prototype.hasNext=Oa.prototype.next=function(){var b,c,d,e,a=this.Ld;if(a.Y!==this.cb&&t.Vb(a),a=a.n,b=a.length,c=++this.ad,d=this.Xj,null!==d)for(;b>c;){if(e=a[c],d(e))return this.key=this.ad=c,this.value=e,!0;c++}else{if(b>c)return this.key=c,this.value=a[c],!0;this.mg()}return!1},Oa.prototype.first=Oa.prototype.gb=function(){var b,c,d,e,a=this.Ld;if(this.cb=a.Y,this.ad=0,a=a.n,b=a.length,c=this.Xj,null!==c){for(d=0;b>d;){if(e=a[d],c(e))return this.key=this.ad=d,this.value=e;d++}return null}return b>0?(e=a[0],this.key=0,this.value=e):null},Oa.prototype.any=function(a){var c,d,e,f,g,h,b=this.Ld;for(b.Kd=null,c=b.Y,this.ad=-1,d=b.n,e=d.length,f=this.Xj,g=0;e>g;g++)if(h=d[g],null===f||f(h)){if(a(h))return!0;b.Y!==c&&t.Vb(b)}return!1},Oa.prototype.all=function(a){var c,d,e,f,g,h,b=this.Ld;for(b.Kd=null,c=b.Y,this.ad=-1,d=b.n,e=d.length,f=this.Xj,g=0;e>g;g++)if(h=d[g],null===f||f(h)){if(!a(h))return!1;b.Y!==c&&t.Vb(b)}return!0},Oa.prototype.each=function(a){var c,d,e,f,g,h,b=this.Ld;for(b.Kd=null,c=b.Y,this.ad=-1,d=b.n,e=d.length,f=this.Xj,g=0;e>g;g++)h=d[g],(null===f||f(h))&&(a(h),b.Y!==c&&t.Vb(b))},t.A(Oa,{count:"count"},function(){var b,c,d,e,a=this.Xj;if(null!==a){for(b=0,c=this.Ld.n,d=c.length,e=0;d>e;e++)a(c[e])&&b++;return b}return this.Ld.n.length}),Oa.prototype.mg=function(){this.key=-1,this.value=null,this.cb=-1,this.Xj=null,this.Ld.Kd=this},Oa.prototype.toString=function(){return"ListIterator@"+this.ad+"/"+this.Ld.count},t.ee(Qa,{key:!0,value:!0}),t.A(Qa,{k:"iterator"},function(){return this}),Qa.prototype.reset=Qa.prototype.reset=function(){var a=this.Ld;a.yo=null,this.cb=a.Y,this.ad=a.n.length},Qa.prototype.next=Qa.prototype.hasNext=Qa.prototype.next=function(){var b,a=this.Ld;return a.Y!==this.cb&&t.Vb(a),b=--this.ad,b>=0?(this.key=b,this.value=a.n[b],!0):(this.mg(),!1)},Qa.prototype.first=Qa.prototype.gb=function(){var b,a=this.Ld;return this.cb=a.Y,b=a.n,this.ad=a=b.length-1,a>=0?(b=b[a],this.key=a,this.value=b):null},Qa.prototype.any=function(a){var c,d,e,b=this.Ld;for(b.yo=null,c=b.Y,d=b.n,e=d.length,this.ad=e,e-=1;e>=0;e++){if(a(d[e]))return!0;b.Y!==c&&t.Vb(b)}return!1},Qa.prototype.all=function(a){var c,d,e,b=this.Ld;for(b.yo=null,c=b.Y,d=b.n,e=d.length,this.ad=e,e-=1;e>=0;e++){if(!a(d[e]))return!1;b.Y!==c&&t.Vb(b)}return!0},Qa.prototype.each=function(a){var c,d,e,b=this.Ld;for(b.yo=null,c=b.Y,d=b.n,e=d.length,this.ad=e,e-=1;e>=0;e++)a(d[e]),b.Y!==c&&t.Vb(b)},t.A(Qa,{count:"count"},function(){return this.Ld.n.length}),Qa.prototype.mg=function(){this.key=-1,this.value=null,this.cb=-1,this.Ld.yo=this},Qa.prototype.toString=function(){return"ListIteratorBackwards("+this.ad+"/"+this.Ld.count+")"},t.ka("List",H),H.prototype.$g=function(a){null!==this.ga&&("string"==typeof this.ga?typeof a===this.ga&&null!==a||t.jc(a,this.ga):a instanceof this.ga||t.jc(a,this.ga))},H.prototype.ae=function(){var a=this.Y;a++,a>999999999&&(a=0),this.Y=a},H.prototype.freeze=H.prototype.freeze=function(){return this.tb=!0,this},H.prototype.thaw=H.prototype.Ra=function(){return this.tb=!1,this},H.prototype.toString=function(){return"List("+t.mi(this.ga)+")#"+t.ud(this)},H.prototype.add=H.prototype.add=function(a){null!==a&&(e&&this.$g(a),t.J(this,a),this.n.push(a),this.ae())},H.prototype.addAll=H.prototype.Ve=function(a){var b,c,d,f;if(null===a)return this;if(t.J(this),b=this.n,t.isArray(a))for(c=t.ub(a),d=0;c>d;d++)f=t.rb(a,d),e&&this.$g(f),b.push(f);else for(a=a.k;a.next();)f=a.value,e&&this.$g(f),b.push(f);return this.ae(),this},H.prototype.clear=H.prototype.clear=function(){t.J(this),this.n.length=0,this.ae()},H.prototype.contains=H.prototype.has=H.prototype.contains=function(a){return null===a?!1:(e&&this.$g(a),-1!==this.n.indexOf(a))},H.prototype.indexOf=H.prototype.indexOf=function(a){return null===a?-1:(e&&this.$g(a),this.n.indexOf(a))},H.prototype.elt=H.prototype.get=H.prototype.wa=function(a){e&&t.q(a,H,"elt:i");var b=this.n;return(0>a||a>=b.length)&&t.ha(a,"0 <= i < length",H,"elt:i"),b[a]},H.prototype.setElt=H.prototype.set=H.prototype.Wg=function(a,b){e&&(this.$g(b),t.q(a,H,"setElt:i"));var c=this.n;(0>a||a>=c.length)&&t.ha(a,"0 <= i < length",H,"setElt:i"),t.J(this,a),c[a]=b},H.prototype.first=H.prototype.gb=function(){var a=this.n;return 0===a.length?null:a[0]},H.prototype.any=function(a){for(var b=this.n,c=this.Y,d=b.length,e=0;d>e;e++){if(a(b[e]))return!0;this.Y!==c&&t.Vb(this)}return!1},H.prototype.all=function(a){for(var b=this.n,c=this.Y,d=b.length,e=0;d>e;e++){if(!a(b[e]))return!1;this.Y!==c&&t.Vb(this)}return!0},H.prototype.each=function(a){for(var b=this.n,c=this.Y,d=b.length,e=0;d>e;e++)a(b[e]),this.Y!==c&&t.Vb(this)},H.prototype.insertAt=H.prototype.Rd=function(a,b){e&&(this.$g(b),t.q(a,H,"insertAt:i")),0>a&&t.ha(a,">= 0",H,"insertAt:i"),t.J(this,a);var c=this.n;return a>=c.length?c.push(b):c.splice(a,0,b),this.ae(),!0},H.prototype.remove=H.prototype["delete"]=H.prototype.remove=function(a){if(null===a)return!1;e&&this.$g(a),t.J(this,a);var b=this.n;return a=b.indexOf(a),-1===a?!1:(a===b.length-1?b.pop():b.splice(a,1),this.ae(),!0)},H.prototype.removeAt=H.prototype.wd=function(a){e&&t.q(a,H,"removeAt:i");var b=this.n;(0>a||a>=b.length)&&t.ha(a,"0 <= i < length",H,"removeAt:i"),t.J(this,a),a===b.length-1?b.pop():b.splice(a,1),this.ae()},H.prototype.removeRange=H.prototype.removeRange=function(a,b){var c,d;e&&(t.q(a,H,"removeRange:from"),t.q(b,H,"removeRange:to")),c=this.n,(0>a||a>=c.length)&&t.ha(a,"0 <= from < length",H,"elt:from"),(0>b||b>=c.length)&&t.ha(b,"0 <= to < length",H,"elt:to"),t.J(this,a),d=c.slice((b||a)+1||c.length),c.length=0>a?c.length+a:a,c.push.apply(c,d),this.ae()},H.prototype.copy=function(){for(var a=new H(this.ga),b=this.n,c=this.count,d=0;c>d;d++)a.add(b[d]);return a},H.prototype.toArray=H.prototype.Pe=function(){for(var a=this.n,b=this.count,c=Array(b),d=0;b>d;d++)c[d]=a[d];return c},H.prototype.toSet=function(){for(var a=new I(this.ga),b=this.n,c=this.count,d=0;c>d;d++)a.add(b[d]);return a},H.prototype.sort=H.prototype.sort=function(a){return e&&t.i(a,"function",H,"sort:sortfunc"),t.J(this),this.n.sort(a),this.ae(),this},H.prototype.sortRange=H.prototype.iq=function(a,b,c){var g,d=this.n,f=d.length;if(void 0===b&&(b=0),void 0===c&&(c=f),e&&(t.i(a,"function",H,"sortRange:sortfunc"),t.q(b,H,"sortRange:from"),t.q(c,H,"sortRange:to")),t.J(this),g=c-b,1>=g)return this;if((0>b||b>=f-1)&&t.ha(b,"0 <= from < length",H,"sortRange:from"),2===g)return c=d[b],f=d[b+1],0<a(c,f)&&(d[b]=f,d[b+1]=c,this.ae()),this;if(0===b)if(c>=f)d.sort(a);else for(g=d.slice(0,c),g.sort(a),a=0;c>a;a++)d[a]=g[a];else if(c>=f)for(g=d.slice(b),g.sort(a),a=b;f>a;a++)d[a]=g[a-b];else for(g=d.slice(b,c),g.sort(a),a=b;c>a;a++)d[a]=g[a-b];return this.ae(),this},H.prototype.reverse=H.prototype.reverse=function(){return t.J(this),this.n.reverse(),this.ae(),this},t.A(H,{count:"count"},function(){return this.n.length}),t.A(H,{size:"size"},function(){return this.n.length}),t.A(H,{length:"length"},function(){return this.n.length}),t.A(H,{k:"iterator"},function(){if(0>=this.n.length)return t.jg;var a=this.Kd;return null!==a?(a.reset(),a):new Oa(this)}),t.A(H,{nn:"iteratorBackwards"},function(){if(0>=this.n.length)return t.jg;var a=this.yo;return null!==a?(a.reset(),a):new Qa(this)}),t.ee(Ra,{key:!0,value:!0}),t.A(Ra,{k:"iterator"},function(){return this}),Ra.prototype.reset=Ra.prototype.reset=function(){var a=this.p;a.Kd=null,this.cb=a.Y,this.Db=null},Ra.prototype.next=Ra.prototype.hasNext=Ra.prototype.next=function(){var b,a=this.p;return a.Y!==this.cb&&t.Vb(a),b=this.Db,b=null===b?a.kb:b.Yb,null!==b?(this.Db=b,this.value=b.value,this.key=b.key,!0):(this.mg(),!1)},Ra.prototype.first=Ra.prototype.gb=function(){var b,a=this.p;return this.cb=a.Y,a=a.kb,null!==a?(this.Db=a,b=a.value,this.key=a.key,this.value=b):null},Ra.prototype.any=function(a){var c,d,b=this.p;for(b.Kd=null,c=b.Y,this.Db=null,d=b.kb;null!==d;){if(a(d.value))return!0;b.Y!==c&&t.Vb(b),d=d.Yb}return!1},Ra.prototype.all=function(a){var c,d,b=this.p;for(b.Kd=null,c=b.Y,this.Db=null,d=b.kb;null!==d;){if(!a(d.value))return!1;b.Y!==c&&t.Vb(b),d=d.Yb}return!0},Ra.prototype.each=function(a){var c,d,b=this.p;for(b.Kd=null,c=b.Y,this.Db=null,d=b.kb;null!==d;)a(d.value),b.Y!==c&&t.Vb(b),d=d.Yb},t.A(Ra,{count:"count"},function(){return this.p.ld}),Ra.prototype.mg=function(){this.value=this.key=null,this.cb=-1,this.p.Kd=this},Ra.prototype.toString=function(){return null!==this.Db?"SetIterator@"+this.Db.value:"SetIterator"},t.ka("Set",I),I.prototype.$g=function(a){null!==this.ga&&("string"==typeof this.ga?typeof a===this.ga&&null!==a||t.jc(a,this.ga):a instanceof this.ga||t.jc(a,this.ga))},I.prototype.ae=function(){var a=this.Y;a++,a>999999999&&(a=0),this.Y=a},I.prototype.freeze=I.prototype.freeze=function(){return this.tb=!0,this},I.prototype.thaw=I.prototype.Ra=function(){return this.tb=!1,this},I.prototype.toString=function(){return"Set("+t.mi(this.ga)+")#"+t.ud(this)},I.prototype.add=I.prototype.add=function(a){if(null===a)return!1;e&&this.$g(a),t.J(this,a);var b=a;return t.xb(a)&&(b=t.xt(a)),void 0===this.md[b]?(this.ld++,a=new Sa(a,a),this.md[b]=a,b=this.Vh,null===b?this.kb=a:(a.Ko=b,b.Yb=a),this.Vh=a,this.ae(),!0):!1},I.prototype.addAll=I.prototype.Ve=function(a){if(null===a)return this;if(t.J(this),t.isArray(a))for(var b=t.ub(a),c=0;b>c;c++)this.add(t.rb(a,c));else for(a=a.k;a.next();)this.add(a.value);return this},I.prototype.contains=I.prototype.has=I.prototype.contains=function(a){if(null===a)return!1;e&&this.$g(a);var b=a;return t.xb(a)&&(b=t.ud(a),void 0===b)?!1:void 0!==this.md[b]},I.prototype.containsAll=function(a){if(null===a)return!0;for(a=a.k;a.next();)if(!this.contains(a.value))return!1;return!0},I.prototype.containsAny=function(a){if(null===a)return!0;for(a=a.k;a.next();)if(this.contains(a.value))return!0;return!1},I.prototype.first=I.prototype.gb=function(){var a=this.kb;return null===a?null:a.value},I.prototype.any=function(a){for(var b=this.Y,c=this.kb;null!==c;){if(a(c.value))return!0;this.Y!==b&&t.Vb(this),c=c.Yb}return!1},I.prototype.all=function(a){for(var b=this.Y,c=this.kb;null!==c;){if(!a(c.value))return!1;this.Y!==b&&t.Vb(this),c=c.Yb}return!0},I.prototype.each=function(a){for(var b=this.Y,c=this.kb;null!==c;)a(c.value),this.Y!==b&&t.Vb(this),c=c.Yb},I.prototype.remove=I.prototype["delete"]=I.prototype.remove=function(a){var b,c,d;return null===a?!1:(e&&this.$g(a),t.J(this,a),b=a,t.xb(a)&&(b=t.ud(a),void 0===b)?!1:(a=this.md[b],void 0===a?!1:(c=a.Yb,d=a.Ko,null!==c&&(c.Ko=d),null!==d&&(d.Yb=c),this.kb===a&&(this.kb=c),this.Vh===a&&(this.Vh=d),delete this.md[b],this.ld--,this.ae(),!0)))},I.prototype.removeAll=function(a){if(null===a)return this;if(t.J(this),t.isArray(a))for(var b=t.ub(a),c=0;b>c;c++)this.remove(t.rb(a,c));else for(a=a.k;a.next();)this.remove(a.value);return this},I.prototype.retainAll=function(a){var b,c;if(null===a||0===this.count)return this;for(t.J(this),b=new I(this.ga),b.Ve(a),a=new H(this.ga),c=this.k;c.next();)b.contains(c.value)||a.add(c.value);for(b=a.k;b.next();)this.remove(b.value);return this},I.prototype.clear=I.prototype.clear=function(){t.J(this),this.md={},this.ld=0,this.Vh=this.kb=null,this.ae()},I.prototype.copy=function(){var c,a=new I(this.ga),b=this.md;for(c in b)a.add(b[c].value);return a},I.prototype.toArray=I.prototype.Pe=function(){var d,a=Array(this.ld),b=this.md,c=0;for(d in b)a[c]=b[d].value,c++;return a},I.prototype.toList=function(){var c,a=new H(this.ga),b=this.md;for(c in b)a.add(b[c].value);return a},t.A(I,{count:"count"},function(){return this.ld}),t.A(I,{size:"size"},function(){return this.ld}),t.A(I,{k:"iterator"},function(){if(0>=this.ld)return t.jg;var a=this.Kd;return null!==a?(a.reset(),a):new Ra(this)}),t.ee(Ua,{key:!0,value:!0}),t.A(Ua,{k:"iterator"},function(){return this}),Ua.prototype.reset=Ua.prototype.reset=function(){this.cb=this.bb.Y,this.Db=null},Ua.prototype.next=Ua.prototype.hasNext=Ua.prototype.next=function(){var b,a=this.bb;return a.Y!==this.cb&&t.Vb(a),b=this.Db,b=null===b?a.kb:b.Yb,null!==b?(this.Db=b,this.value=this.key=a=b.key,!0):(this.mg(),!1)},Ua.prototype.first=Ua.prototype.gb=function(){var a=this.bb;return this.cb=a.Y,a=a.kb,null!==a?(this.Db=a,this.value=this.key=a=a.key):null},Ua.prototype.any=function(a){var d,b=this.bb,c=b.Y;for(this.Db=null,d=b.kb;null!==d;){if(a(d.key))return!0;b.Y!==c&&t.Vb(b),d=d.Yb}return!1},Ua.prototype.all=function(a){var d,b=this.bb,c=b.Y;for(this.Db=null,d=b.kb;null!==d;){if(!a(d.key))return!1;b.Y!==c&&t.Vb(b),d=d.Yb}return!0},Ua.prototype.each=function(a){var d,b=this.bb,c=b.Y;for(this.Db=null,d=b.kb;null!==d;)a(d.key),b.Y!==c&&t.Vb(b),d=d.Yb},t.A(Ua,{count:"count"},function(){return this.bb.ld}),Ua.prototype.mg=function(){this.value=this.key=null,this.cb=-1},Ua.prototype.toString=function(){return null!==this.Db?"MapKeySetIterator@"+this.Db.value:"MapKeySetIterator"},t.Qa(Va,I),Va.prototype.freeze=function(){return this},Va.prototype.Ra=function(){return this},Va.prototype.toString=function(){return"MapKeySet("+this.bb.toString()+")"},Va.prototype.add=Va.prototype.set=Va.prototype.add=function(){return t.m("This Set is read-only: "+this.toString()),!1},Va.prototype.contains=Va.prototype.has=Va.prototype.contains=function(a){return this.bb.contains(a)},Va.prototype.remove=Va.prototype["delete"]=Va.prototype.remove=function(){return t.m("This Set is read-only: "+this.toString()),!1},Va.prototype.clear=Va.prototype.clear=function(){t.m("This Set is read-only: "+this.toString())},Va.prototype.first=Va.prototype.gb=function(){var a=this.bb.kb;return null!==a?a.key:null},Va.prototype.any=function(a){for(var b=this.bb.kb;null!==b;){if(a(b.key))return!0;b=b.Yb}return!1},Va.prototype.all=function(a){for(var b=this.bb.kb;null!==b;){if(!a(b.key))return!1;b=b.Yb}return!0},Va.prototype.each=function(a){for(var b=this.bb.kb;null!==b;)a(b.key),b=b.Yb},Va.prototype.copy=function(){return new Va(this.bb)},Va.prototype.toSet=function(){var c,a=new I(this.bb.Uh),b=this.bb.md;for(c in b)a.add(b[c].key);return a},Va.prototype.toArray=Va.prototype.Pe=function(){var d,a=this.bb.md,b=Array(this.bb.ld),c=0;for(d in a)b[c]=a[d].key,c++;return b},Va.prototype.toList=function(){var c,a=new H(this.ga),b=this.bb.md;for(c in b)a.add(b[c].key);return a},t.A(Va,{count:"count"},function(){return this.bb.ld}),t.A(Va,{size:"size"},function(){return this.bb.ld}),t.A(Va,{k:"iterator"},function(){return 0>=this.bb.ld?t.jg:new Ua(this.bb)}),t.ee(Wa,{key:!0,value:!0}),t.A(Wa,{k:"iterator"},function(){return this}),Wa.prototype.reset=Wa.prototype.reset=function(){var a=this.bb;a.zo=null,this.cb=a.Y,this.Db=null},Wa.prototype.next=Wa.prototype.hasNext=Wa.prototype.next=function(){var b,a=this.bb;return a.Y!==this.cb&&t.Vb(a),b=this.Db,b=null===b?a.kb:b.Yb,null!==b?(this.Db=b,this.value=b.value,this.key=b.key,!0):(this.mg(),!1)},Wa.prototype.first=Wa.prototype.gb=function(){var b,a=this.bb;return this.cb=a.Y,a=a.kb,null!==a?(this.Db=a,b=a.value,this.key=a.key,this.value=b):null},Wa.prototype.any=function(a){var c,d,b=this.bb;for(b.zo=null,c=b.Y,this.Db=null,d=b.kb;null!==d;){if(a(d.value))return!0;b.Y!==c&&t.Vb(b),d=d.Yb}return!1},Wa.prototype.all=function(a){var c,d,b=this.bb;for(b.zo=null,c=b.Y,this.Db=null,d=b.kb;null!==d;){if(!a(d.value))return!1;b.Y!==c&&t.Vb(b),d=d.Yb}return!0},Wa.prototype.each=function(a){var c,d,b=this.bb;for(b.zo=null,c=b.Y,this.Db=null,d=b.kb;null!==d;)a(d.value),b.Y!==c&&t.Vb(b),d=d.Yb},t.A(Wa,{count:"count"},function(){return this.bb.ld}),Wa.prototype.mg=function(){this.value=this.key=null,this.cb=-1,this.bb.zo=this},Wa.prototype.toString=function(){return null!==this.Db?"MapValueSetIterator@"+this.Db.value:"MapValueSetIterator"},t.ee(Sa,{key:!0,value:!0}),Sa.prototype.toString=function(){return"{"+this.key+":"+this.value+"}"},t.ee(ab,{key:!0,value:!0}),t.A(ab,{k:"iterator"},function(){return this}),ab.prototype.reset=ab.prototype.reset=function(){var a=this.bb;a.Kd=null,this.cb=a.Y,this.Db=null},ab.prototype.next=ab.prototype.hasNext=ab.prototype.next=function(){var b,a=this.bb;return a.Y!==this.cb&&t.Vb(a),b=this.Db,b=null===b?a.kb:b.Yb,null!==b?(this.Db=b,this.key=b.key,this.value=b.value,!0):(this.mg(),!1)},ab.prototype.first=ab.prototype.gb=function(){var a=this.bb;return this.cb=a.Y,a=a.kb,null!==a?(this.Db=a,this.key=a.key,this.value=a.value,a):null},ab.prototype.any=function(a){var c,d,b=this.bb;for(b.Kd=null,c=b.Y,this.Db=null,d=b.kb;null!==d;){if(a(d))return!0;b.Y!==c&&t.Vb(b),d=d.Yb}return!1},ab.prototype.all=function(a){var c,d,b=this.bb;for(b.Kd=null,c=b.Y,this.Db=null,d=b.kb;null!==d;){if(!a(d))return!1;b.Y!==c&&t.Vb(b),d=d.Yb}return!0},ab.prototype.each=function(a){var c,d,b=this.bb;for(b.Kd=null,c=b.Y,this.Db=null,d=b.kb;null!==d;)a(d),b.Y!==c&&t.Vb(b),d=d.Yb},t.A(ab,{count:"count"},function(){return this.bb.ld}),ab.prototype.mg=function(){this.value=this.key=null,this.cb=-1,this.bb.Kd=this},ab.prototype.toString=function(){return null!==this.Db?"MapIterator@"+this.Db:"MapIterator"},t.ka("Map",wa),wa.prototype.ae=function(){var a=this.Y;a++,a>999999999&&(a=0),this.Y=a},wa.prototype.freeze=wa.prototype.freeze=function(){return this.tb=!0,this},wa.prototype.thaw=wa.prototype.Ra=function(){return this.tb=!1,this},wa.prototype.toString=function(){return"Map("+t.mi(this.Uh)+","+t.mi(this.dj)+")#"+t.ud(this)},wa.prototype.add=wa.prototype.set=wa.prototype.add=function(a,b){var c,d;return e&&(cb(this,a),null!==this.dj&&("string"==typeof this.dj?typeof b===this.dj&&null!==b||t.jc(b,this.dj):b instanceof this.dj||t.jc(b,this.dj))),t.J(this,a),c=a,t.xb(a)&&(c=t.xt(a)),d=this.md[c],void 0===d?(this.ld++,d=new Sa(a,b),this.md[c]=d,c=this.Vh,null===c?this.kb=d:(d.Ko=c,c.Yb=d),this.Vh=d,this.ae(),!0):(d.value=b,!1)},wa.prototype.addAll=wa.prototype.Ve=function(a){var b,c,d;if(null===a)return this;if(t.isArray(a))for(b=t.ub(a),c=0;b>c;c++)d=t.rb(a,c),this.add(d.key,d.value);else for(e&&t.l(a,wa,wa,"addAll:map"),a=a.k;a.next();)this.add(a.key,a.value);return this},wa.prototype.first=wa.prototype.gb=function(){return this.kb},wa.prototype.any=function(a){for(var b=this.Y,c=this.kb;null!==c;){if(a(c))return!0;this.Y!==b&&t.Vb(this),c=c.Yb}return!1},wa.prototype.all=function(a){for(var b=this.Y,c=this.kb;null!==c;){if(!a(c))return!1;this.Y!==b&&t.Vb(this),c=c.Yb}return!0},wa.prototype.each=function(a){for(var b=this.Y,c=this.kb;null!==c;)a(c),this.Y!==b&&t.Vb(this),c=c.Yb},wa.prototype.contains=wa.prototype.has=wa.prototype.contains=function(a){e&&cb(this,a);var b=a;return t.xb(a)&&(b=t.ud(a),void 0===b)?!1:void 0!==this.md[b]},wa.prototype.getValue=wa.prototype.get=wa.prototype.Da=function(a){e&&cb(this,a);var b=a;return t.xb(a)&&(b=t.ud(a),void 0===b)?null:(a=this.md[b],void 0===a?null:a.value)},wa.prototype.remove=wa.prototype["delete"]=wa.prototype.remove=function(a){var b,c,d;
return null===a?!1:(e&&cb(this,a),t.J(this,a),b=a,t.xb(a)&&(b=t.ud(a),void 0===b)?!1:(a=this.md[b],void 0===a?!1:(c=a.Yb,d=a.Ko,null!==c&&(c.Ko=d),null!==d&&(d.Yb=c),this.kb===a&&(this.kb=c),this.Vh===a&&(this.Vh=d),delete this.md[b],this.ld--,this.ae(),!0)))},wa.prototype.clear=wa.prototype.clear=function(){t.J(this),this.md={},this.ld=0,this.Vh=this.kb=null,this.ae()},wa.prototype.copy=function(){var c,d,a=new wa(this.Uh,this.dj),b=this.md;for(c in b)d=b[c],a.add(d.key,d.value);return a},wa.prototype.toArray=wa.prototype.Pe=function(){var d,e,a=this.md,b=Array(this.ld),c=0;for(d in a)e=a[d],b[c]=new Sa(e.key,e.value),c++;return b},wa.prototype.toKeySet=wa.prototype.Pl=function(){return new Va(this)},t.A(wa,{count:"count"},function(){return this.ld}),t.A(wa,{size:"size"},function(){return this.ld}),t.A(wa,{k:"iterator"},function(){if(0>=this.count)return t.jg;var a=this.Kd;return null!==a?(a.reset(),a):new ab(this)}),t.A(wa,{SK:"iteratorKeys"},function(){return 0>=this.count?t.jg:new Ua(this)}),t.A(wa,{NF:"iteratorValues"},function(){if(0>=this.count)return t.jg;var a=this.zo;return null!==a?(a.reset(),a):new Wa(this)}),t.ka("Point",E),t.ji(E),t.ee(E,{x:!0,y:!0}),E.prototype.assign=function(a){this.K=a.K,this.L=a.L},E.prototype.p=function(a,b){this.K=a,this.L=b},E.prototype.setTo=E.prototype.gq=function(a,b){return e&&(t.i(a,"number",E,"setTo:x"),t.i(b,"number",E,"setTo:y")),t.J(this),this.K=a,this.L=b,this},E.prototype.set=E.prototype.set=function(a){return e&&t.l(a,E,E,"set:p"),t.J(this),this.K=a.K,this.L=a.L,this},E.prototype.copy=function(){var a=new E;return a.K=this.K,a.L=this.L,a},E.prototype.Oa=function(){return this.tb=!0,Object.freeze(this),this},E.prototype.ba=function(){return Object.isFrozen(this)?this:this.copy().freeze()},E.prototype.freeze=function(){return this.tb=!0,this},E.prototype.Ra=function(){return Object.isFrozen(this)&&t.m("cannot thaw constant: "+this),this.tb=!1,this},E.parse=function(a){var b,c,d,e;if("string"==typeof a){for(a=a.split(" "),b=0,c=0;""===a[b];)b++;for(d=a[b++],d&&(c=parseFloat(d)),e=0;""===a[b];)b++;return(d=a[b++])&&(e=parseFloat(d)),new E(c,e)}return new E},E.stringify=function(a){return a instanceof E?a.x.toString()+" "+a.y.toString():a.toString()},E.prototype.toString=function(){return"Point("+this.x+","+this.y+")"},E.prototype.equals=E.prototype.O=function(a){return a instanceof E?this.K===a.x&&this.L===a.y:!1},E.prototype.equalTo=function(a,b){return this.K===a&&this.L===b},E.prototype.equalsApprox=E.prototype.Af=function(a){return K.I(this.K,a.x)&&K.I(this.L,a.y)},E.prototype.add=E.prototype.add=function(a){return e&&t.l(a,E,E,"add:p"),t.J(this),this.K+=a.x,this.L+=a.y,this},E.prototype.subtract=E.prototype.ku=function(a){return e&&t.l(a,E,E,"subtract:p"),t.J(this),this.K-=a.x,this.L-=a.y,this},E.prototype.offset=E.prototype.offset=function(a,b){return e&&(t.q(a,E,"offset:dx"),t.q(b,E,"offset:dy")),t.J(this),this.K+=a,this.L+=b,this},E.prototype.rotate=E.prototype.rotate=function(a){var b,c,d;return e&&t.q(a,E,"rotate:angle"),t.J(this),0===a?this:(b=this.K,c=this.L,0===b&&0===c?this:(90===a?(a=0,d=1):180===a?(a=-1,d=0):270===a?(a=0,d=-1):(d=a*Math.PI/180,a=Math.cos(d),d=Math.sin(d)),this.K=a*b-d*c,this.L=d*b+a*c,this))},E.prototype.scale=E.prototype.scale=function(a,b){return e&&(t.q(a,E,"scale:sx"),t.q(b,E,"scale:sy")),this.K*=a,this.L*=b,this},E.prototype.distanceSquaredPoint=E.prototype.nk=function(a){e&&t.l(a,E,E,"distanceSquaredPoint:p");var b=a.x-this.K;return a=a.y-this.L,b*b+a*a},E.prototype.distanceSquared=E.prototype.nt=function(a,b){e&&(t.q(a,E,"distanceSquared:px"),t.q(b,E,"distanceSquared:py"));var c=a-this.K,d=b-this.L;return c*c+d*d},E.prototype.normalize=E.prototype.normalize=function(){t.J(this);var a=this.K,b=this.L,c=Math.sqrt(a*a+b*b);return c>0&&(this.K=a/c,this.L=b/c),this},E.prototype.directionPoint=E.prototype.nj=function(a){return e&&t.l(a,E,E,"directionPoint:p"),eb(a.x-this.K,a.y-this.L)},E.prototype.direction=E.prototype.direction=function(a,b){return e&&(t.q(a,E,"direction:px"),t.q(b,E,"direction:py")),eb(a-this.K,b-this.L)},E.prototype.projectOntoLineSegment=function(a,b,c,d){return e&&(t.q(a,E,"projectOntoLineSegment:px"),t.q(b,E,"projectOntoLineSegment:py"),t.q(c,E,"projectOntoLineSegment:qx"),t.q(d,E,"projectOntoLineSegment:qy")),K.vn(a,b,c,d,this.K,this.L,this),this},E.prototype.projectOntoLineSegmentPoint=function(a,b){return e&&(t.l(a,E,E,"projectOntoLineSegmentPoint:p"),t.l(b,E,E,"projectOntoLineSegmentPoint:q")),K.vn(a.x,a.y,b.x,b.y,this.K,this.L,this),this},E.prototype.snapToGrid=function(a,b,c,d){return e&&(t.q(a,E,"snapToGrid:originx"),t.q(b,E,"snapToGrid:originy"),t.q(c,E,"snapToGrid:cellwidth"),t.q(d,E,"snapToGrid:cellheight")),K.rt(this.K,this.L,a,b,c,d,this),this},E.prototype.snapToGridPoint=function(a,b){return e&&(t.l(a,E,E,"snapToGridPoint:p"),t.l(b,ra,E,"snapToGridPoint:q")),K.rt(this.K,this.L,a.x,a.y,b.width,b.height,this),this},E.prototype.setRectSpot=E.prototype.fu=function(a,b){return e&&(t.l(a,F,E,"setRectSpot:r"),t.l(b,L,E,"setRectSpot:spot")),t.J(this),this.K=a.x+b.x*a.width+b.offsetX,this.L=a.y+b.y*a.height+b.offsetY,this},E.prototype.setSpot=E.prototype.gu=function(a,b,c,d,f){return e&&(t.q(a,E,"setSpot:x"),t.q(b,E,"setSpot:y"),t.q(c,E,"setSpot:w"),t.q(d,E,"setSpot:h"),(0>c||0>d)&&t.m("Point.setSpot:Width and height cannot be negative"),t.l(f,L,E,"setSpot:spot")),t.J(this),this.K=a+f.x*c+f.offsetX,this.L=b+f.y*d+f.offsetY,this},E.prototype.transform=function(a){return e&&t.l(a,sa,E,"transform:t"),a.Xa(this),this},E.distanceLineSegmentSquared=mb=function(a,b,c,d,f,g){var h,i,j,k;return e&&(t.q(a,E,"distanceLineSegmentSquared:px"),t.q(b,E,"distanceLineSegmentSquared:py"),t.q(c,E,"distanceLineSegmentSquared:ax"),t.q(d,E,"distanceLineSegmentSquared:ay"),t.q(f,E,"distanceLineSegmentSquared:bx"),t.q(g,E,"distanceLineSegmentSquared:by")),h=f-c,i=g-d,j=h*h+i*i,c-=a,d-=b,k=-c*h-d*i,0>=k||k>=j?(h=f-a,i=g-b,Math.min(c*c+d*d,h*h+i*i)):(a=h*d-i*c,a*a/j)},E.distanceSquared=ob=function(a,b,c,d){return e&&(t.q(a,E,"distanceSquared:px"),t.q(b,E,"distanceSquared:py"),t.q(c,E,"distanceSquared:qx"),t.q(d,E,"distanceSquared:qy")),a=c-a,b=d-b,a*a+b*b},E.direction=pb=function(a,b,c,d){return e&&(t.q(a,E,"direction:px"),t.q(b,E,"direction:py"),t.q(c,E,"direction:qx"),t.q(d,E,"direction:qy")),a=c-a,b=d-b,0===a?b>0?90:0>b?270:0:0===b?a>0?0:180:isNaN(a)||isNaN(b)?0:(d=180*Math.atan(Math.abs(b/a))/Math.PI,0>a?d=0>b?d+180:180-d:0>b&&(d=360-d),d)},t.g(E,"x",E.prototype.x),t.defineProperty(E,{x:"x"},function(){return this.K},function(a){t.J(this,a),e&&t.i(a,"number",E,"x"),this.K=a}),t.g(E,"y",E.prototype.y),t.defineProperty(E,{y:"y"},function(){return this.L},function(a){t.J(this,a),e&&t.i(a,"number",E,"y"),this.L=a}),E.prototype.isReal=E.prototype.P=function(){return isFinite(this.x)&&isFinite(this.y)},t.ka("Size",ra),t.ji(ra),t.ee(ra,{width:!0,height:!0}),ra.prototype.assign=function(a){this.Ba=a.Ba,this.Aa=a.Aa},ra.prototype.p=function(a,b){this.Ba=a,this.Aa=b},ra.prototype.setTo=ra.prototype.gq=function(a,b){return e&&(t.i(a,"number",ra,"setTo:w"),t.i(b,"number",ra,"setTo:h")),0>a&&t.ha(a,">= 0",ra,"setTo:w"),0>b&&t.ha(b,">= 0",ra,"setTo:h"),t.J(this),this.Ba=a,this.Aa=b,this},ra.prototype.set=ra.prototype.set=function(a){return e&&t.l(a,ra,ra,"set:s"),t.J(this),this.Ba=a.Ba,this.Aa=a.Aa,this},ra.prototype.copy=function(){var a=new ra;return a.Ba=this.Ba,a.Aa=this.Aa,a},ra.prototype.Oa=function(){return this.tb=!0,Object.freeze(this),this},ra.prototype.ba=function(){return Object.isFrozen(this)?this:this.copy().freeze()},ra.prototype.freeze=function(){return this.tb=!0,this},ra.prototype.Ra=function(){return Object.isFrozen(this)&&t.m("cannot thaw constant: "+this),this.tb=!1,this},ra.parse=function(a){var b,c,d,e;if("string"==typeof a){for(a=a.split(" "),b=0,c=0;""===a[b];)b++;for(d=a[b++],d&&(c=parseFloat(d)),e=0;""===a[b];)b++;return(d=a[b++])&&(e=parseFloat(d)),new ra(c,e)}return new ra},ra.stringify=function(a){return a instanceof ra?a.width.toString()+" "+a.height.toString():a.toString()},ra.prototype.toString=function(){return"Size("+this.width+","+this.height+")"},ra.prototype.equals=ra.prototype.O=function(a){return a instanceof ra?this.Ba===a.width&&this.Aa===a.height:!1},ra.prototype.equalTo=function(a,b){return this.Ba===a&&this.Aa===b},ra.prototype.equalsApprox=ra.prototype.Af=function(a){return K.I(this.Ba,a.width)&&K.I(this.Aa,a.height)},t.g(ra,"width",ra.prototype.width),t.defineProperty(ra,{width:"width"},function(){return this.Ba},function(a){t.J(this,a),e&&t.i(a,"number",ra,"width"),0>a&&t.ha(a,">= 0",ra,"width"),this.Ba=a}),t.g(ra,"height",ra.prototype.height),t.defineProperty(ra,{height:"height"},function(){return this.Aa},function(a){t.J(this,a),e&&t.i(a,"number",ra,"height"),0>a&&t.ha(a,">= 0",ra,"height"),this.Aa=a}),ra.prototype.isReal=ra.prototype.P=function(){return isFinite(this.width)&&isFinite(this.height)},t.ka("Rect",F),t.ji(F),t.ee(F,{x:!0,y:!0,width:!0,height:!0}),F.prototype.assign=function(a){this.K=a.K,this.L=a.L,this.Ba=a.Ba,this.Aa=a.Aa},F.prototype.p=function(a,b,c,d){this.K=a,this.L=b,this.Ba=c,this.Aa=d},F.prototype.setTo=F.prototype.gq=function(a,b,c,d){return e&&(t.i(a,"number",F,"setTo:x"),t.i(b,"number",F,"setTo:y"),t.i(c,"number",F,"setTo:w"),t.i(d,"number",F,"setTo:h")),0>c&&t.ha(c,">= 0",F,"setTo:w"),0>d&&t.ha(d,">= 0",F,"setTo:h"),t.J(this),this.K=a,this.L=b,this.Ba=c,this.Aa=d,this},F.prototype.set=F.prototype.set=function(a){return e&&t.l(a,F,F,"set:r"),t.J(this),this.K=a.K,this.L=a.L,this.Ba=a.Ba,this.Aa=a.Aa,this},F.prototype.setPoint=F.prototype.Lf=function(a){return e&&t.l(a,E,F,"setPoint:p"),t.J(this),this.K=a.K,this.L=a.L,this},F.prototype.setSize=function(a){return e&&t.l(a,ra,F,"setSize:s"),t.J(this),this.Ba=a.Ba,this.Aa=a.Aa,this},F.prototype.copy=function(){var a=new F;return a.K=this.K,a.L=this.L,a.Ba=this.Ba,a.Aa=this.Aa,a},F.prototype.Oa=function(){return this.tb=!0,Object.freeze(this),this},F.prototype.ba=function(){return Object.isFrozen(this)?this:this.copy().freeze()},F.prototype.freeze=function(){return this.tb=!0,this},F.prototype.Ra=function(){return Object.isFrozen(this)&&t.m("cannot thaw constant: "+this),this.tb=!1,this},F.parse=function(a){var b,c,d,e,f,g;if("string"==typeof a){for(a=a.split(" "),b=0,c=0;""===a[b];)b++;for(d=a[b++],d&&(c=parseFloat(d)),e=0;""===a[b];)b++;for((d=a[b++])&&(e=parseFloat(d)),f=0;""===a[b];)b++;for((d=a[b++])&&(f=parseFloat(d)),g=0;""===a[b];)b++;return(d=a[b++])&&(g=parseFloat(d)),new F(c,e,f,g)}return new F},F.stringify=function(a){return a instanceof F?a.x.toString()+" "+a.y.toString()+" "+a.width.toString()+" "+a.height.toString():a.toString()},F.prototype.toString=function(){return"Rect("+this.x+","+this.y+","+this.width+","+this.height+")"},F.prototype.equals=F.prototype.O=function(a){return a instanceof F?this.K===a.x&&this.L===a.y&&this.Ba===a.width&&this.Aa===a.height:!1},F.prototype.equalTo=function(a,b,c,d){return this.K===a&&this.L===b&&this.Ba===c&&this.Aa===d},F.prototype.equalsApprox=F.prototype.Af=function(a){return K.I(this.K,a.x)&&K.I(this.L,a.y)&&K.I(this.Ba,a.width)&&K.I(this.Aa,a.height)},F.prototype.containsPoint=F.prototype.La=function(a){return e&&t.l(a,E,F,"containsPoint:p"),this.K<=a.x&&this.K+this.Ba>=a.x&&this.L<=a.y&&this.L+this.Aa>=a.y},F.prototype.containsRect=F.prototype.kk=function(a){return e&&t.l(a,F,F,"containsRect:r"),this.K<=a.x&&a.x+a.width<=this.K+this.Ba&&this.L<=a.y&&a.y+a.height<=this.L+this.Aa},F.prototype.contains=F.prototype.contains=function(a,b,c,d){return e?(t.q(a,F,"contains:x"),t.q(b,F,"contains:y"),void 0===c?c=0:t.q(c,F,"contains:w"),void 0===d?d=0:t.q(d,F,"contains:h"),(0>c||0>d)&&t.m("Rect.contains:Width and height cannot be negative")):(void 0===c&&(c=0),void 0===d&&(d=0)),this.K<=a&&a+c<=this.K+this.Ba&&this.L<=b&&b+d<=this.L+this.Aa},F.prototype.reset=function(){t.J(this),this.Aa=this.Ba=this.L=this.K=0},F.prototype.offset=F.prototype.offset=function(a,b){return e&&(t.q(a,F,"offset:dx"),t.q(b,F,"offset:dy")),t.J(this),this.K+=a,this.L+=b,this},F.prototype.inflate=F.prototype.$f=function(a,b){return e&&(t.q(a,F,"inflate:w"),t.q(b,F,"inflate:h")),vb(this,b,a,b,a)},F.prototype.addMargin=F.prototype.sw=function(a){return e&&t.l(a,wb,F,"addMargin:m"),vb(this,a.top,a.right,a.bottom,a.left)},F.prototype.subtractMargin=F.prototype.AK=function(a){return e&&t.l(a,wb,F,"subtractMargin:m"),vb(this,-a.top,-a.right,-a.bottom,-a.left)},F.prototype.grow=function(a,b,c,d){return e&&(t.q(a,F,"grow:t"),t.q(b,F,"grow:r"),t.q(c,F,"grow:b"),t.q(d,F,"grow:l")),vb(this,a,b,c,d)},F.prototype.intersectRect=function(a){return e&&t.l(a,F,F,"intersectRect:r"),xb(this,a.x,a.y,a.width,a.height)},F.prototype.intersect=function(a,b,c,d){return e&&(t.q(a,F,"intersect:x"),t.q(b,F,"intersect:y"),t.q(c,F,"intersect:w"),t.q(d,F,"intersect:h"),(0>c||0>d)&&t.m("Rect.intersect:Width and height cannot be negative")),xb(this,a,b,c,d)},F.prototype.intersectsRect=F.prototype.ag=function(a){return e&&t.l(a,F,F,"intersectsRect:r"),this.DF(a.x,a.y,a.width,a.height)},F.prototype.intersects=F.prototype.DF=function(a,b,c,d){e&&(t.q(a,F,"intersects:x"),t.q(b,F,"intersects:y"),t.q(a,F,"intersects:w"),t.q(b,F,"intersects:h"),(0>c||0>d)&&t.m("Rect.intersects:Width and height cannot be negative"));var f=this.Ba,g=this.K;return 1/0!==f&&1/0!==c&&(f+=g,c+=a,isNaN(c)||isNaN(f)||g>c||a>f)?!1:(a=this.Aa,c=this.L,1/0!==a&&1/0!==d&&(a+=c,d+=b,isNaN(d)||isNaN(a)||c>d||b>a)?!1:!0)},F.prototype.unionPoint=F.prototype.yj=function(a){return e&&t.l(a,E,F,"unionPoint:p"),Fb(this,a.x,a.y,0,0)},F.prototype.unionRect=F.prototype.zj=function(a){return e&&t.l(a,F,F,"unionRect:r"),Fb(this,a.K,a.L,a.Ba,a.Aa)},F.prototype.union=F.prototype.jH=function(a,b,c,d){return t.J(this),e?(t.q(a,F,"union:x"),t.q(b,F,"union:y"),void 0===c?c=0:t.q(c,F,"union:w"),void 0===d?d=0:t.q(d,F,"union:h"),(0>c||0>d)&&t.m("Rect.union:Width and height cannot be negative")):(void 0===c&&(c=0),void 0===d&&(d=0)),Fb(this,a,b,c,d)},F.prototype.setSpot=F.prototype.gu=function(a,b,c){return e&&(t.q(a,F,"setSpot:x"),t.q(b,F,"setSpot:y"),t.l(c,L,F,"setSpot:spot")),t.J(this),this.K=a-c.offsetX-c.x*this.Ba,this.L=b-c.offsetY-c.y*this.Aa,this},F.contains=Gb=function(a,b,c,d,f,g,h,i){return e?(t.q(a,F,"contains:rx"),t.q(b,F,"contains:ry"),t.q(c,F,"contains:rw"),t.q(d,F,"contains:rh"),t.q(f,F,"contains:x"),t.q(g,F,"contains:y"),void 0===h?h=0:t.q(h,F,"contains:w"),void 0===i?i=0:t.q(i,F,"contains:h"),(0>c||0>d||0>h||0>i)&&t.m("Rect.contains:Width and height cannot be negative")):(void 0===h&&(h=0),void 0===i&&(i=0)),f>=a&&a+c>=f+h&&g>=b&&b+d>=g+i},F.intersects=function(a,b,c,d,f,g,h,i){return e&&(t.q(a,F,"intersects:rx"),t.q(b,F,"intersects:ry"),t.q(c,F,"intersects:rw"),t.q(d,F,"intersects:rh"),t.q(f,F,"intersects:x"),t.q(g,F,"intersects:y"),t.q(h,F,"intersects:w"),t.q(i,F,"intersects:h"),(0>c||0>d||0>h||0>i)&&t.m("Rect.intersects:Width and height cannot be negative")),c+=a,h+=f,a>h||f>c?!1:(a=d+b,i+=g,b>i||g>a?!1:!0)},t.g(F,"x",F.prototype.x),t.defineProperty(F,{x:"x"},function(){return this.K},function(a){t.J(this,a),e&&t.i(a,"number",F,"x"),this.K=a}),t.g(F,"y",F.prototype.y),t.defineProperty(F,{y:"y"},function(){return this.L},function(a){t.J(this,a),e&&t.i(a,"number",F,"y"),this.L=a}),t.g(F,"width",F.prototype.width),t.defineProperty(F,{width:"width"},function(){return this.Ba},function(a){t.J(this,a),e&&t.i(a,"number",F,"width"),0>a&&t.ha(a,">= 0",F,"width"),this.Ba=a}),t.g(F,"height",F.prototype.height),t.defineProperty(F,{height:"height"},function(){return this.Aa},function(a){t.J(this,a),e&&t.i(a,"number",F,"height"),0>a&&t.ha(a,">= 0",F,"height"),this.Aa=a}),t.g(F,"left",F.prototype.left),t.defineProperty(F,{left:"left"},function(){return this.K},function(a){t.J(this,a),e&&t.i(a,"number",F,"left"),this.K=a}),t.g(F,"top",F.prototype.top),t.defineProperty(F,{top:"top"},function(){return this.L},function(a){t.J(this,a),e&&t.i(a,"number",F,"top"),this.L=a}),t.g(F,"right",F.prototype.right),t.defineProperty(F,{right:"right"},function(){return this.K+this.Ba},function(a){t.J(this,a),e&&t.q(a,F,"right"),this.K+=a-(this.K+this.Ba)}),t.g(F,"bottom",F.prototype.bottom),t.defineProperty(F,{bottom:"bottom"},function(){return this.L+this.Aa},function(a){t.J(this,a),e&&t.q(a,F,"top"),this.L+=a-(this.L+this.Aa)}),t.g(F,"position",F.prototype.position),t.defineProperty(F,{position:"position"},function(){return new E(this.K,this.L)},function(a){t.J(this,a),e&&t.l(a,E,F,"position"),this.K=a.x,this.L=a.y}),t.g(F,"size",F.prototype.size),t.defineProperty(F,{size:"size"},function(){return new ra(this.Ba,this.Aa)},function(a){t.J(this,a),e&&t.l(a,ra,F,"size"),this.Ba=a.width,this.Aa=a.height}),t.g(F,"center",F.prototype.hA),t.defineProperty(F,{hA:"center"},function(){return new E(this.K+this.Ba/2,this.L+this.Aa/2)},function(a){t.J(this,a),e&&t.l(a,E,F,"center"),this.K=a.x-this.Ba/2,this.L=a.y-this.Aa/2}),t.g(F,"centerX",F.prototype.Ia),t.defineProperty(F,{Ia:"centerX"},function(){return this.K+this.Ba/2},function(a){t.J(this,a),e&&t.q(a,F,"centerX"),this.K=a-this.Ba/2}),t.g(F,"centerY",F.prototype.Ua),t.defineProperty(F,{Ua:"centerY"},function(){return this.L+this.Aa/2},function(a){t.J(this,a),e&&t.q(a,F,"centerY"),this.L=a-this.Aa/2}),F.prototype.isReal=F.prototype.P=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},F.prototype.isEmpty=function(){return 0===this.width&&0===this.height},t.ka("Margin",wb),t.ji(wb),t.ee(wb,{top:!0,right:!0,bottom:!0,left:!0}),wb.prototype.assign=function(a){this.oh=a.oh,this.mh=a.mh,this.Zg=a.Zg,this.hh=a.hh},wb.prototype.setTo=wb.prototype.gq=function(a,b,c,d){return e&&(t.i(a,"number",wb,"setTo:t"),t.i(b,"number",wb,"setTo:r"),t.i(c,"number",wb,"setTo:b"),t.i(d,"number",wb,"setTo:l")),t.J(this),this.oh=a,this.mh=b,this.Zg=c,this.hh=d,this},wb.prototype.set=wb.prototype.set=function(a){return e&&t.l(a,wb,wb,"assign:m"),t.J(this),this.oh=a.oh,this.mh=a.mh,this.Zg=a.Zg,this.hh=a.hh,this},wb.prototype.copy=function(){var a=new wb;return a.oh=this.oh,a.mh=this.mh,a.Zg=this.Zg,a.hh=this.hh,a},wb.prototype.Oa=function(){return this.tb=!0,Object.freeze(this),this},wb.prototype.ba=function(){return Object.isFrozen(this)?this:this.copy().freeze()},wb.prototype.freeze=function(){return this.tb=!0,this},wb.prototype.Ra=function(){return Object.isFrozen(this)&&t.m("cannot thaw constant: "+this),this.tb=!1,this},wb.parse=function(a){var b,c,d,e,f,g;if("string"==typeof a){for(a=a.split(" "),b=0,c=0;""===a[b];)b++;for(d=a[b++],d&&(c=parseFloat(d)),e=void 0;""===a[b];)b++;for((d=a[b++])&&(e=parseFloat(d)),f=void 0;""===a[b];)b++;for((d=a[b++])&&(f=parseFloat(d)),g=void 0;""===a[b];)b++;return(d=a[b++])&&(g=parseFloat(d)),new wb(c,e,f,g)}return new wb},wb.stringify=function(a){return a instanceof wb?a.top.toString()+" "+a.right.toString()+" "+a.bottom.toString()+" "+a.left.toString():a.toString()},wb.prototype.toString=function(){return"Margin("+this.top+","+this.right+","+this.bottom+","+this.left+")"},wb.prototype.equals=wb.prototype.O=function(a){return a instanceof wb?this.oh===a.top&&this.mh===a.right&&this.Zg===a.bottom&&this.hh===a.left:!1},wb.prototype.equalTo=function(a,b,c,d){return this.oh===a&&this.mh===b&&this.Zg===c&&this.hh===d},wb.prototype.equalsApprox=wb.prototype.Af=function(a){return K.I(this.oh,a.top)&&K.I(this.mh,a.right)&&K.I(this.Zg,a.bottom)&&K.I(this.hh,a.left)},t.g(wb,"top",wb.prototype.top),t.defineProperty(wb,{top:"top"},function(){return this.oh},function(a){t.J(this,a),e&&t.q(a,wb,"top"),this.oh=a}),t.g(wb,"right",wb.prototype.right),t.defineProperty(wb,{right:"right"},function(){return this.mh},function(a){t.J(this,a),e&&t.q(a,wb,"right"),this.mh=a}),t.g(wb,"bottom",wb.prototype.bottom),t.defineProperty(wb,{bottom:"bottom"},function(){return this.Zg},function(a){t.J(this,a),e&&t.q(a,wb,"bottom"),this.Zg=a}),t.g(wb,"left",wb.prototype.left),t.defineProperty(wb,{left:"left"},function(){return this.hh},function(a){t.J(this,a),e&&t.q(a,wb,"left"),this.hh=a}),wb.prototype.isReal=wb.prototype.P=function(){return isFinite(this.top)&&isFinite(this.right)&&isFinite(this.bottom)&&isFinite(this.left)},t.ji(sa),t.ee(sa,{m11:!0,m12:!0,m21:!0,m22:!0,dx:!0,dy:!0}),sa.prototype.set=sa.prototype.set=function(a){return e&&t.l(a,sa,sa,"set:t"),this.m11=a.m11,this.m12=a.m12,this.m21=a.m21,this.m22=a.m22,this.dx=a.dx,this.dy=a.dy,this},sa.prototype.copy=function(){var a=new sa;return a.m11=this.m11,a.m12=this.m12,a.m21=this.m21,a.m22=this.m22,a.dx=this.dx,a.dy=this.dy,a},sa.prototype.toString=function(){return"Transform("+this.m11+","+this.m12+","+this.m21+","+this.m22+","+this.dx+","+this.dy+")"},sa.prototype.equals=sa.prototype.O=function(a){return a instanceof sa?this.m11===a.m11&&this.m12===a.m12&&this.m21===a.m21&&this.m22===a.m22&&this.dx===a.dx&&this.dy===a.dy:!1},sa.prototype.reset=sa.prototype.reset=function(){this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0},sa.prototype.multiply=sa.prototype.multiply=function(a){e&&t.l(a,sa,sa,"multiply:matrix");var b=this.m12*a.m11+this.m22*a.m12,c=this.m11*a.m21+this.m21*a.m22,d=this.m12*a.m21+this.m22*a.m22,f=this.m11*a.dx+this.m21*a.dy+this.dx,g=this.m12*a.dx+this.m22*a.dy+this.dy;return this.m11=this.m11*a.m11+this.m21*a.m12,this.m12=b,this.m21=c,this.m22=d,this.dx=f,this.dy=g,this},sa.prototype.multiplyInverted=sa.prototype.$A=function(a){e&&t.l(a,sa,sa,"multiplyInverted:matrix");var b=1/(a.m11*a.m22-a.m12*a.m21),c=a.m22*b,d=-a.m12*b,f=-a.m21*b,g=a.m11*b,h=b*(a.m21*a.dy-a.m22*a.dx),i=b*(a.m12*a.dx-a.m11*a.dy);return a=this.m12*c+this.m22*d,b=this.m11*f+this.m21*g,f=this.m12*f+this.m22*g,g=this.m11*h+this.m21*i+this.dx,h=this.m12*h+this.m22*i+this.dy,this.m11=this.m11*c+this.m21*d,this.m12=a,this.m21=b,this.m22=f,this.dx=g,this.dy=h,this},sa.prototype.invert=sa.prototype.IA=function(){var a=1/(this.m11*this.m22-this.m12*this.m21),b=-this.m12*a,c=-this.m21*a,d=this.m11*a,e=a*(this.m21*this.dy-this.m22*this.dx),f=a*(this.m12*this.dx-this.m11*this.dy);this.m11=this.m22*a,this.m12=b,this.m21=c,this.m22=d,this.dx=e,this.dy=f},sa.prototype.rotate=sa.prototype.rotate=function(a,b,c){var d,f,g,h;e&&(t.q(a,sa,"rotate:angle"),t.q(b,sa,"rotate:rx"),t.q(c,sa,"rotate:ry")),this.translate(b,c),0===a?(a=1,d=0):90===a?(a=0,d=1):180===a?(a=-1,d=0):270===a?(a=0,d=-1):(d=a*Math.PI/180,a=Math.cos(d),d=Math.sin(d)),f=this.m12*a+this.m22*d,g=this.m11*-d+this.m21*a,h=this.m12*-d+this.m22*a,this.m11=this.m11*a+this.m21*d,this.m12=f,this.m21=g,this.m22=h,this.translate(-b,-c)},sa.prototype.translate=sa.prototype.translate=function(a,b){e&&(t.q(a,sa,"translate:x"),t.q(b,sa,"translate:y")),this.dx+=this.m11*a+this.m21*b,this.dy+=this.m12*a+this.m22*b},sa.prototype.scale=sa.prototype.scale=function(a,b){void 0===b&&(b=a),e&&(t.q(a,sa,"translate:sx"),t.q(b,sa,"translate:sy")),this.m11*=a,this.m12*=a,this.m21*=b,this.m22*=b},sa.prototype.transformPoint=sa.prototype.Xa=function(a){e&&t.l(a,E,sa,"transformPoint:p");var b=a.K,c=a.L;return a.K=b*this.m11+c*this.m21+this.dx,a.L=b*this.m12+c*this.m22+this.dy,a},sa.prototype.invertedTransformPoint=sa.prototype.ni=function(a){e&&t.l(a,E,sa,"invertedTransformPoint:p");var b=1/(this.m11*this.m22-this.m12*this.m21),c=-this.m12*b,d=this.m11*b,f=b*(this.m12*this.dx-this.m11*this.dy),g=a.K,h=a.L;return a.K=g*this.m22*b+h*-this.m21*b+b*(this.m21*this.dy-this.m22*this.dx),a.L=g*c+h*d+f,a},sa.prototype.transformRect=sa.prototype.eH=function(a){e&&t.l(a,F,sa,"transformRect:rect");var b=a.K,c=a.L,d=b+a.Ba,f=c+a.Aa,g=this.m11,h=this.m12,i=this.m21,j=this.m22,k=this.dx,l=this.dy,m=b*g+c*i+k,n=b*h+c*j+l,o=d*g+c*i+k,c=d*h+c*j+l,p=b*g+f*i+k,b=b*h+f*j+l,g=d*g+f*i+k,d=d*h+f*j+l,f=m,h=n,m=Math.min(m,o),f=Math.max(f,o),h=Math.min(h,c),n=Math.max(n,c),m=Math.min(m,p),f=Math.max(f,p),h=Math.min(h,b),n=Math.max(n,b),m=Math.min(m,g),f=Math.max(f,g),h=Math.min(h,d),n=Math.max(n,d);a.K=m,a.L=h,a.Ba=f-m,a.Aa=n-h},sa.prototype.isIdentity=sa.prototype.Et=function(){return 1===this.m11&&0===this.m12&&0===this.m21&&1===this.m22&&0===this.dx&&0===this.dy},t.ka("Spot",L),t.ji(L),t.ee(L,{x:!0,y:!0,offsetX:!0,offsetY:!0}),L.prototype.assign=function(a){this.K=a.K,this.L=a.L,this.ug=a.ug,this.vg=a.vg},L.prototype.setTo=L.prototype.gq=function(a,b,c,d){return e&&(Kb(a,"setTo:x"),Kb(b,"setTo:y"),Lb(c,"setTo:offx"),Lb(d,"setTo:offy")),t.J(this),this.K=a,this.L=b,this.ug=c,this.vg=d,this},L.prototype.set=L.prototype.set=function(a){return e&&t.l(a,L,L,"set:s"),t.J(this),this.K=a.K,this.L=a.L,this.ug=a.ug,this.vg=a.vg,this},L.prototype.copy=function(){var a=new L;return a.K=this.K,a.L=this.L,a.ug=this.ug,a.vg=this.vg,a},L.prototype.Oa=function(){return this.tb=!0,Object.freeze(this),this},L.prototype.ba=function(){return Object.isFrozen(this)?this:this.copy().freeze()},L.prototype.freeze=function(){return this.tb=!0,this},L.prototype.Ra=function(){return Object.isFrozen(this)&&t.m("cannot thaw constant: "+this),this.tb=!1,this},L.parse=Pb=function(a){var b,c,d,e,f,g;if("string"==typeof a){if(a=a.trim(),"None"===a)return t.NONE;if("TopLeft"===a)return t.py;if("Top"===a||"TopCenter"===a||"MiddleTop"===a)return t.tq;if("TopRight"===a)return t.sy;if("Left"===a||"LeftCenter"===a||"MiddleLeft"===a)return t.qq;if("Center"===a)return t.ay;if("Right"===a||"RightCenter"===a||"MiddleRight"===a)return t.rq;if("BottomLeft"===a)return t.Wx;if("Bottom"===a||"BottomCenter"===a||"MiddleBottom"===a)return t.pq;if("BottomRight"===a)return t.Yx;if("TopSide"===a)return t.uy;if("LeftSide"===a)return t.hy;if("RightSide"===a)return t.ny;if("BottomSide"===a)return t.$x;if("TopBottomSides"===a)return t.oy;if("LeftRightSides"===a)return t.gy;if("TopLeftSides"===a)return t.qy;if("TopRightSides"===a)return t.ty;if("BottomLeftSides"===a)return t.Xx;if("BottomRightSides"===a)return t.Zx;if("NotTopSide"===a)return t.ly;if("NotLeftSide"===a)return t.jy;if("NotRightSide"===a)return t.ky;if("NotBottomSide"===a)return t.iy;if("AllSides"===a)return t.Vx;if("Default"===a)return t.by;for(a=a.split(" "),b=0,c=0;""===a[b];)b++;for(d=a[b++],d&&(c=parseFloat(d)),e=0;""===a[b];)b++;for((d=a[b++])&&(e=parseFloat(d)),f=0;""===a[b];)b++;for((d=a[b++])&&(f=parseFloat(d)),g=0;""===a[b];)b++;return(d=a[b++])&&(g=parseFloat(d)),new L(c,e,f,g)}return new L},L.stringify=function(a){return a instanceof L?a.Cd()?a.x.toString()+" "+a.y.toString()+" "+a.offsetX.toString()+" "+a.offsetY.toString():a.toString():a.toString()},L.prototype.toString=function(){return this.Cd()?0===this.ug&&0===this.vg?"Spot("+this.x+","+this.y+")":"Spot("+this.x+","+this.y+","+this.offsetX+","+this.offsetY+")":this.O(t.NONE)?"None":this.O(t.py)?"TopLeft":this.O(t.tq)?"Top":this.O(t.sy)?"TopRight":this.O(t.qq)?"Left":this.O(t.ay)?"Center":this.O(t.rq)?"Right":this.O(t.Wx)?"BottomLeft":this.O(t.pq)?"Bottom":this.O(t.Yx)?"BottomRight":this.O(t.uy)?"TopSide":this.O(t.hy)?"LeftSide":this.O(t.ny)?"RightSide":this.O(t.$x)?"BottomSide":this.O(t.oy)?"TopBottomSides":this.O(t.gy)?"LeftRightSides":this.O(t.qy)?"TopLeftSides":this.O(t.ty)?"TopRightSides":this.O(t.Xx)?"BottomLeftSides":this.O(t.Zx)?"BottomRightSides":this.O(t.ly)?"NotTopSide":this.O(t.jy)?"NotLeftSide":this.O(t.ky)?"NotRightSide":this.O(t.iy)?"NotBottomSide":this.O(t.Vx)?"AllSides":this.O(t.by)?"Default":"None"},L.prototype.equals=L.prototype.O=function(a){return a instanceof L?(this.K===a.x||isNaN(this.K)&&isNaN(a.x))&&(this.L===a.y||isNaN(this.L)&&isNaN(a.y))&&this.ug===a.offsetX&&this.vg===a.offsetY:!1},L.prototype.opposite=function(){return new L(.5-(this.K-.5),.5-(this.L-.5),-this.ug,-this.vg)},L.prototype.includesSide=function(a){return this.Gp()&&a.Gp()?(a=a.offsetY,(this.vg&a)===a):!1},t.g(L,"x",L.prototype.x),t.defineProperty(L,{x:"x"},function(){return this.K},function(a){t.J(this,a),e&&Kb(a,"x"),this.K=a}),t.g(L,"y",L.prototype.y),t.defineProperty(L,{y:"y"},function(){return this.L},function(a){t.J(this,a),e&&Kb(a,"y"),this.L=a}),t.g(L,"offsetX",L.prototype.offsetX),t.defineProperty(L,{offsetX:"offsetX"},function(){return this.ug},function(a){t.J(this,a),e&&Lb(a,"offsetX"),this.ug=a}),t.g(L,"offsetY",L.prototype.offsetY),t.defineProperty(L,{offsetY:"offsetY"},function(){return this.vg},function(a){t.J(this,a),e&&Lb(a,"offsetY"),this.vg=a}),L.prototype.isSpot=L.prototype.Cd=function(){return!isNaN(this.x)&&!isNaN(this.y)},L.prototype.isNoSpot=L.prototype.Me=function(){return isNaN(this.x)||isNaN(this.y)},L.prototype.isSide=L.prototype.Gp=function(){return this.Me()&&1===this.offsetX&&0!==this.offsetY},L.prototype.isDefault=L.prototype.Wc=function(){return isNaN(this.x)&&isNaN(this.y)&&-1===this.offsetX&&0===this.offsetY},t.hd=1,t.Pc=2,t.Zc=4,t.Yc=8,t.NONE=Mb(new L(0,0,0,0),0).Oa(),t.by=Mb(new L(0,0,-1,0),-1).Oa(),t.py=new L(0,0,0,0).Oa(),t.tq=new L(.5,0,0,0).Oa(),t.sy=new L(1,0,0,0).Oa(),t.qq=new L(0,.5,0,0).Oa(),t.ay=new L(.5,.5,0,0).Oa(),t.rq=new L(1,.5,0,0).Oa(),t.Wx=new L(0,1,0,0).Oa(),t.pq=new L(.5,1,0,0).Oa(),t.Yx=new L(1,1,0,0).Oa(),t.uy=Mb(new L(0,0,1,t.hd),1).Oa(),t.hy=Mb(new L(0,0,1,t.Pc),1).Oa(),t.ny=Mb(new L(0,0,1,t.Zc),1).Oa(),t.$x=Mb(new L(0,0,1,t.Yc),1).Oa(),t.oy=Mb(new L(0,0,1,t.hd|t.Yc),1).Oa(),t.gy=Mb(new L(0,0,1,t.Pc|t.Zc),1).Oa(),t.qy=Mb(new L(0,0,1,t.hd|t.Pc),1).Oa(),t.ty=Mb(new L(0,0,1,t.hd|t.Zc),1).Oa(),t.Xx=Mb(new L(0,0,1,t.Yc|t.Pc),1).Oa(),t.Zx=Mb(new L(0,0,1,t.Yc|t.Zc),1).Oa(),t.ly=Mb(new L(0,0,1,t.Pc|t.Zc|t.Yc),1).Oa(),t.jy=Mb(new L(0,0,1,t.hd|t.Zc|t.Yc),1).Oa(),t.ky=Mb(new L(0,0,1,t.hd|t.Pc|t.Yc),1).Oa(),t.iy=Mb(new L(0,0,1,t.hd|t.Pc|t.Zc),1).Oa(),t.Vx=Mb(new L(0,0,1,t.hd|t.Pc|t.Zc|t.Yc),1).Oa(),L.None=Qb=t.NONE,L.Default=Ub=t.by,L.TopLeft=Vb=t.py,L.TopCenter=Wb=t.tq,L.TopRight=Xb=t.sy,L.LeftCenter=t.qq,L.Center=Yb=t.ay,L.RightCenter=t.rq,L.BottomLeft=$b=t.Wx,L.BottomCenter=ac=t.pq,L.BottomRight=bc=t.Yx,L.MiddleTop=cc=t.tq,L.MiddleLeft=gc=t.qq,L.MiddleRight=hc=t.rq,L.MiddleBottom=mc=t.pq,L.Top=t.tq,L.Left=nc=t.qq,L.Right=oc=t.rq,L.Bottom=t.pq,L.TopSide=rc=t.uy,L.LeftSide=sc=t.hy,L.RightSide=tc=t.ny,L.BottomSide=uc=t.$x,L.TopBottomSides=t.oy,L.LeftRightSides=t.gy,L.TopLeftSides=t.qy,L.TopRightSides=t.ty,L.BottomLeftSides=t.Xx,L.BottomRightSides=t.Zx,L.NotTopSide=t.ly,L.NotLeftSide=t.jy,L.NotRightSide=t.ky,L.NotBottomSide=t.iy,L.AllSides=vc=t.Vx,wc.prototype.copy=function(){var a=new wc;return a.jf[0]=this.jf[0],a.jf[1]=this.jf[1],a.jf[2]=this.jf[2],a.jf[3]=this.jf[3],a.jf[4]=this.jf[4],a.jf[5]=this.jf[5],a},zc.prototype.addColorStop=function(a,b){this.AE.push({offset:a,color:b})},aa=Ac.prototype,aa.arc=function(a,b,c,d,e,f){Dc(this,a,b,c,d,e,f)},aa.beginPath=function(){this.path=[]},aa.bezierCurveTo=function(a,b,c,d,e,f){this.path.push(["C",a,b,c,d,e,f])},aa.clearRect=function(){},aa.clip=function(){Ec(this,"clipPath",this.path,new wc)},aa.closePath=function(){this.path.push(["z"])},aa.createLinearGradient=function(a,b,c,d){var e=new zc("linear");return e.x1=a,e.y1=b,e.x2=c,e.y2=d,e},aa.createPattern=function(){},aa.createRadialGradient=function(a,b,c,d,e,f){var g=new zc("radial");return g.x1=a,g.y1=b,g.r1=c,g.x2=d,g.y2=e,g.r2=f,g},aa.drawImage=function(a,b,c,d,e,f,g,h,i){a=[b,c,d,e,f,g,h,i,a],b=this.mj,e=a[8],c={x:0,y:0,width:e.naturalWidth,height:e.naturalHeight,href:e.src},d="",f=a[6]/a[2],g=a[7]/a[3],(0!==a[4]||0!==a[5])&&(d+=" translate("+a[4]+", "+a[5]+")"),(1!==f||1!==g)&&(d+=" scale("+f+", "+g+")"),(0!==a[0]||0!==a[1])&&(d+=" translate("+-a[0]+", "+-a[1]+")"),(0!==a[0]||0!==a[1]||a[2]!==e.naturalWidth||a[3]!==e.naturalHeight)&&(e="CLIP"+this.Dw,this.Dw++,f=Bc(this,"clipPath",{id:e}),f.appendChild(Bc(this,"rect",{x:a[0],y:a[1],width:a[2],height:a[3]})),this.Ll.appendChild(f),c["clip-path"]="url(#"+e+")"),Mc(this,"image",c,b,d),this.addElement("image",c)},aa.fill=function(){Ec(this,"fill",this.path,this.mj)},aa.fillRect=function(a,b,c,d){Nc(this,"fill",[a,b,c,d],this.mj)},aa.fillText=function(a,b,c){a=[a,b,c],b=this.textAlign,"left"===b?b="start":"right"===b?b="end":"center"===b&&(b="middle"),b={x:a[1],y:a[2],style:"font: "+this.font,"text-anchor":b},Mc(this,"fill",b,this.mj),this.addElement("text",b,a[0])},aa.lineTo=function(a,b){this.path.push(["L",a,b])},aa.moveTo=function(a,b){this.path.push(["M",a,b])},aa.quadraticCurveTo=function(a,b,c,d){this.path.push(["Q",a,b,c,d])
},aa.rect=function(a,b,c,d){this.path.push(["M",a,b],["L",a+c,b],["L",a+c,b+d],["L",a,b+d],["z"])},aa.restore=function(){this.mj=this.stack.pop(),this.path=this.stack.pop();var a=this.stack.pop();this.fillStyle=a.fillStyle,this.font=a.font,this.globalAlpha=a.globalAlpha,this.lineCap=a.lineCap,this.ux=a.ux,this.lineJoin=a.lineJoin,this.lineWidth=a.lineWidth,this.miterLimit=a.miterLimit,this.shadowBlur=a.shadowBlur,this.shadowColor=a.shadowColor,this.shadowOffsetX=a.shadowOffsetX,this.shadowOffsetY=a.shadowOffsetY,this.strokeStyle=a.strokeStyle,this.textAlign=a.textAlign},aa.save=function(){this.stack.push({fillStyle:this.fillStyle,font:this.font,globalAlpha:this.globalAlpha,lineCap:this.lineCap,ux:this.ux,lineJoin:this.lineJoin,lineWidth:this.lineWidth,miterLimit:this.miterLimit,shadowBlur:this.shadowBlur,shadowColor:this.shadowColor,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,strokeStyle:this.strokeStyle,textAlign:this.textAlign});for(var a=[],b=0;b<this.path.length;b++)a.push(this.path[b]);this.stack.push(a),this.stack.push(this.mj.copy())},aa.setTransform=function(a,b,c,d,e,f){1===a&&0===b&&0===c&&1===d&&0===e&&0===f||Cc(this,a,b,c,d,e,f)},aa.scale=function(){},aa.stroke=function(){Ec(this,"stroke",this.path,this.mj)},aa.strokeRect=function(a,b,c,d){Nc(this,"stroke",[a,b,c,d],this.mj)},aa.addElement=function(a,b,c){return a=Bc(this,a,b,c),0<this.Df.length?this.Df[this.Df.length-1].appendChild(a):this.Ll.appendChild(a),this.qx=a},aa.jb=function(){var c,d,e,f,g,b,a="SHADOW"+this.OG;this.OG++,b=this.addElement("filter",{id:a,width:"250%",height:"250%"},null),(0!==this.shadowOffsetX||0!==this.shadowOffsetY)&&(c=Bc(this,"feGaussianBlur",{"in":"SourceAlpha",result:"blur",gL:this.shadowBlur/2}),d=Bc(this,"feFlood",{"in":"blur",result:"flood","flood-color":this.shadowColor}),e=Bc(this,"feComposite",{"in":"flood",in2:"blur",operator:"in",result:"comp"}),f=Bc(this,"feOffset",{"in":"comp",result:"offsetBlur",dx:this.shadowOffsetX,dy:this.shadowOffsetY}),g=Bc(this,"feMerge",{}),g.appendChild(Bc(this,"feMergeNode",{"in":"offsetBlur"})),g.appendChild(Bc(this,"feMergeNode",{"in":"SourceGraphic"})),b.appendChild(c),b.appendChild(d),b.appendChild(e),b.appendChild(f),b.appendChild(g)),0<this.Df.length&&this.Df[this.Df.length-1].setAttributeNS(null,"filter","url(#"+a+")")},K={za:4*((Math.sqrt(2)-1)/3),Bj:new E(0,0).Oa(),CH:new F(0,0,0,0).Oa(),uq:new wb(0,0,0,0).Oa(),AH:new wb(2,2,2,2).Oa(),BH:new ra(1/0,1/0).Oa(),yH:new E(-1/0,-1/0).Oa(),xH:new E(1/0,1/0).Oa(),vq:new ra(0,0).Oa(),my:new ra(1,1).Oa(),sq:new ra(6,6).Oa(),ey:new ra(8,8).Oa(),zH:new E(0/0,0/0).Oa(),YB:null,sqrt:function(a){var b,c;if(0>=a)return 0;if(b=K.YB,null===b){for(b=[],c=0;2e3>=c;c++)b[c]=Math.sqrt(c);K.YB=b}return 1>a?(c=1/a,2e3>=c?1/b[0|c]:Math.sqrt(a)):2e3>=a?b[0|a]:Math.sqrt(a)},I:function(a,b){var c=a-b;return.5>c&&c>-.5},sb:function(a,b){var c=a-b;return 5e-8>c&&c>-5e-8},Ud:function(a,b,c,d,e,f,g){0>=e&&(e=1e-6);var h,i,j,k;if(c>a?(i=a,h=c):(i=c,h=a),d>b?(k=b,j=d):(k=d,j=b),a===c)return g>=k&&j>=g&&f>=a-e&&a+e>=f;if(b===d)return f>=i&&h>=f&&g>=b-e&&b+e>=g;if(h+=e,i-=e,f>=i&&h>=f&&(j+=e,k-=e,g>=k&&j>=g))if(h-i>j-k){if(!(a-c>e||c-a>e))return!0;if(f=(d-b)/(c-a)*(f-a)+b,g>=f-e&&f+e>=g)return!0}else{if(!(b-d>e||d-b>e))return!0;if(g=(c-a)/(d-b)*(g-b)+a,f>=g-e&&g+e>=f)return!0}return!1},yw:function(a,b,c,d,e,f,g,h,i,j,k,l){var m,n,o,p,q,r;return K.Ud(a,b,g,h,l,c,d)&&K.Ud(a,b,g,h,l,e,f)?K.Ud(a,b,g,h,l,j,k):(m=(a+c)/2,n=(b+d)/2,o=(c+e)/2,p=(d+f)/2,e=(e+g)/2,f=(f+h)/2,d=(m+o)/2,c=(n+p)/2,o=(o+e)/2,p=(p+f)/2,q=(d+o)/2,r=(c+p)/2,K.yw(a,b,m,n,d,c,q,r,i,j,k,l)||K.yw(q,r,o,p,e,f,g,h,i,j,k,l))},vI:function(a,b,c,d,e,f,g,h,i){var j=(c+e)/2,k=(d+f)/2;return i.x=(((a+c)/2+j)/2+(j+(e+g)/2)/2)/2,i.y=(((b+d)/2+k)/2+(k+(f+h)/2)/2)/2,i},uI:function(a,b,c,d,e,f,g,h){var i=(c+e)/2,j=(d+f)/2;return pb(((a+c)/2+i)/2,((b+d)/2+j)/2,(i+(e+g)/2)/2,(j+(f+h)/2)/2)},fp:function(a,b,c,d,e,f,g,h,i,j){var k,l,m,n,o,p;return K.Ud(a,b,g,h,i,c,d)&&K.Ud(a,b,g,h,i,e,f)?(Fb(j,a,b,0,0),Fb(j,g,h,0,0)):(k=(a+c)/2,l=(b+d)/2,m=(c+e)/2,n=(d+f)/2,e=(e+g)/2,f=(f+h)/2,d=(k+m)/2,c=(l+n)/2,m=(m+e)/2,n=(n+f)/2,o=(d+m)/2,p=(c+n)/2,K.fp(a,b,k,l,d,c,o,p,i,j),K.fp(o,p,m,n,e,f,g,h,i,j)),j},Fe:function(a,b,c,d,e,f,g,h,i,j){var k,l,m,n,o,p;return K.Ud(a,b,g,h,i,c,d)&&K.Ud(a,b,g,h,i,e,f)?(0===j.length&&j.push([a,b]),j.push([g,h])):(k=(a+c)/2,l=(b+d)/2,m=(c+e)/2,n=(d+f)/2,e=(e+g)/2,f=(f+h)/2,d=(k+m)/2,c=(l+n)/2,m=(m+e)/2,n=(n+f)/2,o=(d+m)/2,p=(c+n)/2,K.Fe(a,b,k,l,d,c,o,p,i,j),K.Fe(o,p,m,n,e,f,g,h,i,j)),j},jB:function(a,b,c,d,e,f,g,h,i,j){var k,l,m,n;return K.Ud(a,b,e,f,j,c,d)?K.Ud(a,b,e,f,j,h,i):(k=(a+c)/2,l=(b+d)/2,c=(c+e)/2,d=(d+f)/2,m=(k+c)/2,n=(l+d)/2,K.jB(a,b,k,l,m,n,g,h,i,j)||K.jB(m,n,c,d,e,f,g,h,i,j))},fL:function(a,b,c,d,e,f,g){return g.x=((a+c)/2+(c+e)/2)/2,g.y=((b+d)/2+(d+f)/2)/2,g},iB:function(a,b,c,d,e,f,g,h){var i,j,k,l;return K.Ud(a,b,e,f,g,c,d)?(Fb(h,a,b,0,0),Fb(h,e,f,0,0)):(i=(a+c)/2,j=(b+d)/2,c=(c+e)/2,d=(d+f)/2,k=(i+c)/2,l=(j+d)/2,K.iB(a,b,i,j,k,l,g,h),K.iB(k,l,c,d,e,f,g,h)),h},Yp:function(a,b,c,d,e,f,g,h){var i,j,k,l;return K.Ud(a,b,e,f,g,c,d)?(0===h.length&&h.push([a,b]),h.push([e,f])):(i=(a+c)/2,j=(b+d)/2,c=(c+e)/2,d=(d+f)/2,k=(i+c)/2,l=(j+d)/2,K.Yp(a,b,i,j,k,l,g,h),K.Yp(k,l,c,d,e,f,g,h)),h},dt:function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o,p,q,r,s,t,u,v;if(0>=m&&(m=1e-6),K.Ud(a,b,g,h,m,c,d)&&K.Ud(a,b,g,h,m,e,f)){if(o=(a-g)*(j-l)-(b-h)*(i-k),!o)return!1;if(m=((a*h-b*g)*(i-k)-(a-g)*(i*l-j*k))/o,o=((a*h-b*g)*(j-l)-(b-h)*(i*l-j*k))/o,(j>l?j-l:l-j)>(i>k?i-k:k-i)){if(h>b?(i=b,g=h):(i=h,g=b),i>o||o>g)return!1}else if(g>a?i=a:(i=g,g=a),i>m||m>g)return!1;return n.x=m,n.y=o,!0}return o=(a+c)/2,p=(b+d)/2,c=(c+e)/2,d=(d+f)/2,e=(e+g)/2,f=(f+h)/2,q=(o+c)/2,r=(p+d)/2,c=(c+e)/2,d=(d+f)/2,s=(q+c)/2,t=(r+d)/2,u=(k-i)*(k-i)+(l-j)*(l-j),v=!1,K.dt(a,b,o,p,q,r,s,t,i,j,k,l,m,n)&&(a=(n.x-i)*(n.x-i)+(n.y-j)*(n.y-j),u>a&&(u=a,v=!0)),b=n.x,o=n.y,K.dt(s,t,c,d,e,f,g,h,i,j,k,l,m,n)&&(a=(n.x-i)*(n.x-i)+(n.y-j)*(n.y-j),u>a?v=!0:(n.x=b,n.y=o)),v},et:function(a,b,c,d,e,f,g,h,i,j,k,l,m){var o,p,q,r,s,t,n=0;if(0>=m&&(m=1e-6),K.Ud(a,b,g,h,m,c,d)&&K.Ud(a,b,g,h,m,e,f)){if(m=(a-g)*(j-l)-(b-h)*(i-k),!m)return n;if(o=((a*h-b*g)*(i-k)-(a-g)*(i*l-j*k))/m,p=((a*h-b*g)*(j-l)-(b-h)*(i*l-j*k))/m,o>=k)return n;if((j>l?j-l:l-j)>(i>k?i-k:k-i)){if(h>b?(i=b,a=h):(i=h,a=b),i>p||p>a)return n}else if(g>a?(i=a,a=g):i=g,i>o||o>a)return n;m>0?n++:0>m&&n--}else o=(a+c)/2,p=(b+d)/2,q=(c+e)/2,r=(d+f)/2,e=(e+g)/2,f=(f+h)/2,d=(o+q)/2,c=(p+r)/2,q=(q+e)/2,r=(r+f)/2,s=(d+q)/2,t=(c+r)/2,n+=K.et(a,b,o,p,d,c,s,t,i,j,k,l,m),n+=K.et(s,t,q,r,e,f,g,h,i,j,k,l,m);return n},vn:function(a,b,c,d,e,f,g){if(K.sb(a,c)){var h;return d>b?(h=b,c=d):(h=d,c=b),d=f,h>d?(g.x=a,g.y=h,!1):d>c?(g.x=a,g.y=c,!1):(g.x=a,g.y=d,!0)}return K.sb(b,d)?(c>a?h=a:(h=c,c=a),d=e,h>d?(g.x=h,g.y=b,!1):d>c?(g.x=c,g.y=b,!1):(g.x=d,g.y=b,!0)):(h=((a-e)*(a-c)+(b-f)*(b-d))/((c-a)*(c-a)+(d-b)*(d-b)),-5e-6>h?(g.x=a,g.y=b,!1):h>1.000005?(g.x=c,g.y=d,!1):(g.x=a+h*(c-a),g.y=b+h*(d-b),!0))},vh:function(a,b,c,d,e,f,g,h,i){return K.I(a,c)&&K.I(b,d)?(i.x=a,i.y=b,!1):K.sb(e,g)?K.sb(a,c)?(K.vn(a,b,c,d,e,f,i),!1):(f=(d-b)/(c-a)*(e-a)+b,K.vn(a,b,c,d,e,f,i)):(h=(h-f)/(g-e),K.sb(a,c)?(f=h*(a-e)+f,d>b?(g=b,c=d):(g=d,c=b),g>f?(i.x=a,i.y=g,!1):f>c?(i.x=a,i.y=c,!1):(i.x=a,i.y=f,!0)):(g=(d-b)/(c-a),K.sb(h,g)?(K.vn(a,b,c,d,e,f,i),!1):(e=(g*a-h*e+f-b)/(g-h),K.sb(g,0)?(c>a?g=a:(g=c,c=a),g>e?(i.x=g,i.y=b,!1):e>c?(i.x=c,i.y=b,!1):(i.x=e,i.y=b,!0)):(f=g*(e-a)+b,K.vn(a,b,c,d,e,f,i)))))},TK:function(a,b,c,d,e){return K.vh(c.x,c.y,d.x,d.y,a.x,a.y,b.x,b.y,e)},PK:function(a,b,c,d,e,f,g,h,i,j){function k(c,d){var e=(c-a)*(c-a)+(d-b)*(d-b);l>e&&(l=e,i.x=c,i.y=d)}var m,n,o,p,l=1/0;if(k(i.x,i.y),g>e?(m=e,n=g):(m=g,n=e),h>f?(o=e,p=g):(o=g,p=e),m=(n-m)/2+j,j=(p-o)/2+j,e=(e+g)/2,f=(f+h)/2,0===m||0===j)return i;if(.5>(c>a?c-a:a-c)){if(m=1-(c-e)*(c-e)/(m*m),0>m)return i;m=Math.sqrt(m),d=-j*m+f,k(c,j*m+f),k(c,d)}else{if(c=(d-b)/(c-a),d=1/(m*m)+c*c/(j*j),h=2*c*(b-c*a)/(j*j)-2*c*f/(j*j)-2*e/(m*m),m=h*h-4*d*(2*c*a*f/(j*j)-2*b*f/(j*j)+f*f/(j*j)+e*e/(m*m)-1+(b-c*a)*(b-c*a)/(j*j)),0>m)return i;m=Math.sqrt(m),j=(-h+m)/(2*d),k(j,c*j-c*a+b),m=(-h-m)/(2*d),k(m,c*m-c*a+b)}return i},yl:function(a,b,c,d,e,f,g,h,i){var m,j=1e21,k=a,l=b;return K.vh(a,b,a,d,e,f,g,h,i)&&(m=(i.x-e)*(i.x-e)+(i.y-f)*(i.y-f),j>m&&(j=m,k=i.x,l=i.y)),K.vh(c,b,c,d,e,f,g,h,i)&&(m=(i.x-e)*(i.x-e)+(i.y-f)*(i.y-f),j>m&&(j=m,k=i.x,l=i.y)),K.vh(a,b,c,b,e,f,g,h,i)&&(m=(i.x-e)*(i.x-e)+(i.y-f)*(i.y-f),j>m&&(j=m,k=i.x,l=i.y)),K.vh(a,d,c,d,e,f,g,h,i)&&(m=(i.x-e)*(i.x-e)+(i.y-f)*(i.y-f),j>m&&(j=m,k=i.x,l=i.y)),i.x=k,i.y=l,1e21>j},ix:function(a,b,c){var d=b.x,e=b.y,f=c.x,g=c.y,h=a.left,i=a.right,j=a.top,k=a.bottom;return d===f?(g>e?(a=e,f=g):(a=g,f=e),d>=h&&i>=d&&k>=a&&f>=j):e===g?(f>d?a=d:(a=f,f=d),e>=j&&k>=e&&i>=a&&f>=h):a.La(b)||a.La(c)||K.hx(h,j,i,j,d,e,f,g)||K.hx(i,j,i,k,d,e,f,g)||K.hx(i,k,h,k,d,e,f,g)||K.hx(h,k,h,j,d,e,f,g)?!0:!1},hx:function(a,b,c,d,e,f,g,h){return 0>=K.Fw(a,b,c,d,e,f)*K.Fw(a,b,c,d,g,h)&&0>=K.Fw(e,f,g,h,a,b)*K.Fw(e,f,g,h,c,d)},Fw:function(a,b,c,d,e,f){return c-=a,d-=b,a=e-a,b=f-b,f=a*d-b*c,0===f&&(f=a*c+b*d,f>0&&(f=(a-c)*c+(b-d)*d,0>f&&(f=0))),0>f?-1:f>0?1:0},Tt:function(a){return 0>a&&(a+=360),a>=360&&(a-=360),a},JE:function(a,b,c,d,e,f){var h,i,j,g=Math.PI;for(f||(d*=g/180,e*=g/180),f=e>d?1:-1,h=[],i=g/2,j=d,d=Math.min(2*g+1e-5,Math.abs(e-d));d>1e-5;)e=j+f*Math.min(d,i),h.push(K.EI(c,j,e,a,b)),d-=Math.abs(e-j),j=e;return h},EI:function(a,b,c,d,e){var f=(c-b)/2,g=a*Math.cos(f),h=a*Math.sin(f),i=.5522847498*Math.tan(f),j=g+i*h,g=-h+i*g,h=-g,i=f+b,f=Math.cos(i),i=Math.sin(i);return{x1:d+a*Math.cos(b),y1:e+a*Math.sin(b),x2:d+j*f-g*i,y2:e+j*i+g*f,pe:d+j*f-h*i,qe:e+j*i+h*f,$b:d+a*Math.cos(c),ac:e+a*Math.sin(c)}},rt:function(a,b,c,d,e,f,g){c=Math.floor((a-c)/e)*e+c,d=Math.floor((b-d)/f)*f+d;var h=c;return e/2>c+e-a&&(h=c+e),a=d,f/2>d+f-b&&(a=d+f),g.p(h,a),g},lF:function(a,b){var c=Math.max(a,b),d=Math.min(a,b),e=1,f=1;do e=c%d,c=f=d,d=e;while(e>0);return f},UI:function(a,b,c,d){var g,h,i,j,e=0>c,f=0>d;return b>a?(g=1,h=0):(g=0,h=1),i=0===g?a:b,j=0===g?c:d,(0===g?e:f)&&(j=-j),g=h,c=0===g?c:d,(0===g?e:f)&&(c=-c),K.VI(i,0===g?a:b,j,c,0,0)},VI:function(a,b,c,d,e,f){var g,h,i,j,k,l;if(d>0)if(c>0){for(f=a*a,e=b*b,a*=c,g=b*d,h=-e+g,i=-e+Math.sqrt(a*a+g*g),b=h,j=0;9999999999>j&&(b=.5*(h+i),b!==h&&b!==i);++j)if(k=a/(b+f),l=g/(b+e),k=k*k+l*l-1,k>0)h=b;else{if(!(0>k))break;i=b}c=f*c/(b+f)-c,d=e*d/(b+e)-d,c=Math.sqrt(c*c+d*d)}else c=Math.abs(d-b);else d=a*a-b*b,e=a*c,d>e?(d=e/d,e=a*d,f=b*Math.sqrt(Math.abs(1-d*d)),c=e-c,c=Math.sqrt(c*c+f*f)):c=Math.abs(c-a);return c}},t.ka("Geometry",Pc),t.ji(Pc),Pc.prototype.copy=function(){var b,c,d,e,f,a=new Pc;for(a.ga=this.ga,a.tc=this.tc,a.Cc=this.Cc,a.pb=this.pb,a.Bb=this.Bb,b=this.Pk,c=b.length,d=a.Pk,e=0;c>e;e++)f=b.n[e].copy(),d.add(f);return a.Zu=this.Zu,a.Ku.assign(this.Ku),a.$a=this.$a,a.Zi=this.Zi.ba(),a.$i=this.$i.ba(),a.to=this.to,a.so=this.so,a.Ac=this.Ac,a},Pc.Line=Tc=t.w(Pc,"Line",0),Pc.Rectangle=Uc=t.w(Pc,"Rectangle",1),Pc.Ellipse=$c=t.w(Pc,"Ellipse",2),Pc.Path=Qc=t.w(Pc,"Path",3),Pc.prototype.Oa=function(){return this.freeze(),Object.freeze(this),this},Pc.prototype.freeze=function(){var a,b,c;for(this.tb=!0,a=this.Fb,a.freeze(),b=a.length,c=0;b>c;c++)a.n[c].freeze();return this},Pc.prototype.Ra=function(){var a,b,c;for(Object.isFrozen(this)&&t.m("cannot thaw constant: "+this),this.tb=!1,a=this.Fb,a.Ra(),b=a.length,c=0;b>c;c++)a.n[c].Ra();return this},Pc.prototype.equalsApprox=Pc.prototype.Af=function(a){var b,c,d;if(!(a instanceof Pc))return!1;if(this.type!==a.type)return this.type===Tc&&a.type===Qc?ad(this,a):a.type===Tc&&this.type===Qc?ad(a,this):!1;if(this.type===Qc){if(b=this.Fb,a=a.Fb,c=b.length,c!==a.length)return!1;for(d=0;c>d;d++)if(!b.n[d].Af(a.n[d]))return!1;return!0}return K.I(this.sa,a.sa)&&K.I(this.ta,a.ta)&&K.I(this.D,a.D)&&K.I(this.F,a.F)},Pc.stringify=cd=function(a){return a.toString()},Pc.prototype.toString=function(a){var b,c,d,e,f;switch(this.type){case Tc:return void 0===a?"M"+this.sa.toString()+" "+this.ta.toString()+"L"+this.D.toString()+" "+this.F.toString():"M"+this.sa.toFixed(a)+" "+this.ta.toFixed(a)+"L"+this.D.toFixed(a)+" "+this.F.toFixed(a);case Uc:return b=new F(this.sa,this.ta,0,0),b.jH(this.D,this.F,0,0),void 0===a?"M"+b.x.toString()+" "+b.y.toString()+"H"+b.right.toString()+"V"+b.bottom.toString()+"H"+b.left.toString()+"z":"M"+b.x.toFixed(a)+" "+b.y.toFixed(a)+"H"+b.right.toFixed(a)+"V"+b.bottom.toFixed(a)+"H"+b.left.toFixed(a)+"z";case $c:return b=new F(this.sa,this.ta,0,0),b.jH(this.D,this.F,0,0),void 0===a?(c=b.left.toString()+" "+(b.y+b.height/2).toString(),d=b.right.toString()+" "+(b.y+b.height/2).toString(),"M"+c+"A"+(b.width/2).toString()+" "+(b.height/2).toString()+" 0 0 1 "+d+"A"+(b.width/2).toString()+" "+(b.height/2).toString()+" 0 0 1 "+c):(c=b.left.toFixed(a)+" "+(b.y+b.height/2).toFixed(a),d=b.right.toFixed(a)+" "+(b.y+b.height/2).toFixed(a),"M"+c+"A"+(b.width/2).toFixed(a)+" "+(b.height/2).toFixed(a)+" 0 0 1 "+d+"A"+(b.width/2).toFixed(a)+" "+(b.height/2).toFixed(a)+" 0 0 1 "+c);case Qc:for(b="",c=this.Fb,d=c.length,e=0;d>e;e++)f=c.n[e],e>0&&(b+=" x "),f.Ep&&(b+="F "),b+=f.toString(a);return b;default:return this.type.toString()}},Pc.fillPath=dd=function(a){var b,c,d,e;for("string"!=typeof a&&t.jc(a,"string",Pc,"fillPath:str"),a=a.split(/[Xx]/),b=a.length,c="",d=0;b>d;d++)e=a[d],c=null!==e.match(/[Ff]/)?0===d?c+e:c+("X"+(" "===e[0]?"":" ")+e):c+((0===d?"":"X ")+"F"+(" "===e[0]?"":" ")+e);return c},Pc.parse=ed=function(a,b){function c(){return k>=q-1?!0:null!==j[k+1].match(/[A-Za-z]/)}function d(){return k++,j[k]}function e(){var a=new E(parseFloat(d()),parseFloat(d()));return l===l.toLowerCase()&&(a.x=p.x+a.x,a.y=p.y+a.y),a}function f(){return p=e()}function g(){return o=e()}function h(){var a=[parseFloat(d()),parseFloat(d()),parseFloat(d()),parseFloat(d()),parseFloat(d())];return c()||(a.push(parseFloat(d())),c()||a.push(parseFloat(d()))),l===l.toLowerCase()&&(a[2]+=p.x,a[3]+=p.y),a}function i(){return"c"!==m.toLowerCase()&&"s"!==m.toLowerCase()?p:new E(2*p.x-o.x,2*p.y-o.y)}var s,j,k,l,m,n,o,p,q,r,u,v,w,x,y,z,A,B;for(void 0===b&&(b=!1),"string"!=typeof a&&t.jc(a,"string",Pc,"parse:str"),a=a.replace(/,/gm," "),a=a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2"),a=a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2"),a=a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([^\s])/gm,"$1 $2"),a=a.replace(/([^\s])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2"),a=a.replace(/([0-9])([+\-])/gm,"$1 $2"),a=a.replace(/(\.[0-9]*)(\.)/gm,"$1 $2"),a=a.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),a=a.replace(/[\s\r\t\n]+/gm," "),a=a.replace(/^\s+|\s+$/g,""),j=a.split(" "),k=-1,l="",m="",n=new E(0,0),o=new E(0,0),p=new E(0,0),q=j.length,r=t.u(),u=!1,v=!1,w=!0;!(k>=q-1);)if(m=l,l=d(),""!==l)switch(l.toUpperCase()){case"X":w=!0,v=u=!1;break;case"M":for(s=f(),null===r.bc||!0===w?(P(r,s.x,s.y,u,!1,!v),w=!1):r.moveTo(s.x,s.y),n=p;!c();)s=f(),r.lineTo(s.x,s.y);break;case"L":for(;!c();)s=f(),r.lineTo(s.x,s.y);break;case"H":for(;!c();)p=s=new E((l===l.toLowerCase()?p.x:0)+parseFloat(d()),p.y),r.lineTo(p.x,p.y);break;case"V":for(;!c();)p=s=new E(p.x,(l===l.toLowerCase()?p.y:0)+parseFloat(d())),r.lineTo(p.x,p.y);break;case"C":for(;!c();)x=e(),y=g(),s=f(),Q(r,x.x,x.y,y.x,y.y,s.x,s.y);break;case"S":for(;!c();)x=i(),y=g(),s=f(),Q(r,x.x,x.y,y.x,y.y,s.x,s.y);break;case"Q":for(;!c();)y=g(),s=f(),fd(r,y.x,y.y,s.x,s.y);break;case"T":for(;!c();)o=y=i(),s=f(),fd(r,y.x,y.y,s.x,s.y);break;case"B":for(;!c();)s=h(),r.arcTo(s[0],s[1],s[2],s[3],s[4],s[5],s[6]);break;case"A":for(;!c();)x=Math.abs(parseFloat(d())),y=Math.abs(parseFloat(d())),z=parseFloat(d()),A=!!parseFloat(d()),B=!!parseFloat(d()),s=f(),gd(r,x,y,z,A,B,s.x,s.y);break;case"Z":S(r),p=n;break;case"F":for(s=null,x=1;j[k+x];)if(null!==j[k+x].match(/[Uu]/))x++;else{if(null!==j[k+x].match(/[A-Za-z]/)){s=j[k+x];break}x++}s.match(/[Mm]/)?u=!0:hd(r);break;case"U":for(s=null,x=1;j[k+x];)if(null!==j[k+x].match(/[Ff]/))x++;else{if(null!==j[k+x].match(/[A-Za-z]/)){s=j[k+x];break}x++}s.match(/[Mm]/)?v=!0:r.jb(!1)}if(n=r.s,t.v(r),b)for(r=n.Fb.k;r.next();)r.value.Ep=!0;return n},Pc.prototype.PA=function(){var a,b,c;if(this.$a)return!0;if(a=this.Fb,this.Zu!==a.Y)return!0;for(b=a.length,c=0;b>c;c++)if(a.n[c].PA())return!0;return!1},Pc.prototype.QB=function(){var a,b,c;for(this.$a=!1,a=this.Fb,this.Zu=a.Y,b=a.length,c=0;b>c;c++)a.n[c].QB()},Pc.prototype.xf=function(){var a=this.Ku;a.Ra(),isNaN(this.to)||isNaN(this.so)?a.p(0,0,0,0):a.p(0,0,this.to,this.so),jd(this,a,!1),Fb(a,0,0,0,0),a.freeze()},Pc.prototype.computeBoundsWithoutOrigin=Pc.prototype.AI=function(){var a=new F;return jd(this,a,!0),a},Pc.prototype.normalize=Pc.prototype.normalize=function(){t.J(this);var a=this.AI();return this.offset(-a.x,-a.y),new E(-a.x,-a.y)},Pc.prototype.offset=Pc.prototype.offset=function(a,b){t.J(this),e&&(t.q(a,Pc,"offset"),t.q(b,Pc,"offset")),this.transform(1,0,0,1,a,b)},Pc.prototype.scale=Pc.prototype.scale=function(a,b){t.J(this),e&&(t.q(a,Pc,"scale:x"),t.q(b,Pc,"scale:y"),0>=a&&t.ha(a,"scale must be greater than zero",Pc,"scale:x"),0>=b&&t.ha(b,"scale must be greater than zero",Pc,"scale:y")),this.transform(a,0,0,b,0,0)},Pc.prototype.rotate=Pc.prototype.rotate=function(a,b,c){t.J(this),void 0===b&&(b=0),void 0===c&&(c=0),e&&(t.q(a,Pc,"rotate:angle"),t.q(b,Pc,"rotate:x"),t.q(c,Pc,"rotate:y"));var d=t.Bh();d.reset(),d.rotate(a,b,c),this.transform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy),t.cf(d)},Pc.prototype.transform=Pc.prototype.transform=function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o;switch(this.type){case Tc:case Uc:case $c:g=this.tc,h=this.Cc,this.tc=g*a+h*c+e,this.Cc=g*b+h*d+f,g=this.pb,h=this.Bb,this.pb=g*a+h*c+e,this.Bb=g*b+h*d+f;break;case Qc:for(i=this.Fb,j=i.length,k=0;j>k;k++)for(l=i.n[k],g=l.sa,h=l.ta,l.sa=g*a+h*c+e,l.ta=g*b+h*d+f,l=l.Ka,m=l.length,n=0;m>n;n++)switch(o=l.n[n],o.type){case bd:case kd:g=o.D,h=o.F,o.D=g*a+h*c+e,o.F=g*b+h*d+f;break;case ld:g=o.Gb,h=o.Xb,o.Gb=g*a+h*c+e,o.Xb=g*b+h*d+f,g=o.xe,h=o.ye,o.xe=g*a+h*c+e,o.ye=g*b+h*d+f,g=o.D,h=o.F,o.D=g*a+h*c+e,o.F=g*b+h*d+f;break;case md:g=o.Gb,h=o.Xb,o.Gb=g*a+h*c+e,o.Xb=g*b+h*d+f,g=o.D,h=o.F,o.D=g*a+h*c+e,o.F=g*b+h*d+f;break;case sd:g=o.Ia,h=o.Ua,o.Ia=g*a+h*c+e,o.Ua=g*b+h*d+f,o.radiusX*=Math.sqrt(a*a+c*c),void 0!==o.radiusY&&(o.radiusY*=Math.sqrt(b*b+d*d));break;case ud:g=o.D,h=o.F,o.D=g*a+h*c+e,o.F=g*b+h*d+f,o.radiusX*=Math.sqrt(a*a+c*c),o.radiusY*=Math.sqrt(b*b+d*d);break;default:t.m("Unknown Segment type: "+o.type)}}this.$a=!0},Pc.prototype.Ss=function(a,b){var c=this.tc,d=this.Cc,e=this.pb,f=this.Bb,g=Math.min(c,e),h=Math.min(d,f),c=Math.abs(e-c),d=Math.abs(f-d),f=t.N();return f.x=g,f.y=h,b.Xa(f),e=new Rc(f.x,f.y),f.x=g+c,f.y=h,b.Xa(f),e.Ka.add(new xd(bd,f.x,f.y)),f.x=g+c,f.y=h+d,b.Xa(f),e.Ka.add(new xd(bd,f.x,f.y)),f.x=g,f.y=h+d,b.Xa(f),e.Ka.add(new xd(bd,f.x,f.y).close()),t.B(f),a.type=Qc,a.Fb.add(e),a},Pc.prototype.La=function(a,b,c,d){var i,j,k,l,m,n,o,h,p,q,r,s,u,v,w,x,y,z,A,e=a.x,f=a.y,g=this.Ub.x-20;for(a=a.y,h=0,p=this.Fb.n,q=p.length,r=0;q>r;r++)if(s=p[r],s.Ep){if(c&&s.La(e,f,b))return!0;for(u=s.Ka,i=s.sa,j=s.ta,v=i,w=j,x=0;x<=u.length;x++){switch(x!==u.length?(k=u.n[x],l=k.type,n=k.D,o=k.F):(l=bd,n=v,o=w),l){case kd:if(m=yd(e,f,g,a,i,j,v,w),!0===m)return!0;h+=m,v=n,w=o;break;case bd:if(m=yd(e,f,g,a,i,j,n,o),!0===m)return!0;h+=m;break;case ld:m=K.et(i,j,k.Gb,k.Xb,k.xe,k.ye,n,o,g,a,e,f,.5),h+=m;break;case md:m=K.et(i,j,(i+2*k.Gb)/3,(j+2*k.Xb)/3,(k.Gb+2*n)/3,(k.Gb+2*n)/3,n,o,g,a,e,f,.5),h+=m;break;case sd:case ud:for(l=k.type===sd?vd(k,s):wd(k,s,i,j),y=l.length,z=null,A=0;y>A;A++){if(z=l[A],0===A){if(m=yd(e,f,g,a,i,j,z.x1,z.y1),!0===m)return!0;h+=m}m=K.et(z.x1,z.y1,z.x2,z.y2,z.pe,z.qe,z.$b,z.ac,g,a,e,f,.5),h+=m}null!==z&&(n=z.$b,o=z.ac);break;default:t.m("Unknown Segment type: "+k.type)}i=n,j=o}if(0!==h)return!0;h=0}else if(s.La(e,f,d?b:b+2))return!0;return 0!==h},Pc.prototype.getPointAlongPath=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;for((0>a||a>1)&&t.ha(a,"0 <= fraction <= 1",Pc,"getPointAlongPath:fraction"),b=this.Fb.gb(),c=t.Hb(),d=[],d.push([b.sa,b.ta]),e=b.sa,f=b.ta,g=e,h=f,i=b.Ka.n,j=i.length,k=0;j>k;k++){switch(l=i[k],l.ga){case kd:c.push(d),d=[],d.push([l.D,l.F]),e=l.D,f=l.F,g=e,h=f;break;case bd:d.push([l.D,l.F]),e=l.D,f=l.F;break;case ld:K.Fe(e,f,l.pd,l.Ee,l.xg,l.yg,l.pb,l.Bb,.5,d),e=l.D,f=l.F;break;case md:K.Yp(e,f,l.pd,l.Ee,l.pb,l.Bb,.5,d),e=l.D,f=l.F;break;case sd:for(m=vd(l,b),n=m.length,o=0;n>o;o++)p=m[o],K.Fe(e,f,p.x2,p.y2,p.pe,p.qe,p.$b,p.ac,.5,d),e=p.$b,f=p.ac;break;case ud:for(m=wd(l,b,e,f),n=m.length,o=0;n>o;o++)p=m[o],K.Fe(e,f,p.x2,p.y2,p.pe,p.qe,p.$b,p.ac,.5,d),e=p.$b,f=p.ac;break;default:t.m("Segment not of valid type")}l.Th&&d.push([g,h])}for(c.push(d),j=0,e=c.length,b=null,f=0;e>f;f++)for(g=c[f],h=g.length,k=0;h>k;k++)d=g[k],0!==k&&(i=Math.sqrt(ob(b[0],b[1],d[0],d[1])),j+=i),b=d;for(a*=j,f=j=0;e>f;f++)for(g=c[f],h=g.length,k=0;h>k;k++){if(d=g[k],0!==k){if(i=Math.sqrt(ob(b[0],b[1],d[0],d[1])),j+i>a)return k=(a-j)/i,t.Ca(c),new E(b[0]+(d[0]-b[0])*k,b[1]+(d[1]-b[1])*k);j+=i}b=d}return t.Ca(c),null},t.g(Pc,"type",Pc.prototype.type),t.defineProperty(Pc,{type:"type"},function(){return this.ga},function(a){this.ga!==a&&(e&&t.Fa(a,Pc,Pc,"type"),t.J(this,a),this.ga=a,this.$a=!0)}),t.g(Pc,"startX",Pc.prototype.sa),t.defineProperty(Pc,{sa:"startX"},function(){return this.tc},function(a){this.tc!==a&&(e&&t.q(a,Pc,"startX"),t.J(this,a),this.tc=a,this.$a=!0)}),t.g(Pc,"startY",Pc.prototype.ta),t.defineProperty(Pc,{ta:"startY"},function(){return this.Cc},function(a){this.Cc!==a&&(e&&t.q(a,Pc,"startY"),t.J(this,a),this.Cc=a,this.$a=!0)}),t.g(Pc,"endX",Pc.prototype.D),t.defineProperty(Pc,{D:"endX"},function(){return this.pb},function(a){this.pb!==a&&(e&&t.q(a,Pc,"endX"),t.J(this,a),this.pb=a,this.$a=!0)}),t.g(Pc,"endY",Pc.prototype.F),t.defineProperty(Pc,{F:"endY"},function(){return this.Bb},function(a){this.Bb!==a&&(e&&t.q(a,Pc,"endY"),t.J(this,a),this.Bb=a,this.$a=!0)}),t.g(Pc,"figures",Pc.prototype.Fb),t.defineProperty(Pc,{Fb:"figures"},function(){return this.Pk},function(a){this.Pk!==a&&(e&&t.l(a,H,Pc,"figures"),t.J(this,a),this.Pk=a,this.$a=!0)}),t.defineProperty(Pc,{G:"spot1"},function(){return this.Zi},function(a){e&&t.l(a,L,Pc,"spot1"),t.J(this,a),this.Zi=a.ba()}),t.defineProperty(Pc,{H:"spot2"},function(){return this.$i},function(a){e&&t.l(a,L,Pc,"spot2"),t.J(this,a),this.$i=a.ba()}),t.A(Pc,{Ub:"bounds"},function(){return this.PA()&&(this.QB(),this.xf()),this.Ku}),t.ka("PathFigure",Rc),t.ji(Rc),Rc.prototype.copy=function(){var b,c,d,e,f,a=new Rc;for(a.hm=this.hm,a.vo=this.vo,a.tc=this.tc,a.Cc=this.Cc,b=this.ws,c=b.length,d=a.ws,e=0;c>e;e++)f=b.n[e].copy(),d.add(f);return a.Yv=this.Yv,a.$a=this.$a,a},Rc.prototype.equalsApprox=Rc.prototype.Af=function(a){var b,c,d;if(!(a instanceof Rc&&K.I(this.sa,a.sa)&&K.I(this.ta,a.ta)))return!1;if(b=this.Ka,a=a.Ka,c=b.length,c!==a.length)return!1;for(d=0;c>d;d++)if(!b.n[d].Af(a.n[d]))return!1;return!0},aa=Rc.prototype,aa.toString=function(a){for(var b=void 0===a?"M"+this.sa.toString()+" "+this.ta.toString():"M"+this.sa.toFixed(a)+" "+this.ta.toFixed(a),c=this.Ka,d=c.length,e=0;d>e;e++)b+=" "+c.n[e].toString(a);return b},aa.freeze=function(){var a,b,c;for(this.tb=!0,a=this.Ka,a.freeze(),b=a.length,c=0;b>c;c++)a.n[c].freeze();return this},aa.Ra=function(){var a,b,c;for(this.tb=!1,a=this.Ka,a.Ra(),b=a.length,c=0;b>c;c++)a.n[c].Ra();return this},aa.PA=function(){var a,b,c;if(this.$a)return!0;if(a=this.Ka,this.Yv!==a.Y)return!0;for(b=a.length,c=0;b>c;c++)if(a.n[c].$a)return!0;return!1},aa.QB=function(){var a,b,c,d;for(this.$a=!1,a=this.Ka,this.Yv=a.Y,b=a.length,c=0;b>c;c++)d=a.n[c],d.$a=!1,d.Cj=null},t.g(Rc,"isFilled",Rc.prototype.Ep),t.defineProperty(Rc,{Ep:"isFilled"},function(){return this.hm},function(a){e&&t.i(a,"boolean",Rc,"isFilled"),t.J(this,a),this.hm=a}),t.g(Rc,"isShadowed",Rc.prototype.qi),t.defineProperty(Rc,{qi:"isShadowed"},function(){return this.vo},function(a){e&&t.i(a,"boolean",Rc,"isShadowed"),t.J(this,a),this.vo=a}),t.g(Rc,"startX",Rc.prototype.sa),t.defineProperty(Rc,{sa:"startX"},function(){return this.tc},function(a){e&&t.q(a,Rc,"startX"),t.J(this,a),this.tc=a,this.$a=!0}),t.g(Rc,"startY",Rc.prototype.ta),t.defineProperty(Rc,{ta:"startY"},function(){return this.Cc},function(a){e&&t.q(a,Rc,"startY"),t.J(this,a),this.Cc=a,this.$a=!0}),t.g(Rc,"segments",Rc.prototype.Ka),t.defineProperty(Rc,{Ka:"segments"},function(){return this.ws},function(a){e&&t.l(a,H,Rc,"segments"),t.J(this,a),this.ws=a,this.$a=!0}),Rc.prototype.La=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o;for(d=this.sa,e=this.ta,f=d,g=e,h=this.Ka.n,i=h.length,j=0;i>j;j++){switch(k=h[j],k.type){case kd:f=k.D,g=k.F,d=k.D,e=k.F;break;case bd:if(K.Ud(d,e,k.D,k.F,c,a,b))return!0;d=k.D,e=k.F;break;case ld:if(K.yw(d,e,k.Gb,k.Xb,k.xe,k.ye,k.D,k.F,.5,a,b,c))return!0;d=k.D,e=k.F;break;case md:if(K.jB(d,e,k.Gb,k.Xb,k.D,k.F,.5,a,b,c))return!0;d=k.D,e=k.F;break;case sd:case ud:for(l=k.type===sd?vd(k,this):wd(k,this,d,e),m=l.length,n=null,o=0;m>o;o++)if(n=l[o],0===o&&K.Ud(d,e,n.x1,n.y1,c,a,b)||K.yw(n.x1,n.y1,n.x2,n.y2,n.pe,n.qe,n.$b,n.ac,.5,a,b,c))return!0;null!==n&&(d=n.$b,e=n.ac);break;default:t.m("Unknown Segment type: "+k.type)}if(k.Ct&&(d!==f||e!==g)&&K.Ud(d,e,f,g,c,a,b))return!0}return!1},t.ka("PathSegment",xd),t.ji(xd),xd.prototype.copy=function(){var a=new xd;return a.ga=this.ga,a.pb=this.pb,a.Bb=this.Bb,void 0!==this.pd&&(a.pd=this.pd),void 0!==this.Ee&&(a.Ee=this.Ee),void 0!==this.xg&&(a.xg=this.xg),void 0!==this.yg&&(a.yg=this.yg),void 0!==this.Bo&&(a.Bo=this.Bo),void 0!==this.Qn&&(a.Qn=this.Qn),a.Th=this.Th,a.$a=this.$a,a},xd.prototype.equalsApprox=xd.prototype.Af=function(a){if(!(a instanceof xd)||this.type!==a.type||this.Ct!==a.Ct)return!1;switch(this.type){case kd:case bd:return K.I(this.D,a.D)&&K.I(this.F,a.F);case ld:return K.I(this.D,a.D)&&K.I(this.F,a.F)&&K.I(this.Gb,a.Gb)&&K.I(this.Xb,a.Xb)&&K.I(this.xe,a.xe)&&K.I(this.ye,a.ye);case md:return K.I(this.D,a.D)&&K.I(this.F,a.F)&&K.I(this.Gb,a.Gb)&&K.I(this.Xb,a.Xb);case sd:return K.I(this.zh,a.zh)&&K.I(this.vi,a.vi)&&K.I(this.Ia,a.Ia)&&K.I(this.Ua,a.Ua)&&K.I(this.radiusX,a.radiusX)&&K.I(this.radiusY,a.radiusY);case ud:return this.jx===a.jx&&this.mx===a.mx&&K.I(this.Ux,a.Ux)&&K.I(this.D,a.D)&&K.I(this.F,a.F)&&K.I(this.radiusX,a.radiusX)&&K.I(this.radiusY,a.radiusY);default:return!1}},xd.prototype.toString=function(a){switch(this.type){case kd:a=void 0===a?"M"+this.D.toString()+" "+this.F.toString():"M"+this.D.toFixed(a)+" "+this.F.toFixed(a);break;case bd:a=void 0===a?"L"+this.D.toString()+" "+this.F.toString():"L"+this.D.toFixed(a)+" "+this.F.toFixed(a);break;case ld:a=void 0===a?"C"+this.Gb.toString()+" "+this.Xb.toString()+" "+this.xe.toString()+" "+this.ye.toString()+" "+this.D.toString()+" "+this.F.toString():"C"+this.Gb.toFixed(a)+" "+this.Xb.toFixed(a)+" "+this.xe.toFixed(a)+" "+this.ye.toFixed(a)+" "+this.D.toFixed(a)+" "+this.F.toFixed(a);break;case md:a=void 0===a?"Q"+this.Gb.toString()+" "+this.Xb.toString()+" "+this.D.toString()+" "+this.F.toString():"Q"+this.Gb.toFixed(a)+" "+this.Xb.toFixed(a)+" "+this.D.toFixed(a)+" "+this.F.toFixed(a);break;case sd:a=void 0===a?"B"+this.zh.toString()+" "+this.vi.toString()+" "+this.Ia.toString()+" "+this.Ua.toString()+" "+this.radiusX:"B"+this.zh.toFixed(a)+" "+this.vi.toFixed(a)+" "+this.Ia.toFixed(a)+" "+this.Ua.toFixed(a)+" "+this.radiusX;break;case ud:a=void 0===a?"A"+this.radiusX.toString()+" "+this.radiusY.toString()+" "+this.Ux.toString()+" "+(this.mx?1:0)+" "+(this.jx?1:0)+" "+this.D.toString()+" "+this.F.toString():"A"+this.radiusX.toFixed(a)+" "+this.radiusY.toFixed(a)+" "+this.Ux.toFixed(a)+" "+(this.mx?1:0)+" "+(this.jx?1:0)+" "+this.D.toFixed(a)+" "+this.F.toFixed(a);break;default:a=this.type.toString()}return a+(this.Th?"z":"")},xd.Move=kd=t.w(xd,"Move",0),xd.Line=bd=t.w(xd,"Line",1),xd.Bezier=ld=t.w(xd,"Bezier",2),xd.QuadraticBezier=md=t.w(xd,"QuadraticBezier",3),xd.Arc=sd=t.w(xd,"Arc",4),xd.SvgArc=ud=t.w(xd,"SvgArc",4),xd.prototype.freeze=function(){return this.tb=!0,this},xd.prototype.Ra=function(){return this.tb=!1,this},xd.prototype.close=xd.prototype.close=function(){return this.Th=!0,this},t.g(xd,"isClosed",xd.prototype.Ct),t.defineProperty(xd,{Ct:"isClosed"},function(){return this.Th},function(a){this.Th!==a&&(this.Th=a,this.$a=!0)}),t.g(xd,"type",xd.prototype.type),t.defineProperty(xd,{type:"type"},function(){return this.ga},function(a){e&&t.Fa(a,xd,xd,"type"),t.J(this,a),this.ga=a,this.$a=!0}),t.g(xd,"endX",xd.prototype.D),t.defineProperty(xd,{D:"endX"},function(){return this.pb},function(a){e&&t.q(a,xd,"endX"),t.J(this,a),this.pb=a,this.$a=!0}),t.g(xd,"endY",xd.prototype.F),t.defineProperty(xd,{F:"endY"},function(){return this.Bb},function(a){e&&t.q(a,xd,"endY"),t.J(this,a),this.Bb=a,this.$a=!0}),t.defineProperty(xd,{Gb:"point1X"},function(){return this.pd},function(a){e&&t.q(a,xd,"point1X"),t.J(this,a),this.pd=a,this.$a=!0}),t.defineProperty(xd,{Xb:"point1Y"},function(){return this.Ee},function(a){e&&t.q(a,xd,"point1Y"),t.J(this,a),this.Ee=a,this.$a=!0}),t.defineProperty(xd,{xe:"point2X"},function(){return this.xg},function(a){e&&t.q(a,xd,"point2X"),t.J(this,a),this.xg=a,this.$a=!0}),t.defineProperty(xd,{ye:"point2Y"},function(){return this.yg},function(a){e&&t.q(a,xd,"point2Y"),t.J(this,a),this.yg=a,this.$a=!0}),t.defineProperty(xd,{Ia:"centerX"},function(){return this.pd},function(a){e&&t.q(a,xd,"centerX"),t.J(this,a),this.pd=a,this.$a=!0}),t.defineProperty(xd,{Ua:"centerY"},function(){return this.Ee},function(a){e&&t.q(a,xd,"centerY"),t.J(this,a),this.Ee=a,this.$a=!0}),t.defineProperty(xd,{radiusX:"radiusX"},function(){return this.xg},function(a){e&&t.q(a,xd,"radiusX"),0>a&&t.ha(a,">= zero",xd,"radiusX"),t.J(this,a),this.xg=a,this.$a=!0}),t.defineProperty(xd,{radiusY:"radiusY"},function(){return this.yg},function(a){e&&t.q(a,xd,"radiusY"),0>a&&t.ha(a,">= zero",xd,"radiusY"),t.J(this,a),this.yg=a,this.$a=!0}),t.defineProperty(xd,{zh:"startAngle"},function(){return this.pb},function(a){this.pb!==a&&(t.J(this,a),e&&t.q(a,xd,"startAngle"),a%=360,0>a&&(a+=360),this.pb=a,this.$a=!0)}),t.defineProperty(xd,{vi:"sweepAngle"},function(){return this.Bb},function(a){e&&t.q(a,xd,"sweepAngle"),t.J(this,a),a>360&&(a=360),-360>a&&(a=-360),this.Bb=a,this.$a=!0}),t.defineProperty(xd,{jx:"isClockwiseArc"},function(){return this.Qn},function(a){t.J(this,a),this.Qn=a,this.$a=!0}),t.defineProperty(xd,{mx:"isLargeArc"},function(){return this.Bo},function(a){t.J(this,a),this.Bo=a,this.$a=!0}),t.defineProperty(xd,{Ux:"xAxisRotation"},function(){return this.pd},function(a){e&&t.q(a,xd,"xAxisRotation"),a%=360,0>a&&(a+=360),t.J(this,a),this.pd=a,this.$a=!0}),t.ka("InputEvent",Ad),Ad.prototype.copy=function(){var a=new Ad;return a.W=this.W,a.Tz.assign(this.Yd),a.Zy.assign(this.da),a.Av=this.Av,a.Hu=this.Hu,a.ov=this.ov,a.Wu=this.Wu,a.lw=this.lw,a.Ju=this.Ju,a.Tu=this.Tu,a.dv=this.dv,a.Dj=this.Dj,a.ar=this.ar,a.jw=this.jw,a.hw=this.hw,a.zg=this.zg,a},Ad.prototype.toString=function(){var a="^";return this.fd&&(a+="M:"+this.fd),this.button&&(a+="B:"+this.button),this.key&&(a+="K:"+this.key),this.Ge&&(a+="C:"+this.Ge),this.mk&&(a+="D:"+this.mk),this.Ke&&(a+="h"),this.bubbles&&(a+="b"),null!==this.da&&(a+="@"+this.da.toString()),a},t.g(Ad,"diagram",Ad.prototype.h),t.defineProperty(Ad,{h:"diagram"},function(){return this.W},function(a){this.W=a}),t.g(Ad,"viewPoint",Ad.prototype.Yd),t.defineProperty(Ad,{Yd:"viewPoint"},function(){return this.Tz},function(a){t.l(a,E,Ad,"viewPoint"),this.Tz.assign(a)}),t.g(Ad,"documentPoint",Ad.prototype.da),t.defineProperty(Ad,{da:"documentPoint"},function(){return this.Zy},function(a){t.l(a,E,Ad,"documentPoint"),this.Zy.assign(a)}),t.g(Ad,"modifiers",Ad.prototype.fd),t.defineProperty(Ad,{fd:"modifiers"},function(){return this.Av},function(a){this.Av=a}),t.g(Ad,"button",Ad.prototype.button),t.defineProperty(Ad,{button:"button"},function(){return this.Hu},function(a){this.Hu=a}),t.g(Ad,"key",Ad.prototype.key),t.defineProperty(Ad,{key:"key"},function(){return this.ov},function(a){this.ov=a}),t.g(Ad,"down",Ad.prototype.ok),t.defineProperty(Ad,{ok:"down"},function(){return this.Wu
},function(a){this.Wu=a}),t.g(Ad,"up",Ad.prototype.Aj),t.defineProperty(Ad,{Aj:"up"},function(){return this.lw},function(a){this.lw=a}),t.g(Ad,"clickCount",Ad.prototype.Ge),t.defineProperty(Ad,{Ge:"clickCount"},function(){return this.Ju},function(a){this.Ju=a}),t.g(Ad,"delta",Ad.prototype.mk),t.defineProperty(Ad,{mk:"delta"},function(){return this.Tu},function(a){this.Tu=a}),t.g(Ad,"handled",Ad.prototype.Ke),t.defineProperty(Ad,{Ke:"handled"},function(){return this.dv},function(a){this.dv=a}),t.g(Ad,"bubbles",Ad.prototype.bubbles),t.defineProperty(Ad,{bubbles:"bubbles"},function(){return this.Dj},function(a){this.Dj=a}),t.g(Ad,"event",Ad.prototype.event),t.defineProperty(Ad,{event:"event"},function(){return this.ar},function(a){this.ar=a}),t.A(Ad,{px:"isTouchEvent"},function(){var a=window.TouchEvent;return a&&this.event instanceof a}),t.g(Ad,"timestamp",Ad.prototype.timestamp),t.defineProperty(Ad,{timestamp:"timestamp"},function(){return this.jw},function(a){this.jw=a}),t.g(Ad,"targetDiagram",Ad.prototype.Ah),t.defineProperty(Ad,{Ah:"targetDiagram"},function(){return this.hw},function(a){this.hw=a}),t.g(Ad,"targetObject",Ad.prototype.me),t.defineProperty(Ad,{me:"targetObject"},function(){return this.zg},function(a){this.zg=a}),t.g(Ad,"control",Ad.prototype.control),t.defineProperty(Ad,{control:"control"},function(){return 0!==(1&this.fd)},function(a){this.fd=a?1|this.fd:-2&this.fd}),t.g(Ad,"shift",Ad.prototype.shift),t.defineProperty(Ad,{shift:"shift"},function(){return 0!==(4&this.fd)},function(a){this.fd=a?4|this.fd:-5&this.fd}),t.g(Ad,"alt",Ad.prototype.alt),t.defineProperty(Ad,{alt:"alt"},function(){return 0!==(2&this.fd)},function(a){this.fd=a?2|this.fd:-3&this.fd}),t.g(Ad,"meta",Ad.prototype.Qp),t.defineProperty(Ad,{Qp:"meta"},function(){return 0!==(8&this.fd)},function(a){this.fd=a?8|this.fd:-9&this.fd}),t.g(Ad,"left",Ad.prototype.left),t.defineProperty(Ad,{left:"left"},function(){return 0===this.button},function(a){this.button=a?0:2}),t.g(Ad,"middle",Ad.prototype.SJ),t.defineProperty(Ad,{SJ:"middle"},function(){return 1===this.button},function(a){this.button=a?1:0}),t.g(Ad,"right",Ad.prototype.right),t.defineProperty(Ad,{right:"right"},function(){return 2===this.button},function(a){this.button=a?2:0}),t.ka("DiagramEvent",Bd),Bd.prototype.copy=function(){var a=new Bd;return a.W=this.W,a.ec=this.ec,a.dw=this.dw,a.Ov=this.Ov,a.Iu=this.Iu,a},Bd.prototype.toString=function(){var a="*"+this.name;return this.cancel&&(a+="x"),null!==this.Rx&&(a+=":"+this.Rx.toString()),null!==this.Cx&&(a+="("+this.Cx.toString()+")"),a},t.g(Bd,"diagram",Bd.prototype.h),t.defineProperty(Bd,{h:"diagram"},function(){return this.W},function(a){this.W=a}),t.g(Bd,"name",Bd.prototype.name),t.defineProperty(Bd,{name:"name"},function(){return this.ec},function(a){this.ec=a}),t.g(Bd,"subject",Bd.prototype.Rx),t.defineProperty(Bd,{Rx:"subject"},function(){return this.dw},function(a){this.dw=a}),t.g(Bd,"parameter",Bd.prototype.Cx),t.defineProperty(Bd,{Cx:"parameter"},function(){return this.Ov},function(a){this.Ov=a}),t.g(Bd,"cancel",Bd.prototype.cancel),t.defineProperty(Bd,{cancel:"cancel"},function(){return this.Iu},function(a){this.Iu=a}),t.ka("ChangedEvent",Cd),Cd.Transaction=Kd=t.w(Cd,"Transaction",-1),Cd.Property=Ld=t.w(Cd,"Property",0),Cd.Insert=Md=t.w(Cd,"Insert",1),Cd.Remove=Nd=t.w(Cd,"Remove",2),Cd.prototype.clear=Cd.prototype.clear=function(){this.Hq=Ld,this.Bm=this.zv="",this.Dv=this.Ev=this.Kv=this.Jo=this.Jv=this.W=this.re=null},Cd.prototype.copy=function(){var b,a=new Cd;return a.re=this.re,a.W=this.W,a.Hq=this.Hq,a.zv=this.zv,a.Bm=this.Bm,a.Jv=this.Jv,b=this.Jo,a.Jo=t.xb(b)&&"function"==typeof b.ba?b.ba():b,b=this.Kv,a.Kv=t.xb(b)&&"function"==typeof b.ba?b.ba():b,b=this.Ev,a.Ev=t.xb(b)&&"function"==typeof b.ba?b.ba():b,b=this.Dv,a.Dv=t.xb(b)&&"function"==typeof b.ba?b.ba():b,a},Cd.prototype.toString=function(){var a="",a=this.Bd===Kd?a+"* ":this.Bd===Ld?a+(null!==this.ea?"!m":"!d"):a+((null!==this.ea?"!m":"!d")+this.Bd);return this.propertyName&&"string"==typeof this.propertyName&&(a+=" "+this.propertyName),this.If&&this.If!==this.propertyName&&(a+=" "+this.If),a+=": ",this.Bd===Kd?null!==this.oldValue&&(a+=" "+this.oldValue):(null!==this.object&&(a+=na(this.object)),null!==this.oldValue&&(a+="  old: "+na(this.oldValue)),null!==this.fg&&(a+=" "+this.fg),null!==this.newValue&&(a+="  new: "+na(this.newValue)),null!==this.dg&&(a+=" "+this.dg)),a},Cd.prototype.getValue=Cd.prototype.Da=function(a){return a?this.oldValue:this.newValue},Cd.prototype.getParam=function(a){return a?this.fg:this.dg},Cd.prototype.canUndo=Cd.prototype.canUndo=function(){return null!==this.ea||null!==this.h?!0:!1},Cd.prototype.undo=Cd.prototype.undo=function(){this.canUndo()&&(null!==this.ea?this.ea.changeState(this,!0):null!==this.h&&this.h.changeState(this,!0))},Cd.prototype.canRedo=Cd.prototype.canRedo=function(){return null!==this.ea||null!==this.h?!0:!1},Cd.prototype.redo=Cd.prototype.redo=function(){this.canRedo()&&(null!==this.ea?this.ea.changeState(this,!1):null!==this.h&&this.h.changeState(this,!1))},t.g(Cd,"model",Cd.prototype.ea),t.defineProperty(Cd,{ea:"model"},function(){return this.re},function(a){this.re=a}),t.g(Cd,"diagram",Cd.prototype.h),t.defineProperty(Cd,{h:"diagram"},function(){return this.W},function(a){this.W=a}),t.g(Cd,"change",Cd.prototype.Bd),t.defineProperty(Cd,{Bd:"change"},function(){return this.Hq},function(a){e&&t.Fa(a,Cd,Cd,"change"),this.Hq=a}),t.g(Cd,"modelChange",Cd.prototype.If),t.defineProperty(Cd,{If:"modelChange"},function(){return this.zv},function(a){e&&t.i(a,"string",Cd,"modelChange"),this.zv=a}),t.g(Cd,"propertyName",Cd.prototype.propertyName),t.defineProperty(Cd,{propertyName:"propertyName"},function(){return this.Bm},function(a){e&&"string"!=typeof a&&t.l(a,Function,Cd,"propertyName"),this.Bm=a}),t.g(Cd,"isTransactionFinished",Cd.prototype.DJ),t.A(Cd,{DJ:"isTransactionFinished"},function(){return this.Hq===Kd&&("CommittedTransaction"===this.Bm||"FinishedUndo"===this.Bm||"FinishedRedo"===this.Bm)}),t.g(Cd,"object",Cd.prototype.object),t.defineProperty(Cd,{object:"object"},function(){return this.Jv},function(a){this.Jv=a}),t.g(Cd,"oldValue",Cd.prototype.oldValue),t.defineProperty(Cd,{oldValue:"oldValue"},function(){return this.Jo},function(a){this.Jo=a}),t.g(Cd,"oldParam",Cd.prototype.fg),t.defineProperty(Cd,{fg:"oldParam"},function(){return this.Kv},function(a){this.Kv=a}),t.g(Cd,"newValue",Cd.prototype.newValue),t.defineProperty(Cd,{newValue:"newValue"},function(){return this.Ev},function(a){this.Ev=a}),t.g(Cd,"newParam",Cd.prototype.dg),t.defineProperty(Cd,{dg:"newParam"},function(){return this.Dv},function(a){this.Dv=a}),t.ka("Model",J),J.prototype.clear=J.prototype.clear=function(){this.je&&t.on(this.Te,"nodeDataArray",this,!0),this.Te=[],this.Gc.clear(),this.lg.clear(),this.ma.clear()},aa=J.prototype,aa.qu=function(){var a="";return""!==this.name&&(a+=',\n  "name": '+this.quote(this.name)),""!==this.bn&&(a+=',\n  "dataFormat": '+this.quote(this.bn)),this.hb&&(a+=',\n  "isReadOnly": '+this.hb),"key"!==this.vj&&"string"==typeof this.vj&&(a+=',\n  "nodeKeyProperty": '+this.quote(this.vj)),this.Jw&&(a+=',\n  "copiesArrays": true'),this.Iw&&(a+=',\n  "copiesArrayObjects": true'),"category"!==this.El&&"string"==typeof this.El&&(a+=',\n  "nodeCategoryProperty": '+this.quote(this.El)),a},aa.TB=function(){var d,a="",b=this.VA,c=!1;for(d in b)if(!Zd(d,b[d])){c=!0;break}return c&&(a=',\n  "modelData": '+$d(this,b)),a+',\n  "nodeDataArray": '+ae(this,this.Qg,!0)},aa.Xt=function(a){a.name&&(this.name=a.name),a.dataFormat&&(this.bn=a.dataFormat),a.isReadOnly&&(this.hb=a.isReadOnly),a.nodeKeyProperty&&(this.vj=a.nodeKeyProperty),a.copiesArrays&&(this.Jw=a.copiesArrays),a.copiesArrayObjects&&(this.Iw=a.copiesArrayObjects),a.nodeCategoryProperty&&(this.El=a.nodeCategoryProperty)},aa.kB=function(a){var b=a.modelData;b&&(this.$t(b),this.VA=b),(a=a.nodeDataArray)&&(this.$t(a),this.Qg=a)},aa.toString=function(a){var b,d,c,e;if(void 0===a&&(a=0),a>1)return this.IB();if(b=(""!==this.name?this.name:"")+" Model",a>0)for(b+="\n node data:",a=this.Qg,c=t.ub(a),d=0;c>d;d++)e=t.rb(a,d),b+=" "+this.Lb(e)+":"+na(e);return b},J.prototype.toJson=J.prototype.toJSON=J.prototype.IB=function(a){return void 0===a&&(a=this.constructor===J?"yy.Model":this.constructor===T?"yy.GraphLinksModel":this.constructor===be?"yy.TreeModel":t.Hg(this)),'{ "class": '+this.quote(a)+this.qu()+this.TB()+"}"},J.fromJson=J.fromJSON=function(a,b){var c,f,g,h;if(void 0===b&&(b=null),b&&t.l(b,J,J,"fromJson:model"),c=null,"string"==typeof a)if(window&&window.JSON&&window.JSON.parse)try{c=window.JSON.parse(a)}catch(d){e&&t.trace("JSON.parse error: "+d.toString())}else t.trace("WARNING: no JSON.parse available");else"object"==typeof a?c=a:t.m("Unable to construct a Model from: "+a);if(null===b){if(f=null,g=c["class"],"string"==typeof g)try{h=null,0===g.indexOf("yy.")?(g=g.substr(3),h=ca[g]):(h=ca[g])||(h=window[g]),"function"==typeof h&&(f=new h)}catch(i){}null===f||f instanceof J?b=f:t.m("Unable to construct a Model of declared class: "+c["class"])}return null===b&&(b=new T),b.Xt(c),b.kB(c),b},J.prototype.replaceJsonObjects=J.prototype.$t=function(a){var b,c,d,e,f,g;if(t.isArray(a))for(b=t.ub(a),c=0;b>c;c++)d=t.rb(a,c),t.xb(d)&&t.oE(a,c,this.$t(d));else if(t.xb(a)){for(c in a)if(d=a[c],t.xb(d)&&(d=this.$t(d),a[c]=d,"points"===c&&Array.isArray(d))){for(e=0===d.length%2,f=0;f<d.length;f++)if("number"!=typeof d[f]){e=!1;break}if(e){for(e=new H(E),f=0;f<d.length/2;f++)g=new E(d[2*f],d[2*f+1]),e.add(g);e.freeze(),a[c]=e}}if("object"==typeof a){if(c=a,d=a["class"],"NaN"===d)c=0/0;else if("Date"===d)c=new Date(a.value);else if("yy.Point"===d)c=new E(ce(a.x),ce(a.y));else if("yy.Size"===d)c=new ra(ce(a.width),ce(a.height));else if("yy.Rect"===d)c=new F(ce(a.x),ce(a.y),ce(a.width),ce(a.height));else if("yy.Margin"===d)c=new wb(ce(a.top),ce(a.right),ce(a.bottom),ce(a.left));else if("yy.Spot"===d)c="string"==typeof a["enum"]?Pb(a["enum"]):new L(ce(a.x),ce(a.y),ce(a.offsetX),ce(a.offsetY));else if("yy.Brush"===d){if(c=new qa,c.type=t.en(qa,a.type),a.start instanceof L&&(c.start=a.start),a.end instanceof L&&(c.end=a.end),"number"==typeof a.startRadius&&(c.jq=ce(a.startRadius)),"number"==typeof a.endRadius&&(c.op=ce(a.endRadius)),a=a.colorStops)for(b in a)c.addColorStop(parseFloat(b),a[b])}else"yy.Geometry"===d&&(c="string"==typeof a.path?ed(a.path):new Pc,c.type=t.en(Pc,a.type),"number"==typeof a.startX&&(c.sa=ce(a.startX)),"number"==typeof a.startY&&(c.ta=ce(a.startY)),"number"==typeof a.endX&&(c.D=ce(a.endX)),"number"==typeof a.endY&&(c.F=ce(a.endY)),a.spot1 instanceof L&&(c.G=a.spot1),a.spot2 instanceof L&&(c.H=a.spot2));a=c}}return a},J.prototype.quote=function(a){var b,c,d,e;for(b="",c=a.length,d=0;c>d;d++)e=a[d],b='"'===e||"\\"===e?b+("\\"+e):"\b"===e?b+"\\b":"\f"===e?b+"\\f":"\n"===e?b+"\\n":"\r"===e?b+"\\r":"  "===e?b+"\\t":b+e;return'"'+b+'"'},J.prototype.writeJsonValue=J.prototype.ru=function(a){return void 0===a?"undefined":null===a?"null":!0===a?"true":!1===a?"false":"string"==typeof a?this.quote(a):"number"==typeof a?1/0===a?"9e9999":-1/0===a?"-9e9999":isNaN(a)?'{"class":"NaN"}':a.toString():a instanceof Date?'{"class":"Date", "value":"'+a.toJSON()+'"}':a instanceof Number?this.ru(a.valueOf()):t.isArray(a)?ae(this,a):t.xb(a)?$d(this,a):"function"==typeof a?"null":a.toString()},t.g(J,"name",J.prototype.name),t.defineProperty(J,{name:"name"},function(){return this.ec},function(a){var b=this.ec;b!==a&&(t.i(a,"string",J,"name"),this.ec=a,this.j("name",b,a))}),t.g(J,"dataFormat",J.prototype.bn),t.defineProperty(J,{bn:"dataFormat"},function(){return this.Ty},function(a){var b=this.Ty;b!==a&&(t.i(a,"string",J,"dataFormat"),this.Ty=a,this.j("dataFormat",b,a))}),t.g(J,"knockoutJS",J.prototype.je),t.defineProperty(J,{je:"knockoutJS"},function(){return this.aD},function(a){this.aD=a,t.Ec||(t.Ec="object"==typeof window.ko&&"function"==typeof window.ko.isObservable?window.ko.isObservable:null,a&&null===t.Ec&&t.trace("No value for ko.isObservable: is KnockoutJS library not loaded?"))}),t.g(J,"isReadOnly",J.prototype.hb),t.defineProperty(J,{hb:"isReadOnly"},function(){return this.Wk},function(a){var b=this.Wk;b!==a&&(t.i(a,"boolean",J,"isReadOnly"),this.Wk=a,this.j("isReadOnly",b,a))}),t.g(J,"modelData",J.prototype.VA),t.defineProperty(J,{VA:"modelData"},function(){return this.yz},function(a){var b=this.yz;b!==a&&(t.i(a,"object",J,"modelData"),this.yz=a,this.j("modelData",b,a))}),J.prototype.addChangedListener=J.prototype.Zz=function(a){t.i(a,"function",J,"addChangedListener:listener"),null===this.Qj&&(this.Qj=new H("function")),this.Qj.add(a)},J.prototype.removeChangedListener=J.prototype.nB=function(a){t.i(a,"function",J,"removeChangedListener:listener"),null!==this.Qj&&(this.Qj.remove(a),0===this.Qj.count&&(this.Qj=null))},J.prototype.zw=function(a){var b,c,d,e;if(this.ab||this.ma.sF(a),null!==this.Qj)if(b=this.Qj,c=b.length,1===c)b=b.wa(0),b(a);else if(0!==c)for(d=b.Pe(),e=0;c>e;e++)b=d[e],b(a)},J.prototype.raiseChangedEvent=J.prototype.Oc=function(a,b,c,d,e,f,g){Be(this,"",a,b,c,d,e,f,g)},J.prototype.raiseChanged=J.prototype.j=function(a,b,c,d,e){Be(this,"",Ld,a,this,b,c,d,e)},J.prototype.raiseDataChanged=J.prototype.Ex=function(a,b,c,d,e,f){Be(this,"",Ld,b,a,c,d,e,f)},t.g(J,"undoManager",J.prototype.ma),t.defineProperty(J,{ma:"undoManager"},function(){return this.Sz},function(a){var b=this.Sz;b!==a&&(t.l(a,Od,J,"undoManager"),null!==b&&b.lK(this),this.Sz=a,null!==a&&a.$H(this))}),t.g(J,"skipsUndoManager",J.prototype.ab),t.defineProperty(J,{ab:"skipsUndoManager"},function(){return this.Yi},function(a){t.i(a,"boolean",J,"skipsUndoManager"),this.Yi=a}),J.prototype.changeState=function(a,b){if(null!==a&&a.ea===this)if(a.Bd===Ld){var c=a.object,d=a.propertyName,e=a.Da(b);t.Wa(c,d,e)}else a.Bd===Md?"nodeDataArray"===a.If?(c=a.newValue,t.xb(c)&&(d=this.Lb(c),void 0!==d&&(b?(this.je&&t.Gf(c,this,!0),t.gj(this.Te,a.dg),this.Gc.remove(d)):(this.je&&t.Gf(c,this,!1),t.fj(this.Te,a.dg,c),this.Gc.add(d,c))))):""===a.If?(c=a.object,!t.isArray(c)&&a.propertyName&&(c=t.nb(a.object,a.propertyName)),t.isArray(c)&&(d=a.newValue,e=a.dg,b?t.gj(c,e):t.fj(c,e,d))):t.m("unknown ChangedEvent.Insert object: "+a.toString()):a.Bd===Nd?"nodeDataArray"===a.If?(c=a.oldValue,t.xb(c)&&(d=this.Lb(c),void 0!==d&&(b?(this.je&&t.Gf(c,this,!1),t.fj(this.Te,a.fg,c),this.Gc.add(d,c)):(this.je&&t.Gf(c,this,!0),t.gj(this.Te,a.fg),this.Gc.remove(d))))):""===a.If?(c=a.object,!t.isArray(c)&&a.propertyName&&(c=t.nb(a.object,a.propertyName)),t.isArray(c)&&(d=a.oldValue,e=a.fg,b?t.fj(c,e,d):t.gj(c,e))):t.m("unknown ChangedEvent.Remove object: "+a.toString()):a.Bd!==Kd&&t.m("unknown ChangedEvent: "+a.toString())},J.prototype.startTransaction=J.prototype.yc=function(a){return this.ma.yc(a)},J.prototype.commitTransaction=J.prototype.Ie=function(a){return this.ma.Ie(a)},J.prototype.rollbackTransaction=J.prototype.bq=function(){return this.ma.bq()},J.prototype.updateTargetBindings=J.prototype.Wb=function(a,b){void 0===b&&(b=""),Be(this,"SourceChanged",Kd,b,a,null,null)},t.g(J,"nodeKeyProperty",J.prototype.vj),t.defineProperty(J,{vj:"nodeKeyProperty"},function(){return this.wm},function(a){var b=this.wm;b!==a&&(Ce(a,J,"nodeKeyProperty"),0<this.Gc.count&&t.m("Cannot set Model.nodeKeyProperty when there is existing node data"),this.wm=a,this.j("nodeKeyProperty",b,a))}),J.prototype.getKeyForNodeData=J.prototype.Lb=function(a){if(null!==a){var b=this.wm;if(""!==b&&(b=t.nb(a,b),void 0!==b)){if(De(b))return b;t.m("Key value for node data "+a+" is not a number or a string: "+b)}}},J.prototype.setKeyForNodeData=J.prototype.zB=function(a,b){var c,d;null===b&&(b=void 0),void 0===b||De(b)||t.jc(b,"number or string",J,"setKeyForNodeData:key"),null!==a&&(c=this.wm,""!==c&&(this.ve(a)?(d=t.nb(a,c),d!==b&&null===this.Bf(b)&&(t.Wa(a,c,b),this.Gc.remove(d),this.Gc.add(b,a),Be(this,"nodeKey",Ld,c,a,d,b),"string"==typeof c&&this.Wb(a,c),this.Zt(d,b))):t.Wa(a,c,b)))},t.g(J,"makeUniqueKeyFunction",J.prototype.OJ),t.defineProperty(J,{OJ:"makeUniqueKeyFunction"},function(){return this.sv},function(a){var b=this.sv;b!==a&&(null!==a&&t.i(a,"function",J,"makeUniqueKeyFunction"),this.sv=a,this.j("makeUniqueKeyFunction",b,a))}),J.prototype.containsNodeData=J.prototype.ve=function(a){return a=this.Lb(a),void 0===a?!1:this.Gc.contains(a)},J.prototype.findNodeDataForKey=J.prototype.Bf=function(a){return null===a&&t.m("Model.findNodeDataForKey:key must not be null"),void 0!==a&&De(a)?this.Gc.Da(a):null},t.g(J,"nodeDataArray",J.prototype.Qg),t.defineProperty(J,{Qg:"nodeDataArray"},function(){return this.Te},function(a){var c,d,e,f,g,b=this.Te;if(b!==a){for(t.ft(a,J,"nodeDataArray"),this.je&&t.Ec&&(null!==b&&t.on(b,"nodeDataArray",this,!0),a=t.on(a,"nodeDataArray",this,!1)),this.Gc.clear(),this.OB(),c=t.ub(a),d=0;c>d;d++){if(e=t.rb(a,d),!t.xb(e))return t.m("Model.nodeDataArray must only contain Objects, not: "+e),void 0;t.xt(e)}for(this.Te=a,f=new H(Object),d=0;c>d;d++)e=t.rb(a,d),g=this.Lb(e),void 0===g?f.add(e):null!==this.Gc.Da(g)?f.add(e):this.Gc.add(g,e);for(d=f.k;d.next();)e=d.value,this.WF(e),f=this.Lb(e),this.Gc.add(f,e);for(Be(this,"nodeDataArray",Ld,"nodeDataArray",this,b,a),d=0;c>d;d++)e=t.rb(a,d),this.aq(e),this.$p(e);this.xE(),t.AJ(a)||(this.hb=!0)}}),J.prototype.makeNodeDataKeyUnique=J.prototype.WF=function(a){var b,c,d;if(null!==a&&(b=this.wm,""!==b&&(c=this.Lb(a),void 0===c||this.Gc.contains(c)))){if(d=this.sv,null!==d&&(c=d(this,a),void 0!==c&&null!==c&&!this.Gc.contains(c)))return t.Wa(a,b,c),void 0;if("string"==typeof c){for(d=2;this.Gc.contains(c+d);)d++;t.Wa(a,b,c+d)}else if(void 0===c||"number"==typeof c){for(d=-this.Gc.count-1;this.Gc.contains(d);)d--;t.Wa(a,b,d)}else t.m("Model.getKeyForNodeData returned something other than a string or a number: "+c)}},J.prototype.addNodeData=J.prototype.Pm=function(a){if(null!==a){this.je&&t.Gf(a,this,!1),t.xt(a);var b=this.Lb(a);(void 0===b||this.Gc.Da(b)!==a)&&(this.WF(a),b=this.Lb(a),this.Gc.add(b,a),b=t.ub(this.Te),t.fj(this.Te,b,a),Be(this,"nodeDataArray",Md,"nodeDataArray",this,null,a,null,b),this.aq(a),this.$p(a))}},J.prototype.addNodeDataCollection=function(a){if(t.isArray(a))for(var b=t.ub(a),c=0;b>c;c++)this.Pm(t.rb(a,c));else for(a=a.k;a.next();)this.Pm(a.value)},J.prototype.removeNodeData=J.prototype.Fx=function(a){if(null!==a){var b=this.Lb(a);void 0!==b&&this.Gc.contains(b)&&(this.je&&t.Gf(a,this,!0),this.Gc.remove(b),b=t.fA(this.Te,a),0>b||(t.gj(this.Te,b),Be(this,"nodeDataArray",Nd,"nodeDataArray",this,a,null,b,null),this.ou(a)))}},J.prototype.removeNodeDataCollection=function(a){if(t.isArray(a))for(var b=t.ub(a),c=0;b>c;c++)this.Fx(t.rb(a,c));else for(a=a.k;a.next();)this.Fx(a.value)},aa=J.prototype,aa.Zt=function(a,b){var c=Ee(this,a);c instanceof I&&this.lg.add(b,c)},aa.OB=function(){},aa.aq=function(){},aa.$p=function(){},aa.ou=function(){},J.prototype.clearUnresolvedReferences=J.prototype.xE=function(a){void 0===a?this.lg.clear():this.lg.remove(a)},t.g(J,"copyNodeDataFunction",J.prototype.DI),t.defineProperty(J,{DI:"copyNodeDataFunction"},function(){return this.Nu},function(a){var b=this.Nu;b!==a&&(null!==a&&t.i(a,"function",J,"copyNodeDataFunction"),this.Nu=a,this.j("copyNodeDataFunction",b,a))}),t.g(J,"copiesArrays",J.prototype.Jw),t.defineProperty(J,{Jw:"copiesArrays"},function(){return this.My},function(a){var b=this.My;b!==a&&(null!==a&&t.i(a,"boolean",J,"copiesArrays"),this.My=a,this.j("copiesArrays",b,a))}),t.g(J,"copiesArrayObjects",J.prototype.Iw),t.defineProperty(J,{Iw:"copiesArrayObjects"},function(){return this.Ly},function(a){var b=this.Ly;b!==a&&(null!==a&&t.i(a,"boolean",J,"copiesArrayObjects"),this.Ly=a,this.j("copiesArrayObjects",b,a))}),J.prototype.copyNodeData=function(a){var b,c,d,f,g,h,j,i,k;if(null===a)return null;if(b=null,b=this.Nu,null!==b)b=b(a,this);else{b=new a.constructor;for(c in a){if(d=t.nb(a,c),(!e||!He(a,c,d))&&this.Jw&&Array.isArray(d)){for(f=[],g=0;g<d.length;g++){if(h=d[g],this.Iw&&t.xb(h)){i=new h.constructor;for(j in h)k=t.nb(h,j),e&&He(h,j,k),t.Wa(i,j,k);h=i}f.push(h)}d=f}t.Wa(b,c,d)}this.je&&t.Gf(b,this,!1)}return b&&t.Fc(b),b},J.prototype.setDataProperty=function(a,b,c){if(e&&(t.i(a,"object",J,"setDataProperty:data"),t.i(b,"string",J,"setDataProperty:propname"),""===b&&t.m("Model.setDataProperty: property name must not be an empty string when setting "+a+" to "+c)),this.ve(a)){if(b===this.vj)this.zB(a,c);else if(b===this.El)return this.Jx(a,c),void 0}else!t.nq&&a instanceof V&&(t.nq=!0,t.trace('Model.setDataProperty is modifying a GraphObject, "'+a.toString()+'"'),t.trace("  Is that really your intent?"));var d=t.nb(a,b);d!==c&&(t.Wa(a,b,c),this.Ex(a,b,d,c))},J.prototype.addArrayItem=function(a,b){this.wJ(a,-1,b)},J.prototype.insertArrayItem=J.prototype.wJ=function(a,b,c){e&&(t.ft(a,J,"insertArrayItem:arr"),t.q(b,J,"insertArrayItem:idx")),a===this.Te&&t.m("Model.insertArrayItem or Model.addArrayItem should not be called on the Model.nodeDataArray"),0>b&&(b=t.ub(a)),t.fj(a,b,c),Be(this,"",Md,"",a,null,c,null,b)},J.prototype.removeArrayItem=function(a,b){void 0===b&&(b=-1),e&&(t.ft(a,J,"removeArrayItem:arr"),t.q(b,J,"removeArrayItem:idx")),a===this.Te&&t.m("Model.removeArrayItem should not be called on the Model.nodeDataArray"),-1===b&&(b=t.ub(a)-1);var c=t.rb(a,b);t.gj(a,b),Be(this,"",Nd,"",a,c,null,b,null)},t.g(J,"nodeCategoryProperty",J.prototype.El),t.defineProperty(J,{El:"nodeCategoryProperty"},function(){return this.Xr},function(a){var b=this.Xr;b!==a&&(Ce(a,J,"nodeCategoryProperty"),this.Xr=a,this.j("nodeCategoryProperty",b,a))}),J.prototype.getCategoryForNodeData=J.prototype.getCategoryForNodeData=function(a){if(null===a)return"";var b=this.Xr;return""===b?"":(b=t.nb(a,b),void 0===b?"":"string"==typeof b?b:(t.m("getCategoryForNodeData found a non-string category for "+a+": "+b),""))},J.prototype.setCategoryForNodeData=J.prototype.Jx=function(a,b){var c,d;t.i(b,"string",J,"setCategoryForNodeData:cat"),null!==a&&(c=this.Xr,""!==c&&(this.ve(a)?(d=t.nb(a,c),void 0===d&&(d=""),d!==b&&(t.Wa(a,c,b),Be(this,"nodeCategory",Ld,c,a,d,b))):t.Wa(a,c,b)))},t.ka("GraphLinksModel",T),t.Qa(T,J),T.prototype.clear=T.prototype.clear=function(){J.prototype.clear.call(this),this.je&&t.on(this.ih,"linkDataArray",this,!0),this.ih=[],this.qm.clear()},aa=T.prototype,aa.toString=function(a){var b,d,c,e;if(void 0===a&&(a=0),a>=2)return this.IB();if(b=(""!==this.name?this.name:"")+" GraphLinksModel",a>0){for(b+="\n node data:",a=this.Qg,c=t.ub(a),d=0;c>d;d++)e=t.rb(a,d),b+=" "+this.Lb(e)+":"+na(e);for(b+="\n link data:",a=this.uj,c=t.ub(a),d=0;c>d;d++)e=t.rb(a,d),b+=" "+this.vl(e)+"-->"+this.zl(e)}return b},aa.qu=function(){var a=J.prototype.qu.call(this),b="";return"category"!==this.Jp&&"string"==typeof this.Jp&&(b+=',\n  "linkCategoryProperty": '+this.quote(this.Jp)),"from"!==this.qn&&"string"==typeof this.qn&&(b+=',\n  "linkFromKeyProperty": '+this.quote(this.qn)),"to"!==this.rn&&"string"==typeof this.rn&&(b+=',\n  "linkToKeyProperty": '+this.quote(this.rn)),""!==this.Kp&&"string"==typeof this.Kp&&(b+=',\n  "linkFromPortIdProperty": '+this.quote(this.Kp)),""!==this.Op&&"string"==typeof this.Op&&(b+=',\n  "linkToPortIdProperty": '+this.quote(this.Op)),""!==this.St&&"string"==typeof this.St&&(b+=',\n  "nodeIsLinkLabelProperty": '+this.quote(this.St)),""!==this.Lp&&"string"==typeof this.Lp&&(b+=',\n  "linkLabelKeysProperty": '+this.quote(this.Lp)),"isGroup"!==this.Xp&&"string"==typeof this.Xp&&(b+=',\n  "nodeIsGroupProperty": '+this.quote(this.Xp)),"group"!==this.wn&&"string"==typeof this.wn&&(b+=',\n  "nodeGroupKeyProperty": '+this.quote(this.wn)),a+b},aa.TB=function(){var a=J.prototype.TB.call(this),b=',\n  "linkDataArray": '+ae(this,this.uj,!0);return a+b},aa.Xt=function(a){J.prototype.Xt.call(this,a),a.linkFromKeyProperty&&(this.qn=a.linkFromKeyProperty),a.linkToKeyProperty&&(this.rn=a.linkToKeyProperty),a.linkFromPortIdProperty&&(this.Kp=a.linkFromPortIdProperty),a.linkToPortIdProperty&&(this.Op=a.linkToPortIdProperty),a.linkCategoryProperty&&(this.Jp=a.linkCategoryProperty),a.nodeIsLinkLabelProperty&&(this.St=a.nodeIsLinkLabelProperty),a.linkLabelKeysProperty&&(this.Lp=a.linkLabelKeysProperty),a.nodeIsGroupProperty&&(this.Xp=a.nodeIsGroupProperty),a.nodeGroupKeyProperty&&(this.wn=a.nodeGroupKeyProperty)},aa.kB=function(a){J.prototype.kB.call(this,a),(a=a.linkDataArray)&&(this.$t(a),this.uj=a)},T.prototype.changeState=function(a,b){if(a.Bd===Md){var c=null;if("linkDataArray"===a.If?c=this.ih:"linkLabelKeys"===a.If&&(c=this.xl(a.object)),t.isArray(c))return b?(this.je&&t.xb(a.newValue)&&t.Gf(a.newValue,this,!0),t.gj(c,a.dg)):(this.je&&t.xb(a.newValue)&&t.Gf(a.newValue,this,!1),t.fj(c,a.dg,a.newValue)),void 0}else if(a.Bd===Nd&&(c=null,"linkDataArray"===a.If?c=this.ih:"linkLabelKeys"===a.If&&(c=this.xl(a.object)),t.isArray(c)))return b?(this.je&&t.xb(a.oldValue)&&t.Gf(a.oldValue,this,!1),t.fj(c,a.fg,a.oldValue)):(this.je&&t.xb(a.oldValue)&&t.Gf(a.oldValue,this,!0),t.gj(c,a.fg)),void 0;J.prototype.changeState.call(this,a,b)},t.g(T,"archetypeNodeData",T.prototype.ct),t.defineProperty(T,{ct:"archetypeNodeData"},function(){return this.Kk},function(a){var b=this.Kk;b!==a&&(null!==a&&t.l(a,Object,T,"archetypeNodeData"),this.Kk=a,this.j("archetypeNodeData",b,a))}),T.prototype.tn=function(a){var b,c;return void 0!==a?(b=this.Kk,null!==b&&(c=this.Bf(a),null===c&&(c=this.copyNodeData(b),t.Wa(c,this.wm,a),this.Pm(c))),a):void 0},t.g(T,"linkFromKeyProperty",T.prototype.qn),t.defineProperty(T,{qn:"linkFromKeyProperty"},function(){return this.Mj},function(a){var b=this.Mj;b!==a&&(Ce(a,T,"linkFromKeyProperty"),this.Mj=a,this.j("linkFromKeyProperty",b,a))}),T.prototype.getFromKeyForLinkData=T.prototype.vl=function(a){if(null!==a){var b=this.Mj;if(""!==b&&(b=t.nb(a,b),void 0!==b)){if(De(b))return b;t.m("FromKey value for link data "+a+" is not a number or a string: "+b)}}},T.prototype.setFromKeyForLinkData=T.prototype.Lx=function(a,b){var c,d;null===b&&(b=void 0),void 0===b||De(b)||t.jc(b,"number or string",T,"setFromKeyForLinkData:key"),null!==a&&(c=this.Mj,""!==c&&(b=this.tn(b),this.kj(a)?(d=t.nb(a,c),d!==b&&(Ge(this,d,a),t.Wa(a,c,b),null===this.Bf(b)&&Fe(this,b,a),Be(this,"linkFromKey",Ld,c,a,d,b),"string"==typeof c&&this.Wb(a,c))):t.Wa(a,c,b)))},t.g(T,"linkToKeyProperty",T.prototype.rn),t.defineProperty(T,{rn:"linkToKeyProperty"},function(){return this.Pj},function(a){var b=this.Pj;b!==a&&(Ce(a,T,"linkToKeyProperty"),this.Pj=a,this.j("linkToKeyProperty",b,a))}),T.prototype.getToKeyForLinkData=T.prototype.zl=function(a){if(null!==a){var b=this.Pj;if(""!==b&&(b=t.nb(a,b),void 0!==b)){if(De(b))return b;t.m("ToKey value for link data "+a+" is not a number or a string: "+b)}}},T.prototype.setToKeyForLinkData=T.prototype.Nx=function(a,b){var c,d;null===b&&(b=void 0),void 0===b||De(b)||t.jc(b,"number or string",T,"setToKeyForLinkData:key"),null!==a&&(c=this.Pj,""!==c&&(b=this.tn(b),this.kj(a)?(d=t.nb(a,c),d!==b&&(Ge(this,d,a),t.Wa(a,c,b),null===this.Bf(b)&&Fe(this,b,a),Be(this,"linkToKey",Ld,c,a,d,b),"string"==typeof c&&this.Wb(a,c))):t.Wa(a,c,b)))},t.g(T,"linkFromPortIdProperty",T.prototype.Kp),t.defineProperty(T,{Kp:"linkFromPortIdProperty"},function(){return this.Dr},function(a){var b=this.Dr;b!==a&&(Ce(a,T,"linkFromPortIdProperty"),this.Dr=a,this.j("linkFromPortIdProperty",b,a))}),T.prototype.getFromPortIdForLinkData=T.prototype.kJ=function(a){if(null===a)return"";var b=this.Dr;return""===b?"":(a=t.nb(a,b),void 0===a?"":a)},T.prototype.setFromPortIdForLinkData=T.prototype.yB=function(a,b){var c,d;t.i(b,"string",T,"setFromPortIdForLinkData:portname"),null!==a&&(c=this.Dr,""!==c&&(this.kj(a)?(d=t.nb(a,c),void 0===d&&(d=""),d!==b&&(t.Wa(a,c,b),Be(this,"linkFromPortId",Ld,c,a,d,b),"string"==typeof c&&this.Wb(a,c))):t.Wa(a,c,b)))},t.g(T,"linkToPortIdProperty",T.prototype.Op),t.defineProperty(T,{Op:"linkToPortIdProperty"},function(){return this.Er},function(a){var b=this.Er;b!==a&&(Ce(a,T,"linkToPortIdProperty"),this.Er=a,this.j("linkToPortIdProperty",b,a))}),T.prototype.getToPortIdForLinkData=T.prototype.nJ=function(a){if(null===a)return"";var b=this.Er;return""===b?"":(a=t.nb(a,b),void 0===a?"":a)},T.prototype.setToPortIdForLinkData=T.prototype.BB=function(a,b){var c,d;t.i(b,"string",T,"setToPortIdForLinkData:portname"),null!==a&&(c=this.Er,""!==c&&(this.kj(a)?(d=t.nb(a,c),void 0===d&&(d=""),d!==b&&(t.Wa(a,c,b),Be(this,"linkToPortId",Ld,c,a,d,b),"string"==typeof c&&this.Wb(a,c))):t.Wa(a,c,b)))},t.g(T,"nodeIsLinkLabelProperty",T.prototype.St),t.defineProperty(T,{St:"nodeIsLinkLabelProperty"},function(){return this.Gv},function(a){var b=this.Gv;b!==a&&(Ce(a,T,"nodeIsLinkLabelProperty"),this.Gv=a,this.j("nodeIsLinkLabelProperty",b,a))}),T.prototype.isLinkLabelForNodeData=T.prototype.zJ=function(a){if(null===a)return!1;var b=this.Gv;return""===b?!1:t.nb(a,b)?!0:!1},t.g(T,"linkLabelKeysProperty",T.prototype.Lp),t.defineProperty(T,{Lp:"linkLabelKeysProperty"},function(){return this.Wh},function(a){var b=this.Wh;b!==a&&(Ce(a,T,"linkLabelKeysProperty"),this.Wh=a,this.j("linkLabelKeysProperty",b,a))}),T.prototype.getLabelKeysForLinkData=T.prototype.xl=function(a){if(null===a)return t.xi;var b=this.Wh;return""===b?t.xi:(a=t.nb(a,b),void 0===a?t.xi:a)},T.prototype.setLabelKeysForLinkData=T.prototype.KG=function(a,b){var c,d,e,f,g;if(t.ft(b,T,"setLabelKeysForLinkData:arr"),null!==a&&(c=this.Wh,""!==c))if(this.kj(a)){if(d=t.nb(a,c),void 0===d&&(d=t.xi),d!==b){for(e=t.ub(d),f=0;e>f;f++)g=t.rb(d,f),Ge(this,g,a);for(t.Wa(a,c,b),e=t.ub(b),f=0;e>f;f++)g=t.rb(b,f),null===this.Bf(g)&&Fe(this,g,a);Be(this,"linkLabelKeys",Ld,c,a,d,b),"string"==typeof c&&this.Wb(a,c)}}else t.Wa(a,c,b)},T.prototype.addLabelKeyForLinkData=T.prototype.jE=function(a,b){var c,d;null!==b&&void 0!==b&&(De(b)||t.jc(b,"number or string",T,"addLabelKeyForLinkData:key"),null!==a)&&(c=this.Wh,""!==c&&(d=t.nb(a,c),void 0===d?this.KG(a,[b]):t.isArray(d)?0<=t.fA(d,b)||(t.fj(d,1/0,b),this.kj(a)&&(null===this.Bf(b)&&Fe(this,b,a),Be(this,"linkLabelKeys",Md,c,a,null,b))):t.m(c+" property is not an Array; cannot addLabelKeyForLinkData: "+a)))},T.prototype.removeLabelKeyForLinkData=T.prototype.kK=function(a,b){var c,d,e;null!==b&&void 0!==b&&(De(b)||t.jc(b,"number or string",T,"removeLabelKeyForLinkData:key"),null!==a)&&(c=this.Wh,""!==c&&(d=t.nb(a,c),t.isArray(d)?(e=t.fA(d,b),0>e||(t.gj(d,e),this.kj(a)&&(Ge(this,b,a),Be(this,"linkLabelKeys",Nd,c,a,b,null)))):void 0!==d&&t.m(c+" property is not an Array; cannot removeLabelKeyforLinkData: "+a)))},t.g(T,"linkDataArray",T.prototype.uj),t.defineProperty(T,{uj:"linkDataArray"},function(){return this.ih},function(a){var c,d,e,f,b=this.ih;if(b!==a){for(t.ft(a,T,"linkDataArray"),this.je&&t.Ec&&(null!==b&&t.on(b,"linkDataArray",this,!0),a=t.on(a,"linkDataArray",this,!1)),c=t.ub(a),d=0;c>d;d++){if(e=t.rb(a,d),!t.xb(e))return t.m("GraphLinksModel.linkDataArray must only contain Objects, not: "+e),void 0;t.xt(e)}for(this.ih=a,f=new I(Object),d=0;c>d;d++)e=t.rb(a,d),f.add(e);for(this.qm=f,Be(this,"linkDataArray",Ld,"linkDataArray",this,b,a),d=0;c>d;d++)e=t.rb(a,d),Ke(this,e)}}),T.prototype.containsLinkData=T.prototype.kj=function(a){return null===a?!1:this.qm.contains(a)},T.prototype.addLinkData=T.prototype.rw=function(a){if(null!==a){if(this.je&&t.Gf(a,this,!1),void 0===t.ud(a))t.Fc(a);else if(this.kj(a))return;this.qm.add(a);var b=t.ub(this.ih);t.fj(this.ih,b,a),Be(this,"linkDataArray",Md,"linkDataArray",this,null,a,null,b),Ke(this,a)}},T.prototype.addLinkDataCollection=function(a){if(t.isArray(a))for(var b=t.ub(a),c=0;b>c;c++)this.rw(t.rb(a,c));else for(a=a.k;a.next();)this.rw(a.value)},T.prototype.removeLinkData=T.prototype.oB=function(a){var b,c,d,e;if(null!==a&&(this.je&&t.Gf(a,this,!0),this.qm.remove(a),b=this.ih.indexOf(a),!(0>b)&&(t.gj(this.ih,b),Be(this,"linkDataArray",Nd,"linkDataArray",this,a,null,b,null),b=this.vl(a),Ge(this,b,a),b=this.zl(a),Ge(this,b,a),c=this.xl(a),t.isArray(c))))for(d=t.ub(c),e=0;d>e;e++)b=t.rb(c,e),Ge(this,b,a)},T.prototype.removeLinkDataCollection=function(a){if(t.isArray(a))for(var b=t.ub(a),c=0;b>c;c++)this.oB(t.rb(a,c));else for(a=a.k;a.next();)this.oB(a.value)
},t.g(T,"copyLinkDataFunction",T.prototype.CI),t.defineProperty(T,{CI:"copyLinkDataFunction"},function(){return this.Mu},function(a){var b=this.Mu;b!==a&&(null!==a&&t.i(a,"function",T,"copyLinkDataFunction"),this.Mu=a,this.j("copyLinkDataFunction",b,a))}),T.prototype.copyLinkData=T.prototype.IE=function(a){var b,c,d;if(null===a)return null;if(b=null,b=this.Mu,null!==b)b=b(a,this);else{b=new a.constructor;for(c in a)d=t.nb(a,c),e&&He(a,c,d),t.Wa(b,c,d);this.je&&t.Gf(b,this,!1)}return b&&(t.Fc(b),""!==this.Mj&&t.Wa(b,this.Mj,void 0),""!==this.Pj&&t.Wa(b,this.Pj,void 0),""!==this.Wh&&t.Wa(b,this.Wh,[])),b},t.g(T,"nodeIsGroupProperty",T.prototype.Xp),t.defineProperty(T,{Xp:"nodeIsGroupProperty"},function(){return this.Fv},function(a){var b=this.Fv;b!==a&&(Ce(a,T,"nodeIsGroupProperty"),this.Fv=a,this.j("nodeIsGroupProperty",b,a))}),T.prototype.isGroupForNodeData=T.prototype.NA=function(a){if(null===a)return!1;var b=this.Fv;return""===b?!1:t.nb(a,b)?!0:!1},t.g(T,"nodeGroupKeyProperty",T.prototype.wn),t.defineProperty(T,{wn:"nodeGroupKeyProperty"},function(){return this.Vj},function(a){var b=this.Vj;b!==a&&(Ce(a,T,"nodeGroupKeyProperty"),this.Vj=a,this.j("nodeGroupKeyProperty",b,a))}),t.g(T,"copiesGroupKeyOfNodeData",T.prototype.nl),t.defineProperty(T,{nl:"copiesGroupKeyOfNodeData"},function(){return this.Ny},function(a){this.Ny!==a&&(t.i(a,"boolean",T,"copiesGroupKeyOfNodeData"),this.Ny=a)}),T.prototype.getGroupKeyForNodeData=T.prototype.hn=function(a){if(null!==a){var b=this.Vj;if(""!==b&&(b=t.nb(a,b),void 0!==b)){if(De(b))return b;t.m("GroupKey value for node data "+a+" is not a number or a string: "+b)}}},T.prototype.setGroupKeyForNodeData=T.prototype.Mx=function(a,b){var c,d;null===b&&(b=void 0),void 0===b||De(b)||t.jc(b,"number or string",T,"setGroupKeyForNodeData:key"),null!==a&&(c=this.Vj,""!==c&&(this.ve(a)?(d=t.nb(a,c),d!==b&&(Ge(this,d,a),t.Wa(a,c,b),null===this.Bf(b)&&Fe(this,b,a),Be(this,"nodeGroupKey",Ld,c,a,d,b),"string"==typeof c&&this.Wb(a,c))):t.Wa(a,c,b)))},T.prototype.copyNodeData=function(a){return null===a?null:(a=J.prototype.copyNodeData.call(this,a),this.nl||""===this.Vj||t.Wa(a,this.Vj,void 0),a)},T.prototype.setDataProperty=function(a,b,c){if(e&&(t.i(a,"object",T,"setDataProperty:data"),t.i(b,"string",T,"setDataProperty:propname"),""===b&&t.m("GraphLinksModel.setDataProperty: property name must not be an empty string when setting "+a+" to "+c)),this.ve(a))if(b===this.vj)this.zB(a,c);else{if(b===this.El)return this.Jx(a,c),void 0;if(b===this.wn)return this.Mx(a,c),void 0;b===this.Xp&&t.m("GraphLinksModel.setDataProperty: property name must not be the nodeIsGroupProperty: "+b)}else if(this.kj(a)){if(b===this.qn)return this.Lx(a,c),void 0;if(b===this.rn)return this.Nx(a,c),void 0;if(b===this.Kp)return this.yB(a,c),void 0;if(b===this.Op)return this.BB(a,c),void 0;if(b===this.Jp)return this.JG(a,c),void 0;if(b===this.Lp)return this.KG(a,c),void 0}else!t.nq&&a instanceof V&&(t.nq=!0,t.trace('GraphLinksModel.setDataProperty is modifying a GraphObject, "'+a.toString()+'"'),t.trace("  Is that really your intent?"));var d=t.nb(a,b);d!==c&&(t.Wa(a,b,c),this.Ex(a,b,d,c))},aa=T.prototype,aa.Zt=function(a,b){var c,d,e,f,g,h,i,j;for(J.prototype.Zt.call(this,a,b),c=this.Gc.k;c.next();)this.qB(c.value,a,b);for(c=this.qm.k;c.next();)if(d=c.value,e=a,f=b,this.vl(d)===e&&(g=this.Mj,t.Wa(d,g,f),Be(this,"linkFromKey",Ld,g,d,e,f),"string"==typeof g&&this.Wb(d,g)),this.zl(d)===e&&(g=this.Pj,t.Wa(d,g,f),Be(this,"linkToKey",Ld,g,d,e,f),"string"==typeof g&&this.Wb(d,g)),h=this.xl(d),t.isArray(h))for(i=t.ub(h),g=this.Wh,j=0;i>j;j++)t.rb(h,j)===e&&(t.oE(h,j,f),Be(this,"linkLabelKeys",Md,g,d,e,f))},aa.qB=function(a,b,c){if(this.hn(a)===b){var d=this.Vj;t.Wa(a,d,c),Be(this,"nodeGroupKey",Ld,d,a,b,c),"string"==typeof d&&this.Wb(a,d)}},aa.OB=function(){var a,b,c,d;for(J.prototype.OB.call(this),a=this.uj,b=t.ub(a),c=0;b>c;c++)d=t.rb(a,c),Ke(this,d)},aa.aq=function(a){var b,c,d,e,f,g,h;if(J.prototype.aq.call(this,a),a=this.Lb(a),b=Ee(this,a),null!==b){for(c=new H(Object),b=b.k;b.next();)if(d=b.value,this.ve(d))this.hn(d)===a&&(e=this.Vj,Be(this,"nodeGroupKey",Ld,e,d,a,a),"string"==typeof e&&this.Wb(d,e),c.add(d));else if(this.vl(d)===a&&(e=this.Mj,Be(this,"linkFromKey",Ld,e,d,a,a),"string"==typeof e&&this.Wb(d,e),c.add(d)),this.zl(d)===a&&(e=this.Pj,Be(this,"linkToKey",Ld,e,d,a,a),"string"==typeof e&&this.Wb(d,e),c.add(d)),f=this.xl(d),t.isArray(f))for(g=t.ub(f),e=this.Wh,h=0;g>h;h++)t.rb(f,h)===a&&(Be(this,"linkLabelKeys",Md,e,d,a,a),c.add(d));for(c=c.k;c.next();)Ge(this,a,c.value)}},aa.$p=function(a){J.prototype.$p.call(this,a);var b=this.hn(a);null===this.Bf(b)&&Fe(this,b,a)},aa.ou=function(a){J.prototype.ou.call(this,a);var b=this.hn(a);Ge(this,b,a)},t.g(T,"linkCategoryProperty",T.prototype.Jp),t.defineProperty(T,{Jp:"linkCategoryProperty"},function(){return this.Ar},function(a){var b=this.Ar;b!==a&&(Ce(a,T,"linkCategoryProperty"),this.Ar=a,this.j("linkCategoryProperty",b,a))}),T.prototype.getCategoryForLinkData=T.prototype.getCategoryForLinkData=function(a){if(null===a)return"";var b=this.Ar;return""===b?"":(b=t.nb(a,b),void 0===b?"":"string"==typeof b?b:(t.m("getCategoryForLinkData found a non-string category for "+a+": "+b),""))},T.prototype.setCategoryForLinkData=T.prototype.JG=function(a,b){var c,d;if(t.i(b,"string",T,"setCategoryForLinkData:cat"),null!==a){if(c=this.Ar,""===c)return"";this.kj(a)?(d=t.nb(a,c),void 0===d&&(d=""),d!==b&&(t.Wa(a,c,b),Be(this,"linkCategory",Ld,c,a,d,b),"string"==typeof c&&this.Wb(a,c))):t.Wa(a,c,b)}},t.ka("TreeModel",be),t.Qa(be,J),be.prototype.toString=function(a){var b,d,c,e;if(void 0===a&&(a=0),a>=2)return this.IB();if(b=(""!==this.name?this.name:"")+" TreeModel",a>0)for(b+="\n node data:",a=this.Qg,c=t.ub(a),d=0;c>d;d++)e=t.rb(a,d),b+=" "+this.Lb(e)+":"+na(e);return b},be.prototype.qu=function(){var a=J.prototype.qu.call(this),b="";return"parent"!==this.xn&&"string"==typeof this.xn&&(b+=',\n  "nodeParentKeyProperty": '+this.quote(this.xn)),a+b},be.prototype.Xt=function(a){J.prototype.Xt.call(this,a),a.nodeParentKeyProperty&&(this.xn=a.nodeParentKeyProperty)},be.prototype.tn=function(a){return a},t.g(be,"nodeParentKeyProperty",be.prototype.xn),t.defineProperty(be,{xn:"nodeParentKeyProperty"},function(){return this.Wj},function(a){var b=this.Wj;b!==a&&(Ce(a,be,"nodeParentKeyProperty"),this.Wj=a,this.j("nodeParentKeyProperty",b,a))}),t.g(be,"copiesParentKeyOfNodeData",be.prototype.ol),t.defineProperty(be,{ol:"copiesParentKeyOfNodeData"},function(){return this.Oy},function(a){this.Oy!==a&&(t.i(a,"boolean",be,"copiesParentKeyOfNodeData"),this.Oy=a)}),be.prototype.getParentKeyForNodeData=be.prototype.jn=function(a){if(null!==a){var b=this.Wj;if(""!==b&&(b=t.nb(a,b),void 0!==b)){if(De(b))return b;t.m("ParentKey value for node data "+a+" is not a number or a string: "+b)}}},be.prototype.setParentKeyForNodeData=be.prototype.yh=function(a,b){var c,d;null===b&&(b=void 0),void 0===b||De(b)||t.jc(b,"number or string",be,"setParentKeyForNodeData:key"),null!==a&&(c=this.Wj,""!==c&&(b=this.tn(b),this.ve(a)?(d=t.nb(a,c),d!==b&&(Ge(this,d,a),t.Wa(a,c,b),null===this.Bf(b)&&Fe(this,b,a),Be(this,"nodeParentKey",Ld,c,a,d,b),"string"==typeof c&&this.Wb(a,c))):t.Wa(a,c,b)))},t.g(be,"parentLinkCategoryProperty",be.prototype.eK),t.defineProperty(be,{eK:"parentLinkCategoryProperty"},function(){return this.as},function(a){var b=this.as;b!==a&&(Ce(a,be,"parentLinkCategoryProperty"),this.as=a,this.j("parentLinkCategoryProperty",b,a))}),be.prototype.getParentLinkCategoryForNodeData=be.prototype.mJ=function(a){if(null===a)return"";var b=this.as;return""===b?"":(b=t.nb(a,b),void 0===b?"":"string"==typeof b?b:(t.m("getParentLinkCategoryForNodeData found a non-string category for "+a+": "+b),""))},be.prototype.setParentLinkCategoryForNodeData=be.prototype.qK=function(a,b){var c,d;if(t.i(b,"string",be,"setParentLinkCategoryForNodeData:cat"),null!==a){if(c=this.as,""===c)return"";this.ve(a)?(d=t.nb(a,c),void 0===d&&(d=""),d!==b&&(t.Wa(a,c,b),Be(this,"parentLinkCategory",Ld,c,a,d,b),"string"==typeof c&&this.Wb(a,c))):t.Wa(a,c,b)}},be.prototype.copyNodeData=function(a){return null===a?null:(a=J.prototype.copyNodeData.call(this,a),this.ol||""===this.Wj||t.Wa(a,this.Wj,void 0),a)},be.prototype.setDataProperty=function(a,b,c){if(e&&(t.i(a,"object",be,"setDataProperty:data"),t.i(b,"string",be,"setDataProperty:propname"),""===b&&t.m("TreeModel.setDataProperty: property name must not be an empty string when setting "+a+" to "+c)),this.ve(a))if(b===this.vj)this.zB(a,c);else{if(b===this.El)return this.Jx(a,c),void 0;if(b===this.xn)return this.yh(a,c),void 0}else!t.nq&&a instanceof V&&(t.nq=!0,t.trace('TreeModel.setDataProperty is modifying a GraphObject, "'+a.toString()+'"'),t.trace("  Is that really your intent?"));var d=t.nb(a,b);d!==c&&(t.Wa(a,b,c),this.Ex(a,b,d,c))},aa=be.prototype,aa.Zt=function(a,b){J.prototype.Zt.call(this,a,b);for(var c=this.Gc.k;c.next();)this.qB(c.value,a,b)},aa.qB=function(a,b,c){if(this.jn(a)===b){var d=this.Wj;t.Wa(a,d,c),Be(this,"nodeParentKey",Ld,d,a,b,c),"string"==typeof d&&this.Wb(a,d)}},aa.aq=function(a){var b,c,d,e;if(J.prototype.aq.call(this,a),a=this.Lb(a),b=Ee(this,a),null!==b){for(c=new H(Object),b=b.k;b.next();)d=b.value,this.ve(d)&&this.jn(d)===a&&(e=this.Wj,Be(this,"nodeParentKey",Ld,e,d,a,a),"string"==typeof e&&this.Wb(d,e),c.add(d));for(c=c.k;c.next();)Ge(this,a,c.value)}},aa.$p=function(a){J.prototype.$p.call(this,a);var b=this.jn(a),b=this.tn(b);null===this.Bf(b)&&Fe(this,b,a)},aa.ou=function(a){J.prototype.ou.call(this,a);var b=this.jn(a);Ge(this,b,a)},t.ka("Binding",Le),Le.OneWay=Me=t.w(Le,"OneWay",1),Le.TwoWay=Xe=t.w(Le,"TwoWay",2),Le.parseEnum=function(a,b){return t.i(a,"function",Le,"parseEnum:ctor"),t.Fa(b,a,Le,"parseEnum:defval"),function(c){return t.en(a,c)||b}},Le.toString=na=function(a){var b=a;return t.xb(a)&&(a.text?b=a.text:a.name?b=a.name:void 0!==a.key?b=a.key:void 0!==a.id?b=a.id:a.constructor===Object&&(a.Text?b=a.Text:a.Name?b=a.Name:void 0!==a.Key?b=a.Key:void 0!==a.Id?b=a.Id:void 0!==a.ID&&(b=a.ID))),void 0===b?"undefined":null===b?"null":b.toString()},Le.prototype.toString=function(){return"Binding("+this.Gn+" "+this.lu+":"+this.DB+")"},Le.prototype.freeze=function(){return this.tb=!0,this},Le.prototype.Ra=function(){return this.tb=!1,this},t.g(Le,"targetId",Le.prototype.Gn),t.defineProperty(Le,{Gn:null},function(){return this.OD},function(a){t.J(this),t.i(a,"string",Le,"targetId"),this.OD=a}),t.g(Le,"targetProperty",Le.prototype.lu),t.defineProperty(Le,{lu:"targetProperty"},function(){return this.iw},function(a){t.J(this),t.i(a,"string",Le,"targetProperty"),this.iw=a}),t.g(Le,"sourceName",Le.prototype.ju),t.defineProperty(Le,{ju:"sourceName"},function(){return this.JD},function(a){t.J(this),t.i(a,"string",Le,"sourceName"),this.JD=a}),t.g(Le,"sourceProperty",Le.prototype.DB),t.defineProperty(Le,{DB:"sourceProperty"},function(){return this.aw},function(a){t.J(this),t.i(a,"string",Le,"sourceProperty"),this.aw=a}),t.g(Le,"converter",Le.prototype.FE),t.defineProperty(Le,{FE:"converter"},function(){return this.Ky},function(a){t.J(this),null!==a&&t.i(a,"function",Le,"converter"),this.Ky=a}),t.g(Le,"backConverter",Le.prototype.tE),t.defineProperty(Le,{tE:"backConverter"},function(){return this.Dy},function(a){t.J(this),null!==a&&t.i(a,"function",Le,"backConverter"),this.Dy=a}),t.g(Le,"mode",Le.prototype.mode),t.defineProperty(Le,{mode:"mode"},function(){return this.xz},function(a){t.J(this),t.Fa(a,Le,Le,"mode"),this.xz=a}),Le.prototype.makeTwoWay=function(a){return void 0===a&&(a=null),null!==a&&t.i(a,"function",Le,"makeTwoWay"),this.mode=Xe,this.tE=a,this},Le.prototype.ofObject=Le.prototype.eB=function(a){return void 0===a&&(a=""),e&&t.i(a,"string",Le,"ofObject:srcname"),this.ju=a,this},Le.prototype.updateTarget=Le.prototype.kH=function(a,b,c){var f,g,h,d=this.aw;if(!c||d===c)if(c=this.iw,f=this.Ky,null===f&&""===c)t.trace("Binding error: target property is the empty string: "+this.toString());else if(e&&"string"==typeof c&&("function"!=typeof a.setAttribute&&0<c.length&&"_"!==c[0]&&!t.bx(a,c)?t.trace("Binding error: undefined target property: "+c+" on "+a.toString()):"name"===c&&a instanceof V&&t.trace("Binding error: cannot modify GraphObject.name on "+a.toString())),g=b,""!==d&&(g=t.nb(b,d)),void 0!==g)if(null===f)""!==c&&t.Wa(a,c,g);else try{""!==c?(h=f(g,a),e&&void 0===h&&t.trace('Binding warning: conversion function returned undefined when setting target property "'+c+'" on '+a.toString()+", function is: "+f),t.Wa(a,c,h)):f(g,a)}catch(i){e&&t.trace("Binding error: "+i.toString()+' setting target property "'+c+'" on '+a.toString()+" with conversion function: "+f)}},Le.prototype.updateSource=Le.prototype.PB=function(a,b,c,d){var f,g,h,i;if(this.xz===Xe&&(f=this.iw,!(c&&f!==c||(c=this.aw,g=this.Dy,null===g&&""===c||(h=a,""!==f&&(h=t.nb(a,f)),void 0===h)))))if(null===g)d&&d.ea?(e&&d.ea.vj===c&&d.ea.ve(b)&&t.trace("Binding error: cannot have TwoWay Binding on node data key property: "+this.toString()),d.ea.setDataProperty(b,c,h)):t.Wa(b,c,h);else try{""!==c?(i=g(h,b),d&&d.ea?(e&&(d.ea.vj===c&&d.ea.ve(b)&&t.trace("Binding error: cannot have TwoWay Binding on node data key property: "+this.toString()),void 0===i&&t.trace('Binding warning: conversion function returned undefined when setting source property "'+c+'" on '+b.toString()+", function is: "+g)),d.ea.setDataProperty(b,c,i)):t.Wa(b,c,i)):g(h,b)}catch(j){e&&t.trace("Binding error: "+j.toString()+' setting source property "'+c+'" on '+b.toString()+" with conversion function: "+g)}},t.ka("Transaction",Ae),Ae.prototype.toString=function(a){var c,d,e,b="Transaction: "+this.name+" "+this.ph.count.toString()+(this.Dp?"":", incomplete");if(void 0!==a&&a>0)for(c=this.ph.count,d=0;c>d;d++)e=this.ph.wa(d),null!==e&&(b+="\n  "+e.toString(a-1));return b},Ae.prototype.clear=Ae.prototype.clear=function(){var b,c,a=this.ph;for(a.Ra(),b=a.count-1;b>=0;b--)c=a.wa(b),null!==c&&c.clear();a.clear(),a.freeze()},Ae.prototype.canUndo=Ae.prototype.canUndo=function(){return this.Dp},Ae.prototype.undo=Ae.prototype.undo=function(){var a,b;if(this.canUndo())for(a=this.ph.count-1;a>=0;a--)b=this.ph.wa(a),null!==b&&b.undo()},Ae.prototype.canRedo=Ae.prototype.canRedo=function(){return this.Dp},Ae.prototype.redo=Ae.prototype.redo=function(){var a,b,c;if(this.canRedo())for(a=this.ph.count,b=0;a>b;b++)c=this.ph.wa(b),null!==c&&c.redo()},t.A(Ae,{ph:"changes"},function(){return this.EH}),t.g(Ae,"name",Ae.prototype.name),t.defineProperty(Ae,{name:"name"},function(){return this.ec},function(a){this.ec=a}),t.g(Ae,"isComplete",Ae.prototype.Dp),t.defineProperty(Ae,{Dp:"isComplete"},function(){return this.QC},function(a){this.QC=a}),t.ka("UndoManager",Od),Od.prototype.toString=function(a){for(var b="UndoManager "+this.qj+"<"+this.history.count+"<="+this.UA,b=b+"[",c=this.fG.count,d=0;c>d;d++)d>0&&(b+=" "),b+=this.fG.wa(d);if(b+="]",void 0!==a&&a>0)for(c=this.history.count,d=0;c>d;d++)b+="\n "+this.history.wa(d).toString(a-1);return b},Od.prototype.clear=Od.prototype.clear=function(){var b,c,a=this.history;for(a.Ra(),b=a.count-1;b>=0;b--)c=a.wa(b),null!==c&&c.clear();a.clear(),this.eh=-1,a.freeze(),this.Ki=!1,this.Su=null,this.hl=0,this.lh.Ra(),this.lh.clear(),this.lh.freeze(),this.Ho.clear()},Od.prototype.addModel=Od.prototype.$H=function(a){this.zz.add(a)},Od.prototype.removeModel=Od.prototype.lK=function(a){this.zz.remove(a)},Od.prototype.startTransaction=Od.prototype.yc=function(a){if(void 0===a&&(a=""),null===a&&(a=""),this.yb)return!1;!0===this.gz&&(this.gz=!1,this.hl++,this.cd("StartingFirstTransaction",a,this.lj),0<this.hl&&this.hl--),this.isEnabled&&(this.lh.Ra(),this.lh.add(a),this.lh.freeze(),null===this.lj?this.Ho.add(0):this.Ho.add(this.lj.ph.count)),this.hl++;var b=1===this.Qe;return b&&this.cd("StartedTransaction",a,this.lj),b},Od.prototype.commitTransaction=Od.prototype.Ie=function(a){return Ye(this,!0,a)},Od.prototype.rollbackTransaction=Od.prototype.bq=function(){return Ye(this,!1,"")},Od.prototype.canUndo=Od.prototype.canUndo=function(){if(!this.isEnabled||0<this.Qe||this.yb)return!1;var a=this.dH;return null!==a&&a.canUndo()?!0:!1},Od.prototype.undo=Od.prototype.undo=function(){if(this.canUndo()){var a=this.dH;try{this.cd("StartingUndo","Undo",a),this.Ki=!0,this.eh--,a.undo()}catch(b){t.trace("undo error: "+b.toString())}finally{this.Ki=!1,this.cd("FinishedUndo","Undo",a)}}},Od.prototype.canRedo=Od.prototype.canRedo=function(){if(!this.isEnabled||0<this.Qe||this.yb)return!1;var a=this.cH;return null!==a&&a.canRedo()?!0:!1},Od.prototype.redo=Od.prototype.redo=function(){if(this.canRedo()){var a=this.cH;try{this.cd("StartingRedo","Redo",a),this.Ki=!0,this.eh++,a.redo()}catch(b){t.trace("redo error: "+b.toString())}finally{this.Ki=!1,this.cd("FinishedRedo","Redo",a)}}},Od.prototype.cd=function(a,b,c){void 0===c&&(c=null);var d=new Cd;for(d.Bd=Kd,d.propertyName=a,d.object=c,d.oldValue=b,a=this.TJ;a.next();)b=a.value,d.ea=b,b.zw(d)},Od.prototype.handleChanged=Od.prototype.sF=function(a){var b,c;!this.isEnabled||this.yb||this.skipsEvent(a)||(b=this.lj,null===b&&(this.Su=b=new Ae),c=a.copy(),b=b.ph,b.Ra(),b.add(c),b.freeze(),this.iA&&0>=this.Qe&&!this.gz&&(a=a.h,null!==a&&!1===a.sf||t.trace("Change not within a transaction: "+c.toString())))},Od.prototype.skipsEvent=function(a){if(null===a||0>a.Bd.value)return!0;if(a=a.object,a instanceof V){if(a=a.layer,null!==a&&a.Dc)return!0}else if(a instanceof qe&&a.Dc)return!0;return!1},t.A(Od,{TJ:"models"},function(){return this.zz.k}),t.g(Od,"isEnabled",Od.prototype.isEnabled),t.defineProperty(Od,{isEnabled:"isEnabled"},function(){return this.Se},function(a){this.Se=a}),t.A(Od,{dH:"transactionToUndo"},function(){return 0<=this.qj&&this.qj<=this.history.count-1?this.history.wa(this.qj):null}),t.A(Od,{cH:"transactionToRedo"},function(){return this.qj<this.history.count-1?this.history.wa(this.qj+1):null}),t.A(Od,{yb:"isUndoingRedoing"},function(){return this.Ki}),t.A(Od,{history:"history"},function(){return this.KH}),t.g(Od,"maxHistoryLength",Od.prototype.UA),t.defineProperty(Od,{UA:"maxHistoryLength"},function(){return this.eD},function(a){this.eD=a}),t.A(Od,{qj:"historyIndex"},function(){return this.eh}),t.A(Od,{lj:"currentTransaction"},function(){return this.Su}),t.A(Od,{Qe:"transactionLevel"},function(){return this.hl}),t.A(Od,{HF:"isInTransaction"},function(){return 0<this.hl}),t.defineProperty(Od,{iA:"checksTransactionLevel"},function(){return this.Ey},function(a){this.Ey=a}),t.A(Od,{fG:"nestedTransactionNames"},function(){return this.lh}),t.ka("CommandHandler",Ba),Ba.prototype.toString=function(){return"CommandHandler"},t.A(Ba,{h:"diagram"},function(){return this.W}),Ba.prototype.Ed=function(a){e&&null!==a&&t.l(a,v,Ba,"setDiagram"),this.W=a},Ba.prototype.doKeyDown=function(){var b,c,d,e,f,a=this.h;null!==a&&(b=a.T,c=t.ln?b.Qp:b.control,d=b.shift,e=b.alt,f=b.key,!c||"C"!==f&&"Insert"!==f?c&&"X"===f||d&&"Del"===f?this.canCutSelection()&&this.cutSelection():"Del"===f?this.canDeleteSelection()&&this.deleteSelection():c&&"V"===f||d&&"Insert"===f?this.canPasteSelection()&&this.pasteSelection():c&&"Y"===f||e&&d&&"Backspace"===f?this.canRedo()&&this.redo():c&&"Z"===f||e&&"Backspace"===f?this.canUndo()&&this.undo():c&&"A"===f?this.canSelectAll()&&this.selectAll():"Esc"===f?this.canStopCommand()&&this.stopCommand():"Up"===f?a.wf&&(c?a.scroll("pixel","up"):a.scroll("line","up")):"Down"===f?a.wf&&(c?a.scroll("pixel","down"):a.scroll("line","down")):"Left"===f?a.vf&&(c?a.scroll("pixel","left"):a.scroll("line","left")):"Right"===f?a.vf&&(c?a.scroll("pixel","right"):a.scroll("line","right")):"PageUp"===f?d&&a.vf?a.scroll("page","left"):a.wf&&a.scroll("page","up"):"PageDown"===f?d&&a.vf?a.scroll("page","right"):a.wf&&a.scroll("page","down"):"Home"===f?(b=a.Mc,c&&a.wf?a.position=new E(a.position.x,b.y):!c&&a.vf&&(a.position=new E(b.x,a.position.y))):"End"===f?(b=a.Mc,d=a.Ab,c&&a.wf?a.position=new E(d.x,b.bottom-d.height):!c&&a.vf&&(a.position=new E(b.right-d.width,d.y))):"Subtract"===f?this.canDecreaseZoom()&&this.decreaseZoom():"Add"===f?this.canIncreaseZoom()&&this.increaseZoom():c&&"0"===f?this.canResetZoom()&&this.resetZoom():d&&"Z"===f?this.canZoomToFit()&&this.zoomToFit():c&&!d&&"G"===f?this.canGroupSelection()&&this.groupSelection():c&&d&&"G"===f?this.canUngroupSelection()&&this.ungroupSelection():b.event&&113===b.event.which?this.canEditTextBlock()&&this.editTextBlock():b.event&&93===b.event.which?this.canShowContextMenu()&&this.showContextMenu():b.bubbles=!0:this.canCopySelection()&&this.copySelection())},Ba.prototype.doKeyUp=function(){var a=this.h;null!==a&&(a.T.bubbles=!0)},Ba.prototype.stopCommand=function(){var b,a=this.h;null!==a&&(b=a.Ya,b instanceof Ze&&a.We&&a.Bw(),null!==b&&b.doCancel())},Ba.prototype.canStopCommand=function(){return!0},Ba.prototype.selectAll=function(){var b,a=this.h;if(null!==a){a.na();try{for(a.gc="wait",a.Ga("ChangingSelection"),b=a.wj;b.next();)b.value.ib=!0;for(b=a.wh;b.next();)b.value.ib=!0;for(b=a.links;b.next();)b.value.ib=!0}finally{a.Ga("ChangedSelection"),a.gc=""}}},Ba.prototype.canSelectAll=function(){var a=this.h;return null!==a&&a.We},Ba.prototype.deleteSelection=function(){var b,c,a=this.h;if(null!==a&&!a.Ga("SelectionDeleting",a.selection))try{for(a.gc="wait",a.yc("Delete"),a.Ga("ChangingSelection"),b=new I(x),c=a.selection.k;c.next();)$e(b,c.value,!0,this.UE?1/0:0,function(a){return a.canDelete()});a.pB(b,!0),a.Ga("SelectionDeleted",b)}finally{a.Ga("ChangedSelection"),a.Ie("Delete"),a.gc=""}},Ba.prototype.canDeleteSelection=function(){var a=this.h;return null===a||a.hb||a.ff||!a.ll||0===a.selection.count?!1:!0},Ba.prototype.jp=function(a,b,c){var e,f,g,h,i,j,d=new wa(x,x);for(a=a.k;a.next();)e=a.value,af(this,e,b,d,c);if(null!==b){for(c=b.ea,a=!1,null!==b.Cb.Od&&(a=b.Cb.Od.li),f=new I(B),g=new wa(B,B),h=d.k;h.next();)e=h.value,e instanceof B?a||null!==e.ca&&null!==e.fa||f.add(e):c instanceof be&&e instanceof y&&null!==e.data&&(i=e,e=h.key,j=e.xA(),null!==j&&((j=d.Da(j))?(c.yh(i.data,c.Lb(j.data)),i=b.Zf(i.data),e=e.tt(),null!==e&&null!==i&&g.add(e,i)):c.yh(i.data,void 0)));if(0<f.count&&b.pB(f,!1),0<g.count)for(b=g.k;b.next();)d.add(b.key,b.value)}for(b=d.k;b.next();)b.value.Wb();return d},Ba.prototype.copySelection=function(){var b,a=this.h;if(null!==a){for(b=new I(x),a=a.selection.k;a.next();)$e(b,a.value,!0,this.HE?1/0:0,function(a){return a.canCopy()});this.copyToClipboard(b)}},Ba.prototype.canCopySelection=function(){var a=this.h;return null!==a&&a.ej&&a.vw&&0!==a.selection.count?!0:!1},Ba.prototype.cutSelection=function(){this.copySelection(),this.deleteSelection()},Ba.prototype.canCutSelection=function(){var a=this.h;return null!==a&&!a.hb&&!a.ff&&a.ej&&a.ll&&a.vw&&0!==a.selection.count?!0:!1},Ba.prototype.copyToClipboard=function(a){var c,d,e,f,b=this.h;if(null!==b){if(c=null,null===a)t.gt=null,t.Cw="";else{c=b.ea,d=!1,e=!1,f=null;try{c instanceof be&&(d=c.ol,c.ol=this.nA),c instanceof T&&(e=c.nl,c.nl=this.mA),f=b.jp(a,null,!0)}finally{c instanceof be&&(c.ol=d),c instanceof T&&(c.nl=e),c=new H(x),c.Ve(f),t.gt=c,t.Cw=b.ea.bn}}b.Ga("ClipboardChanged",c)}},Ba.prototype.pasteFromClipboard=function(){var c,d,e,f,g,a=new I(x),b=t.gt;if(null===b)return a;if(c=this.h,null===c||t.Cw!==c.ea.bn)return a;d=c.ea,e=!1,f=!1,g=null;try{d instanceof be&&(e=d.ol,d.ol=this.nA),d instanceof T&&(f=d.nl,d.nl=this.mA),g=c.jp(b,c,!1)}finally{for(d instanceof be&&(d.ol=e),d instanceof T&&(d.nl=f),b=g.k;b.next();)c=b.value,d=b.key,c.location.P()||(d.location.P()?c.location=d.location:!c.position.P()&&d.position.P()&&(c.position=d.position)),a.add(c)}return a},Ba.prototype.pasteSelection=function(a){var c,d,e,f,g,b=this.h;if(null!==b)try{for(b.gc="wait",b.yc("Paste"),b.Ga("ChangingSelection"),c=this.pasteFromClipboard(),0<c.count&&cf(b),d=c.k;d.next();)d.value.ib=!0;b.Ga("ChangedSelection"),a instanceof E&&(e=b.computePartsBounds(b.selection),e&&(f=b.Cb.Od,g=f.computeEffectiveCollection(b.selection),f.moveParts(g,new E(a.x-e.Ia,a.y-e.Ua),!1))),b.Ga("ClipboardPasted",c)}finally{b.Ie("Paste"),b.gc=""}},Ba.prototype.canPasteSelection=function(){var a=this.h;return null===a||a.hb||a.ff||!a.Qm||!a.vw||null===t.gt||t.Cw!==a.ea.bn?!1:!0},Ba.prototype.undo=function(){var a=this.h;null!==a&&a.ma.undo()},Ba.prototype.canUndo=function(){var a=this.h;return null===a||a.hb||a.ff?!1:a.bA&&a.ma.canUndo()},Ba.prototype.redo=function(){var a=this.h;null!==a&&a.ma.redo()},Ba.prototype.canRedo=function(){var a=this.h;return null===a||a.hb||a.ff?!1:a.bA&&a.ma.canRedo()},Ba.prototype.decreaseZoom=function(a){void 0===a&&(a=1/this.su),t.q(a,Ba,"decreaseZoom:factor");var b=this.h;null!==b&&b.Um===df&&(a*=b.scale,a<b.Mg||a>b.Lg||(b.scale=a))},Ba.prototype.canDecreaseZoom=function(a){void 0===a&&(a=1/this.su),t.q(a,Ba,"canDecreaseZoom:factor");var b=this.h;return null===b||b.Um!==df?!1:(a*=b.scale,a<b.Mg||a>b.Lg?!1:b.bt)},Ba.prototype.increaseZoom=function(a){void 0===a&&(a=this.su),t.q(a,Ba,"increaseZoom:factor");var b=this.h;null!==b&&b.Um===df&&(a*=b.scale,a<b.Mg||a>b.Lg||(b.scale=a))},Ba.prototype.canIncreaseZoom=function(a){void 0===a&&(a=this.su),t.q(a,Ba,"canIncreaseZoom:factor");var b=this.h;return null===b||b.Um!==df?!1:(a*=b.scale,a<b.Mg||a>b.Lg?!1:b.bt)},Ba.prototype.resetZoom=function(a){void 0===a&&(a=this.mt),t.q(a,Ba,"resetZoom:newscale");var b=this.h;null===b||a<b.Mg||a>b.Lg||(b.scale=a)},Ba.prototype.canResetZoom=function(a){void 0===a&&(a=this.mt),t.q(a,Ba,"canResetZoom:newscale");var b=this.h;return null===b||a<b.Mg||a>b.Lg?!1:b.bt},Ba.prototype.zoomToFit=function(){var b,c,a=this.h;null!==a&&(b=a.scale,c=a.position,b!==this.gE||isNaN(this.uz)?(this.uz=b,this.bD=c.copy(),a.zoomToFit(),a.bg(),this.gE=a.scale):(a.scale=this.uz,a.position=this.bD))},Ba.prototype.canZoomToFit=function(){var a=this.h;return null===a?!1:a.bt},Ba.prototype.collapseTree=function(a){var b,c,d;if(void 0===a&&(a=null),b=this.h,null===b)return!1;if(b.yc("Collapse Tree"),c=new H(y),a instanceof y&&a.Xc)a.collapseTree(),c.add(a);else for(a=b.selection.k;a.next();)d=a.value,d instanceof y&&d.Xc&&(d.collapseTree(),c.add(d));b.Ga("TreeCollapsed",c),b.Ie("Collapse Tree")},Ba.prototype.canCollapseTree=function(a){void 0===a&&(a=null);var b=this.h;if(null===b||b.hb)return!1;if(a instanceof y){if(!a.Xc)return!1;if(0<a.Xw().count)return!0}else for(a=b.selection.k;a.next();)if(b=a.value,b instanceof y&&b.Xc&&0<b.Xw().count)return!0;return!1},Ba.prototype.expandTree=function(a){var b,c,d;if(void 0===a&&(a=null),b=this.h,null===b)return!1;if(b.yc("Expand Tree"),c=new H(y),a instanceof y&&!a.Xc)a.expandTree(),c.add(a);else for(a=b.selection.k;a.next();)d=a.value,d instanceof y&&!d.Xc&&(d.expandTree(),c.add(d));b.Ga("TreeExpanded",c),b.Ie("Expand Tree")},Ba.prototype.canExpandTree=function(a){void 0===a&&(a=null);var b=this.h;if(null===b||b.hb)return!1;if(a instanceof y){if(a.Xc)return!1;if(0<a.Xw().count)return!0}else for(a=b.selection.k;a.next();)if(b=a.value,b instanceof y&&!b.Xc&&0<b.Xw().count)return!0;return!1},Ba.prototype.groupSelection=function(){var b,c,d,e,f,g,h,i,j,k,l,a=this.h;if(null!==a&&(b=a.ea,null!==b&&b instanceof T&&(c=this.dA,null!==c))){d=null;try{for(a.gc="wait",a.yc("Group"),a.Ga("ChangingSelection"),e=new H(x),f=a.selection.k;f.next();)g=f.value,g.Td()&&g.canGroup()&&e.add(g);for(h=new H(x),i=e.k;i.next();){for(j=i.value,g=!1,f=e.k;f.next();)if(j.Al(f.value)){g=!0;break}g||h.add(j)}if(0<h.count){if(f=h.k,f.next(),k=f.value.fb,null!==k)for(;null!==k;){for(f=h.k,f.next(),e=!1;f.next();)if(j=f.value,!j.Al(k)){e=!0;break}if(!e)break;k=k.fb}if(c instanceof z?(bf(c),d=c.copy(),d instanceof z&&a.add(d)):b.NA(c)&&(l=b.copyNodeData(c),t.xb(l)&&(b.Pm(l),d=a.Ww(l))),d instanceof z){for(null!==k&&this.isValidMember(k,d)&&(d.fb=k),f=h.k;f.next();)j=f.value,this.isValidMember(d,j)&&(j.fb=d);a.select(d)}}a.Ga("ChangedSelection"),a.Ga("SelectionGrouped",d)}finally{a.Ie("Group"),a.gc=""}}},Ba.prototype.canGroupSelection=function(){var b,a=this.h;if(null===a||a.hb||a.ff||!a.Qm||!a.$o)return!1;if(b=a.ea,null===b||!(b instanceof T)||null===this.dA)return!1;for(a=a.selection.k;a.next();)if(b=a.value,b.Td()&&b.canGroup())return!0;return!1},Ba.prototype.isValidMember=function(a,b){if(null===b||a===b||b instanceof B)return!1;if(null!==a){if(a===b||a.Al(b))return!1;var c=a.Lt;if(null!==c&&!c(a,b)||null===a.data&&null!==b.data||null!==a.data&&null===b.data)return!1}return c=this.Lt,null!==c?c(a,b):!0},Ba.prototype.ungroupSelection=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n;if(void 0===a&&(a=null),b=this.h,null!==b&&(c=b.ea,null!==c&&c instanceof T))try{if(b.gc="wait",b.yc("Ungroup"),b.Ga("ChangingSelection"),d=new H(z),a instanceof z)d.add(a);else for(e=b.selection.k;e.next();)f=e.value,f instanceof z&&f.canUngroup()&&d.add(f);if(0<d.count)for(b.Bw(),e=d.k;e.next();){for(g=e.value,g.expandSubGraph(),h=g.data,i=g.fb,j=null!==i&&null!==i.data?c.Lb(i.data):void 0,k=new H(x),k.Ve(g.Nc),l=k.k;l.next();)m=l.value,m instanceof B||(n=m.data,null!==n?c.Mx(n,j):m.fb=i,m.ib=!0);null!==h?c.Fx(h):b.remove(g)}b.Ga("ChangedSelection"),b.Ga("SelectionUngrouped",d,k)}finally{b.Ie("Ungroup"),b.gc=""}},Ba.prototype.canUngroupSelection=function(a){var b,c;if(void 0===a&&(a=null),b=this.h,null===b||b.hb||b.ff||!b.ll||!b.ep)return!1;if(c=b.ea,null===c||!(c instanceof T))return!1;if(a instanceof z){if(a.canUngroup())return!0}else for(a=b.selection.k;a.next();)if(b=a.value,b instanceof z&&b.canUngroup())return!0;return!1},Ba.prototype.addTopLevelParts=function(a,b){var c,d,e;for(c=!0,d=ef(a).k;d.next();)e=d.value,null!==e.fb&&(!b||this.isValidMember(null,e)?e.fb=null:c=!1);return c},Ba.prototype.collapseSubGraph=function(a){var b,c,d;if(void 0===a&&(a=null),b=this.h,null===b)return!1;if(b.yc("Collapse SubGraph"),c=new H(z),a instanceof z&&a.ie)a.collapseSubGraph(),c.add(a);else for(a=b.selection.k;a.next();)d=a.value,d instanceof z&&d.ie&&(d.collapseSubGraph(),c.add(d));b.Ga("SubGraphCollapsed",c),b.Ie("Collapse SubGraph")},Ba.prototype.canCollapseSubGraph=function(a){void 0===a&&(a=null);var b=this.h;if(null===b||b.hb)return!1;if(a instanceof z)return a.ie?!0:!1;for(a=b.selection.k;a.next();)if(b=a.value,b instanceof z&&b.ie)return!0;return!1},Ba.prototype.expandSubGraph=function(a){var b,c,d;if(void 0===a&&(a=null),b=this.h,null===b)return!1;if(b.yc("Expand SubGraph"),c=new H(z),a instanceof z&&!a.ie)a.expandSubGraph(),c.add(a);else for(a=b.selection.k;a.next();)d=a.value,d instanceof z&&!d.ie&&(d.expandSubGraph(),c.add(d));b.Ga("SubGraphExpanded",c),b.Ie("Expand SubGraph")},Ba.prototype.canExpandSubGraph=function(a){void 0===a&&(a=null);var b=this.h;if(null===b||b.hb)return!1;if(a instanceof z)return a.ie?!1:!0;for(a=b.selection.k;a.next();)if(b=a.value,b instanceof z&&!b.ie)return!0;return!1},Ba.prototype.editTextBlock=function(a){var b,c,d,e;if(void 0===a&&(a=null),b=this.h,null!==b&&(c=b.Cb.Sx,null!==c)){if(null===a){for(a=b.selection.k,d=null;a.next();)if(e=a.value,e.canEdit()){d=e;break}if(null===d)return;a=d.qt(function(a){return a instanceof za&&a.Qw})}null!==a&&a instanceof za&&(c.Xg=a,b.Ya=c)}},Ba.prototype.canEditTextBlock=function(a){void 0===a&&(a=null);var b=this.h;if(null===b||b.hb||b.ff||!b.dp||null===b.Cb.Sx)return!1;if(a instanceof za){if(a=a.U,null!==a&&a.canEdit())return!0}else for(b=b.selection.k;b.next();)if(a=b.value,a.canEdit()&&(a=a.qt(function(a){return a instanceof za&&a.Qw}),null!==a))return!0;return!1},Ba.prototype.showContextMenu=function(a){var c,d,e,b=this.h;null!==b&&(c=b.Cb.Hw,null!==c&&(void 0===a&&(a=0<b.selection.count?b.selection.gb():b),a=c.findObjectWithContextMenu(a),null!==a)&&(d=new Ad,e=null,a instanceof V?e=a.wb(Yb):b.uo||(e=b.Ab,e=new E(e.x+e.width/2,e.y+e.height/2)),null!==e&&(d.Yd=b.MB(e),d.da=e,b.dc=d),b.Ya=c,ff(c,!1,a)))},Ba.prototype.canShowContextMenu=function(a){var c,b=this.h;return null===b?!1:(c=b.Cb.Hw,null===c?!1:(void 0===a&&(a=0<b.selection.count?b.selection.gb():b),null===c.findObjectWithContextMenu(a)?!1:!0))},t.g(Ba,"copiesTree",Ba.prototype.HE),t.defineProperty(Ba,{HE:"copiesTree"},function(){return this.pC},function(a){t.i(a,"boolean",Ba,"copiesTree"),this.pC=a
}),t.g(Ba,"deletesTree",Ba.prototype.UE),t.defineProperty(Ba,{UE:"deletesTree"},function(){return this.zC},function(a){t.i(a,"boolean",Ba,"deletesTree"),this.zC=a}),t.g(Ba,"copiesParentKey",Ba.prototype.nA),t.defineProperty(Ba,{nA:"copiesParentKey"},function(){return this.oC},function(a){t.i(a,"boolean",Ba,"copiesParentKey"),this.oC=a}),t.g(Ba,"copiesGroupKey",Ba.prototype.mA),t.defineProperty(Ba,{mA:"copiesGroupKey"},function(){return this.nC},function(a){t.i(a,"boolean",Ba,"copiesGroupKey"),this.nC=a}),t.g(Ba,"archetypeGroupData",Ba.prototype.dA),t.defineProperty(Ba,{dA:"archetypeGroupData"},function(){return this.Ay},function(a){null!==a&&t.l(a,Object,Ba,"archetypeGroupData");var b=this.h;null!==b&&(b=b.ea,b instanceof T&&(a instanceof z||b.NA(a)||t.m("CommandHandler.archetypeGroupData must be either a Group or a data object for which GraphLinksModel.isGroupForNodeData is true: "+a))),this.Ay=a}),t.g(Ba,"memberValidation",Ba.prototype.Lt),t.defineProperty(Ba,{Lt:"memberValidation"},function(){return this.al},function(a){null!==a&&t.i(a,"function",Ba,"memberValidation"),this.al=a}),t.g(Ba,"defaultScale",Ba.prototype.mt),t.defineProperty(Ba,{mt:"defaultScale"},function(){return this.xC},function(a){t.q(a,Ba,"defaultScale"),a>0||t.m("defaultScale must be larger than zero, not: "+a),this.xC=a}),t.g(Ba,"zoomFactor",Ba.prototype.su),t.defineProperty(Ba,{su:"zoomFactor"},function(){return this.fE},function(a){t.q(a,Ba,"zoomFactor"),a>1||t.m("zoomFactor must be larger than 1.0, not: "+a),this.fE=a}),t.ka("Tool",re),re.prototype.Ed=function(a){e&&null!==a&&t.l(a,v,re,"setDiagram"),this.W=a},re.prototype.toString=function(){return""!==this.name?this.name+" Tool":t.Hg(Object.getPrototypeOf(this))},re.prototype.updateAdornments=function(){},re.prototype.canStart=function(){return this.isEnabled},re.prototype.doStart=function(){},re.prototype.doActivate=function(){this.la=!0},re.prototype.doDeactivate=function(){this.la=!1},re.prototype.doStop=function(){},re.prototype.doCancel=function(){this.stopTool()},re.prototype.stopTool=function(){var a=this.h;null!==a&&a.Ya===this&&(a.Ya=null,a.gc="")},re.prototype.doMouseDown=function(){!this.la&&this.canStart()&&this.doActivate()},re.prototype.doMouseMove=function(){},re.prototype.doMouseUp=function(){this.stopTool()},re.prototype.doMouseWheel=function(){},re.prototype.doKeyDown=function(){var a=this.h;null!==a&&"Esc"===a.T.key&&this.doCancel()},re.prototype.doKeyUp=function(){},re.prototype.startTransaction=re.prototype.yc=function(a){this.of=null;var b=this.h;return null===b?!1:b.yc(a)},re.prototype.stopTransaction=re.prototype.vk=function(){var a=this.h;return null===a?!1:null===this.of?a.bq():a.Ie(this.of)},re.prototype.standardMouseSelect=function(){var b,c,a=this.h;if(null!==a&&a.We)if(b=a.T,c=a.st(b.da,!1),null!==c){if(t.ln?b.Qp:b.control){for(a.Ga("ChangingSelection"),b=c;null!==b&&!b.canSelect();)b=b.fb;null!==b&&(b.ib=!b.ib),a.Ga("ChangedSelection")}else if(b.shift){if(!c.ib){for(a.Ga("ChangingSelection"),b=c;null!==b&&!b.canSelect();)b=b.fb;null!==b&&(b.ib=!0),a.Ga("ChangedSelection")}}else if(!c.ib){for(b=c;null!==b&&!b.canSelect();)b=b.fb;null!==b&&a.select(b)}}else!b.left||(t.ln?b.Qp:b.control)||b.shift||a.Bw()},re.prototype.standardMouseClick=function(a,b){var c,d,e;void 0===a&&(a=null),void 0===b&&(b=function(a){return!a.layer.Dc}),c=this.h,null!==c&&(d=c.T,e=c.fe(d.da,a,b),d.me=e,gf(e,d,c))},re.prototype.standardMouseOver=function(){var b,c,d,e,f,g,h,a=this.h;if(null!==a&&(b=a.T,null!==b.h&&!0!==a.fc.zd)){if(c=a.ab,a.ab=!0,d=a.fe(b.da,null,null),b.me=d,e=!1,d!==a.Tn){for(f=a.Tn,g=f,a.Tn=d,this.doCurrentObjectChanged(f,d);null!==f;){if(h=f.YA,null!==h){if(d===f)break;if(null!==d&&d.sj(f))break;if(h(b,f,d),e=!0,b.Ke)break}f=f.ia}for(f=g;null!==d;){if(h=d.XA,null!==h){if(f===d)break;if(null!==f&&f.sj(d))break;if(h(b,d,f),e=!0,b.Ke)break}d=d.ia}d=a.Tn}if(null!==d){for(f=d,h="";null!==f&&(h=f.cursor,""===h);)f=f.ia;for(a.gc=h,f=d;null!==f&&(h=f.Pt,null===h||(h(b,f),e=!0,!b.Ke));)f=f.ia}else a.gc="",h=a.Pt,null!==h&&(h(b),e=!0);e&&a.ze(),a.ab=c}},re.prototype.doCurrentObjectChanged=function(){},re.prototype.standardMouseWheel=function(){var b,c,d,e,f,a=this.h;null!==a&&(b=a.T,c=b.mk,0!==c&&a.Mc.P()&&(d=a.Ze,e=a.Cb.un,(e===hf&&!b.shift||e===jf&&b.control)&&(c>0?d.canIncreaseZoom():d.canDecreaseZoom())?(e=a.ig,a.ig=b.Yd,c>0?d.increaseZoom():d.decreaseZoom(),a.ig=e,b.bubbles=!1):(e===hf&&b.shift||e===jf&&!b.control)&&(d=a.position.copy(),e=c>0?c:-c,!b.shift&&a.wf?(f=a.fq,e=e/40*f,c>0?a.scroll("pixel","up",e):a.scroll("pixel","down",e)):b.shift&&a.vf&&(f=a.eq,e=e/40*f,c>0?a.scroll("pixel","left",e):a.scroll("pixel","right",e)),a.position.O(d)||(b.bubbles=!1))))},re.prototype.standardWaitAfter=function(a){t.i(a,"number",re,"standardWaitAfter:delay"),this.cancelWaitAfter();var b=this;this.pw=window.setTimeout(function(){b.doWaitAfter()},a)},re.prototype.cancelWaitAfter=function(){-1!==this.pw&&window.clearTimeout(this.pw),this.pw=-1},re.prototype.doWaitAfter=function(){},re.prototype.findToolHandleAt=function(a,b){var d,c=this.h;return null===c?null:(c=c.fe(a,null,function(a){return a=a.U,null===a?!1:null!==a.uc}),null===c?null:(d=c.U,null===d||d.ed!==b?null:c))},re.prototype.isBeyondDragSize=function(a,b){var d,c=this.h;return null===c?!1:(void 0===a&&(a=c.Uc.Yd),void 0===b&&(b=c.T.Yd),d=c.Cb.WE,c=d.width,d=d.height,t.FB&&(c+=6,d+=6),Math.abs(b.x-a.x)>c||Math.abs(b.y-a.y)>d)},t.A(re,{h:"diagram"},function(){return this.W}),t.g(re,"name",re.prototype.name),t.defineProperty(re,{name:"name"},function(){return this.ec},function(a){t.i(a,"string",re,"name"),this.ec=a}),t.g(re,"isEnabled",re.prototype.isEnabled),t.defineProperty(re,{isEnabled:"isEnabled"},function(){return this.Se},function(a){t.i(a,"boolean",re,"isEnabled"),this.Se=a}),t.g(re,"isActive",re.prototype.la),t.defineProperty(re,{la:"isActive"},function(){return this.OC},function(a){t.i(a,"boolean",re,"isActive"),this.OC=a}),t.g(re,"transactionResult",re.prototype.of),t.defineProperty(re,{of:"transactionResult"},function(){return this.bE},function(a){null!==a&&t.i(a,"string",re,"transactionResult"),this.bE=a}),t.ka("DraggingTool",kf),t.Qa(kf,re),t.g(kf,"isCopyEnabled",kf.prototype.LA),t.defineProperty(kf,{LA:"isCopyEnabled"},function(){return this.SC},function(a){t.i(a,"boolean",kf,"isCopyEnabled"),this.SC=a}),t.g(kf,"copiesEffectiveCollection",kf.prototype.GE),t.defineProperty(kf,{GE:"copiesEffectiveCollection"},function(){return this.mC},function(a){t.i(a,"boolean",kf,"copiesEffectiveCollection"),this.mC=a}),t.g(kf,"dragsTree",kf.prototype.XE),t.defineProperty(kf,{XE:"dragsTree"},function(){return this.EC},function(a){t.i(a,"boolean",kf,"dragsTree"),this.EC=a}),t.g(kf,"isGridSnapEnabled",kf.prototype.Fp),t.defineProperty(kf,{Fp:"isGridSnapEnabled"},function(){return this.kr},function(a){t.i(a,"boolean",kf,"isGridSnapEnabled"),this.kr=a}),t.g(kf,"isComplexRoutingRealtime",kf.prototype.EF),t.defineProperty(kf,{EF:"isComplexRoutingRealtime"},function(){return this.RC},function(a){t.i(a,"boolean",kf,"isComplexRoutingRealtime"),this.RC=a}),t.g(kf,"isGridSnapRealtime",kf.prototype.GF),t.defineProperty(kf,{GF:"isGridSnapRealtime"},function(){return this.WC},function(a){t.i(a,"boolean",kf,"isGridSnapRealtime"),this.WC=a}),t.g(kf,"gridSnapCellSize",kf.prototype.FA),t.defineProperty(kf,{FA:"gridSnapCellSize"},function(){return this.iz},function(a){t.l(a,ra,kf,"gridSnapCellSize"),this.iz.O(a)||(this.iz=a=a.ba())}),t.g(kf,"gridSnapCellSpot",kf.prototype.pF),t.defineProperty(kf,{pF:"gridSnapCellSpot"},function(){return this.jz},function(a){t.l(a,L,kf,"gridSnapCellSpot"),this.jz.O(a)||(this.jz=a=a.ba())}),t.g(kf,"gridSnapOrigin",kf.prototype.qF),t.defineProperty(kf,{qF:"gridSnapOrigin"},function(){return this.kz},function(a){t.l(a,E,kf,"gridSnapOrigin"),this.kz.O(a)||(this.kz=a=a.ba())}),t.g(kf,"dragsLink",kf.prototype.li),t.defineProperty(kf,{li:"dragsLink"},function(){return this.DC},function(a){t.i(a,"boolean",kf,"dragsLink"),this.DC=a}),t.g(kf,"currentPart",kf.prototype.lp),t.defineProperty(kf,{lp:"currentPart"},function(){return this.sC},function(a){null!==a&&t.l(a,x,kf,"currentPart"),this.sC=a}),t.g(kf,"copiedParts",kf.prototype.Hc),t.defineProperty(kf,{Hc:"copiedParts"},function(){return this.lC},function(a){this.lC=a}),t.g(kf,"draggedParts",kf.prototype.Ic),t.defineProperty(kf,{Ic:"draggedParts"},function(){return this.CC},function(a){this.CC=a}),t.g(kf,"draggedLink",kf.prototype.Tc),t.defineProperty(kf,{Tc:"draggedLink"},function(){return this.BC},function(a){null!==a&&t.l(a,B,kf,"draggedLink"),this.BC=a}),t.g(kf,"isDragOutStarted",kf.prototype.Dt),t.defineProperty(kf,{Dt:"isDragOutStarted"},function(){return this.UC},function(a){this.UC=a}),t.g(kf,"startPoint",kf.prototype.xj),t.defineProperty(kf,{xj:"startPoint"},function(){return this.bw},function(a){t.l(a,E,kf,"startPoint"),this.bw.O(a)||(this.bw=a=a.ba())}),t.g(kf,"delay",kf.prototype.Nw),t.defineProperty(kf,{Nw:"delay"},function(){return this.co},function(a){t.i(a,"number",kf,"delay"),this.co=a}),kf.prototype.canStart=function(){var a,b;return this.isEnabled?(a=this.h,null!==a&&(a.fk||a.ej||a.at)&&a.We?(b=a.T,!b.left||a.Ya!==this&&(!this.isBeyondDragSize()||b.px&&b.timestamp-a.Uc.timestamp<this.co)?!1:null!==this.findDraggablePart()):!1):!1},kf.prototype.findDraggablePart=function(){var a=this.h;if(null===a)return null;if(a=a.st(a.Uc.da,!1),null===a)return null;for(;null!==a&&!a.canSelect();)a=a.fb;return null!==a&&(a.canMove()||a.canCopy())?a:null},kf.prototype.standardMouseSelect=function(){var b,a=this.h;if(null!==a&&a.We&&(b=a.st(a.Uc.da,!1),null!==b)){for(;null!==b&&!b.canSelect();)b=b.fb;this.lp=b,this.lp.ib||(a.Ga("ChangingSelection"),b=a.T,(t.ln?b.Qp:b.control)||b.shift||cf(a),this.lp.ib=!0,a.Ga("ChangedSelection"))}},kf.prototype.doActivate=function(){var b,a=this.h;null!==a&&(this.standardMouseSelect(),b=this.lp,null!==b&&(b.canMove()||b.canCopy())&&(this.la=!0,this.Ro.set(a.position),lf(this,a.selection),this.Yl=this.Qv=null,this.Ic=this.computeEffectiveCollection(a.selection),a.Oo=!0,uf(this,this.Ic),this.yc("Drag"),this.xj=a.Uc.da,a.Sd=!0,a.at&&(this.Dt=!0,this.Xq=!1,vf=this,wf=this.h,this.doSimulatedDragOut())))},kf.prototype.computeEffectiveCollection=function(a){var d,e,b=null!==this.h&&this.h.Ya===this,c=new wa(x,Object);if(null===a)return c;for(d=a.k;d.next();)e=d.value,yf(this,c,e,b);if(null!==this.Tc&&this.li)return c;for(d=a.k;d.next();)e=d.value,e instanceof B&&(a=e,b=a.ca,null===b||c.contains(b)?(b=a.fa,null===b||c.contains(b)||c.remove(a)):c.remove(a));return c},kf.prototype.doDeactivate=function(){var a,b,c,d;if(this.la=!1,a=this.h,null!==a&&Af(a),Bf(this),Cf(this,this.Ic),this.Ic=null,this.Xq=this.Dt=!1,0<Df.count){for(b=Df.length,c=0;b>c;c++)d=Df.n[c],Ef(d),Ff(d),Bf(d),null!==d.h&&Af(d.h);Df.clear()}Ef(this),this.Ro.gq(0/0,0/0),vf=wf=null,Ff(this),a.Sd=!1,a.gc="",a.Oo=!1,this.vk()},kf.prototype.doCancel=function(){Ff(this),Hf(this);var a=this.h;null!==a&&this.Ro.P()&&(a.position=this.Ro),this.stopTool()},kf.prototype.doKeyDown=function(){var a=this.h;null!==a&&(a=a.T,null!==a&&this.la&&("Esc"===a.key?this.doCancel():this.doMouseMove()))},kf.prototype.doKeyUp=function(){var a=this.h;null!==a&&null!==a.T&&this.la&&this.doMouseMove()},kf.prototype.moveParts=function(a,b,c){var d,e,f,g,h,i,j,k,l,m;if(null!==a&&(t.l(a,wa,kf,"moveParts:parts"),0!==a.count)){for(d=t.N(),e=t.N(),e.assign(b),isNaN(e.x)&&(e.x=0),isNaN(e.y)&&(e.y=0),f=this.ew,f||uf(this,a),g=new H,h=new H(Sa),i=a.k;i.next();)j=i.key,j.Td()?(k=Wf(this,j,a),null!==k?g.add({Kc:j,info:i.value,oJ:k}):(!c||j.canMove())&&(k=i.value.point,d.assign(k),l=t.N(),this.computeMove(j,d.add(e),a,l),j.location=l,t.B(l),i.value.Kz=l.ku(k))):i.key instanceof B&&h.add(i.Db);for(c=g.k;c.next();)g=c.value,k=g.info.point,d.assign(k),g.Kc.location=d.add(g.oJ.Kz);for(k=t.N(),c=t.N(),h=h.k;h.next();)l=h.value,g=l.key,g instanceof B&&(g.kq?(i=g.ca,j=g.fa,null!==this.Tc&&this.li?(l=l.value.point,a.add(g,zf(e)),i=b.x-l.x,j=b.y-l.y,g.Dl(i,j)):(null!==i&&(k.assign(i.location),m=a.Da(i),null!==m&&k.ku(m.point)),null!==j&&(c.assign(j.location),m=a.Da(j),null!==m&&c.ku(m.point)),null!==i&&null!==j?k.Af(c)?(l=l.value.point,i=d,i.assign(k),i.ku(l),a.add(g,zf(k)),g.Dl(i.x,i.y)):(g.kq=!1,g.hc()):(l=l.value.point,a.add(g,zf(null!==i?k:null!==j?c:b)),i=e.x-l.x,j=e.y-l.y,g.Dl(i,j)))):(null===g.ca||null===g.fa)&&(l=l.value.point,a.add(g,zf(b)),i=e.x-l.x,j=e.y-l.y,g.Dl(i,j)));t.B(d),t.B(e),t.B(k),t.B(c),f||Cf(this,a)}},kf.prototype.computeMove=function(a,b,c,d){var e,f,g,h,i,j,k,l;return void 0===d&&(d=new E),d.assign(b),null===a?d:(void 0===c&&(c=null),e=b,this.Fp&&(this.GF||null===c||this.h.T.Aj)&&(e=t.N(),c=e,c.assign(b),null!==a)&&(f=this.h,null!==f&&(g=f.zp,h=this.FA,f=h.width,h=h.height,i=this.qF,j=i.x,i=i.y,k=this.pF,null!==g&&(l=g.vt,isNaN(f)&&(f=l.width),isNaN(h)&&(h=l.height),g=g.EA,isNaN(j)&&(j=g.x),isNaN(i)&&(i=g.y)),g=t.qc(0,0),g.gu(0,0,f,h,k),K.rt(b.x,b.y,j+g.x,i+g.y,f,h,c),t.B(g))),c=null!==a.sA?a.sA(a,b,e):e,h=a.cG,f=h.x,isNaN(f)&&(f=a.location.x),h=h.y,isNaN(h)&&(h=a.location.y),g=a.XF,j=g.x,isNaN(j)&&(j=a.location.x),g=g.y,isNaN(g)&&(g=a.location.y),d.p(Math.max(f,Math.min(c.x,j)),Math.max(h,Math.min(c.y,g))),e!==b&&t.B(e),d)},kf.prototype.doDragOver=function(){},kf.prototype.doDropOnto=function(){},kf.prototype.doMouseMove=function(){var a,b,c;this.la&&(a=this.h,null!==a&&null!==this.lp&&null!==this.Ic&&(b=!1,c=!1,this.mayCopy()?(b=!0,a.gc="copy",Uf(this,!1),uf(this,this.Hc),Vf(this,this.Hc,!1),Cf(this,this.Hc)):this.mayMove()?(c=!0,a.gc="default",Ff(this),Vf(this,this.Ic,!0)):this.mayDragOut()?(a.gc="no-drop",Uf(this,!1),Vf(this,this.Hc,!1)):Ff(this),Yf(this,a.T.da,c,b)))},kf.prototype.doMouseUp=function(){var a,b,c,d;if(this.la&&(a=this.h,null!==a)){if(b=!1,c=this.mayCopy(),c&&null!==this.Hc?(Ff(this),Uf(this,!0),uf(this,this.Hc),Vf(this,this.Hc,!1),Cf(this,this.Hc),null!==this.Hc&&a.FG(this.Hc.Pl())):(b=!0,Ff(this),this.mayMove()&&(Vf(this,this.Ic,!0),this.$v=!1,Yf(this,a.T.da,!0,!1),this.$v=!0)),this.Xq=!0,dg(this,a.T.da),this.la){if(this.Hc=null,b&&null!==this.Ic)for(b=this.Ic.k;b.next();)d=b.key,d instanceof y&&(d=d.fb,null===d||null===d.placeholder||this.Ic.contains(d)||d.kA&&d.ja());a.Vc(),Cf(this,this.Ic),this.of=c?"Copy":"Move",a.Ga(c?"SelectionCopied":"SelectionMoved",a.selection)}this.stopTool()}},kf.prototype.mayCopy=function(){var a,b;if(!this.LA)return!1;if(a=this.h,null===a||a.hb||a.ff||!a.Qm||!a.ej||(t.ln?!a.T.alt:!a.T.control))return!1;for(a=a.selection.k;a.next();)if(b=a.value,b.Td()&&b.canCopy())return!0;return null!==this.Tc&&this.li&&this.Tc.canCopy()?!0:!1},kf.prototype.mayDragOut=function(){var a,b;if(!this.LA)return!1;if(a=this.h,null===a||!a.at||!a.ej||a.fk)return!1;for(a=a.selection.k;a.next();)if(b=a.value,b.Td()&&b.canCopy())return!0;return null!==this.Tc&&this.li&&this.Tc.canCopy()?!0:!1},kf.prototype.mayMove=function(){var b,a=this.h;if(null===a||a.hb||!a.fk)return!1;for(a=a.selection.k;a.next();)if(b=a.value,b.Td()&&b.canMove())return!0;return null!==this.Tc&&this.li&&this.Tc.canMove()?!0:!1},Df=new H(kf),vf=null,wf=null,kf.prototype.mayDragIn=function(){var a=this.h;return null===a||!a.aA||a.hb||a.ff||!a.Qm||null===a.ea?!1:!0},kf.prototype.doSimulatedDragEnter=function(){if(this.mayDragIn()){var a=vf;null!==a&&(a.h.gc="copy")}},kf.prototype.doSimulatedDragLeave=function(){var a=vf;null!==a&&a.doSimulatedDragOut(),this.doCancel()},kf.prototype.doSimulatedDragOver=function(){var b,a=this.h;null!==a&&(b=vf,null!==b&&null!==b.Ic&&this.mayDragIn()&&(a.gc="copy",fg(this,b.Ic.Pl(),!1),Vf(this,this.Hc,!1),Yf(this,a.T.da,!1,!0)))},kf.prototype.doSimulatedDrop=function(){var b,a=this.h;null!==a&&(b=vf,null!==b&&(b.Xq=!0,Ff(this),this.mayDragIn()&&(this.yc("Drop"),fg(this,b.Ic.Pl(),!0),Vf(this,this.Hc,!1),null!==this.Hc&&a.FG(this.Hc.Pl()),this.of="ExternalCopy",dg(this,a.T.da),a.Vc(),this.Hc=null,a.Ga("ExternalObjectsDropped",a.selection),this.vk())))},kf.prototype.doSimulatedDragOut=function(){var a=this.h;null!==a&&(a.gc=this.mayCopy()||this.mayMove()?"":"no-drop")},t.ka("LinkingBaseTool",gg),t.Qa(gg,re),gg.prototype.doStop=function(){var a=this.h;null!==a&&Af(a),this.Ug=this.Tg=this.Sg=this.Rg=this.vc=null,this.Tx.clear(),this.Mf=null},t.g(gg,"portGravity",gg.prototype.gB),t.defineProperty(gg,{gB:"portGravity"},function(){return this.zD},function(a){t.i(a,"number",gg,"portGravity"),a>=0&&(this.zD=a)}),t.g(gg,"isUnconnectedLinkValid",gg.prototype.mn),t.defineProperty(gg,{mn:"isUnconnectedLinkValid"},function(){return this.ZC},function(a){t.i(a,"boolean",gg,"isUnconnectedLinkValid"),this.ZC=a}),t.g(gg,"temporaryLink",gg.prototype.gg),t.defineProperty(gg,{gg:"temporaryLink"},function(){return this.VD},function(a){t.l(a,B,gg,"temporaryLink"),this.VD=a}),t.g(gg,"temporaryFromNode",gg.prototype.ne),t.defineProperty(gg,{ne:"temporaryFromNode"},function(){return this.TD},function(a){t.l(a,y,gg,"temporaryFromNode"),this.TD=a}),t.g(gg,"temporaryFromPort",gg.prototype.Nl),t.defineProperty(gg,{Nl:"temporaryFromPort"},function(){return this.UD},function(a){t.l(a,V,gg,"temporaryFromPort"),this.UD=a}),t.g(gg,"temporaryToNode",gg.prototype.oe),t.defineProperty(gg,{oe:"temporaryToNode"},function(){return this.WD},function(a){t.l(a,y,gg,"temporaryToNode"),this.WD=a}),t.g(gg,"temporaryToPort",gg.prototype.Ol),t.defineProperty(gg,{Ol:"temporaryToPort"},function(){return this.XD},function(a){t.l(a,V,gg,"temporaryToPort"),this.XD=a}),t.g(gg,"originalLink",gg.prototype.vc),t.defineProperty(gg,{vc:"originalLink"},function(){return this.tD},function(a){null!==a&&t.l(a,B,gg,"originalLink"),this.tD=a}),t.g(gg,"originalFromNode",gg.prototype.Rg),t.defineProperty(gg,{Rg:"originalFromNode"},function(){return this.rD},function(a){null!==a&&t.l(a,y,gg,"originalFromNode"),this.rD=a}),t.g(gg,"originalFromPort",gg.prototype.Sg),t.defineProperty(gg,{Sg:"originalFromPort"},function(){return this.sD},function(a){null!==a&&t.l(a,V,gg,"originalFromPort"),this.sD=a}),t.g(gg,"originalToNode",gg.prototype.Tg),t.defineProperty(gg,{Tg:"originalToNode"},function(){return this.wD},function(a){null!==a&&t.l(a,y,gg,"originalToNode"),this.wD=a}),t.g(gg,"originalToPort",gg.prototype.Ug),t.defineProperty(gg,{Ug:"originalToPort"},function(){return this.xD},function(a){null!==a&&t.l(a,V,gg,"originalToPort"),this.xD=a}),t.defineProperty(gg,{he:"isForwards"},function(){return this.VC},function(a){t.i(a,"boolean",gg,"isForwards"),this.VC=a}),t.A(gg,{Tx:"validPortsCache"},function(){return this.TH}),t.g(gg,"targetPort",gg.prototype.Mf),t.defineProperty(gg,{Mf:"targetPort"},function(){return this.PD},function(a){null!==a&&t.l(a,V,gg,"targetPort"),this.PD=a}),gg.prototype.copyPortProperties=function(a,b,c,d,e){if(null!==a&&null!==b&&null!==c&&null!==d){d.Ea=b.pa.size,e?(d.zb=b.zb,d.xk=b.xk):(d.vb=b.vb,d.rk=b.rk),c.hf=Yb;var f=t.N();c.location=b.wb(Yb,f),t.B(f),d.angle=b.ul(),null!==this.Wt&&this.Wt(a,b,c,d,e)}},gg.prototype.setNoTargetPortProperties=function(a,b,c){null!==b&&(b.Ea=K.my,b.vb=Qb,b.zb=Qb),null!==a&&(a.location=this.h.T.da),null!==this.Wt&&this.Wt(null,null,a,b,c)},gg.prototype.doMouseDown=function(){this.la&&this.doMouseMove()},gg.prototype.doMouseMove=function(){var a,b;if(this.la&&(a=this.h,null!==a)){if(this.Mf=this.findTargetPort(this.he),null!==this.Mf&&(b=this.Mf.U,b instanceof y))return this.he?this.copyPortProperties(b,this.Mf,this.oe,this.Ol,!0):this.copyPortProperties(b,this.Mf,this.ne,this.Nl,!1),void 0;this.he?this.setNoTargetPortProperties(this.oe,this.Ol,!0):this.setNoTargetPortProperties(this.ne,this.Nl,!1),(a.vf||a.wf)&&ag(a,a.T.Yd)}},gg.prototype.findValidLinkablePort=function(a,b){var c,d;if(null===a)return null;if(c=a.U,!(c instanceof y))return null;for(;null!==a;){if(d=b?a.JB:a.BA,!0===d&&(null!==a.Wd||a instanceof y)&&(b?this.isValidTo(c,a):this.isValidFrom(c,a)))return a;if(!1===d)break;a=a.ia}return null},gg.prototype.findTargetPort=function(a){var e,f,g,h,i,j,k,b=this.h,c=b.T.da,d=this.gB;for(0>=d&&(d=.1),e=this,f=b.fn(c,d,function(b){return e.findValidLinkablePort(b,a)},null,!0),d=1/0,b=null,f=f.k;f.next();)g=f.value,h=g.U,h instanceof y&&(i=g.wb(Yb,t.N()),j=c.x-i.x,k=c.y-i.y,t.B(i),i=j*j+k*k,d>i&&(j=this.Tx.Da(g),null!==j?j&&(b=g,d=i):a&&this.isValidLink(this.Rg,this.Sg,h,g)||!a&&this.isValidLink(h,g,this.Tg,this.Ug)?(this.Tx.add(g,!0),b=g,d=i):this.Tx.add(g,!1)));return null!==b&&(c=b.U,c instanceof y&&(null===c.layer||c.layer.Rm))?b:null},gg.prototype.isValidFrom=function(a,b){var c,d;if(null===a||null===b)return this.mn;if(this.h.Ya===this&&(null!==a.layer&&!a.layer.Rm||!0!==b.BA))return!1;if(c=b.kF,1/0>c){if(null!==this.vc&&a===this.Rg&&b===this.Sg)return!0;if(d=b.Wd,null===d&&(d=""),a.Uw(d).count>=c)return!1}return!0},gg.prototype.isValidTo=function(a,b){var c,d;if(null===a||null===b)return this.mn;if(this.h.Ya===this&&(null!==a.layer&&!a.layer.Rm||!0!==b.JB))return!1;if(c=b.ZG,1/0>c){if(null!==this.vc&&a===this.Tg&&b===this.Ug)return!0;if(d=b.Wd,null===d&&(d=""),a.Gg(d).count>=c)return!1}return!0},gg.prototype.isInSameNode=function(a,b){if(null===a||null===b)return!1;if(a===b)return!0;var c=a.U,d=b.U;return null!==c&&c===d},gg.prototype.isLinked=function(a,b){var c,d,e,f;if(null===a||null===b)return!1;if(c=a.U,!(c instanceof y))return!1;if(d=a.Wd,null===d&&(d=""),e=b.U,!(e instanceof y))return!1;for(f=b.Wd,null===f&&(f=""),e=e.Gg(f);e.next();)if(f=e.value,f.ca===c&&f.Cf===d)return!0;return!1},gg.prototype.isValidLink=function(a,b,c,d){if(!this.isValidFrom(a,b)||!this.isValidTo(c,d)||!(null===b||null===d||(b.jF&&d.YG||!this.isInSameNode(b,d))&&(b.iF&&d.XG||!this.isLinked(b,d)))||null!==this.vc&&(null!==a&&ng(this,a,this.vc)||null!==c&&ng(this,c,this.vc))||null!==a&&null!==c&&(null===a.data&&null!==c.data||null!==a.data&&null===c.data)||!og(this,a,c,this.vc))return!1;if(null!==a){var e=a.Pp;if(null!==e&&!e(a,b,c,d,this.vc))return!1}return null===c||(e=c.Pp,null===e||e(a,b,c,d,this.vc))?(e=this.Pp,null!==e?e(a,b,c,d,this.vc):!0):!1},t.g(gg,"linkValidation",gg.prototype.Pp),t.defineProperty(gg,{Pp:"linkValidation"},function(){return this.Yk},function(a){null!==a&&t.i(a,"function",gg,"linkValidation"),this.Yk=a}),t.g(gg,"portTargeted",gg.prototype.Wt),t.defineProperty(gg,{Wt:"portTargeted"},function(){return this.AD},function(a){null!==a&&t.i(a,"function",gg,"portTargeted"),this.AD=a}),t.ka("LinkingTool",Ca),t.Qa(Ca,gg),Ca.Either=zg=t.w(Ca,"Either",0),Ca.ForwardsOnly=Ag=t.w(Ca,"ForwardsOnly",0),Ca.BackwardsOnly=Bg=t.w(Ca,"BackwardsOnly",0),t.g(Ca,"archetypeLinkData",Ca.prototype.mE),t.defineProperty(Ca,{mE:"archetypeLinkData"},function(){return this.Cy},function(a){null!==a&&t.l(a,Object,Ca,"archetypeLinkData"),a instanceof V&&t.l(a,B,Ca,"archetypeLinkData"),this.Cy=a}),t.g(Ca,"archetypeLabelNodeData",Ca.prototype.eA),t.defineProperty(Ca,{eA:"archetypeLabelNodeData"},function(){return this.By},function(a){null!==a&&t.l(a,Object,Ca,"archetypeLabelNodeData"),a instanceof V&&t.l(a,y,Ca,"archetypeLabelNodeData"),this.By=a}),t.g(Ca,"direction",Ca.prototype.direction),t.defineProperty(Ca,{direction:"direction"},function(){return this.ua},function(a){t.Fa(a,Ca,Ca,"direction"),this.ua=a}),t.g(Ca,"startObject",Ca.prototype.EB),t.defineProperty(Ca,{EB:"startObject"},function(){return this.LD},function(a){null!==a&&t.l(a,V,Ca,"startObject"),this.LD=a}),t.A(Ca,{Px:"startPort"},function(){return this.Lz}),Ca.prototype.canStart=function(){var a,b;return this.isEnabled?(a=this.h,null===a||a.hb||a.ff||!a.Rm?!1:(b=a.ea,null!==b&&(b instanceof T||b instanceof be)&&a.T.left&&(a.Ya===this||this.isBeyondDragSize())?null!==this.findLinkablePort():!1)):!1},Ca.prototype.findLinkablePort=function(){var b,c,a=this.h;return null===a?null:(b=this.EB,null===b&&(b=a.fe(a.Uc.da,null,null)),null!==b&&b.U instanceof y?(c=this.direction,c!==zg&&c!==Ag||(a=this.findValidLinkablePort(b,!1),null===a)?c!==zg&&c!==Bg||(a=this.findValidLinkablePort(b,!0),null===a)?null:(this.he=!1,a):(this.he=!0,a)):null)},Ca.prototype.doActivate=function(){var b,a=this.h;null!==a&&(null===this.Px&&(this.Lz=this.findLinkablePort()),null!==this.Px)&&(this.yc(this.name),a.Sd=!0,a.gc="pointer",this.he?(this.Sg=this.Px,b=this.Sg.U,b instanceof y&&(this.Rg=b),this.copyPortProperties(this.Rg,this.Sg,this.ne,this.Nl,!1)):(this.Ug=this.Px,b=this.Ug.U,b instanceof y&&(this.Tg=b),this.copyPortProperties(this.Tg,this.Ug,this.oe,this.Ol,!0)),a.add(this.ne),a.add(this.oe),null!==this.gg&&(null!==this.ne&&(this.gg.ca=this.ne),null!==this.oe&&(this.gg.fa=this.oe),this.gg.hc(),a.add(this.gg)),this.la=!0)},Ca.prototype.doDeactivate=function(){this.la=!1;var a=this.h;null!==a&&(a.remove(this.gg),a.remove(this.ne),a.remove(this.oe),a.Sd=!1,a.gc="",this.vk())},Ca.prototype.doStop=function(){gg.prototype.doStop.call(this),this.EB=this.Lz=null},Ca.prototype.doMouseUp=function(){var a,b,c,d,e,f,g;if(this.la){if(a=this.h,null===a)return;b=this.of=null,c=null,d=null,e=null,f=this.Mf=this.findTargetPort(this.he),g=null,null!==f?(g=f.U,g instanceof y&&(this.he?(null!==this.Rg&&(b=this.Rg,c=this.Sg),d=g,e=f):(b=g,c=f,null!==this.Tg&&(d=this.Tg,e=this.Ug)))):this.he?null!==this.Rg&&this.mn&&(b=this.Rg,c=this.Sg):null!==this.Tg&&this.mn&&(d=this.Tg,e=this.Ug),(null!==b||null!==d)&&(b=this.insertLink(b,c,d,e),null!==b?(null===f&&(this.he?b.ao=a.T.da.copy():b.Xn=a.T.da.copy()),a.We&&a.select(b),this.of=this.name,a.Ga("LinkDrawn",b)):a.ea.xE())}this.stopTool()},Ca.prototype.insertLink=function(a,b,c,d){var f,g,e=this.h;if(null===e)return null;if(f=e.ea,null===f)return null;if(f instanceof be){if(g=a,b=c,e.vd||(g=c,b=a),null!==g&&null!==b)return f.yh(b.data,f.Lb(g.data)),b.tt()}else if(f instanceof T)if(g="",null!==a&&(null===b&&(b=a),g=b.Wd,null===g&&(g="")),b="",null!==c&&(null===d&&(d=c),b=d.Wd,null===b&&(b="")),d=this.mE,d instanceof B){if(bf(d),f=d.copy(),f instanceof B)return f.ca=a,f.Cf=g,f.fa=c,f.hg=b,e.add(f),a=this.eA,a instanceof y&&(bf(a),a=a.copy(),a instanceof y&&(a.Dd=f,e.add(a))),f}else if(null!==d&&(d=f.IE(d),t.xb(d)))return null!==a&&f.Lx(d,f.Lb(a.data)),f.yB(d,g),null!==c&&f.Nx(d,f.Lb(c.data)),f.BB(d,b),f.rw(d),a=this.eA,null===a||a instanceof y||(a=f.copyNodeData(a),t.xb(a)&&(f.Pm(a),a=f.Lb(a),void 0!==a&&f.jE(d,a))),f=e.Zf(d);return null},t.ka("RelinkingTool",xf),t.Qa(xf,gg),xf.prototype.updateAdornments=function(a){var b,c,d;null!==a&&a instanceof B&&(b="RelinkFrom",c=null,a.ib&&!this.h.hb&&(d=a.An,null!==d&&a.canRelinkFrom()&&a.pa.P()&&a.Va()&&d.pa.P()&&d.Cl()&&(c=a.pp(b),null===c&&(c=this.makeAdornment(d,!1),c.ed=b,a.il(b,c)))),null===c&&a.Hl(b),b="RelinkTo",c=null,a.ib&&!this.h.hb&&(d=a.An,null!==d&&a.canRelinkTo()&&a.pa.P()&&a.Va()&&d.pa.P()&&d.Cl()&&(c=a.pp(b),null===c&&(c=this.makeAdornment(d,!0),c.ed=b,a.il(b,c)))),null===c&&a.Hl(b))},xf.prototype.makeAdornment=function(a,b){var d,c=new ea;return c.type=Jg,d=b?this.EK:this.jJ,null!==d&&c.add(d.copy()),c.uc=a,c},t.defineProperty(xf,{jJ:"fromHandleArchetype"},function(){return this.KC},function(a){null!==a&&t.l(a,V,xf,"fromHandleArchetype"),this.KC=a}),t.defineProperty(xf,{EK:"toHandleArchetype"},function(){return this.YD},function(a){null!==a&&t.l(a,V,xf,"toHandleArchetype"),this.YD=a}),t.A(xf,{handle:"handle"},function(){return this.kc}),xf.prototype.canStart=function(){var a,b;return this.isEnabled?(a=this.h,null===a||a.hb||a.ff||!a.gk?!1:(b=a.ea,null!==b&&(b instanceof T||b instanceof be)&&a.T.left?(b=this.findToolHandleAt(a.Uc.da,"RelinkFrom"),null===b&&(b=this.findToolHandleAt(a.Uc.da,"RelinkTo")),null!==b):!1)):!1},xf.prototype.doActivate=function(){var b,c,a=this.h;if(null!==a){if(null===this.vc){if(b=this.findToolHandleAt(a.Uc.da,"RelinkFrom"),null===b&&(b=this.findToolHandleAt(a.Uc.da,"RelinkTo")),null===b)return;if(c=b.U,!(c instanceof ea&&c.ii instanceof B))return;this.kc=b,this.he=null===c||"RelinkTo"===c.ed,this.vc=c.ii}this.yc(this.name),a.Sd=!0,a.gc="pointer",this.Sg=this.vc.sd,this.Rg=this.vc.ca,this.Ug=this.vc.Xd,this.Tg=this.vc.fa,this.uD.set(this.vc.pa),null!==this.vc&&0<this.vc.ra&&(null===this.vc.ca&&(null!==this.Nl&&(this.Nl.Ea=K.vq),null!==this.ne&&(this.ne.location=this.vc.o(0))),null===this.vc.fa&&(null!==this.Ol&&(this.Ol.Ea=K.vq),null!==this.oe&&(this.oe.location=this.vc.o(this.vc.ra-1)))),this.copyPortProperties(this.Rg,this.Sg,this.ne,this.Nl,!1),this.copyPortProperties(this.Tg,this.Ug,this.oe,this.Ol,!0),a.add(this.ne),a.add(this.oe),null!==this.gg&&(null!==this.ne&&(this.gg.ca=this.ne),null!==this.oe&&(this.gg.fa=this.oe),this.copyLinkProperties(this.vc,this.gg),this.gg.hc(),a.add(this.gg)),this.la=!0}},xf.prototype.copyLinkProperties=function(a,b){if(null!==a&&null!==b){b.Zo=a.Zo,b.Kw=a.Kw;var c=a.Je;(c===Lg||c===Mg)&&(c=Ng),b.Je=c,b.kt=a.kt,b.bu=a.bu,b.En=a.En,b.vb=a.vb,b.rk=a.rk,b.vp=a.vp,b.wp=a.wp,b.zb=a.zb,b.xk=a.xk,b.lq=a.lq,b.mq=a.mq}},xf.prototype.doDeactivate=function(){this.la=!1;var a=this.h;null!==a&&(a.remove(this.gg),a.remove(this.ne),a.remove(this.oe),a.Sd=!1,a.gc="",this.vk())},xf.prototype.doStop=function(){gg.prototype.doStop.call(this),this.kc=null},xf.prototype.doMouseUp=function(){var a,b,c,d,e,f,g;if(this.la){if(a=this.h,null===a)return;this.of=null,b=this.Rg,c=this.Sg,d=this.Tg,e=this.Ug,f=this.vc,this.Mf=this.findTargetPort(this.he),null!==this.Mf?(g=this.Mf.U,g instanceof y&&(this.he?(d=g,e=this.Mf):(b=g,c=this.Mf))):this.mn?this.he?e=d=null:c=b=null:f=null,null!==f&&(this.reconnectLink(f,this.he?d:b,this.he?e:c,this.he),null===this.Mf&&(this.he?f.ao=a.T.da.copy():f.Xn=a.T.da.copy(),f.hc()),a.We&&(f.ib=!0),this.of=this.name,a.Ga("LinkRelinked",f,this.he?this.Ug:this.Sg)),Og(this.vc,this.uD)}this.stopTool()},xf.prototype.reconnectLink=function(a,b,c,d){return null===this.h?!1:(c=null!==c&&null!==c.Wd?c.Wd:"",d?(a.fa=b,a.hg=c):(a.ca=b,a.Cf=c),!0)},t.ka("LinkReshapingTool",Pg),t.Qa(Pg,re),Pg.None=Qg=t.w(Pg,"None",0),Pg.Horizontal=Rg=t.w(Pg,"Horizontal",1),Pg.Vertical=Sg=t.w(Pg,"Vertical",2),Pg.All=Tg=t.w(Pg,"All",3),Pg.prototype.updateAdornments=function(a){var b,c;if(null!==a&&a instanceof B){if(a.ib&&!this.h.hb&&(b=a.path,null!==b&&a.canReshape()&&a.pa.P()&&a.Va()&&b.pa.P()&&b.Cl()&&(c=a.pp(this.name),(null===c||c.MH!==a.ra||c.VH!==a.Zp)&&(c=this.makeAdornment(b),c.MH=a.ra,c.VH=a.Zp,a.il(this.name,c)),null!==c)))return c.location=a.position,void 0;a.Hl(this.name)}},Pg.prototype.makeAdornment=function(a){var f,g,h,i,j,b=a.U,c=b.ra,d=b.pc,e=null;if(null!==b.points&&c>1){if(e=new ea,e.type=Jg,c=b.ut,f=b.sx,g=d?1:0,b.Zp&&b.Je!==Vg)for(h=c+g;f-g>h;h++)i=this.makeResegmentHandle(a,h),null!==i&&(i.Jf=h,i.cu=.5,e.add(i));for(h=c+1;f>h;h++)i=this.makeHandle(a,h),null!==i&&(i.Jf=h,h!==c&&(h===c+1&&d?(g=b.o(c),j=b.o(c+1),K.I(g.x,j.x)&&K.I(g.y,j.y)&&(j=b.o(c-1)),K.I(g.x,j.x)?(Ug(i,Sg),i.cursor="n-resize"):K.I(g.y,j.y)&&(Ug(i,Rg),i.cursor="w-resize")):h===f-1&&d?(g=b.o(f-1),j=b.o(f),K.I(g.x,j.x)&&K.I(g.y,j.y)&&(g=b.o(f+1)),K.I(g.x,j.x)?(Ug(i,Sg),i.cursor="n-resize"):K.I(g.y,j.y)&&(Ug(i,Rg),i.cursor="w-resize")):h!==f&&(Ug(i,Tg),i.cursor="move")),e.add(i));e.ed=this.name,e.uc=a}return e},Pg.prototype.makeHandle=function(){var a=this.wt;return null===a?null:a.copy()},t.defineProperty(Pg,{wt:"handleArchetype"},function(){return this.Sk},function(a){null!==a&&t.l(a,V,Pg,"handleArchetype"),this.Sk=a}),Pg.prototype.makeResegmentHandle=function(){var a=this.RJ;return null===a?null:a.copy()},t.defineProperty(Pg,{RJ:"midHandleArchetype"},function(){return this.fD},function(a){null!==a&&t.l(a,V,Pg,"midHandleArchetype"),this.fD=a}),t.A(Pg,{handle:"handle"},function(){return this.kc}),t.A(Pg,{$s:"adornedLink"},function(){return this.zy}),Pg.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.h;return null!==a&&!a.hb&&a.ap&&a.T.left?null!==this.findToolHandleAt(a.Uc.da,this.name):!1},Pg.prototype.doActivate=function(){var b,c,d,a=this.h;null!==a&&(this.kc=this.findToolHandleAt(a.Uc.da,this.name),null!==this.kc)&&(b=this.kc.U.ii,b instanceof B&&(this.zy=b,a.Sd=!0,this.yc(this.name),b.Zp&&.5===this.kc.cu&&(c=b.points.copy(),d=this.kc.wb(Yb),c.Rd(this.kc.Jf+1,d),b.pc&&c.Rd(this.kc.Jf+1,d),b.points=c,b.Yf(),b.updateAdornments(),this.kc=this.findToolHandleAt(a.Uc.da,this.name)),this.vD=b.o(this.kc.Jf),this.Dz=b.points.copy(),this.la=!0))
},Pg.prototype.doDeactivate=function(){this.vk(),this.zy=this.kc=null;var a=this.h;null!==a&&(a.Sd=!1),this.la=!1},Pg.prototype.doCancel=function(){var a=this.$s;null!==a&&(a.points=this.Dz),this.stopTool()},Pg.prototype.doMouseMove=function(){var a=this.h;this.la&&null!==a&&(a=this.computeReshape(a.T.da),this.reshape(a))},Pg.prototype.doMouseUp=function(){var b,c,d,e,f,g,h,a=this.h;this.la&&null!==a&&(b=this.computeReshape(a.T.da),this.reshape(b),b=this.$s,null!==b&&b.Zp&&(c=this.handle.Jf,d=b.o(c-1),e=b.o(c),f=b.o(c+1),b.pc?c>b.ut+1&&c<b.sx-1&&(g=b.o(c-2),Math.abs(d.x-e.x)<this.Vg&&Math.abs(d.y-e.y)<this.Vg&&(Wg(this,g,d,e,f,!0)||Wg(this,g,d,e,f,!1))?(h=b.points.copy(),Wg(this,g,d,e,f,!0)?(h.Wg(c-2,new E(g.x,(f.y+g.y)/2)),h.Wg(c+1,new E(f.x,(f.y+g.y)/2))):(h.Wg(c-2,new E((f.x+g.x)/2,g.y)),h.Wg(c+1,new E((f.x+g.x)/2,f.y))),h.wd(c),h.wd(c-1),b.points=h,b.Yf(),b.updateAdornments()):(g=b.o(c+2),Math.abs(e.x-f.x)<this.Vg&&Math.abs(e.y-f.y)<this.Vg&&(Wg(this,d,e,f,g,!0)||Wg(this,d,e,f,g,!1))&&(h=b.points.copy(),Wg(this,d,e,f,g,!0)?(h.Wg(c-1,new E(d.x,(d.y+g.y)/2)),h.Wg(c+2,new E(g.x,(d.y+g.y)/2))):(h.Wg(c-1,new E((d.x+g.x)/2,d.y)),h.Wg(c+2,new E((d.x+g.x)/2,g.y))),h.wd(c+1),h.wd(c),b.points=h,b.Yf(),b.updateAdornments()))):(g=t.N(),K.vn(d.x,d.y,f.x,f.y,e.x,e.y,g)&&g.nk(e)<this.Vg*this.Vg&&(h=b.points.copy(),h.wd(c),b.points=h,b.Yf(),b.updateAdornments()),t.B(g))),a.Vc(),this.of=this.name,a.Ga("LinkReshaped",this.$s)),this.stopTool()},t.g(Pg,"resegmentingDistance",Pg.prototype.Vg),t.defineProperty(Pg,{Vg:"resegmentingDistance"},function(){return this.BD},function(a){t.i(a,"number",Pg,"resegmentingDistance"),this.BD=a}),Pg.prototype.reshape=function(a){var c,d,e,f,g,b=this.$s;b.Kl(),c=this.handle.Jf,d=this.handle&&this.handle.Rv?this.handle.Rv:Qg,b.pc?c===b.ut+1?(c=b.ut+1,d===Sg?(b.aa(c,b.o(c-1).x,a.y),b.aa(c+1,b.o(c+2).x,a.y)):d===Rg&&(b.aa(c,a.x,b.o(c-1).y),b.aa(c+1,a.x,b.o(c+2).y))):c===b.sx-1?(c=b.sx-1,d===Sg?(b.aa(c-1,b.o(c-2).x,a.y),b.aa(c,b.o(c+1).x,a.y)):d===Rg&&(b.aa(c-1,a.x,b.o(c-2).y),b.aa(c,a.x,b.o(c+1).y))):(d=c,e=b.o(d),f=b.o(d-1),g=b.o(d+1),K.I(f.x,e.x)&&K.I(e.y,g.y)?(K.I(f.x,b.o(d-2).x)&&!K.I(f.y,b.o(d-2).y)?(b.C(d,a.x,f.y),c++,d++):b.aa(d-1,a.x,f.y),K.I(g.y,b.o(d+2).y)&&!K.I(g.x,b.o(d+2).x)?b.C(d+1,g.x,a.y):b.aa(d+1,g.x,a.y)):K.I(f.y,e.y)&&K.I(e.x,g.x)?(K.I(f.y,b.o(d-2).y)&&!K.I(f.x,b.o(d-2).x)?(b.C(d,f.x,a.y),c++,d++):b.aa(d-1,f.x,a.y),K.I(g.x,b.o(d+2).x)&&!K.I(g.y,b.o(d+2).y)?b.C(d+1,a.x,g.y):b.aa(d+1,a.x,g.y)):K.I(f.x,e.x)&&K.I(e.x,g.x)?(K.I(f.x,b.o(d-2).x)&&!K.I(f.y,b.o(d-2).y)?(b.C(d,a.x,f.y),c++,d++):b.aa(d-1,a.x,f.y),K.I(g.x,b.o(d+2).x)&&!K.I(g.y,b.o(d+2).y)?b.C(d+1,a.x,g.y):b.aa(d+1,a.x,g.y)):K.I(f.y,e.y)&&K.I(e.y,g.y)&&(K.I(f.y,b.o(d-2).y)&&!K.I(f.x,b.o(d-2).x)?(b.C(d,f.x,a.y),c++,d++):b.aa(d-1,f.x,a.y),K.I(g.y,b.o(d+2).y)&&!K.I(g.x,b.o(d+2).x)?b.C(d+1,g.x,a.y):b.aa(d+1,g.x,a.y)),b.aa(c,a.x,a.y)):(b.aa(c,a.x,a.y),1===c&&b.computeSpot(!0).Me()&&(e=b.ca,f=b.sd,null===e||e.Va()||(e=e.findVisibleNode(),e!==b.ca&&(f=e.tl(""))),d=f.wb(Yb,t.N()),e=b.getLinkPointFromPoint(e,f,d,a,!0,t.N()),b.aa(0,e.x,e.y),t.B(d),t.B(e)),c===b.ra-2&&b.computeSpot(!1).Me()&&(c=b.fa,e=b.Xd,null===c||c.Va()||(c=c.findVisibleNode(),c!==b.fa&&(e=c.tl(""))),d=e.wb(Yb,t.N()),e=b.getLinkPointFromPoint(c,e,d,a,!1,t.N()),b.aa(b.ra-1,e.x,e.y),t.B(d),t.B(e))),b.jj()},Pg.prototype.computeReshape=function(a){var b=this.$s,c=this.handle.Jf;switch(this.handle&&this.handle.Rv?this.handle.Rv:Qg){case Tg:return a;case Sg:return b=b.o(c),new E(b.x,a.y);case Rg:return b=b.o(c),new E(a.x,b.y);default:case Qg:return b.o(c)}},t.g(Pg,"originalPoint",Pg.prototype.aK),t.A(Pg,{aK:"originalPoint"},function(){return this.vD}),t.g(Pg,"originalPoints",Pg.prototype.bK),t.A(Pg,{bK:"originalPoints"},function(){return this.Dz}),t.ka("ResizingTool",Xg),t.Qa(Xg,re),Xg.prototype.updateAdornments=function(a){var b,c,d,e,f,g;if(!(null===a||a instanceof B)){if(a.ib&&!this.h.hb&&(b=a.vG,null!==b&&a.canResize()&&a.pa.P()&&a.Va()&&b.pa.P()&&b.Cl()&&(c=a.pp(this.name),null===c&&(c=this.makeAdornment(b)),null!==c)))return d=b.ul(),c.angle=d,e=b.wb(c.hf,t.N()),f=b.sk(),c.location=e,t.B(e),e=c.placeholder,null!==e&&(b=b.Ja,g=t.Ml(),g.p(b.width*f,b.height*f),e.Ea=g,t.qk(g)),Yg(this,c,d),a.il(this.name,c),void 0;a.Hl(this.name)}},Xg.prototype.makeAdornment=function(a){var c,b=null;if(b=a.U.tG,null===b)b=new ea,b.type=Zg,b.hf=Yb,c=new $g,c.pi=!0,b.add(c),b.add(this.makeHandle(a,Vb)),b.add(this.makeHandle(a,Xb)),b.add(this.makeHandle(a,bc)),b.add(this.makeHandle(a,$b)),b.add(this.makeHandle(a,cc)),b.add(this.makeHandle(a,hc)),b.add(this.makeHandle(a,mc)),b.add(this.makeHandle(a,gc));else if(bf(b),b=b.copy(),!(b instanceof ea))return null;return b.ed=this.name,b.uc=a,b},Xg.prototype.makeHandle=function(a,b){var c=this.wt;return null===c?null:(c=c.copy(),c.alignment=b,c)},t.defineProperty(Xg,{wt:"handleArchetype"},function(){return this.Sk},function(a){null!==a&&t.l(a,V,Xg,"handleArchetype"),this.Sk=a}),t.A(Xg,{handle:"handle"},function(){return this.kc}),t.defineProperty(Xg,{uc:"adornedObject"},function(){return this.ob},function(a){null!==a&&t.l(a,V,Xg,"adornedObject"),this.ob=a}),Xg.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.h;return null!==a&&!a.hb&&a.bp&&a.T.left?null!==this.findToolHandleAt(a.Uc.da,this.name)?!0:!1:!1},Xg.prototype.doActivate=function(){var a=this.h;null!==a&&(this.kc=this.findToolHandleAt(a.Uc.da,this.name),null!==this.kc&&(this.ob=this.kc.U.uc,this.Cz.set(this.ob.U.location),this.Mv.set(this.ob.Ea),this.dz=this.computeCellSize(),this.fz=this.computeMinSize(),this.ez=this.computeMaxSize(),a.Sd=!0,this.oD=a.fc.isEnabled,a.fc.isEnabled=!1,this.yc(this.name),this.la=!0))},Xg.prototype.doDeactivate=function(){var a=this.h;null!==a&&(this.vk(),this.ob=this.kc=null,this.la=a.Sd=!1,a.fc.isEnabled=this.oD)},Xg.prototype.doCancel=function(){this.ob.Ea=this.Mv,this.ob.U.location=this.Cz,this.stopTool()},Xg.prototype.doMouseMove=function(){var b,c,d,e,f,a=this.h;this.la&&null!==a&&(b=this.fz,c=this.ez,d=this.dz,e=this.ob.nF(a.T.da,t.N()),f=ah,this.ob instanceof W&&(f=this.ob.$w,f===bh&&(f=this.ob.Ta.Ac)),b=this.computeResize(e,this.kc.alignment,b,c,d,!(f===ch||f===dh||a.T.shift)),this.resize(b),a.bg(),t.B(e))},Xg.prototype.doMouseUp=function(){var b,c,d,e,f,a=this.h;this.la&&null!==a&&(b=this.fz,c=this.ez,d=this.dz,e=this.ob.nF(a.T.da,t.N()),f=ah,this.ob instanceof W&&(f=this.ob.$w,f===bh&&(f=this.ob.Ta.Ac)),b=this.computeResize(e,this.kc.alignment,b,c,d,!(f===ch||f===dh||a.T.shift)),this.resize(b),t.B(e),a.Vc(),this.of=this.name,a.Ga("PartResized",this.ob,this.Mv)),this.stopTool()},Xg.prototype.resize=function(a){if(null!==this.h){var b=this.uc,c=b.U,d=b.ul(),e=b.sk(),f=Math.PI*d/180,g=Math.cos(f),f=Math.sin(f),h=d>0&&180>d?1:0,i=d>90&&270>d?1:0,d=d>180&&360>d?1:0,j=a.width-b.Ja.width,k=a.height-b.Ja.height,l=c.position.copy();l.x+=e*((a.x+j*i)*g-(a.y+k*h)*f),l.y+=e*((a.x+j*d)*f+(a.y+k*i)*g),b.Ea=a.size,c.zf(),c.move(l)}},Xg.prototype.computeResize=function(a,b,c,d,e,f){var g,h,i,j,k,l,m;return b.Me()&&(b=Yb),g=this.uc.Ja,h=g.x,i=g.y,j=g.x+g.width,k=g.y+g.height,l=1,f||(l=g.width,m=g.height,0>=l&&(l=1),0>=m&&(m=1),l=m/l),m=t.N(),K.rt(a.x,a.y,h,i,e.width,e.height,m),a=g.copy(),0>=b.x?0>=b.y?(a.x=Math.max(m.x,j-d.width),a.x=Math.min(a.x,j-c.width),a.width=Math.max(j-a.x,c.width),a.y=Math.max(m.y,k-d.height),a.y=Math.min(a.y,k-c.height),a.height=Math.max(k-a.y,c.height),f||(b=a.height/a.width,b>l?(a.height=l*a.width,a.y=k-a.height):(a.width=a.height/l,a.x=j-a.width))):1<=b.y?(a.x=Math.max(m.x,j-d.width),a.x=Math.min(a.x,j-c.width),a.width=Math.max(j-a.x,c.width),a.height=Math.max(Math.min(m.y-i,d.height),c.height),f||(b=a.height/a.width,b>l?a.height=l*a.width:(a.width=a.height/l,a.x=j-a.width))):(a.x=Math.max(m.x,j-d.width),a.x=Math.min(a.x,j-c.width),a.width=j-a.x,f||(a.height=l*a.width,a.y=i+.5*(k-i-a.height))):1<=b.x?0>=b.y?(a.width=Math.max(Math.min(m.x-h,d.width),c.width),a.y=Math.max(m.y,k-d.height),a.y=Math.min(a.y,k-c.height),a.height=Math.max(k-a.y,c.height),f||(b=a.height/a.width,b>l?(a.height=l*a.width,a.y=k-a.height):a.width=a.height/l)):1<=b.y?(a.width=Math.max(Math.min(m.x-h,d.width),c.width),a.height=Math.max(Math.min(m.y-i,d.height),c.height),f||(b=a.height/a.width,b>l?a.height=l*a.width:a.width=a.height/l)):(a.width=Math.max(Math.min(m.x-h,d.width),c.width),f||(a.height=l*a.width,a.y=i+.5*(k-i-a.height))):0>=b.y?(a.y=Math.max(m.y,k-d.height),a.y=Math.min(a.y,k-c.height),a.height=k-a.y,f||(a.width=a.height/l,a.x=h+.5*(j-h-a.width))):1<=b.y&&(a.height=Math.max(Math.min(m.y-i,d.height),c.height),f||(a.width=a.height/l,a.x=h+.5*(j-h-a.width))),t.B(m),a},Xg.prototype.computeMinSize=function(){var a=this.uc.cg.copy(),b=this.cg;return!isNaN(b.width)&&b.width>a.width&&(a.width=b.width),!isNaN(b.height)&&b.height>a.height&&(a.height=b.height),a},Xg.prototype.computeMaxSize=function(){var a=this.uc.Oe.copy(),b=this.Oe;return!isNaN(b.width)&&b.width<a.width&&(a.width=b.width),!isNaN(b.height)&&b.height<a.height&&(a.height=b.height),a},Xg.prototype.computeCellSize=function(){var c,a=new ra(0/0,0/0),b=this.uc.U;return b&&(c=b.uG,!isNaN(c.width)&&0<c.width&&(a.width=c.width),!isNaN(c.height)&&0<c.height&&(a.height=c.height)),c=this.ml,isNaN(a.width)&&!isNaN(c.width)&&0<c.width&&(a.width=c.width),isNaN(a.height)&&!isNaN(c.height)&&0<c.height&&(a.height=c.height),b=this.h,(isNaN(a.width)||isNaN(a.height))&&b&&(c=b.Cb.Od,null!==c&&c.Fp&&(c=c.FA,isNaN(a.width)&&!isNaN(c.width)&&0<c.width&&(a.width=c.width),isNaN(a.height)&&!isNaN(c.height)&&0<c.height&&(a.height=c.height)),b=b.zp,null!==b&&b.visible&&this.Fp&&(c=b.vt,isNaN(a.width)&&!isNaN(c.width)&&0<c.width&&(a.width=c.width),isNaN(a.height)&&!isNaN(c.height)&&0<c.height&&(a.height=c.height))),(isNaN(a.width)||0===a.width||1/0===a.width)&&(a.width=1),(isNaN(a.height)||0===a.height||1/0===a.height)&&(a.height=1),a},t.g(Xg,"minSize",Xg.prototype.cg),t.defineProperty(Xg,{cg:"minSize"},function(){return this.Tj},function(a){if(t.l(a,ra,Xg,"minSize"),!this.Tj.O(a)){var b=a.width;isNaN(b)&&(b=0),a=a.height,isNaN(a)&&(a=0),this.Tj.p(b,a)}}),t.g(Xg,"maxSize",Xg.prototype.Oe),t.defineProperty(Xg,{Oe:"maxSize"},function(){return this.Sj},function(a){if(t.l(a,ra,Xg,"maxSize"),!this.Sj.O(a)){var b=a.width;isNaN(b)&&(b=1/0),a=a.height,isNaN(a)&&(a=1/0),this.Sj.p(b,a)}}),t.g(Xg,"cellSize",Xg.prototype.ml),t.defineProperty(Xg,{ml:"cellSize"},function(){return this.Ej},function(a){t.l(a,ra,Xg,"cellSize"),this.Ej.O(a)||this.Ej.assign(a)}),t.g(Xg,"isGridSnapEnabled",Xg.prototype.Fp),t.defineProperty(Xg,{Fp:"isGridSnapEnabled"},function(){return this.kr},function(a){t.i(a,"boolean",Xg,"isGridSnapEnabled"),this.kr=a}),t.g(Xg,"originalDesiredSize",Xg.prototype.ZJ),t.A(Xg,{ZJ:"originalDesiredSize"},function(){return this.Mv}),t.g(Xg,"originalLocation",Xg.prototype.$J),t.A(Xg,{$J:"originalLocation"},function(){return this.Cz}),t.ka("RotatingTool",eh),t.Qa(eh,re),eh.prototype.updateAdornments=function(a){var b,c,d,e,f,g;if(!(null===a||a instanceof B)){if(a.ib&&!this.h.hb&&(b=a.zG,null!==b&&a.canRotate()&&a.pa.P()&&a.Va()&&b.pa.P()&&b.Cl()&&(c=a.pp(this.name),null===c&&(c=this.makeAdornment(b)),null!==c))){for(c.angle=b.ul(),d=null,e=null,b===a||b===a.Zb?(d=a.Zb,e=a.hf):(d=b,e=Yb),f=d.Ja,e=t.qc(f.width*e.x+e.offsetX,f.height*e.y+e.offsetY);null!==d&&d!==b;)d.transform.Xa(e),d=d.ia;return d=e.y,f=Math.max(e.x-b.Ja.width,0),g=t.N(),c.location=b.wb(new L(1,0,50+f,d),g),t.B(g),t.B(e),a.il(this.name,c),void 0}a.Hl(this.name)}},eh.prototype.makeAdornment=function(a){var c,b=null;if(b=a.U.yG,null===b)b=new ea,b.type=fh,b.hf=Yb,c=this.wt,null!==c&&b.add(c.copy());else if(bf(b),b=b.copy(),!(b instanceof ea))return null;return b.ed=this.name,b.uc=a,b},t.defineProperty(eh,{wt:"handleArchetype"},function(){return this.Sk},function(a){null!==a&&t.l(a,V,eh,"handleArchetype"),this.Sk=a}),t.A(eh,{handle:"handle"},function(){return this.kc}),t.defineProperty(eh,{uc:"adornedObject"},function(){return this.ob},function(a){null!==a&&t.l(a,V,eh,"adornedObject"),this.ob=a}),eh.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.h;return null!==a&&!a.hb&&a.cp&&a.T.left?null!==this.findToolHandleAt(a.Uc.da,this.name)?!0:!1:!1},eh.prototype.doActivate=function(){var b,c,a=this.h;null!==a&&(this.kc=this.findToolHandleAt(a.Uc.da,this.name),null!==this.kc)&&(this.ob=this.kc.U.uc,b=this.ob.U,c=b.Zb,this.CD=this.ob===b||this.ob===c?c.wb(b.hf):this.ob.wb(Yb),this.Lv=this.ob.angle,a.Sd=!0,a.Ow=!0,this.yc(this.name),this.la=!0)},eh.prototype.doDeactivate=function(){var a=this.h;null!==a&&(this.vk(),this.ob=this.kc=null,this.la=a.Sd=!1)},eh.prototype.doCancel=function(){var a=this.h;a&&(a.Ow=!1),this.rotate(this.Lv),this.stopTool()},eh.prototype.doMouseMove=function(){var a=this.h;this.la&&null!==a&&(a=this.computeRotate(a.T.da),this.rotate(a))},eh.prototype.doMouseUp=function(){var b,a=this.h;this.la&&null!==a&&(a.Ow=!1,b=this.computeRotate(a.T.da),this.rotate(b),a.Vc(),this.of=this.name,a.Ga("PartRotated",this.ob,this.Lv)),this.stopTool()},eh.prototype.rotate=function(a){e&&t.q(a,eh,"rotate:newangle"),null!==this.ob&&(this.ob.angle=a)},eh.prototype.computeRotate=function(a){var b,c;return a=this.CD.nj(a),b=this.ob.ia,b&&(a-=b.ul(),a>=360?a-=360:0>a&&(a+=360)),b=Math.min(Math.abs(this.SG),180),c=Math.min(Math.abs(this.RG),b/2),!this.h.T.shift&&b>0&&c>0&&(c>a%b?a=Math.floor(a/b)*b:a%b>b-c&&(a=(Math.floor(a/b)+1)*b)),a>=360?a-=360:0>a&&(a+=360),a},t.g(eh,"snapAngleMultiple",eh.prototype.SG),t.defineProperty(eh,{SG:"snapAngleMultiple"},function(){return this.HD},function(a){t.i(a,"number",eh,"snapAngleMultiple"),this.HD=a}),t.g(eh,"snapAngleEpsilon",eh.prototype.RG),t.defineProperty(eh,{RG:"snapAngleEpsilon"},function(){return this.GD},function(a){t.i(a,"number",eh,"snapAngleEpsilon"),this.GD=a}),t.g(eh,"originalAngle",eh.prototype.YJ),t.A(eh,{YJ:"originalAngle"},function(){return this.Lv}),t.ka("ClickSelectingTool",gh),t.Qa(gh,re),gh.prototype.canStart=function(){return!this.isEnabled||null===this.h||this.isBeyondDragSize()?!1:!0},gh.prototype.doMouseUp=function(){this.la&&(this.standardMouseSelect(),this.standardMouseClick()),this.stopTool()},t.ka("ActionTool",hh),t.Qa(hh,re),hh.prototype.canStart=function(){var a,b,c;return this.isEnabled?(a=this.h,null===a?!1:(b=a.T,c=a.fe(b.da,function(a){for(;null!==a.ia&&!a.Bt;)a=a.ia;return a},function(a){return a.Bt}),null!==c?(this.Ln=c,a.Tn=a.fe(b.da,null,null),!0):!1)):!1},hh.prototype.doMouseDown=function(){if(this.la){var a=this.h.T,b=this.Ln;null!==b&&(a.me=b,null!==b.Wz&&b.Wz(a,b))}else this.canStart()&&this.doActivate()},hh.prototype.doMouseMove=function(){if(this.la){var a=this.h.T,b=this.Ln;null!==b&&(a.me=b,null!==b.Xz&&b.Xz(a,b))}},hh.prototype.doMouseUp=function(){if(this.la){var a=this.h,b=a.T,c=this.Ln;if(null===c)return;b.me=c,null!==c.Yz&&c.Yz(b,c),this.isBeyondDragSize()||gf(c,b,a)}this.stopTool()},hh.prototype.doCancel=function(){var b,a=this.h;if(null!==a){if(a=a.T,b=this.Ln,null===b)return;a.me=b,null!==b.Vz&&b.Vz(a,b)}this.stopTool()},hh.prototype.doStop=function(){this.Ln=null},t.ka("ClickCreatingTool",Da),t.Qa(Da,re),Da.prototype.canStart=function(){if(!this.isEnabled||null===this.ct)return!1;var a=this.h;if(null===a||a.hb||a.ff||!a.Qm||!a.T.left||this.isBeyondDragSize())return!1;if(this.FF){if(1===a.T.Ge&&(this.JC=a.T.Yd.copy()),2!==a.T.Ge||this.isBeyondDragSize(this.JC))return!1}else if(1!==a.T.Ge)return!1;return a.Ya!==this&&null!==a.st(a.T.da,!0)?!1:!0},Da.prototype.doMouseUp=function(){var a=this.h;this.la&&null!==a&&this.insertPart(a.T.da),this.stopTool()},Da.prototype.insertPart=function(a){var c,d,b=this.h;return null===b?null:(c=this.ct,null===c?null:(this.yc(this.name),d=null,c instanceof x?c.Td()&&(bf(c),d=c.copy(),d instanceof x&&b.add(d)):null!==c&&(c=b.ea.copyNodeData(c),t.xb(c)&&(b.ea.Pm(c),d=b.sh(c))),d instanceof x&&(d.location=a,b.We&&b.select(d)),b.Vc(),this.of=this.name,b.Ga("PartCreated",d),this.vk(),d instanceof x?d:null))},t.g(Da,"archetypeNodeData",Da.prototype.ct),t.defineProperty(Da,{ct:"archetypeNodeData"},function(){return this.Kk},function(a){null!==a&&t.l(a,Object,Da,"archetypeNodeData"),this.Kk=a}),t.g(Da,"isDoubleClick",Da.prototype.FF),t.defineProperty(Da,{FF:"isDoubleClick"},function(){return this.TC},function(a){t.i(a,"boolean",Da,"isDoubleClick"),this.TC=a}),t.ka("ContextMenuTool",ih),t.Qa(ih,re),ih.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.h;return null===a||this.isBeyondDragSize()||!a.T.right?!1:(null===this.bo||a.T.event instanceof MouseEvent)&&null===this.findObjectWithContextMenu()?!1:!0},ih.prototype.doStart=function(){var a=this.h;null!==a&&this.iD.set(a.Uc.da)},ih.prototype.doStop=function(){this.hideDefaultContextMenu(),this.hideContextMenu(),this.Un=null},ih.prototype.findObjectWithContextMenu=function(a){var c,d,b=this.h;if(null===b)return null;if(c=b.T,d=null,d=void 0!==a?a:b.fe(c.da,null,function(a){return!a.layer.Dc}),null!==d){for(a=d;null!==a;){if(c=a.contextMenu,null!==c)return a;a=a.ia}if(null!==this.bo&&!(b.T.event instanceof MouseEvent))return d.U}else if(c=b.contextMenu,null!==c)return b;return null},ih.prototype.doActivate=function(){},ih.prototype.doMouseDown=function(){var a,b;this.la&&(a=this.h,null!==a&&null!==this.yf&&(b=a.fe(a.T.da,null,null),null!==b&&b.sj(this.yf)?(this.standardMouseClick(null,null),this.stopTool()):(this.stopTool(),a.Ya.doMouseDown())))},ih.prototype.doMouseUp=function(){this.la||this.canStart()&&ff(this,!0)},ih.prototype.doMouseMove=function(){this.la&&this.standardMouseOver()},ih.prototype.showContextMenu=function(a,b){var c,d;t.l(a,ea,ih,"showContextMenu:contextmenu"),null!==b&&t.l(b,V,ih,"showContextMenu:obj"),c=this.h,null!==c&&(a!==this.yf&&this.hideContextMenu(),a.Ne="Tool",a.uk=!1,a.scale=1/c.scale,a.ed=this.name,c.add(a),null!==b?(c=null,d=b.sp(),null!==d&&(c=d.data),a.uc=b,a.data=c):a.data=c.ea,a.zf(),this.positionContextMenu(a,b),this.yf=a)},ih.prototype.positionContextMenu=function(a){var c,d,e,b=this.h;null!==b&&(c=b.T.da.copy(),d=a.Ha,e=b.Ab,b.T.px&&(c.x-=d.width),c.x+d.width>e.right&&(c.x-=d.width+5),c.x<e.x&&(c.x=e.x),c.y+d.height>e.bottom&&(c.y-=d.height+5),c.y<e.y&&(c.y=e.y),a.position=c)},ih.prototype.hideContextMenu=function(){var a=this.h;null!==a&&null!==this.yf&&(this.yf.data=null,this.yf.uc=null,a.remove(this.yf),this.yf=null,this.standardMouseOver())},ih.prototype.initializeDefaultButtons=function(){if(null===this.h)return null;var a=new H,b=this.h.Ze;return a.add({text:"Copy",qh:function(){b.copySelection()},visible:function(){return b.canCopySelection()}}),a.add({text:"Cut",qh:function(){b.cutSelection()},visible:function(){return b.canCutSelection()}}),a.add({text:"Delete",qh:function(){b.deleteSelection()},visible:function(){return b.canDeleteSelection()}}),a.add({text:"Paste",qh:function(a){b.pasteSelection(a.T.da)},visible:function(){return b.canPasteSelection()}}),a.add({text:"Select All",qh:function(){b.selectAll()},visible:function(){return b.canSelectAll()}}),a.add({text:"Undo",qh:function(){b.undo()},visible:function(){return b.canUndo()}}),a.add({text:"Redo",qh:function(){b.redo()},visible:function(){return b.canRedo()}}),a.add({text:"Zoom To Fit",qh:function(){b.zoomToFit()},visible:function(){return b.canZoomToFit()}}),a.add({text:"Reset Zoom",qh:function(){b.resetZoom()},visible:function(){return b.canResetZoom()}}),a.add({text:"Group Selection",qh:function(){b.groupSelection()},visible:function(){return b.canGroupSelection()}}),a.add({text:"Ungroup Selection",qh:function(){b.ungroupSelection()},visible:function(){return b.canUngroupSelection()}}),a.add({text:"Edit Text",qh:function(){b.editTextBlock()},visible:function(){return b.canEditTextBlock()}}),a},ih.prototype.showDefaultContextMenu=function(){var b,c,d,e,f,g,h,a=this.h;if(null!==a){for(null===this.Uy&&(this.Uy=this.initializeDefaultButtons()),this.bo!==this.yf&&this.hideContextMenu(),t.it.innerHTML="",t.ht.addEventListener("click",this.ZD,!1),b=this,c=document.createElement("ul"),c.className="defaultCXul",t.it.appendChild(c),c.innerHTML="",d=this.Uy.k;d.next();)e=d.value,f=e.text,g=e.visible,("function"!=typeof g||g())&&(g=document.createElement("li"),g.className="defaultCXli",h=document.createElement("a"),h.className="defaultCXa",h.href="#",h.FH=e.qh,h.addEventListener("click",function(c){return this.FH(a),b.stopTool(),c.preventDefault(),!1},!1),h.textContent=f,g.appendChild(h),c.appendChild(g));t.it.style.display="block",t.ht.style.display="block",this.yf=this.bo}},ih.prototype.hideDefaultContextMenu=function(){null!==this.yf&&this.yf===this.bo&&(t.it.style.display="none",t.ht.style.display="none",t.ht.removeEventListener("click",this.ZD,!1),this.yf=null)},t.g(ih,"currentContextMenu",ih.prototype.yf),t.defineProperty(ih,{yf:"currentContextMenu"},function(){return this.qC},function(a){null!==a&&t.l(a,ea,ih,"currentContextMenu"),this.qC=a}),t.g(ih,"currentObject",ih.prototype.FI),t.defineProperty(ih,{FI:"currentObject"},function(){return this.Un},function(a){null!==a&&t.l(a,V,ih,"currentObject"),this.Un=a}),t.A(ih,{YK:"mouseDownPoint"},function(){return this.iD}),t.ka("DragSelectingTool",jh),t.Qa(jh,re),jh.prototype.canStart=function(){var a,b;return this.isEnabled?(a=this.h,null!==a&&a.We?(b=a.T,!b.left||a.Ya!==this&&(!this.isBeyondDragSize()||b.timestamp-a.Uc.timestamp<this.Nw||null!==a.st(b.da,!0))?!1:!0):!1):!1},jh.prototype.doActivate=function(){var a=this.h;null!==a&&(this.la=!0,a.Sd=!0,a.ab=!0,a.add(this.Fg),this.doMouseMove())},jh.prototype.doDeactivate=function(){var a=this.h;null!==a&&(a.remove(this.Fg),a.ab=!1,this.la=a.Sd=!1)},jh.prototype.doMouseMove=function(){if(null!==this.h&&this.la&&null!==this.Fg){var a=this.computeBoxBounds(),b=this.Fg.we("SHAPE");null===b&&(b=this.Fg.Vw()),b.Ea=a.size,this.Fg.position=a.position}},jh.prototype.doMouseUp=function(){if(this.la){var a=this.h;a.remove(this.Fg);try{a.gc="wait",this.selectInRect(this.computeBoxBounds())}finally{a.gc=""}}this.stopTool()},jh.prototype.computeBoxBounds=function(){var a=this.h;return null===a?new F(0,0,0,0):new F(a.Uc.da,a.T.da)},jh.prototype.selectInRect=function(a){var c,d,e,b=this.h;if(null!==b){if(c=b.T,b.Ga("ChangingSelection"),a=b.pk(a,null,function(a){return a instanceof x&&a.canSelect()},this.KF),t.ln?c.Qp:c.control)if(c.shift)for(a=a.k;a.next();)c=a.value,c.ib&&(c.ib=!1);else for(a=a.k;a.next();)c=a.value,c.ib=!c.ib;else{if(!c.shift){for(d=new H(x),e=b.selection.k;e.next();)c=e.value,a.contains(c)||d.add(c);for(d=d.k;d.next();)c=d.value,c.ib=!1}for(a=a.k;a.next();)c=a.value,c.ib||(c.ib=!0)}b.Ga("ChangedSelection")}},t.g(jh,"delay",jh.prototype.Nw),t.defineProperty(jh,{Nw:"delay"},function(){return this.co},function(a){t.i(a,"number",jh,"delay"),this.co=a}),t.g(jh,"isPartialInclusion",jh.prototype.KF),t.defineProperty(jh,{KF:"isPartialInclusion"},function(){return this.YC},function(a){t.i(a,"boolean",jh,"isPartialInclusion"),this.YC=a}),t.g(jh,"box",jh.prototype.Fg),t.defineProperty(jh,{Fg:"box"},function(){return this.Vl},function(a){null!==a&&t.l(a,x,jh,"box"),this.Vl=a}),t.ka("PanningTool",kh),t.Qa(kh,re),kh.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.h;return null===a||!a.vf&&!a.wf||!a.T.left||a.Ya!==this&&!this.isBeyondDragSize()?!1:!0},kh.prototype.doActivate=function(){var a=this.h;null!==a&&(this.Dj?(a.T.bubbles=!0,document.addEventListener("scroll",this.ND,!1)):(a.gc="move",a.Sd=!0,this.Ez=a.position.copy()),this.la=!0)},kh.prototype.doDeactivate=function(){var a=this.h;null!==a&&(a.gc="",this.la=a.Sd=!1)},kh.prototype.doCancel=function(){var a=this.h;null!==a&&(a.position=this.Ez,a.Sd=!1),this.stopTool()},kh.prototype.doMouseMove=function(){this.move()},kh.prototype.doMouseUp=function(){this.move(),this.stopTool()},kh.prototype.move=function(){var b,c,d,e,a=this.h;this.la&&a&&(this.Dj?a.T.bubbles=!0:(b=a.position,c=a.Uc.da,d=a.T.da,e=b.x+c.x-d.x,c=b.y+c.y-d.y,a.vf||(e=b.x),a.wf||(c=b.y),a.position=new E(e,c)))},t.g(kh,"bubbles",kh.prototype.bubbles),t.defineProperty(kh,{bubbles:"bubbles"},function(){return this.Dj},function(a){t.i(a,"boolean",kh,"bubbles"),this.Dj=a}),t.g(kh,"originalPosition",kh.prototype.cK),t.A(kh,{cK:"originalPosition"},function(){return this.Ez}),t.ka("TextEditingTool",lh),t.Qa(lh,re),lh.LostFocus=Dh=t.w(lh,"LostFocus",0),lh.MouseDown=Eh=t.w(lh,"MouseDown",1),lh.Tab=yh=t.w(lh,"Tab",2),lh.Enter=xh=t.w(lh,"Enter",3),lh.SingleClick=t.w(lh,"SingleClick",0),lh.SingleClickSelected=mh=t.w(lh,"SingleClickSelected",1),vh=t.w(lh,"StateNone",0),zh=t.w(lh,"StateActive",1),Ah=t.w(lh,"StateEditing",2),Ch=t.w(lh,"StateEditing2",3),Fh=t.w(lh,"StateValidating",4),Bh=t.w(lh,"StateValidated",5),t.g(lh,"textBlock",lh.prototype.Xg),t.defineProperty(lh,{Xg:"textBlock"},function(){return this.Rz},function(a){null!==a&&t.l(a,za,lh,"textBlock"),this.Rz=a}),t.g(lh,"currentTextEditor",lh.prototype.rh),t.defineProperty(lh,{rh:"currentTextEditor"},function(){return this.tC},function(a){this.tC=a}),t.g(lh,"defaultTextEditor",lh.prototype.QE),t.defineProperty(lh,{QE:"defaultTextEditor"},function(){return this.yC},function(a){this.yC=a}),t.g(lh,"starting",lh.prototype.TG),t.defineProperty(lh,{TG:"starting"},function(){return this.MD},function(a){t.Fa(a,lh,lh,"starting"),this.MD=a}),lh.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.h;return null===a||a.hb||!a.T.left||this.isBeyondDragSize()?!1:(a=a.fe(a.T.da,null,function(a){return a instanceof za}),a instanceof za&&a.Qw&&a.U.canEdit()?(a=a.U,null===a||this.TG===mh&&!a.ib?!1:!0):!1)},lh.prototype.doStart=function(){this.la||null===this.Xg||this.doActivate()},lh.prototype.doActivate=function(){var a,b,c,d,e,f,g,h,i,j;this.la||(a=this.h,null!==a&&(b=this.Xg,null===b&&(b=a.fe(a.T.da,function(a){return a instanceof za?a:null}),b=b instanceof za?b:null),null!==b&&(this.Xg=b,null!==b.U)&&(this.la=!0,this.cb=zh,c=this.QE,d=!1,null!==b.HB&&(c=b.HB),null===c||c.dC||(d=!0),this.RD=this.Xg.copy(),c.dC?(e=b.wb(Yb),f=a.position,g=a.scale,h=b.sk()*g,i=b.Ja.width*h,Gh(b),j=(e.x-f.x)*g,e=(e.y-f.y)*g,c.value=b.text,a.oj.style.font=b.font,c.style.font="inherit",c.style.fontSize=100*h+"%",c.style.lineHeight="normal",i=20+i,c.style.width=i+"px",c.style.height="",c.rows=b.RF,a.oj.appendChild(c),c.style.left=(0|j-i/2)+"px",c.style.top=(0|e-c.clientHeight/2)+"px",c.style.textAlign=b.textAlign):a.oj.appendChild(c),c.style.position="absolute",c.style.zIndex=100,c.className="start",c.textEditingTool=this,c.DK=h,d&&void 0!==c.onActivate&&c.onActivate(),this.rh=c,c.focus(),c.select())))},lh.prototype.doCancel=function(){null!==this.bl&&(this.rh.style.border=this.bl,this.bl=null),this.stopTool()},lh.prototype.doMouseUp=function(){!this.la&&this.canStart()&&this.doActivate()},lh.prototype.doMouseDown=function(){this.la&&this.acceptText(Eh)},lh.prototype.acceptText=function(a){switch(a){case Eh:this.cb===Bh||this.cb===Ch?this.rh.focus():(this.cb===zh||this.cb===Ah)&&(this.cb=Fh,Hh(this));break;case Dh:case xh:case yh:if(xh===a&&!0===this.Rz.ox)break;(this.cb===zh||this.cb===Ah)&&(this.cb=Fh,Hh(this))}},lh.prototype.doDeactivate=function(){var b,a=this.h;null!==a&&(this.cb=vh,this.Xg=null,null!==this.rh&&(b=this.rh,void 0!==b.onDeactivate&&b.onDeactivate(),null!==b&&a.oj.removeChild(b)),this.la=!1)},lh.prototype.isValidText=function(a,b,c){t.l(a,za,lh,"isValidText:textblock");var d=this.mu;return null===d||d(a,b,c)?(d=a.mu,null===d||d(a,b,c)?!0:!1):!1},t.g(lh,"textValidation",lh.prototype.mu),t.defineProperty(lh,{mu:"textValidation"},function(){return this.fl},function(a){null!==a&&t.i(a,"function",lh,"textValidation"),this.fl=a}),t.ka("ToolManager",Ze),t.Qa(Ze,re),Ze.WheelScroll=jf=t.w(Ze,"WheelScroll",0),Ze.WheelZoom=hf=t.w(Ze,"WheelZoom",1),Ze.WheelNone=t.w(Ze,"WheelNone",2),t.g(Ze,"mouseWheelBehavior",Ze.prototype.un),t.defineProperty(Ze,{un:"mouseWheelBehavior"},function(){return this.mD},function(a){t.Fa(a,Ze,Ze,"mouseWheelBehavior"),this.mD=a}),Ze.prototype.initializeStandardTools=function(){this.hE=new hh,this.mB=new xf,this.UF=new Pg,this.xG=new Xg,this.BG=new eh,this.TA=new Ca,this.Od=new kf,this.VE=new jh,this.kG=new kh,this.Hw=new ih,this.Sx=new lh,this.yE=new Da,this.zE=new gh},Ze.prototype.doMouseDown=function(){var b,c,d,a=this.h;if(null!==a){for(b=a.ma,b.iA&&0!==b.Qe&&t.trace("WARNING: In ToolManager.doMouseDown: UndoManager.transactionLevel is not zero"),b=this.lf.length,c=0;b>c;c++)if(d=this.lf.wa(c),null===d.h&&d.Ed(this.h),d.canStart())return a.Ya=d,a.Ya===d&&(d.la||d.doActivate(),d.doMouseDown()),void 0;1===a.T.button&&(this.un===jf?this.un=hf:this.un===hf&&(this.un=jf)),this.doActivate(),this.standardWaitAfter(this.HA)}},Ze.prototype.doMouseMove=function(){var b,c,d,a=this.h;if(null!==a){if(this.la)for(b=this.Ng.length,c=0;b>c;c++)if(d=this.Ng.wa(c),null===d.h&&d.Ed(this.h),d.canStart())return a.Ya=d,a.Ya===d&&(d.la||d.doActivate(),d.doMouseMove()),void 0;this.standardMouseOver(),this.isBeyondDragSize()&&this.standardWaitAfter(this.la?this.HA:this.wF)}},Ze.prototype.doCurrentObjectChanged=function(a,b){var c=this.ql;null===c||null!==b&&(b===c||b.sj(c))||this.hideToolTip()},Ze.prototype.doWaitAfter=function(){this.h&&this.h.Za&&(this.doMouseHover(),this.la||this.doToolTip())},Ze.prototype.doMouseHover=function(){var b,c,a=this.h;if(null!==a)if(b=a.T,null===b.me&&(b.me=a.fe(b.da,null,null)),c=b.me,null!==c)for(;null!==c&&(a=this.la?c.Nt:c.Ot,null===a||(a(b,c),!b.Ke));)c=c.ia;else a=this.la?a.Nt:a.Ot,null!==a&&a(b)},Ze.prototype.doToolTip=function(){var b,a=this.h;if(null!==a)if(b=a.T,null===b.me&&(b.me=a.fe(b.da,null,null)),b=b.me,null!==b){if(b!==this.ql&&!b.sj(this.ql)){for(;null!==b;){if(a=b.nu,null!==a)return this.showToolTip(a,b),void 0;b=b.ia}this.hideToolTip()}}else a=a.nu,null!==a?this.showToolTip(a,null):this.hideToolTip()},Ze.prototype.showToolTip=function(a,b){var c,d;t.l(a,ea,Ze,"showToolTip:tooltip"),null!==b&&t.l(b,V,Ze,"showToolTip:obj"),c=this.h,null!==c&&(a!==this.ql&&this.hideToolTip(),a.Ne="Tool",a.uk=!1,a.scale=1/c.scale,c.add(a),null!==b&&b!==this.Ru?(c=null,d=b.sp(),null!==d&&(c=d.data),a.uc=b,a.data=c):null===b&&(a.data=c.ea),(null===b||b!==this.Ru)&&(a.zf(),this.positionToolTip(a,b)),this.Sy=a,this.Ru=b)},Ze.prototype.positionToolTip=function(a){var c,d,e,b=this.h;null!==b&&(c=b.T.da.copy(),d=a.Ha,e=b.Ab,b.T.px&&(c.x-=d.width),c.x+d.width>e.right&&(c.x-=d.width+5),c.x<e.x&&(c.x=e.x),c.y=c.y+20+d.height>e.bottom?c.y-(d.height+5):c.y+20,c.y<e.y&&(c.y=e.y),a.position=c)},Ze.prototype.hideToolTip=function(){if(null!==this.ql){var a=this.h;null!==a&&(this.ql.data=null,this.ql.uc=null,a.remove(this.ql),this.Ru=this.Sy=null)}},t.A(Ze,{ql:"currentToolTip"},function(){return this.Sy}),Ze.prototype.doMouseUp=function(){var a,b,c,d;if(this.cancelWaitAfter(),this.la){if(a=this.h,null===a)return;for(b=this.Og.length,c=0;b>c;c++)if(d=this.Og.wa(c),null===d.h&&d.Ed(this.h),d.canStart())return a.Ya=d,a.Ya===d&&(d.la||d.doActivate(),d.doMouseUp()),void 0}this.doDeactivate()},Ze.prototype.doMouseWheel=function(){this.standardMouseWheel()},Ze.prototype.doKeyDown=function(){var a=this.h;null!==a&&a.Ze.doKeyDown()},Ze.prototype.doKeyUp=function(){var a=this.h;null!==a&&a.Ze.doKeyUp()},Ze.prototype.doCancel=function(){null!==vf&&vf.doCancel(),re.prototype.doCancel.call(this)},Ze.prototype.findTool=function(a){var b,c,d;for(t.i(a,"string",Ze,"findTool:name"),b=this.lf.length,c=0;b>c;c++)if(d=this.lf.wa(c),d.name===a)return d;for(b=this.Ng.length,c=0;b>c;c++)if(d=this.Ng.wa(c),d.name===a)return d;for(b=this.Og.length,c=0;b>c;c++)if(d=this.Og.wa(c),d.name===a)return d;return null},Ze.prototype.replaceTool=function(a,b){var c,d,e;for(t.i(a,"string",Ze,"replaceTool:name"),null!==b&&(t.l(b,re,Ze,"replaceTool:newtool"),b.h&&b.h!==this.h&&t.m("Cannot share tools between Diagrams: "+b.toString()),b.Ed(this.h)),c=this.lf.length,d=0;c>d;d++)if(e=this.lf.wa(d),e.name===a)return null!==b?this.lf.Wg(d,b):this.lf.wd(d),e;for(c=this.Ng.length,d=0;c>d;d++)if(e=this.Ng.wa(d),e.name===a)return null!==b?this.Ng.Wg(d,b):this.Ng.wd(d),e;for(c=this.Og.length,d=0;c>d;d++)if(e=this.Og.wa(d),e.name===a)return null!==b?this.Og.Wg(d,b):this.Og.wd(d),e;return null},t.A(Ze,{lf:"mouseDownTools"},function(){return this.jD
}),t.A(Ze,{Ng:"mouseMoveTools"},function(){return this.kD}),t.A(Ze,{Og:"mouseUpTools"},function(){return this.lD}),t.g(Ze,"hoverDelay",Ze.prototype.wF),t.defineProperty(Ze,{wF:"hoverDelay"},function(){return this.NC},function(a){t.i(a,"number",Ze,"hoverDelay"),this.NC=a}),t.g(Ze,"holdDelay",Ze.prototype.HA),t.defineProperty(Ze,{HA:"holdDelay"},function(){return this.MC},function(a){t.i(a,"number",Ze,"holdDelay"),this.MC=a}),t.g(Ze,"dragSize",Ze.prototype.WE),t.defineProperty(Ze,{WE:"dragSize"},function(){return this.AC},function(a){t.l(a,ra,Ze,"dragSize"),this.AC=a.ba()}),t.g(Ze,"actionTool",Ze.prototype.hE),t.defineProperty(Ze,{hE:"actionTool"},function(){return this.findTool("Action")},function(a){Ih(this,"Action",a,this.lf)}),t.g(Ze,"relinkingTool",Ze.prototype.mB),t.defineProperty(Ze,{mB:"relinkingTool"},function(){return this.findTool("Relinking")},function(a){Ih(this,"Relinking",a,this.lf)}),t.g(Ze,"linkReshapingTool",Ze.prototype.UF),t.defineProperty(Ze,{UF:"linkReshapingTool"},function(){return this.findTool("LinkReshaping")},function(a){Ih(this,"LinkReshaping",a,this.lf)}),t.g(Ze,"resizingTool",Ze.prototype.xG),t.defineProperty(Ze,{xG:"resizingTool"},function(){return this.findTool("Resizing")},function(a){Ih(this,"Resizing",a,this.lf)}),t.g(Ze,"rotatingTool",Ze.prototype.BG),t.defineProperty(Ze,{BG:"rotatingTool"},function(){return this.findTool("Rotating")},function(a){Ih(this,"Rotating",a,this.lf)}),t.g(Ze,"linkingTool",Ze.prototype.TA),t.defineProperty(Ze,{TA:"linkingTool"},function(){return this.findTool("Linking")},function(a){Ih(this,"Linking",a,this.Ng)}),t.g(Ze,"draggingTool",Ze.prototype.Od),t.defineProperty(Ze,{Od:"draggingTool"},function(){return this.findTool("Dragging")},function(a){Ih(this,"Dragging",a,this.Ng)}),t.g(Ze,"dragSelectingTool",Ze.prototype.VE),t.defineProperty(Ze,{VE:"dragSelectingTool"},function(){return this.findTool("DragSelecting")},function(a){Ih(this,"DragSelecting",a,this.Ng)}),t.g(Ze,"panningTool",Ze.prototype.kG),t.defineProperty(Ze,{kG:"panningTool"},function(){return this.findTool("Panning")},function(a){Ih(this,"Panning",a,this.Ng)}),t.g(Ze,"contextMenuTool",Ze.prototype.Hw),t.defineProperty(Ze,{Hw:"contextMenuTool"},function(){return this.findTool("ContextMenu")},function(a){Ih(this,"ContextMenu",a,this.Og)}),t.g(Ze,"textEditingTool",Ze.prototype.Sx),t.defineProperty(Ze,{Sx:"textEditingTool"},function(){return this.findTool("TextEditing")},function(a){Ih(this,"TextEditing",a,this.Og)}),t.g(Ze,"clickCreatingTool",Ze.prototype.yE),t.defineProperty(Ze,{yE:"clickCreatingTool"},function(){return this.findTool("ClickCreating")},function(a){Ih(this,"ClickCreating",a,this.Og)}),t.g(Ze,"clickSelectingTool",Ze.prototype.zE),t.defineProperty(Ze,{zE:"clickSelectingTool"},function(){return this.findTool("ClickSelecting")},function(a){Ih(this,"ClickSelecting",a,this.Og)}),Je.prototype.prepareAnimation=Je.prototype.Gl=function(){this.Se&&(this.Lj&&this.Fn(),this.zd=!0,this.gC=!1)},Th={opacity:function(a,b,c,d,e,f){a.opacity=d(e,b,c-b,f)},position:function(a,b,c,d,e,f){e!==f?a.MG(d(e,b.x,c.x-b.x,f),d(e,b.y,c.y-b.y,f)):a.position=new E(d(e,b.x,c.x-b.x,f),d(e,b.y,c.y-b.y,f))},scale:function(a,b,c,d,e,f){a.scale=d(e,b,c-b,f)},visible:function(a,b,c,d,e,f){a.visible=e!==f?b:c}},Je.prototype.stopAnimation=Je.prototype.Fn=function(){!0===this.zd&&(this.zd=!1,this.gC&&this.W.ze()),this.Lj&&this.Se&&(Oh(this),Ph(this,this.W,this.GH,this.rC,this.Qy,this.Qy,null!==this.dm&&null!==this.cm),Rh(this),Sh(this))},t.g(Je,"isEnabled",Je.prototype.isEnabled),t.defineProperty(Je,{isEnabled:"isEnabled"},function(){return this.Se},function(a){t.i(a,"boolean",Je,"isEnabled"),this.Se=a}),t.g(Je,"duration",Je.prototype.duration),t.defineProperty(Je,{duration:"duration"},function(){return this.az},function(a){t.i(a,"number",Je,"duration"),1>a&&t.ha(a,">= 1",Je,"duration"),this.az=a}),t.A(Je,{Ig:"isAnimating"},function(){return this.Lj}),t.A(Je,{RK:"isTicking"},function(){return this.rr}),t.ka("Layer",qe),qe.prototype.Ed=function(a){this.W=a},qe.prototype.toString=function(a){var b,c,d,e,f,g,h,i;if(void 0===a&&(a=0),b='Layer "'+this.name+'"',0>=a)return b;for(c=0,d=0,e=0,f=0,g=0,h=this.mb.k;h.next();)i=h.value,i instanceof z?e++:i instanceof y?d++:i instanceof B?f++:i instanceof ea?g++:c++;if(h="",c>0&&(h+=c+" Parts "),d>0&&(h+=d+" Nodes "),e>0&&(h+=e+" Groups "),f>0&&(h+=f+" Links "),g>0&&(h+=g+" Adornments "),a>1)for(c=this.mb.k;c.next();)d=c.value,h+="\n    "+d.toString(a-1),(e=d.data)&&t.ud(e)&&(h+=" #"+t.ud(e)),d instanceof y?h+=" "+na(e):d instanceof B&&(h+=" "+na(d.ca)+" "+na(d.fa));return b+" "+this.mb.count+": "+h},qe.prototype.findObjectAt=qe.prototype.fe=function(a,b,c){var d,f,g,h,i;if(void 0===b&&(b=null),void 0===c&&(c=null),!1===this.dl)return null;for(e&&!a.P()&&t.m("findObjectAt: Point must have a real value."),d=this.mb,f=!1,this.h.Ab.La(a)&&(f=!0),g=t.N(),h=d.length;h--;)if(i=d.wa(h),(!0!==f||!1!==Wh(i))&&i.Va()&&(g.assign(a),hb(g,i.ue),i=i.fe(g,b,c),null!==i&&(null!==b&&(i=b(i)),i&&(null===c||c(i)))))return t.B(g),i;return t.B(g),null},qe.prototype.findObjectsAt=qe.prototype.qp=function(a,b,c,d){var f,g,h,i,j;if(void 0===b&&(b=null),void 0===c&&(c=null),d instanceof H||d instanceof I||(d=new I(V)),!1===this.dl)return d;for(e&&!a.P()&&t.m("findObjectsAt: Point must have a real value."),f=this.mb,g=!1,this.h.Ab.La(a)&&(g=!0),h=t.N(),i=f.length;i--;)j=f.wa(i),!0===g&&!1===Wh(j)||!j.Va()||(h.assign(a),hb(h,j.ue),j.qp(h,b,c,d)&&(null!==b&&(j=b(j)),j&&(null===c||c(j))&&d.add(j)));return t.B(h),d},qe.prototype.findObjectsIn=qe.prototype.pk=function(a,b,c,d,f){var g,h,i,j;if(void 0===b&&(b=null),void 0===c&&(c=null),void 0===d&&(d=!1),f instanceof H||f instanceof I||(f=new I(V)),!1===this.dl)return f;for(e&&!a.P()&&t.m("findObjectsIn: Rect must have a real value."),g=this.mb,h=!1,this.h.Ab.kk(a)&&(h=!0),i=g.length,g=g.n;i--;)j=g[i],(!0!==h||!1!==Wh(j))&&j.Va()&&j.pk(a,b,c,d,f)&&(null!==b&&(j=b(j)),j&&(null===c||c(j))&&f.add(j));return f},qe.prototype.wA=function(a,b,c,d,e,f,g){var h,i,j;if(!1===this.dl)return e;for(h=this.mb,i=h.length,h=h.n;i--;)j=h[i],(!0!==g||!1!==Wh(j))&&f(j)&&j.Va()&&j.pk(a,b,c,d,e)&&(null!==b&&(j=b(j)),j&&(null===c||c(j))&&e.add(j));return e},qe.prototype.findObjectsNear=qe.prototype.fn=function(a,b,c,d,f,g){var h,i,j,k,l,m;if(void 0===c&&(c=null),void 0===d&&(d=null),void 0===f&&(f=!0),!1!==f&&!0!==f&&((f instanceof H||f instanceof I)&&(g=f),f=!0),g instanceof H||g instanceof I||(g=new I(V)),!1===this.dl)return g;for(e&&!a.P()&&t.m("findObjectsNear: Point must have a real value."),h=this.mb,i=!1,this.h.Ab.La(a)&&(i=!0),j=t.N(),k=t.N(),l=h.length;l--;)m=h.n[l],!0===i&&!1===Wh(m)||!m.Va()||(j.assign(a),hb(j,m.ue),k.p(a.x+b,a.y),hb(k,m.ue),m.fn(j,k,c,d,f,g)&&(null!==c&&(m=c(m)),m&&(null===d||d(m))&&g.add(m)));return t.B(j),t.B(k),g},aa=qe.prototype,aa.Kf=function(a,b){var d,c,e,f,g,h;if(this.visible)for(c=this.mb,d=b?b:a.Ab,e=c.length,f=0;e>f;f++)if(g=c.n[f],g.dD=f,!(g instanceof B&&!1===g.Bg||g instanceof ea&&null!==g.ii))if(Eb(g.pa,d))for(g.Kf(!0),Xh(g),g=g.tw;g.next();)h=g.value,wh(h,1/0,1/0),h.Sc(),h.Kf(!0);else g.Kf(!1),null!==g.tw&&0<g.tw.count&&Xh(g)},aa.af=function(a,b,c,d){var e,f,g,h,i;if(this.visible&&(void 0===d&&(d=!0),d||!this.Dc)){for(1!==this.Uf&&(a.globalAlpha=this.Uf),c=this.mb,d=this.Nv,d.length=0,e=b.scale,f=c.length,g=0;f>g;g++)if(h=c.n[g],Wh(h)){if(h instanceof B&&(h.pc&&d.push(h),!1===h.Bg))continue;i=h.pa,1<i.width*e||1<i.height*e?h.af(a,b):Yh(h,a)}a.globalAlpha=1}},aa.j=function(a,b,c,d,e){var f=this.h;null!==f&&f.Oc(Ld,a,this,b,c,d,e)},aa.Bp=function(a,b,c){var d=this.mb;if(b.Co=this,a>=d.count)a=d.count;else if(d.wa(a)===b)return-1;return d.Rd(a,b),b.zt(c),d=this.h,null!==d&&(c?d.na():d.Bp(b)),b instanceof z&&this.Ox(b),a},aa.df=function(a,b,c){var d=this.mb;if(0>a||a>=d.length){if(a=d.indexOf(b),0>a)return-1}else if(d.wa(a)!==b&&(a=d.indexOf(b),0>a))return-1;return b.At(c),d.wd(a),d=this.h,null!==d&&(c?d.na():d.df(b)),b.Co=null,a},aa.Ox=function(a){for(var b,c,d,e,f,g,h;null!==a;){if(a.layer===this&&(b=a,b.Nc.next())){for(c=-1,d=-1,e=this.mb.n,f=e.length,g=0;f>g&&(h=e[g],!(h===b&&(c=g,d>=0)))&&!(0>d&&h.fb===b&&(d=g,c>=0));g++);!(0>d)&&c>d&&(e=this.mb,e.wd(c),e.Rd(d,b))}a=a.fb}},aa.clear=function(){for(var a=this.mb.Pe(),b=a.length,c=0;b>c;c++)a[c].Kf(!1),this.df(-1,a[c],!1)},t.A(qe,{wj:"parts"},function(){return this.mb.k}),t.A(qe,{dL:"partsBackwards"},function(){return this.mb.nn}),t.A(qe,{h:"diagram"},function(){return this.W}),t.g(qe,"name",qe.prototype.name),t.defineProperty(qe,{name:"name"},function(){return this.ec},function(a){var b,c;if(t.i(a,"string",qe,"name"),b=this.ec,b!==a){if(c=this.h,null!==c)for(""===b&&t.m("Cannot rename default Layer to: "+a),c=c.pn;c.next();)c.value.name===a&&t.m("Layer.name is already present in this diagram: "+a);for(this.ec=a,this.j("name",b,a),a=this.mb.k;a.next();)a.value.Ne=this.ec}}),t.g(qe,"opacity",qe.prototype.opacity),t.defineProperty(qe,{opacity:"opacity"},function(){return this.Uf},function(a){var b=this.Uf;b!==a&&(t.i(a,"number",qe,"opacity"),(0>a||a>1)&&t.ha(a,"0 <= val <= 1",qe,"opacity"),this.Uf=a,this.j("opacity",b,a),a=this.h,null!==a&&a.na())}),t.g(qe,"isTemporary",qe.prototype.Dc),t.defineProperty(qe,{Dc:"isTemporary"},function(){return this.sz},function(a){var b=this.sz;b!==a&&(t.i(a,"boolean",qe,"isTemporary"),this.sz=a,this.j("isTemporary",b,a))}),t.g(qe,"visible",qe.prototype.visible),t.defineProperty(qe,{visible:"visible"},function(){return this.Uz},function(a){var b=this.Uz;if(b!==a){for(t.i(a,"boolean",qe,"visible"),this.Uz=a,this.j("visible",b,a),b=this.mb.k;b.next();)b.value.kf(a);a=this.h,null!==a&&a.na()}}),t.g(qe,"pickable",qe.prototype.mf),t.defineProperty(qe,{mf:"pickable"},function(){return this.dl},function(a){var b=this.dl;b!==a&&(t.i(a,"boolean",qe,"pickable"),this.dl=a,this.j("pickable",b,a))}),t.g(qe,"isBoundsIncluded",qe.prototype.KA),t.defineProperty(qe,{KA:"isBoundsIncluded"},function(){return this.pz},function(a){this.pz!==a&&(this.pz=a,null!==this.h&&this.h.Vc())}),t.g(qe,"allowCopy",qe.prototype.ej),t.defineProperty(qe,{ej:"allowCopy"},function(){return this.yk},function(a){var b=this.yk;b!==a&&(t.i(a,"boolean",qe,"allowCopy"),this.yk=a,this.j("allowCopy",b,a))}),t.g(qe,"allowDelete",qe.prototype.ll),t.defineProperty(qe,{ll:"allowDelete"},function(){return this.zk},function(a){var b=this.zk;b!==a&&(t.i(a,"boolean",qe,"allowDelete"),this.zk=a,this.j("allowDelete",b,a))}),t.g(qe,"allowTextEdit",qe.prototype.dp),t.defineProperty(qe,{dp:"allowTextEdit"},function(){return this.Ik},function(a){var b=this.Ik;b!==a&&(t.i(a,"boolean",qe,"allowTextEdit"),this.Ik=a,this.j("allowTextEdit",b,a))}),t.g(qe,"allowGroup",qe.prototype.$o),t.defineProperty(qe,{$o:"allowGroup"},function(){return this.Ak},function(a){var b=this.Ak;b!==a&&(t.i(a,"boolean",qe,"allowGroup"),this.Ak=a,this.j("allowGroup",b,a))}),t.g(qe,"allowUngroup",qe.prototype.ep),t.defineProperty(qe,{ep:"allowUngroup"},function(){return this.Jk},function(a){var b=this.Jk;b!==a&&(t.i(a,"boolean",qe,"allowUngroup"),this.Jk=a,this.j("allowUngroup",b,a))}),t.g(qe,"allowLink",qe.prototype.Rm),t.defineProperty(qe,{Rm:"allowLink"},function(){return this.Bk},function(a){var b=this.Bk;b!==a&&(t.i(a,"boolean",qe,"allowLink"),this.Bk=a,this.j("allowLink",b,a))}),t.g(qe,"allowRelink",qe.prototype.gk),t.defineProperty(qe,{gk:"allowRelink"},function(){return this.Dk},function(a){var b=this.Dk;b!==a&&(t.i(a,"boolean",qe,"allowRelink"),this.Dk=a,this.j("allowRelink",b,a))}),t.g(qe,"allowMove",qe.prototype.fk),t.defineProperty(qe,{fk:"allowMove"},function(){return this.Ck},function(a){var b=this.Ck;b!==a&&(t.i(a,"boolean",qe,"allowMove"),this.Ck=a,this.j("allowMove",b,a))}),t.g(qe,"allowReshape",qe.prototype.ap),t.defineProperty(qe,{ap:"allowReshape"},function(){return this.Ek},function(a){var b=this.Ek;b!==a&&(t.i(a,"boolean",qe,"allowReshape"),this.Ek=a,this.j("allowReshape",b,a))}),t.g(qe,"allowResize",qe.prototype.bp),t.defineProperty(qe,{bp:"allowResize"},function(){return this.Fk},function(a){var b=this.Fk;b!==a&&(t.i(a,"boolean",qe,"allowResize"),this.Fk=a,this.j("allowResize",b,a))}),t.g(qe,"allowRotate",qe.prototype.cp),t.defineProperty(qe,{cp:"allowRotate"},function(){return this.Gk},function(a){var b=this.Gk;b!==a&&(t.i(a,"boolean",qe,"allowRotate"),this.Gk=a,this.j("allowRotate",b,a))}),t.g(qe,"allowSelect",qe.prototype.We),t.defineProperty(qe,{We:"allowSelect"},function(){return this.Hk},function(a){var b=this.Hk;b!==a&&(t.i(a,"boolean",qe,"allowSelect"),this.Hk=a,this.j("allowSelect",b,a))}),t.ka("Diagram",v),v.prototype.toString=function(a){var b,c;if(void 0===a&&(a=0),b="",this.id&&(b=this.id),this.oj&&this.oj.id&&(b=this.oj.id),b='Diagram "'+b+'"',0>=a)return b;for(c=this.Tb.k;c.next();)b+="\n  "+c.value.toString(a-1);return b},v.prototype.checkProperties=function(){return t.wI(this)},v.fromDiv=function(a){var b=a;return"string"==typeof a&&(b=document.getElementById(a)),b instanceof HTMLDivElement&&b.W instanceof v?b.W:null},t.g(v,"div",v.prototype.oj),t.defineProperty(v,{oj:"div"},function(){return this.Rb},function(a){var b,c,d,e;if(null!==a&&t.l(a,HTMLDivElement,v,"div"),this.Rb!==a){if(t.rA=[],b=this.Rb,null!==b){if(b.W=void 0,b.innerHTML="",null!==this.Za&&(this.Za.W=null,this.Za.removeEventListener("touchstart",this.bH,!1),this.Za.removeEventListener("touchmove",this.aH,!1),this.Za.removeEventListener("touchend",this.$G,!1)),b=this.kw,null!==b){for(c=b.jD.n,d=c.length,e=0;d>e;e++)c[e].cancelWaitAfter();for(c=b.kD.n,d=c.length,e=0;d>e;e++)c[e].cancelWaitAfter();for(c=b.lD.n,d=c.length,e=0;d>e;e++)c[e].cancelWaitAfter()}b.cancelWaitAfter(),this.Re=this.Za=null,window.removeEventListener("resize",this.tH,!1),window.removeEventListener("mousemove",this.Sp,!0),window.removeEventListener("mousedown",this.Rp,!0),window.removeEventListener("mouseup",this.Up,!0),window.removeEventListener("mousewheel",this.uh,!0),window.removeEventListener("DOMMouseScroll",this.uh,!0),window.removeEventListener("mouseout",this.Tp,!0),null!==this.yy&&(this.yy=this.yy.target=null)}else this.sf=!1;this.Rb=null,null!==a&&((b=a.W)&&(b.oj=null),qi(this,a),this.Yt())}}),gi.prototype.Ql=function(a){return a.Re.setTransform(a.wg,0,0,a.wg,0,0),null===this.Lh&&ti(this,!0),0<this.Lh&&this!==this.QH?!0:!1},gi.prototype.t=function(){this.QH=null},v.prototype.computePixelRatio=function(){var a=this.Re;return Math.round((window.devicePixelRatio||1)/(a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1))},v.prototype.doMouseMove=function(){this.Ya.doMouseMove()},v.prototype.doMouseDown=function(){this.Ya.doMouseDown()},v.prototype.doMouseUp=function(){this.Ya.doMouseUp()},v.prototype.doMouseWheel=function(){this.Ya.doMouseWheel()},v.prototype.doKeyDown=function(){this.Ya.doKeyDown()},v.prototype.doKeyUp=function(){this.Ya.doKeyUp()},v.prototype.focus=v.prototype.focus=function(){this.Za&&this.Za.focus()},v.prototype.pD=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o;this.W.isEnabled?(a=this.W,a.Hz&&null!==a.Za&&(a.Uv=!0,b=a.Mc,c=a.Ab,d=b.width,e=c.width,f=b.height,g=c.height,h=b.right,i=c.right,j=b.bottom,k=c.bottom,l=b.x,m=c.x,b=b.y,c=c.y,n=a.scale,d>e||f>g?(o=t.N(),this.DD&&a.vf?(o.p(this.scrollLeft/n+l,a.position.y),a.position=o):this.ED&&a.wf&&(o.p(a.position.x,this.scrollTop/n+b),a.position=o),t.B(o),a.Uv=!1,a.Kj=!1):(o=t.N(),this.DD&&a.vf&&(m>l&&(a.position=new E(this.scrollLeft+l,a.position.y)),h>i&&(a.position=new E(-(a.Zj.scrollWidth-a.Jb)+this.scrollLeft-a.Jb/n+a.Mc.right,a.position.y))),this.ED&&a.wf&&(c>b&&(a.position=new E(a.position.x,this.scrollTop+b)),j>k&&(a.position=new E(a.position.x,-(a.$j.scrollHeight-a.Ib)+this.scrollTop-a.Ib/n+a.Mc.bottom))),t.B(o),Ci(a),a.Uv=!1,a.Kj=!1,b=a.Mc,c=a.Ab,h=b.right,i=c.right,j=b.bottom,k=c.bottom,l=b.x,m=c.x,b=b.y,c=c.y,e>=d&&l>=m&&i>=h&&(a.Iz.style.width="1px"),g>=f&&b>=c&&k>=j&&(a.Jz.style.height="1px")))):Di(this.W)},v.prototype.qD=function(){this.W.isEnabled?this.W.Hz=!0:Di(this.W)},v.prototype.computeBounds=v.prototype.xf=function(){return 0<this.pg.count&&Ei(this),Fi(this)},v.prototype.computePartsBounds=function(a){var c,b=null;for(a=a.k;a.next();)c=a.value,c instanceof B||(c.zf(),null===b?b=c.pa.copy():b.zj(c.pa));return null===b?new F(0/0,0/0,0,0):b},v.prototype.zoomToFit=v.prototype.zoomToFit=function(){this.scale=Hi(this,Ki)},v.prototype.zoomToRect=function(a,b){var c,d,e,f;void 0===b&&(b=Ki),c=a.width,d=a.height,0===c||0===d||isNaN(c)&&isNaN(d)||(e=1,(b===Ki||b===Li)&&(isNaN(c)?e=this.Ab.height*this.scale/d:isNaN(d)?e=this.Ab.width*this.scale/c:(e=this.Jb,f=this.Ib,e=b===Li?f/d>e/c?(f-(this.fm?this.uf:0))/d:(e-(this.gm?this.uf:0))/c:Math.min(f/d,e/c))),this.scale=e,this.position=new E(a.x,a.y))},v.prototype.alignDocument=function(a,b){this.Ji&&Ji(this,this.xf());var c=this.Mc,d=this.Ab,e=this.cc;this.cc=!0,this.position=new E(c.x+(a.x*c.width+a.offsetX)-(b.x*d.width-b.offsetX),c.y+(a.y*c.height+a.offsetY)-(b.y*d.height-b.offsetY)),this.cc=e,this.na()},v.prototype.findPartAt=v.prototype.st=function(a,b){var c=b?$f(this,a,function(a){return a.U},function(a){return a.canSelect()}):$f(this,a,function(a){return a.U});return c instanceof x?c:null},v.prototype.findObjectAt=v.prototype.fe=function(a,b,c){var d,e;for(void 0===b&&(b=null),void 0===c&&(c=null),d=this.Tb.nn,Ei(this);d.next();)if(e=d.value,e.visible&&(e=e.fe(a,b,c),null!==e))return e;return null},v.prototype.findObjectsAt=v.prototype.qp=function(a,b,c,d){var e,f;for(void 0===b&&(b=null),void 0===c&&(c=null),d instanceof H||d instanceof I||(d=new I(V)),Ei(this),e=this.Tb.nn;e.next();)f=e.value,f.visible&&f.qp(a,b,c,d);return d},v.prototype.findObjectsIn=v.prototype.pk=function(a,b,c,d,e){var f,g;for(void 0===b&&(b=null),void 0===c&&(c=null),void 0===d&&(d=!1),e instanceof H||e instanceof I||(e=new I(V)),Ei(this),f=this.Tb.nn;f.next();)g=f.value,g.visible&&g.pk(a,b,c,d,e);return e},v.prototype.wA=function(a,b,c,d,e,f){var h,i,g=new I(V);for(Ei(this),h=this.Tb.nn;h.next();)i=h.value,i.visible&&i.wA(a,b,c,d,g,e,f);return g},v.prototype.findObjectsNear=v.prototype.fn=function(a,b,c,d,e,f){var g,h;for(void 0===c&&(c=null),void 0===d&&(d=null),void 0===e&&(e=!0),!1!==e&&!0!==e&&((e instanceof H||e instanceof I)&&(f=e),e=!0),f instanceof H||f instanceof I||(f=new I(V)),Ei(this),g=this.Tb.nn;g.next();)h=g.value,h.visible&&h.fn(a,b,c,d,e,f);return f},v.prototype.acceptEvent=function(a){var b=this.Md;return this.Md=this.dc,this.dc=b,wi(this,this,a,b,a instanceof MouseEvent),b},v.prototype.JJ=function(a){if(this.W.isEnabled){var b=this.W.dc;switch(wi(this.W,this.W,a,b,!1),b.key=String.fromCharCode(a.which),b.ok=!0,a.which){case 33:b.key="PageUp";break;case 34:b.key="PageDown";break;case 35:b.key="End";break;case 36:b.key="Home";break;case 37:b.key="Left";break;case 38:b.key="Up";break;case 39:b.key="Right";break;case 40:b.key="Down";break;case 45:b.key="Insert";break;case 46:b.key="Del";break;case 48:b.key="0";break;case 187:case 61:case 107:b.key="Add";break;case 189:case 173:case 109:b.key="Subtract";break;case 27:b.key="Esc"}return this.W.doKeyDown(),187!==a.which&&189!==a.which&&48!==a.which&&107!==a.which&&109!==a.which&&61!==a.which&&173!==a.which||!0!==a.ctrlKey?ha(this.W,b,a):(a.cancelBubble=!0,a.preventDefault(),a.stopPropagation(),!1)}},v.prototype.KJ=function(a){if(this.W.isEnabled){var b=this.W.dc;switch(wi(this.W,this.W,a,b,!1),b.key=String.fromCharCode(a.which),b.Aj=!0,a.which){case 33:b.key="PageUp";break;case 34:b.key="PageDown";break;case 35:b.key="End";break;case 36:b.key="Home";break;case 37:b.key="Left";break;case 38:b.key="Up";break;case 39:b.key="Right";break;case 40:b.key="Down";break;case 45:b.key="Insert";break;case 46:b.key="Del"}return this.W.doKeyUp(),ha(this.W,b,a)}},v.prototype.em=function(a){var c,d,b=this.Za;return null===b?new E(0,0):(c=this.Jb,d=this.Ib,b=b.getBoundingClientRect(),c=a.clientX-c/b.width*b.left,a=a.clientY-d/b.height*b.top,null!==this.Rc?(a=new E(c,a),hb(a,this.Rc),a):new E(c,a))},v.prototype.invalidateDocumentBounds=v.prototype.Vc=function(){this.Ji||(this.Ji=!0,this.ze())},v.prototype.redraw=v.prototype.Yt=function(){this.cc||this.Jd||(this.na(),Ni(this),Ci(this),this.Vc(),this.bg())},v.prototype.isUpdateRequested=function(){return this.Wf},v.prototype.delayInitialization=function(a){var b=this.fc,c=b.isEnabled;b.isEnabled=!1,Qh(this),this.sf=!1,b.isEnabled=c,a&&setTimeout(a,1)},v.prototype.requestUpdate=v.prototype.ze=function(a){if(void 0===a&&(a=!1),!0!==this.Wf&&!(this.cc||!1===a&&this.Jd)){this.Wf=!0;var b=this;requestAnimationFrame(function(){b.Wf&&b.bg()})}},v.prototype.maybeUpdate=v.prototype.bg=function(){(!this.jo||this.Wf)&&(this.jo&&(this.jo=!1),Qh(this))},v.prototype.Kf=function(a,b,c,d){var e=this.yi;if(this.Vk||e.Ig)for(e=0;b>e;e++)a[e].Kf(c,d)},v.prototype.af=function(a,b){var c,d,f,g,h,i,j,k,l,m,n;if(null===this.Rb&&t.m("No div specified"),c=this.Za,null===c&&t.m("No canvas specified"),this.yi.zd)0===this.ma.Qe&&this.ze(!0);else{if(a||(a=this.Re),d=a!==this.Re,f=this.Tb.n,g=f.length,h=this,this.Kf(f,g,h),d)da(this,a),Ci(this);else if(!this.Be&&void 0===b)return;if(i=this.Pa,g=this.lc,j=Math.round(i.x*g)/g,k=Math.round(i.y*g)/g,l=this.Rc,l.reset(),1!==g&&l.scale(g),0===i.x&&0===i.y||l.translate(-j,-k),m=this.Ij,i=null!==m&&0<m.length&&!0===this.Gz){for(k=t.kx,a.save(),a.beginPath(),g=m.length,j=0;g>j;j++)n=m[j],(0!==n[2]||0!==n[3])&&(n=ga(this,n),a.rect(Math.floor(n[0])-1,Math.floor(n[1])-1,Math.ceil(n[2])+2,Math.ceil(n[3])+2),k&&a.clearRect(Math.floor(n[0])-1,Math.floor(n[1])-1,Math.ceil(n[2])+2,Math.ceil(n[3])+2));a.clip()}for(g=this.wg,t.kn?(c.width=c.width,i=!1,da(this,a),a.scale(g,g)):(a.setTransform(1,0,0,1,0,0),a.scale(g,g),a.clearRect(0,0,this.Jb,this.Ib)),a.miterLimit=9,a.setTransform(1,0,0,1,0,0),a.scale(g,g),a.transform(l.m11,l.m12,l.m21,l.m22,l.dx,l.dy),e&&e.hj&&e.$E(this,a),c=b?function(c){var e,f,g,i,j,k,d=a;if(c.visible){for(d.globalAlpha=c.Uf,e=c.mb,c=c.Nv,c.length=0,f=h.scale,g=e.length,i=0;g>i;i++)if(j=e.n[i],Wh(j)&&!b.contains(j)){if(j instanceof B&&(j.pc&&c.push(j),!1===j.Bg))continue;k=j.pa,1<k.width*f||1<k.height*f?j.af(d,h):Yh(j,d)}d.globalAlpha=1}}:i?function(b){Zh(b,a,h,m)}:function(b){b.af(a,h)},Wi(this,a),g=f.length,j=0;g>j;j++)c(f[j]);this.Ij=[],this.Tk?this.Tk.Ql(this)&&this.yy():this.em=function(){},i&&(a.restore(),da(this,a),e&&e.cJ&&e.bJ(m,a,this)),e&&(e.uA||e.hj)&&e.tA(a,this,l),d?(da(this),Ci(this)):this.Be=this.Vk=!1}},v.prototype.getRenderingHint=function(a){return this.el[a]},v.prototype.setRenderingHint=v.prototype.rK=function(a,b){this.el[a]=b,this.Yt()},v.prototype.resetRenderingHints=v.prototype.sG=function(){this.el={drawShadows:!0}},v.prototype.setInputOption=function(a,b){this.oz[a]=b},v.prototype.na=function(a,b){if(this.Gz&&void 0!==a&&null!==this.Ij){var c=this.Ab;(a&&c.ag(a)||b&&c.ag(b))&&(null!==this.Ij&&(a&&a.P()&&Zi(this,a.x-2,a.y-2,a.width+4,a.height+4),b&&b.P()&&Zi(this,b.x-2,b.y-2,b.width+4,b.height+4)),this.Be=!0,this.ze())}else this.Ij=null,this.Be=!0,this.ze();for(c=this.ym.k;c.next();)c.value.na(a,b)},t.g(v,"viewportOptimizations",v.prototype.GK),t.defineProperty(v,{GK:null},function(){return this.ow},function(a){t.i(a,"boolean",v,"viewportOptimizations"),this.Ij=null,this.ow=a}),v.prototype.add=v.prototype.add=function(a){var b,c;t.l(a,x,v,"add:part"),b=a.h,b!==this&&(null!==b&&t.m("Cannot add part "+a.toString()+" to "+this.toString()+". It is already a part of "+b.toString()),this.Mn&&(a.Xk="Tool"),c=a.Ne,b=this.sl(c),null===b&&(b=this.sl("")),null===b&&t.m('Cannot add a Part when unable find a Layer named "'+c+'" and there is no default Layer'),a.layer!==b&&(c=b.Bp(99999999,a,a.h===this),c>=0&&this.Oc(Md,"parts",b,null,a,null,c),b.Dc||this.Vc(),a.M(cj),c=a.Ip,null!==c&&c(a,null,b)))},v.prototype.Bp=function(a){var b,c;a instanceof y?(this.Iv.add(a),a instanceof z&&(b=a.fb,null===b?this.gl.add(a):b.vm.add(a),b=a.ic,null!==b&&(b.h=this))):a instanceof B?this.rv.add(a):a instanceof ea||this.mb.add(a),a.Nb&&a.ja(),(b=a.data)&&(a instanceof ea||(a instanceof B?this.Nk.add(b,a):this.Ei.add(b,a)),c=this,dj(a,function(a){ej(c,a)})),!0!==Ui(a)&&!0!==Vi(a)||this.pg.add(a),fj(a,!0,this),gj(a)?(a.pa.P()&&this.na($h(a,a.pa)),this.Vc()):a.Va()&&a.pa.P()&&this.na($h(a,a.pa)),this.ze()},v.prototype.df=function(a){var b,c;a.Yf(),a instanceof y?(this.Iv.remove(a),a instanceof z&&(b=a.fb,null===b?this.gl.remove(a):b.vm.remove(a),b=a.ic,null!==b&&(b.h=null))):a instanceof B?this.rv.remove(a):a instanceof ea||this.mb.remove(a),(b=a.data)&&(a instanceof ea||(a instanceof B?this.Nk.remove(b):this.Ei.remove(b)),c=this,dj(a,function(a){hj(c,a)})),this.pg.remove(a),gj(a)?(a.pa.P()&&this.na($h(a,a.pa)),this.Vc()):a.Va()&&a.pa.P()&&this.na($h(a,a.pa)),this.ze()},v.prototype.remove=v.prototype.remove=function(a){var b,c;t.l(a,x,v,"remove:part"),a.ib=!1,a.Jg=!1,b=a.layer,null!==b&&b.h===this&&(a.M(ij),a.cn(),c=b.df(-1,a,!1),c>=0&&this.Oc(Nd,"parts",b,a,null,c,null),c=a.Ip,null!==c&&c(a,b,null))},v.prototype.removeParts=v.prototype.pB=function(a,b){var c,d;for(a===this.selection&&(c=new I,c.Ve(a),a=c),c=a.k;c.next();)d=c.value,d.h===this&&(b&&!d.canDelete()||this.remove(d))},v.prototype.copyParts=v.prototype.jp=function(a,b,c){return this.Ze.jp(a,b,c)},v.prototype.moveParts=v.prototype.moveParts=function(a,b,c){var d,e;if(t.l(b,E,v,"moveParts:offset"),d=this.Cb,null!==d){if(d=d.Od,null===d&&(d=new kf,d.h=this),e=new wa(x,Object),a)a=a.k;else{for(a=this.wj;a.next();)yf(d,e,a.value,c);for(a=this.wh;a.next();)yf(d,e,a.value,c);a=this.links}for(;a.next();)yf(d,e,a.value,c);d.moveParts(e,b,c)}},v.prototype.addLayer=v.prototype.Ys=function(a){jj(this,a,null),a.Ed(this);var b=this.Tb,c=b.count-1;if(!a.Dc)for(;c>=0&&b.wa(c).Dc;)c--;b.Rd(c+1,a),null!==this.re&&this.Oc(Md,"layers",this,null,a,null,c+1),this.na(),this.Vc()},v.prototype.addLayerBefore=v.prototype.ZH=function(a,b){var c,d,e,f;for(jj(this,a,b),a.Ed(this),c=this.Tb,d=c.indexOf(a),d>=0&&(c.remove(a),null!==this.re&&this.Oc(Nd,"layers",this,a,null,d,null)),e=c.count,f=0;e>f;f++)if(c.wa(f)===b){c.Rd(f,a);break}null!==this.re&&this.Oc(Md,"layers",this,null,a,null,f),this.na(),0>d&&this.Vc()},v.prototype.addLayerAfter=function(a,b){var c,d,e,f;for(jj(this,a,b),a.Ed(this),c=this.Tb,d=c.indexOf(a),d>=0&&(c.remove(a),null!==this.re&&this.Oc(Nd,"layers",this,a,null,d,null)),e=c.count,f=0;e>f;f++)if(c.wa(f)===b){c.Rd(f+1,a);break}null!==this.re&&this.Oc(Md,"layers",this,null,a,null,f+1),this.na(),0>d&&this.Vc()},v.prototype.removeLayer=function(a){var b,c,d,e;if(t.l(a,qe,v,"removeLayer:layer"),a.h!==this&&t.m("Cannot remove a Layer from another Diagram: "+a+" of "+a.h),""!==a.name&&(b=this.Tb,c=b.indexOf(a),b.remove(a))){for(b=a.mb.copy().k;b.next();)d=b.value,e=d.Ne,d.Ne=e!==a.name?e:"";null!==this.re&&this.Oc(Nd,"layers",this,a,null,c,null),this.na(),this.Vc()}},v.prototype.findLayer=v.prototype.sl=function(a){var b,c;for(b=this.pn;b.next();)if(c=b.value,c.name===a)return c;return null},v.prototype.addChangedListener=v.prototype.Zz=function(a){t.i(a,"function",v,"addChangedListener:listener"),null===this.Fj&&(this.Fj=new H("function")),this.Fj.add(a)},v.prototype.removeChangedListener=v.prototype.nB=function(a){t.i(a,"function",v,"removeChangedListener:listener"),null!==this.Fj&&(this.Fj.remove(a),0===this.Fj.count&&(this.Fj=null))},v.prototype.zw=function(a){var b,c,d,e;if(this.ab||this.ma.sF(a),a.Bd!==Kd&&(this.th=!0),null!==this.Fj)if(b=this.Fj,c=b.length,1===c)b=b.wa(0),b(a);else if(0!==c)for(d=b.Pe(),e=0;c>e;e++)b=d[e],b(a)},v.prototype.raiseChangedEvent=v.prototype.Oc=function(a,b,c,d,e,f,g){void 0===f&&(f=null),void 0===g&&(g=null);var h=new Cd;h.h=this,h.Bd=a,h.propertyName=b,h.object=c,h.oldValue=d,h.fg=f,h.newValue=e,h.dg=g,this.zw(h)},v.prototype.raiseChanged=v.prototype.j=function(a,b,c,d,e){this.Oc(Ld,a,this,b,c,d,e)},t.A(v,{fc:"animationManager"},function(){return this.yi}),t.A(v,{ma:"undoManager"},function(){return this.re.ma}),t.g(v,"skipsUndoManager",v.prototype.ab),t.defineProperty(v,{ab:"skipsUndoManager"},function(){return this.Yi},function(a){t.i(a,"boolean",v,"skipsUndoManager"),this.Yi=a,this.re.Yi=a}),t.g(v,"delaysLayout",v.prototype.Ow),t.defineProperty(v,{Ow:"delaysLayout"},function(){return this.Wy},function(a){this.Wy=a}),v.prototype.changeState=function(a,b){var c,d,e,f;null!==a&&a.h===this&&(c=a.Bd,c===Ld?(d=a.object,c=a.propertyName,e=a.Da(b),t.Wa(d,c,e),d instanceof V&&(c=d.U,null!==c&&c.Yf()),this.th=!0):c===Md?(e=a.object,c=a.dg,d=a.newValue,e instanceof C?"number"==typeof c&&d instanceof V?(f=e,b?f.df(c):f.Rd(c,d),c=e.U,null!==c&&c.Yf()):"number"==typeof c&&d instanceof Ie&&(f=e,b?d.Ff?f.rG(c):f.oG(c):(c=d.Ff?f.Qd(d.index):f.Pd(d.index),kj(c,d))):e instanceof qe?(f=!0===a.fg,"number"==typeof c&&d instanceof x&&(b?(d.Yf(),f?e.df(c,d,f):this.remove(d)):e.Bp(c,d,f))):e instanceof v?"number"==typeof c&&d instanceof qe&&(b?this.Tb.wd(c):(d.Ed(this),this.Tb.Rd(c,d))):t.m("unknown ChangedEvent.Insert object: "+a.toString()),this.th=!0):c===Nd?(e=a.object,c=a.fg,d=a.oldValue,e instanceof C?"number"==typeof c&&d instanceof V?(f=e,b?f.Rd(c,d):f.df(c)):"number"==typeof c&&d instanceof Ie&&(f=e,b?(c=d.Ff?f.Qd(d.index):f.Pd(d.index),kj(c,d)):d.Ff?f.rG(c):f.oG(c)):e instanceof qe?(f=!0===a.dg,"number"==typeof c&&d instanceof x&&(b?e.Bp(c,d,f):(d.Yf(),f?e.df(c,d,f):this.remove(d)))):e instanceof v?"number"==typeof c&&d instanceof qe&&(b?(d.Ed(this),this.Tb.Rd(c,d)):this.Tb.wd(c)):t.m("unknown ChangedEvent.Remove object: "+a.toString()),this.th=!0):c!==Kd&&t.m("unknown ChangedEvent: "+a.toString()))},v.prototype.startTransaction=v.prototype.yc=function(a){return this.ma.yc(a)},v.prototype.commitTransaction=v.prototype.Ie=function(a){return this.ma.Ie(a)},v.prototype.rollbackTransaction=v.prototype.bq=function(){return this.ma.bq()},v.prototype.updateAllTargetBindings=function(a){void 0===a&&(a="");for(var b=this.wj;b.next();)b.value.Wb(a);for(b=this.wh;b.next();)b.value.Wb(a);for(b=this.links;b.next();)b.value.Wb(a)},v.prototype.updateAllModelDataReferences=function(){for(var a=this.wj;a.next();)a.value.updateModelDataReferences();for(a=this.wh;a.next();)a.value.updateModelDataReferences();for(a=this.links;a.next();)a.value.updateModelDataReferences()},v.prototype.Ut=function(a,b,c){Ni(this),Ci(this);var d=this.ic;null===d||!d.Gt||c||a.width===b.width&&a.height===b.height||d.M(),this.cc||Gi(this),Oi(this),d=this.Ya,!0===this.uo&&d instanceof Ze&&(this.T.da=this.fH(this.T.Yd),d.doMouseMove()),$i(this,a,b),this.Ga("ViewportBoundsChanged",c?{}:null,a)},v.prototype.clearSelection=v.prototype.Bw=function(){var a=0<this.selection.count;a&&this.Ga("ChangingSelection"),cf(this),a&&this.Ga("ChangedSelection")},v.prototype.select=v.prototype.select=function(a){null!==a&&a.layer.h===this&&(t.l(a,x,v,"select:part"),!a.ib||1<this.selection.count)&&(this.Ga("ChangingSelection"),cf(this),a.ib=!0,this.Ga("ChangedSelection"))},v.prototype.selectCollection=v.prototype.FG=function(a){var b,c,d;if(this.Ga("ChangingSelection"),cf(this),t.isArray(a))for(b=t.ub(a),c=0;b>c;c++)d=t.rb(a,c),d instanceof x||t.m("Diagram.selectCollection given something that is not a Part: "+d),d.ib=!0;else for(a=a.k;a.next();)d=a.value,d instanceof x||t.m("Diagram.selectCollection given something that is not a Part: "+d),d.ib=!0;this.Ga("ChangedSelection")},v.prototype.clearHighlighteds=v.prototype.wE=function(){var b,c,d,a=this.ex;if(0<a.count){for(b=a.Pe(),c=b.length,d=0;c>d;d++)b[d].Jg=!1;a.Ra(),a.clear(),a.freeze()}},v.prototype.highlight=function(a){null!==a&&a.layer.h===this&&(t.l(a,x,v,"highlight:part"),!a.Jg||1<this.ex.count)&&(this.wE(),a.Jg=!0)},v.prototype.highlightCollection=function(a){var b,c,d;if(this.wE(),t.isArray(a))for(b=t.ub(a),c=0;b>c;c++)d=t.rb(a,c),d instanceof x||t.m("Diagram.highlightCollection given something that is not a Part: "+d),d.Jg=!0;else for(a=a.k;a.next();)d=a.value,d instanceof x||t.m("Diagram.highlightCollection given something that is not a Part: "+d),d.Jg=!0},v.prototype.scroll=function(a,b,c){void 0===c&&(c=1);var e,d="up"===b||"down"===b;"pixel"===a?e=c:"line"===a?e=c*(d?this.fq:this.eq):"page"===a?(a=d?this.Ab.height:this.Ab.width,a*=this.scale,0!==a&&(e=Math.max(a-(d?this.fq:this.eq),0),e*=c)):t.m("scrolling unit must be 'pixel', 'line', or 'page', not: "+a),e/=this.scale,c=this.position.copy(),"up"===b?c.y=this.position.y-e:"down"===b?c.y=this.position.y+e:"left"===b?c.x=this.position.x-e:"right"===b?c.x=this.position.x+e:t.m("scrolling direction must be 'up', 'down', 'left', or 'right', not: "+b),this.position=c
},v.prototype.scrollToRect=function(a){var b=this.Ab;b.kk(a)||(a=a.hA,a.x-=b.width/2,a.y-=b.height/2,this.position=a)},v.prototype.centerRect=function(a){var b=this.Ab;a=a.hA,a.x-=b.width/2,a.y-=b.height/2,this.position=a},v.prototype.transformDocToView=v.prototype.MB=function(a){var c,b=this.Rc;return b.reset(),1!==this.lc&&b.scale(this.lc),c=this.Pa,(0!==c.x||0!==c.y)&&isFinite(c.x)&&isFinite(c.y)&&b.translate(-c.x,-c.y),a.copy().transform(this.Rc)},v.prototype.transformViewToDoc=v.prototype.fH=function(a){var c,b=this.Rc;return b.reset(),1!==this.lc&&b.scale(this.lc),c=this.Pa,(0!==c.x||0!==c.y)&&isFinite(c.x)&&isFinite(c.y)&&b.translate(-c.x,-c.y),hb(a.copy(),this.Rc)},v.None=df=t.w(v,"None",0),v.Uniform=Ki=t.w(v,"Uniform",1),v.UniformToFill=Li=t.w(v,"UniformToFill",2),v.CycleAll=qg=t.w(v,"CycleAll",10),v.CycleNotDirected=ug=t.w(v,"CycleNotDirected",11),v.CycleNotDirectedFast=wg=t.w(v,"CycleNotDirectedFast",12),v.CycleNotUndirected=xg=t.w(v,"CycleNotUndirected",13),v.CycleDestinationTree=rg=t.w(v,"CycleDestinationTree",14),v.CycleSourceTree=tg=t.w(v,"CycleSourceTree",15),t.g(v,"validCycle",v.prototype.lH),t.defineProperty(v,{lH:"validCycle"},function(){return this.mw},function(a){var b=this.mw;b!==a&&(t.Fa(a,v,v,"validCycle"),this.mw=a,this.j("validCycle",b,a))}),t.g(v,"linkSpacing",v.prototype.Np),t.defineProperty(v,{Np:"linkSpacing"},function(){return this.Nj},function(a){var b=this.Nj;b!==a&&(t.q(a,v,"linkSpacing"),0>a&&t.ha(a,">= zero",v,"linkSpacing"),this.Nj=a,this.j("linkSpacing",b,a))}),t.A(v,{pn:"layers"},function(){return this.Tb.k}),t.g(v,"isModelReadOnly",v.prototype.ff),t.defineProperty(v,{ff:"isModelReadOnly"},function(){var a=this.re;return null===a?!1:a.hb},function(a){var b=this.re;null!==b&&(b.hb=a)}),t.g(v,"isReadOnly",v.prototype.hb),t.defineProperty(v,{hb:"isReadOnly"},function(){return this.Wk},function(a){var b=this.Wk;b!==a&&(t.i(a,"boolean",v,"isReadOnly"),this.Wk=a,this.j("isReadOnly",b,a))}),t.g(v,"isEnabled",v.prototype.isEnabled),t.defineProperty(v,{isEnabled:"isEnabled"},function(){return this.Se},function(a){var b=this.Se;b!==a&&(t.i(a,"boolean",v,"isEnabled"),this.Se=a,this.j("isEnabled",b,a))}),t.g(v,"allowClipboard",v.prototype.vw),t.defineProperty(v,{vw:"allowClipboard"},function(){return this.vu},function(a){var b=this.vu;b!==a&&(t.i(a,"boolean",v,"allowClipboard"),this.vu=a,this.j("allowClipboard",b,a))}),t.g(v,"allowCopy",v.prototype.ej),t.defineProperty(v,{ej:"allowCopy"},function(){return this.yk},function(a){var b=this.yk;b!==a&&(t.i(a,"boolean",v,"allowCopy"),this.yk=a,this.j("allowCopy",b,a))}),t.g(v,"allowDelete",v.prototype.ll),t.defineProperty(v,{ll:"allowDelete"},function(){return this.zk},function(a){var b=this.zk;b!==a&&(t.i(a,"boolean",v,"allowDelete"),this.zk=a,this.j("allowDelete",b,a))}),t.g(v,"allowDragOut",v.prototype.at),t.defineProperty(v,{at:"allowDragOut"},function(){return this.wu},function(a){var b=this.wu;b!==a&&(t.i(a,"boolean",v,"allowDragOut"),this.wu=a,this.j("allowDragOut",b,a))}),t.g(v,"allowDrop",v.prototype.aA),t.defineProperty(v,{aA:"allowDrop"},function(){return this.xu},function(a){var b=this.xu;b!==a&&(t.i(a,"boolean",v,"allowDrop"),this.xu=a,this.j("allowDrop",b,a))}),t.g(v,"allowTextEdit",v.prototype.dp),t.defineProperty(v,{dp:"allowTextEdit"},function(){return this.Ik},function(a){var b=this.Ik;b!==a&&(t.i(a,"boolean",v,"allowTextEdit"),this.Ik=a,this.j("allowTextEdit",b,a))}),t.g(v,"allowGroup",v.prototype.$o),t.defineProperty(v,{$o:"allowGroup"},function(){return this.Ak},function(a){var b=this.Ak;b!==a&&(t.i(a,"boolean",v,"allowGroup"),this.Ak=a,this.j("allowGroup",b,a))}),t.g(v,"allowUngroup",v.prototype.ep),t.defineProperty(v,{ep:"allowUngroup"},function(){return this.Jk},function(a){var b=this.Jk;b!==a&&(t.i(a,"boolean",v,"allowUngroup"),this.Jk=a,this.j("allowUngroup",b,a))}),t.g(v,"allowInsert",v.prototype.Qm),t.defineProperty(v,{Qm:"allowInsert"},function(){return this.zu},function(a){var b=this.zu;b!==a&&(t.i(a,"boolean",v,"allowInsert"),this.zu=a,this.j("allowInsert",b,a))}),t.g(v,"allowLink",v.prototype.Rm),t.defineProperty(v,{Rm:"allowLink"},function(){return this.Bk},function(a){var b=this.Bk;b!==a&&(t.i(a,"boolean",v,"allowLink"),this.Bk=a,this.j("allowLink",b,a))}),t.g(v,"allowRelink",v.prototype.gk),t.defineProperty(v,{gk:"allowRelink"},function(){return this.Dk},function(a){var b=this.Dk;b!==a&&(t.i(a,"boolean",v,"allowRelink"),this.Dk=a,this.j("allowRelink",b,a))}),t.g(v,"allowMove",v.prototype.fk),t.defineProperty(v,{fk:"allowMove"},function(){return this.Ck},function(a){var b=this.Ck;b!==a&&(t.i(a,"boolean",v,"allowMove"),this.Ck=a,this.j("allowMove",b,a))}),t.g(v,"allowReshape",v.prototype.ap),t.defineProperty(v,{ap:"allowReshape"},function(){return this.Ek},function(a){var b=this.Ek;b!==a&&(t.i(a,"boolean",v,"allowReshape"),this.Ek=a,this.j("allowReshape",b,a))}),t.g(v,"allowResize",v.prototype.bp),t.defineProperty(v,{bp:"allowResize"},function(){return this.Fk},function(a){var b=this.Fk;b!==a&&(t.i(a,"boolean",v,"allowResize"),this.Fk=a,this.j("allowResize",b,a))}),t.g(v,"allowRotate",v.prototype.cp),t.defineProperty(v,{cp:"allowRotate"},function(){return this.Gk},function(a){var b=this.Gk;b!==a&&(t.i(a,"boolean",v,"allowRotate"),this.Gk=a,this.j("allowRotate",b,a))}),t.g(v,"allowSelect",v.prototype.We),t.defineProperty(v,{We:"allowSelect"},function(){return this.Hk},function(a){var b=this.Hk;b!==a&&(t.i(a,"boolean",v,"allowSelect"),this.Hk=a,this.j("allowSelect",b,a))}),t.g(v,"allowUndo",v.prototype.bA),t.defineProperty(v,{bA:"allowUndo"},function(){return this.Au},function(a){var b=this.Au;b!==a&&(t.i(a,"boolean",v,"allowUndo"),this.Au=a,this.j("allowUndo",b,a))}),t.g(v,"allowZoom",v.prototype.bt),t.defineProperty(v,{bt:"allowZoom"},function(){return this.Cu},function(a){var b=this.Cu;b!==a&&(t.i(a,"boolean",v,"allowZoom"),this.Cu=a,this.j("allowZoom",b,a))}),t.g(v,"hasVerticalScrollbar",v.prototype.vF),t.defineProperty(v,{vF:"hasVerticalScrollbar"},function(){return this.fv},function(a){var b=this.fv;b!==a&&(t.i(a,"boolean",v,"hasVerticalScrollbar"),this.fv=a,Ni(this),this.na(),this.j("hasVerticalScrollbar",b,a),Gi(this))}),t.g(v,"hasHorizontalScrollbar",v.prototype.uF),t.defineProperty(v,{uF:"hasHorizontalScrollbar"},function(){return this.ev},function(a){var b=this.ev;b!==a&&(t.i(a,"boolean",v,"hasHorizontalScrollbar"),this.ev=a,Ni(this),this.na(),this.j("hasHorizontalScrollbar",b,a),Gi(this))}),t.g(v,"allowHorizontalScroll",v.prototype.vf),t.defineProperty(v,{vf:"allowHorizontalScroll"},function(){return this.yu},function(a){var b=this.yu;b!==a&&(t.i(a,"boolean",v,"allowHorizontalScroll"),this.yu=a,this.j("allowHorizontalScroll",b,a),Gi(this))}),t.g(v,"allowVerticalScroll",v.prototype.wf),t.defineProperty(v,{wf:"allowVerticalScroll"},function(){return this.Bu},function(a){var b=this.Bu;b!==a&&(t.i(a,"boolean",v,"allowVerticalScroll"),this.Bu=a,this.j("allowVerticalScroll",b,a),Gi(this))}),t.g(v,"scrollHorizontalLineChange",v.prototype.eq),t.defineProperty(v,{eq:"scrollHorizontalLineChange"},function(){return this.Vv},function(a){var b=this.Vv;b!==a&&(t.i(a,"number",v,"scrollHorizontalLineChange"),0>a&&t.ha(a,">= 0",v,"scrollHorizontalLineChange"),this.Vv=a,this.j("scrollHorizontalLineChange",b,a))}),t.g(v,"scrollVerticalLineChange",v.prototype.fq),t.defineProperty(v,{fq:"scrollVerticalLineChange"},function(){return this.Wv},function(a){var b=this.Wv;b!==a&&(t.i(a,"number",v,"scrollVerticalLineChange"),0>a&&t.ha(a,">= 0",v,"scrollVerticalLineChange"),this.Wv=a,this.j("scrollVerticalLineChange",b,a))}),t.g(v,"lastInput",v.prototype.T),t.defineProperty(v,{T:"lastInput"},function(){return this.dc},function(a){e&&t.l(a,Ad,v,"lastInput"),this.dc=a}),t.g(v,"firstInput",v.prototype.Uc),t.defineProperty(v,{Uc:"firstInput"},function(){return this.Qk},function(a){e&&t.l(a,Ad,v,"firstInput"),this.Qk=a}),t.g(v,"currentCursor",v.prototype.gc),t.defineProperty(v,{gc:"currentCursor"},function(){return this.Py},function(a){""===a&&(a=this.Vq),this.Py!==a&&(t.i(a,"string",v,"currentCursor"),null!==this.Za&&(this.Py=a,this.Za.style.cursor=a,this.Rb.style.cursor=a))}),t.g(v,"defaultCursor",v.prototype.JI),t.defineProperty(v,{JI:"defaultCursor"},function(){return this.Vq},function(a){""===a&&(a="auto");var b=this.Vq;b!==a&&(t.i(a,"string",v,"defaultCursor"),this.Vq=a,this.j("defaultCursor",b,a))}),t.g(v,"hasGestureZoom",v.prototype.qJ),t.defineProperty(v,{qJ:"hasGestureZoom"},function(){return this.Ii},function(a){var b=this.Ii;b!==a&&(t.i(a,"boolean",v,"hasGestureZoom"),this.Ii=a,this.j("hasGestureZoom",b,a))}),t.g(v,"click",v.prototype.click),t.defineProperty(v,{click:"click"},function(){return this.Ai},function(a){var b=this.Ai;b!==a&&(null!==a&&t.i(a,"function",v,"click"),this.Ai=a,this.j("click",b,a))}),t.g(v,"doubleClick",v.prototype.dn),t.defineProperty(v,{dn:"doubleClick"},function(){return this.Gi},function(a){var b=this.Gi;b!==a&&(null!==a&&t.i(a,"function",v,"doubleClick"),this.Gi=a,this.j("doubleClick",b,a))}),t.g(v,"contextClick",v.prototype.jt),t.defineProperty(v,{jt:"contextClick"},function(){return this.Ci},function(a){var b=this.Ci;b!==a&&(null!==a&&t.i(a,"function",v,"contextClick"),this.Ci=a,this.j("contextClick",b,a))}),t.g(v,"mouseOver",v.prototype.Pt),t.defineProperty(v,{Pt:"mouseOver"},function(){return this.Ri},function(a){var b=this.Ri;b!==a&&(null!==a&&t.i(a,"function",v,"mouseOver"),this.Ri=a,this.j("mouseOver",b,a))}),t.g(v,"mouseHover",v.prototype.Ot),t.defineProperty(v,{Ot:"mouseHover"},function(){return this.Qi},function(a){var b=this.Qi;b!==a&&(null!==a&&t.i(a,"function",v,"mouseHover"),this.Qi=a,this.j("mouseHover",b,a))}),t.g(v,"mouseHold",v.prototype.Nt),t.defineProperty(v,{Nt:"mouseHold"},function(){return this.Pi},function(a){var b=this.Pi;b!==a&&(null!==a&&t.i(a,"function",v,"mouseHold"),this.Pi=a,this.j("mouseHold",b,a))}),t.g(v,"mouseDragOver",v.prototype.eG),t.defineProperty(v,{eG:"mouseDragOver"},function(){return this.Bv},function(a){var b=this.Bv;b!==a&&(null!==a&&t.i(a,"function",v,"mouseDragOver"),this.Bv=a,this.j("mouseDragOver",b,a))}),t.g(v,"mouseDrop",v.prototype.Mt),t.defineProperty(v,{Mt:"mouseDrop"},function(){return this.Oi},function(a){var b=this.Oi;b!==a&&(null!==a&&t.i(a,"function",v,"mouseDrop"),this.Oi=a,this.j("mouseDrop",b,a))}),t.g(v,"toolTip",v.prototype.nu),t.defineProperty(v,{nu:"toolTip"},function(){return this.aj},function(a){var b=this.aj;b!==a&&(null!==a&&t.l(a,ea,v,"toolTip"),this.aj=a,this.j("toolTip",b,a))}),t.g(v,"contextMenu",v.prototype.contextMenu),t.defineProperty(v,{contextMenu:"contextMenu"},function(){return this.Di},function(a){var b=this.Di;b!==a&&(null!==a&&t.l(a,ea,v,"contextMenu"),this.Di=a,this.j("contextMenu",b,a))}),t.g(v,"commandHandler",v.prototype.Ze),t.defineProperty(v,{Ze:"commandHandler"},function(){return this.Gy},function(a){var b=this.Gy;b!==a&&(t.l(a,Ba,v,"commandHandler"),null!==a.h&&t.m("Cannot share CommandHandlers between Diagrams: "+a.toString()),null!==b&&b.Ed(null),this.Gy=a,a.Ed(this))}),t.g(v,"toolManager",v.prototype.Cb),t.defineProperty(v,{Cb:"toolManager"},function(){return this.kw},function(a){var b=this.kw;b!==a&&(t.l(a,Ze,v,"toolManager"),null!==a.h&&t.m("Cannot share ToolManagers between Diagrams: "+a.toString()),null!==b&&b.Ed(null),this.kw=a,a.Ed(this))}),t.g(v,"defaultTool",v.prototype.Mw),t.defineProperty(v,{Mw:"defaultTool"},function(){return this.Vy},function(a){var b=this.Vy;b!==a&&(t.l(a,re,v,"defaultTool"),this.Vy=a,this.Ya===b&&(this.Ya=a))}),t.g(v,"currentTool",v.prototype.Ya),t.defineProperty(v,{Ya:"currentTool"},function(){return this.Ry},function(a){var b=this.Ry;if(null!==b)for(b.la&&b.doDeactivate(),b.cancelWaitAfter(),b.doStop(),b=this.ym.k;b.next();)b.value.na();null===a&&(a=this.Mw),null!==a&&(t.l(a,re,v,"currentTool"),this.Ry=a,a.Ed(this),a.doStart())}),t.A(v,{selection:"selection"},function(){return this.Zv}),t.g(v,"maxSelectionCount",v.prototype.YF),t.defineProperty(v,{YF:"maxSelectionCount"},function(){return this.wv},function(a){var c,b=this.wv;if(b!==a)if(t.i(a,"number",v,"maxSelectionCount"),a>=0&&!isNaN(a)){if(this.wv=a,this.j("maxSelectionCount",b,a),!this.ma.yb&&(a=this.selection.count-a,a>0)){for(this.Ga("ChangingSelection"),b=this.selection.Pe(),c=0;a>c;c++)b[c].ib=!1;this.Ga("ChangedSelection")}}else t.ha(a,">= 0",v,"maxSelectionCount")}),t.g(v,"nodeSelectionAdornmentTemplate",v.prototype.hG),t.defineProperty(v,{hG:"nodeSelectionAdornmentTemplate"},function(){return this.Hv},function(a){var b=this.Hv;b!==a&&(t.l(a,ea,v,"nodeSelectionAdornmentTemplate"),this.Hv=a,this.j("nodeSelectionAdornmentTemplate",b,a))}),t.g(v,"groupSelectionAdornmentTemplate",v.prototype.rF),t.defineProperty(v,{rF:"groupSelectionAdornmentTemplate"},function(){return this.bv},function(a){var b=this.bv;b!==a&&(t.l(a,ea,v,"groupSelectionAdornmentTemplate"),this.bv=a,this.j("groupSelectionAdornmentTemplate",b,a))}),t.g(v,"linkSelectionAdornmentTemplate",v.prototype.VF),t.defineProperty(v,{VF:"linkSelectionAdornmentTemplate"},function(){return this.qv},function(a){var b=this.qv;b!==a&&(t.l(a,ea,v,"linkSelectionAdornmentTemplate"),this.qv=a,this.j("linkSelectionAdornmentTemplate",b,a))}),t.A(v,{ex:"highlighteds"},function(){return this.gv}),t.g(v,"isModified",v.prototype.th),t.defineProperty(v,{th:"isModified"},function(){var a=this.ma;return a.isEnabled?null!==a.lj?!0:this.qz&&this.eh!==a.qj:this.qz},function(a){if(this.qz!==a){t.i(a,"boolean",v,"isModified"),this.qz=a;var b=this.ma;!a&&b.isEnabled&&(this.eh=b.qj),a||mj(this)}}),t.g(v,"model",v.prototype.ea),t.defineProperty(v,{ea:"model"},function(){return this.re},function(a){var c,b=this.re;b!==a&&(t.l(a,J,v,"model"),this.Ya.doCancel(),null!==b&&b.ma!==a.ma&&b.ma.HF&&t.m("Do not replace a Diagram.model while a transaction is in progress."),this.fc.Fn(),this.Bw(),this.sf=!1,this.jo=!0,this.eh=-2,this.Wf=!1,c=this.Jd,this.Jd=!0,this.fc.Gl(),null!==b&&(b.nB(this.hD),b instanceof T&&nj(this,b.uj),nj(this,b.Qg)),this.re=a,a.Zz(this.gD),oj(this,a.Qg),a instanceof T&&pj(this,a.uj),a.nB(this.gD),a.Zz(this.hD),this.Jd=c,this.cc||this.na(),null!==b&&(a.ma.isEnabled=b.ma.isEnabled))}),t.defineProperty(v,{Sa:null},function(){return this.$C},function(a){this.$C=a}),t.g(v,"skipsModelSourceBindings",v.prototype.iu),t.defineProperty(v,{iu:"skipsModelSourceBindings"},function(){return this.FD},function(a){this.FD=a}),v.prototype.clear=v.prototype.clear=function(){var b,c,a=null;for(null!==this.nd&&(a=this.nd.U),this.ea.clear(),b=this.Tb.length,c=0;b>c;c++)this.Tb.n[c].clear();this.pg.clear(),this.bm.clear(),this.Iv.clear(),this.gl.clear(),this.rv.clear(),this.mb.clear(),this.Ei.clear(),this.Nk.clear(),this.lm.clear(),this.Zv.Ra(),this.Zv.clear(),this.Zv.freeze(),this.gv.Ra(),this.gv.clear(),this.gv.freeze(),this.Tn=null,t.gt=null,this.Vu=new F(0/0,0/0,0/0,0/0).freeze(),null!==a&&(this.add(a),this.mb.remove(a)),this.na()},v.prototype.reset=v.prototype.reset=function(){this.cc=!0,this.clear(),this.Tb=new H(qe),this.el={},this.sG(),this.Pa=new E(0/0,0/0).freeze(),this.lc=1,this.iv=new E(0/0,0/0).freeze(),this.jv=0/0,this.yv=1e-4,this.vv=100,this.qw=new E(0/0,0/0).freeze(),this.$u=new F(0/0,0/0,0/0,0/0).freeze(),this.Sl=df,this.Sn=Ub,this.Uk=df,this.qo=Ub,this.kv=this.hv=Vb,this.Fu=new wb(16,16,16,16).freeze(),this.mv=!0,this.mw=qg,this.Vq="auto",this.Di=this.aj=this.Oi=this.Bv=this.Pi=this.Qi=this.Ri=this.Ci=this.Gi=this.Ai=null,this.Wk=!1,this.zk=this.yk=this.vu=this.Se=!0,this.xu=this.wu=!1,this.Bu=this.yu=this.fv=this.ev=this.Cu=this.Au=this.Hk=this.Gk=this.Fk=this.Ek=this.Ck=this.Dk=this.Bk=this.zu=this.Jk=this.Ak=this.Ik=!0,this.Wv=this.Vv=16,this.Ue=new wb(5).freeze(),this.wv=999999999,this.$d=null,fi(this),this.nd=null,this.Yi=!0,ei(this),this.ic=new ze,this.Yi=!1,this.ea=new T,this.sf=!1,this.jo=!0,this.cc=this.Wf=!1,this.na()},v.prototype.rebuildParts=v.prototype.zn=function(){var a,b,c,d,e;for(a=this.yx.k;a.next();)b=a.value,(!b.Td()||b instanceof z)&&t.m('Invalid node template in Diagram.nodeTemplateMap: template for "'+a.key+'" must be a Node or a simple Part, not a Group or Link: '+b);for(a=this.ax.k;a.next();)b=a.value,b instanceof z||t.m('Invalid group template in Diagram.groupTemplateMap: template for "'+a.key+'" must be a Group, not a normal Node or Link: '+b);for(a=this.vx.k;a.next();)b=a.value,b instanceof B||t.m('Invalid link template in Diagram.linkTemplateMap: template for "'+a.key+'" must be a Link, not a normal Node or simple Part: '+b);for(a=t.Hb(),b=this.selection.k;b.next();)c=b.value.data,c&&a.push(c);for(b=t.Hb(),d=this.ex.k;d.next();)(c=d.value.data)&&b.push(c);for(c=t.Hb(),e=this.wh.k;e.next();)d=e.value,d.data&&(c.push(d.data),c.push(d.location));for(e=this.links.k;e.next();)d=e.value,d.data&&(c.push(d.data),c.push(d.location));for(e=this.wj.k;e.next();)d=e.value,d.data&&(c.push(d.data),c.push(d.location));for(d=this.ea,d instanceof T&&nj(this,d.uj),nj(this,d.Qg),oj(this,d.Qg),d instanceof T&&pj(this,d.uj),d=0;d<a.length;d++)(e=this.sh(a[d]))&&(e.ib=!0);for(d=0;d<b.length;d++)(e=this.sh(b[d]))&&(e.Jg=!0);for(d=0;d<c.length;d+=2)(e=this.sh(c[d]))&&(e.location=c[d+1]);t.Ca(a),t.Ca(b),t.Ca(c)},v.prototype.getCategoryForNodeData=function(a){var b=this.ea,c=b.getCategoryForNodeData(a),d=!1;return b instanceof T&&(d=b.zJ(a)),d&&""===c&&(c="LinkLabel"),c},v.prototype.findTemplateForNodeData=function(a,b){var c=!1,d=this.ea;return d instanceof T&&(c=d.NA(a)),c?(c=this.ax.Da(b),null===c&&(c=this.ax.Da(""),null===c&&(t.oH||(t.oH=!0,t.trace('No Group template found for category "'+b+'"'),t.trace("  Using default group template")),c=this.uC))):(c=this.yx.Da(b),null===c&&(c=this.yx.Da(""),null===c&&(t.rH||(t.rH=!0,t.trace('No Node template found for category "'+b+'"'),t.trace("  Using default node template")),c=this.wC))),c instanceof x?c:null},v.prototype.getCategoryForLinkData=function(a){var b=this.ea,c="";return b instanceof T?c=b.getCategoryForLinkData(a):b instanceof be&&(c=b.mJ(a)),c},v.prototype.findTemplateForLinkData=function(a,b){var c=this.vx.Da(b);return null===c&&(c=this.vx.Da(""),null===c&&(t.qH||(t.qH=!0,t.trace('No Link template found for category "'+b+'"'),t.trace("  Using default link template")),c=this.vC)),c instanceof B?c:null},v.prototype.findPartForKey=v.prototype.iJ=function(a){return null===a||void 0===a?null:(a=this.ea.Bf(a),null===a?null:(a=this.Ei.Da(a),a instanceof x?a:null))},v.prototype.findNodeForKey=v.prototype.bf=function(a){return null===a||void 0===a?null:(a=this.ea.Bf(a),null===a?null:(a=this.Ei.Da(a),a instanceof y?a:null))},v.prototype.findPartForData=v.prototype.sh=function(a){if(null===a)return null;var b=this.Ei.Da(a);return b instanceof x?b:(b=this.Nk.Da(a),b instanceof x?b:null)},v.prototype.findNodeForData=v.prototype.Ww=function(a){return null===a?null:(a=this.Ei.Da(a),a instanceof y?a:null)},v.prototype.findLinkForData=v.prototype.Zf=function(a){return null===a?null:(a=this.Nk.Da(a),a instanceof B?a:null)},t.g(v,"nodeTemplate",v.prototype.VJ),t.defineProperty(v,{VJ:"nodeTemplate"},function(){return this.Si.Da("")},function(a){var b=this.Si.Da("");b!==a&&(t.l(a,x,v,"nodeTemplate"),this.Si.add("",a),this.j("nodeTemplate",b,a),this.ma.yb||this.zn())}),t.g(v,"nodeTemplateMap",v.prototype.yx),t.defineProperty(v,{yx:"nodeTemplateMap"},function(){return this.Si},function(a){var b=this.Si;b!==a&&(t.l(a,wa,v,"nodeTemplateMap"),this.Si=a,this.j("nodeTemplateMap",b,a),this.ma.yb||this.zn())}),t.g(v,"groupTemplate",v.prototype.pJ),t.defineProperty(v,{pJ:"groupTemplate"},function(){return this.Rk.Da("")},function(a){var b=this.Rk.Da("");b!==a&&(t.l(a,z,v,"groupTemplate"),this.Rk.add("",a),this.j("groupTemplate",b,a),this.ma.yb||this.zn())}),t.g(v,"groupTemplateMap",v.prototype.ax),t.defineProperty(v,{ax:"groupTemplateMap"},function(){return this.Rk},function(a){var b=this.Rk;b!==a&&(t.l(a,wa,v,"groupTemplateMap"),this.Rk=a,this.j("groupTemplateMap",b,a),this.ma.yb||this.zn())}),t.g(v,"linkTemplate",v.prototype.MJ),t.defineProperty(v,{MJ:"linkTemplate"},function(){return this.Oj.Da("")},function(a){var b=this.Oj.Da("");b!==a&&(t.l(a,B,v,"linkTemplate"),this.Oj.add("",a),this.j("linkTemplate",b,a),this.ma.yb||this.zn())}),t.g(v,"linkTemplateMap",v.prototype.vx),t.defineProperty(v,{vx:"linkTemplateMap"},function(){return this.Oj},function(a){var b=this.Oj;b!==a&&(t.l(a,wa,v,"linkTemplateMap"),this.Oj=a,this.j("linkTemplateMap",b,a),this.ma.yb||this.zn())}),t.g(v,"isMouseCaptured",v.prototype.Sd),t.defineProperty(v,{Sd:"isMouseCaptured"},function(){return this.XC},function(a){var b=this.Za;null!==b&&(a?(this.T.bubbles=!1,b.removeEventListener("mousemove",this.Sp,!1),b.removeEventListener("mousedown",this.Rp,!1),b.removeEventListener("mouseup",this.Up,!1),b.removeEventListener("mousewheel",this.uh,!1),b.removeEventListener("DOMMouseScroll",this.uh,!1),b.removeEventListener("mouseout",this.Tp,!1),window.addEventListener("mousemove",this.Sp,!0),window.addEventListener("mousedown",this.Rp,!0),window.addEventListener("mouseup",this.Up,!0),window.addEventListener("mousewheel",this.uh,!0),window.addEventListener("DOMMouseScroll",this.uh,!0),window.addEventListener("mouseout",this.Tp,!0),window.addEventListener("selectstart",this.preventDefault,!1)):(window.removeEventListener("mousemove",this.Sp,!0),window.removeEventListener("mousedown",this.Rp,!0),window.removeEventListener("mouseup",this.Up,!0),window.removeEventListener("mousewheel",this.uh,!0),window.removeEventListener("DOMMouseScroll",this.uh,!0),window.removeEventListener("mouseout",this.Tp,!0),window.removeEventListener("selectstart",this.preventDefault,!1),b.addEventListener("mousemove",this.Sp,!1),b.addEventListener("mousedown",this.Rp,!1),b.addEventListener("mouseup",this.Up,!1),b.addEventListener("mousewheel",this.uh,!1),b.addEventListener("DOMMouseScroll",this.uh,!1),b.addEventListener("mouseout",this.Tp,!1)),this.XC=a)}),t.g(v,"position",v.prototype.position),t.defineProperty(v,{position:"position"},function(){return this.Pa},function(a){var c,d,b=this.Pa;b.O(a)||(t.l(a,E,v,"position"),c=this.Ab.copy(),c.x=b.x,c.y=b.y,a=a.copy(),this.cc||null===this.Za||(this.cc=!0,d=this.scale,Ii(this,a,this.Mc,this.Jb/d,this.Ib/d,this.Sn),this.cc=!1),this.Pa=a.ba(),a=this.fc,a.zd&&Vh(a,b,this.Pa),this.cc||this.Ut(c,this.Ab))}),t.g(v,"initialPosition",v.prototype.zF),t.defineProperty(v,{zF:"initialPosition"},function(){return this.iv},function(a){this.iv.O(a)||(t.l(a,E,v,"initialPosition"),this.iv=a.ba())}),t.g(v,"initialScale",v.prototype.AF),t.defineProperty(v,{AF:"initialScale"},function(){return this.jv},function(a){this.jv!==a&&(t.i(a,"number",v,"initialScale"),this.jv=a)}),t.g(v,"grid",v.prototype.zp),t.defineProperty(v,{zp:"grid"},function(){return null===this.nd&&Ai(this),this.nd},function(a){var c,b=this.nd;b!==a&&(null===b&&(Ai(this),b=this.nd),t.l(a,C,v,"grid"),a.type!==Bi&&t.m("Diagram.grid must be a Panel of type Panel.Grid"),c=b.ia,null!==c&&c.remove(b),this.nd=a,a.name="GRID",null!==c&&c.add(a),Oi(this),this.na(),this.j("grid",b,a))}),t.A(v,{Ab:"viewportBounds"},function(){var b,c,a=this.dE;return null===this.Za?a:(b=this.Pa,c=this.lc,a.p(b.x,b.y,Math.max(this.Jb,0)/c,Math.max(this.Ib,0)/c),a)}),t.g(v,"fixedBounds",v.prototype.yA),t.defineProperty(v,{yA:"fixedBounds"},function(){return this.$u},function(a){var b=this.$u;b.O(a)||(t.l(a,F,v,"fixedBounds"),this.$u=a=a.ba(),this.Vc(),this.j("fixedBounds",b,a))}),t.A(v,{Mc:"documentBounds"},function(){return this.Vu}),t.g(v,"scale",v.prototype.scale),t.defineProperty(v,{scale:"scale"},function(){return this.lc},function(a){var c,d,e,f,b=this.lc;if(t.q(a,v,"scale"),a<this.Mg&&(a=this.Mg),a>this.Lg&&(a=this.Lg),b!==a){if(this.lc=a,!this.cc&&!this.Jd&&(this.cc=!0,null!==this.Za)){if(c=this.Ab.copy(),d=this.Jb,e=this.Ib,c.width=this.Jb/b,c.height=this.Ib/b,f=this.ig.copy(),isNaN(f.x))switch(this.Gw){case sc:f.x=0;break;case tc:f.x=d-1;break;case Yb:f.x=d/2;break;case Ub:case vc:f.x=d/2}if(isNaN(f.y))switch(this.Gw){case rc:f.y=0;break;case uc:f.y=e-1;break;case Yb:f.y=e/2;break;case Ub:case vc:f.y=e/2}this.position=new E(this.Pa.x+f.x/b-f.x/a,this.Pa.y+f.y/b-f.y/a),this.cc=!1,this.Ut(c,this.Ab)}this.na(),Ni(this)}}),t.g(v,"autoScale",v.prototype.Um),t.defineProperty(v,{Um:"autoScale"},function(){return this.Sl},function(a){var b=this.Sl;b!==a&&(t.Fa(a,v,v,"autoScale"),this.Sl=a,this.j("autoScale",b,a),a!==df&&Gi(this))}),t.g(v,"initialAutoScale",v.prototype.uJ),t.defineProperty(v,{uJ:"initialAutoScale"},function(){return this.Uk},function(a){var b=this.Uk;b!==a&&(t.Fa(a,v,v,"initialAutoScale"),this.Uk=a,this.j("initialAutoScale",b,a))}),t.g(v,"initialViewportSpot",v.prototype.BF),t.defineProperty(v,{BF:"initialViewportSpot"},function(){return this.kv},function(a){var b=this.kv;b!==a&&(t.l(a,L,v,"initialViewportSpot"),a.Cd()||t.m("initialViewportSpot must be a real Spot: "+a),this.kv=a,this.j("initialViewportSpot",b,a))}),t.g(v,"initialDocumentSpot",v.prototype.yF),t.defineProperty(v,{yF:"initialDocumentSpot"},function(){return this.hv},function(a){var b=this.hv;b!==a&&(t.l(a,L,v,"initialDocumentSpot"),a.Cd()||t.m("initialViewportSpot must be a real Spot: "+a),this.hv=a,this.j("initialDocumentSpot",b,a))}),t.g(v,"minScale",v.prototype.Mg),t.defineProperty(v,{Mg:"minScale"},function(){return this.yv},function(a){t.q(a,v,"minScale");var b=this.yv;b!==a&&(a>0?(this.yv=a,this.j("minScale",b,a),a>this.scale&&(this.scale=a)):t.ha(a,"> 0",v,"minScale"))}),t.g(v,"maxScale",v.prototype.Lg),t.defineProperty(v,{Lg:"maxScale"},function(){return this.vv},function(a){t.q(a,v,"maxScale");var b=this.vv;b!==a&&(a>0?(this.vv=a,this.j("maxScale",b,a),a<this.scale&&(this.scale=a)):t.ha(a,"> 0",v,"maxScale"))}),t.g(v,"zoomPoint",v.prototype.ig),t.defineProperty(v,{ig:"zoomPoint"},function(){return this.qw},function(a){this.qw.O(a)||(t.l(a,E,v,"zoomPoint"),this.qw=a=a.ba())}),t.g(v,"contentAlignment",v.prototype.Gw),t.defineProperty(v,{Gw:"contentAlignment"},function(){return this.Sn},function(a){var b=this.Sn;b.O(a)||(t.l(a,L,v,"contentAlignment"),this.Sn=a=a.ba(),this.j("contentAlignment",b,a),Gi(this))}),t.g(v,"initialContentAlignment",v.prototype.vJ),t.defineProperty(v,{vJ:"initialContentAlignment"},function(){return this.qo},function(a){var b=this.qo;b.O(a)||(t.l(a,L,v,"initialContentAlignment"),this.qo=a=a.ba(),this.j("initialContentAlignment",b,a))}),t.g(v,"padding",v.prototype.padding),t.defineProperty(v,{padding:"padding"},function(){return this.Ue},function(a){"number"==typeof a?a=new wb(a):t.l(a,wb,v,"padding");var b=this.Ue;b.O(a)||(this.Ue=a=a.ba(),this.Vc(),this.j("padding",b,a))}),t.A(v,{wh:"nodes"},function(){return this.Iv.k}),t.A(v,{links:"links"},function(){return this.rv.k}),t.A(v,{wj:"parts"},function(){return this.mb.k}),v.prototype.findTopLevelGroups=function(){return this.gl.k},t.g(v,"layout",v.prototype.ic),t.defineProperty(v,{ic:"layout"},function(){return this.$d},function(a){var b=this.$d;b!==a&&(t.l(a,ze,v,"layout"),null!==b&&(b.h=null,b.group=null),this.$d=a,a.h=this,a.group=null,this.Du=!0,this.j("layout",b,a),this.ze())}),v.prototype.layoutDiagram=function(a){Ei(this),a&&Lj(this,!0),Qi(this,!1)},t.g(v,"isTreePathToChildren",v.prototype.vd),t.defineProperty(v,{vd:"isTreePathToChildren"},function(){return this.mv},function(a){var b=this.mv;if(b!==a&&(t.i(a,"boolean",v,"isTreePathToChildren"),this.mv=a,this.j("isTreePathToChildren",b,a),!this.ma.yb))for(a=this.wh;a.next();)Pj(a.value)}),v.prototype.findTreeRoots=function(){var a,b,c;for(a=new H(y),b=this.wh.k;b.next();)c=b.value,c.Hp&&null===c.tt()&&a.add(c);return a.k},t.g(v,"isCollapsingExpanding",v.prototype.ge),t.defineProperty(v,{ge:null},function(){return this.PC},function(a){this.PC=a}),v.prototype.addDiagramListener=v.prototype.$z=function(a,b){t.i(a,"string",v,"addDiagramListener:name"),t.i(b,"function",v,"addDiagramListener:listener");var c=Qj(this,a);null!==c&&c.add(b)},v.prototype.removeDiagramListener=v.prototype.pG=function(a,b){t.i(a,"string",v,"removeDiagramListener:name"),t.i(b,"function",v,"addDiagramListener:listener");var c=Qj(this,a);null!==c&&c.remove(b)},v.prototype.raiseDiagramEvent=v.prototype.Ga=function(a,b,c){e&&t.i(a,"string",v,"raiseDiagramEvent:name");var d=Qj(this,a),f=new Bd;if(f.h=this,f.name=xa(this,a),void 0!==b&&(f.Rx=b),void 0!==c&&(f.Cx=c),a=d.length,1===a)d=d.wa(0),d(f);else if(0!==a)for(b=d.Pe(),c=0;a>c;c++)d=b[c],d(f);return f.cancel},v.prototype.simulatedMouseMove=v.prototype.CB=function(a,b,c){var d,e;return null!==vf?(d=vf.h,c instanceof v||(c=null),e=wf,c!==e&&(null!==e&&e!==d&&null!==e.Cb.Od&&(Af(e),vf.Dt=!1,e.Cb.Od.doSimulatedDragLeave()),wf=c,null!==c&&c!==d&&null!==c.Cb.Od&&(Gf(),e=c.Cb.Od,Df.contains(e)||Df.add(e),c.Cb.Od.doSimulatedDragEnter())),null!==c&&c!==d&&c.aA&&!c.hb&&c.Qm?(d=c.Cb.Od,null!==d&&(null!==a?b=c.em(a):null===b&&(b=new E),c.dc.da=b,c.dc.ok=!1,c.dc.Aj=!1,d.doSimulatedDragOver()),!0):!1):!1},v.prototype.simulatedMouseUp=v.prototype.PG=function(a,b,c,d){if(null!==vf){null===d&&(d=b),b=wf;var e=vf.h;if(d!==b){if(null!==b&&b!==e&&null!==b.Cb.Od)return Af(b),vf.Dt=!1,b.Cb.Od.doSimulatedDragLeave(),!1;wf=d,null!==d&&null!==d.Cb.Od&&(Gf(),b=d.Cb.Od,Df.contains(b)||Df.add(b),d.Cb.Od.doSimulatedDragEnter())}if(null===d)return vf.doCancel(),!0;if(d!==this)return null!==a&&(c=d.em(a)),d.dc.da=c,d.dc.ok=!1,d.dc.Aj=!0,a=d.Cb.Od,null!==a&&a.doSimulatedDrop(),a=vf,null!==a&&(d=a.mayCopy(),a.of=d?"Copy":"Move",a.stopTool()),!0}return!1},t.g(v,"autoScrollRegion",v.prototype.rE),t.defineProperty(v,{rE:"autoScrollRegion"},function(){return this.Fu},function(a){"number"==typeof a?a=new wb(a):t.l(a,wb,v,"autoScrollRegion");var b=this.Fu;b.O(a)||(this.Fu=a=a.ba(),this.Vc(),this.j("autoScrollRegion",b,a))}),v.prototype.makeSVG=v.prototype.makeSvg=function(a){return void 0===a&&(a={}),a.context="svg",a=Yj(this,a),null!==a?a.Ll:null},v.prototype.makeImage=function(a){void 0===a&&(a={});var b=(a.document||document).createElement("img");return b.src=this.NJ(a),b instanceof HTMLImageElement?b:null},v.prototype.makeImageData=v.prototype.NJ=function(a){void 0===a&&(a={});var b=Yj(this,a);return null!==b?b.toDataURL(a.type,a.details):""},v.inherit=function(a,b){t.i(a,"function",v,"inherit"),t.i(b,"function",v,"inherit"),b.PH&&t.m("Cannot inherit from "+t.Hg(b)),t.Qa(a,b)},t.ka("Palette",Zj),t.Qa(Zj,v),t.ka("Overview",aj),t.Qa(aj,v),aj.prototype.computePixelRatio=function(){return 1},aj.prototype.af=function(){var a,b,c,d,f,g,h,i,j,k,l,m,n,o,p,q,r,s;if(null===this.Rb&&t.m("No div specified"),null===this.Za&&t.m("No canvas specified"),this.Be&&(a=this.Ti,!(null===a||a.fc.Ig||a.fc.zd||!this.JH&&a.Cb.Od.la))){for(b=a.zp,(b&&b.visible&&isNaN(b.width)||isNaN(b.height))&&Oi(a),c=this.Za,b=this.Re,d=this.Pz,f=this.RH,d.width=c.width,d.height=c.height,b.uu="",b.setTransform(1,0,0,1,0,0),b.clearRect(0,0,this.Za.width,this.Za.height),g=this.Rc,g.reset(),1!==this.lc&&g.scale(this.scale),0===this.position.x&&0===this.position.y||g.translate(-this.Pa.x,-this.Pa.y),b.setTransform(g.m11,g.m12,g.m21,g.m22,g.dx,g.dy),h=this.Xu,i=this.Ab,j=a.Tb.length,k=0;j>k;k++)if(l=a.Tb.n[k],m=b,n=i,o=h,void 0===o&&(o=!0),o||!l.Dc)for(l=l.mb,o=this.scale,p=l.length,q=0;p>q;q++)r=l.n[q],s=r.pa,s.ag(n)&&(1<s.width*o||1<s.height*o?r.af(m,this):Yh(r,m));for(f.drawImage(c,0,0),e&&e.hj&&(f.fillStyle="red",f.fillRect(0,d.height/2,d.width,4)),a=this.Tb.n,c=this.Tb.length,k=0;c>k;k++)a[k].af(b,this);e&&(e.uA||e.hj)&&e.tA(b,this,g),this.Be=this.Vk=!1}},t.g(aj,"observed",aj.prototype.XJ),t.defineProperty(aj,{XJ:"observed"},function(){return this.Ti},function(a){var b=this.Ti;null!==a&&t.l(a,v,aj,"observed"),b===a||a instanceof aj||(null!==b&&(this.remove(this.Fg),b.pG("ViewportBoundsChanged",this.jG),b.pG("DocumentBoundsChanged",this.iG),b.ym.remove(this)),this.Ti=a,null!==a&&(a.$z("ViewportBoundsChanged",this.jG),a.$z("DocumentBoundsChanged",this.iG),a.ym.add(this),this.add(this.Fg),ck(this)),this.Vc(),this.j("observed",b,a))}),t.g(aj,"box",aj.prototype.Fg),t.defineProperty(aj,{Fg:"box"},function(){return this.Vl},function(a){var b=this.Vl;b!==a&&(this.Vl=a,this.remove(b),this.add(this.Vl),ck(this),this.j("box",b,a))}),t.g(aj,"drawsTemporaryLayers",aj.prototype.dJ),t.defineProperty(aj,{dJ:"drawsTemporaryLayers"},function(){return this.Xu
},function(a){this.Xu!==a&&(this.Xu=a,this.Yt())}),aj.prototype.xf=function(){var a=this.Ti;return null===a?K.CH:a.Mc},aj.prototype.Ut=function(a){this.cc||(Ci(this),this.na(),Ni(this),this.Vc(),ck(this),this.Ga("ViewportBoundsChanged",a))},t.Qa(bk,re),bk.prototype.doStart=function(){this.la=this.h.Sd=!0},bk.prototype.doMouseMove=function(){var a,b,c,d;this.la&&(a=this.h,null!==a&&null!==a.Ti&&(b=a.Ti,null!==b&&(c=b.Ab,d=a.T.da,b.position=new E(d.x-c.width/2,d.y-c.height/2),a.ze())))},bk.prototype.doMouseUp=function(){this.la&&this.doMouseMove(),this.stopTool()},bk.prototype.doStop=function(){this.la=!1;var a=this.h;null!==a&&(a.Sd=!1,ck(a))},t.ka("Brush",qa),qa.Solid=ne=t.w(qa,"Solid",0),qa.Linear=oe=t.w(qa,"Linear",1),qa.Radial=pe=t.w(qa,"Radial",2),qa.Pattern=dk=t.w(qa,"Pattern",4),qa.isValidColor=pa=function(a){var b,c;return"black"===a?!0:""===a?!1:(e&&t.i(a,"string",qa,"isValidColor"),b=t.Dn,b.fillStyle="#000000",c=b.fillStyle,b.fillStyle=a,b.fillStyle!==c?!0:(b.fillStyle="#FFFFFF",c=b.fillStyle,b.fillStyle=a,b.fillStyle!==c))},qa.prototype.copy=function(){var a=new qa;return a.ga=this.ga,a.Rn=this.Rn,a.Qo=this.Qo.ba(),a.ho=this.ho.ba(),a.cw=this.cw,a.Yu=this.Yu,null!==this.ah&&(a.ah=this.ah.copy()),a.Pv=this.Pv,a},qa.prototype.Oa=function(){return this.freeze(),Object.freeze(this),this},qa.prototype.freeze=function(){return this.tb=!0,null!==this.ah&&this.ah.freeze(),this},qa.prototype.Ra=function(){return Object.isFrozen(this)&&t.m("cannot thaw constant: "+this),this.tb=!1,null!==this.ah&&this.ah.Ra(),this},qa.prototype.toString=function(){var b,a="Brush(";if(this.type===ne)a+=this.color;else if(a=this.type===oe?a+"Linear ":this.type===pe?a+"Radial ":this.type===dk?a+"Pattern ":a+"(unknown) ",a+=this.start+" "+this.end,null!==this.ip)for(b=this.ip.k;b.next();)a+=" "+b.key+":"+b.value;return a+")"},qa.prototype.addColorStop=qa.prototype.addColorStop=function(a,b){t.J(this),("number"!=typeof a||!isFinite(a)||a>1||0>a)&&t.ha(a,"0 <= loc <= 1",qa,"addColorStop:loc"),t.i(b,"string",qa,"addColorStop:color"),null===this.ah&&(this.ah=new wa("number","string")),this.ah.add(a,b),this.ga===ne&&(this.type=oe),this.bh=null},t.g(qa,"type",qa.prototype.type),t.defineProperty(qa,{type:"type"},function(){return this.ga},function(a){t.J(this,a),t.Fa(a,qa,qa,"type"),this.ga=a,this.start.Me()&&(a===oe?this.start=Wb:a===pe&&(this.start=Yb)),this.end.Me()&&(a===oe?this.end=ac:a===pe&&(this.end=Yb)),this.bh=null}),t.g(qa,"color",qa.prototype.color),t.defineProperty(qa,{color:"color"},function(){return this.Rn},function(a){t.J(this,a),t.i(a,"string",qa,"color"),this.Rn=a,this.bh=null}),t.g(qa,"start",qa.prototype.start),t.defineProperty(qa,{start:"start"},function(){return this.Qo},function(a){t.J(this,a),a instanceof L||t.jc(a,"Spot",qa,"start"),this.Qo=a.ba(),this.bh=null}),t.g(qa,"end",qa.prototype.end),t.defineProperty(qa,{end:"end"},function(){return this.ho},function(a){t.J(this,a),a instanceof L||t.jc(a,"Spot",qa,"end"),this.ho=a.ba(),this.bh=null}),t.g(qa,"startRadius",qa.prototype.jq),t.defineProperty(qa,{jq:"startRadius"},function(){return this.cw},function(a){t.J(this,a),t.q(a,qa,"startRadius"),0>a&&t.ha(a,">= zero",qa,"startRadius"),this.cw=a,this.bh=null}),t.g(qa,"endRadius",qa.prototype.op),t.defineProperty(qa,{op:"endRadius"},function(){return this.Yu},function(a){t.J(this,a),t.q(a,qa,"endRadius"),0>a&&t.ha(a,">= zero",qa,"endRadius"),this.Yu=a,this.bh=null}),t.g(qa,"colorStops",qa.prototype.ip),t.defineProperty(qa,{ip:"colorStops"},function(){return this.ah},function(a){t.J(this,a),e&&t.l(a,wa,qa,"colorStops"),this.ah=a,this.bh=null}),t.g(qa,"pattern",qa.prototype.pattern),t.defineProperty(qa,{pattern:"pattern"},function(){return this.Pv},function(a){t.J(this,a),this.Pv=a,this.bh=null}),qa.randomColor=function(a,b){void 0===a&&(a=128),e&&(t.q(a,qa,"randomColor:min"),(0>a||a>255)&&t.ha(a,"0 <= min <= 255",qa,"randomColor:min")),void 0===b&&(b=Math.max(a,255)),e&&(t.q(b,qa,"randomColor:max"),(a>b||b>255)&&t.ha(b,"min <= max <= 255",qa,"randomColor:max"));var c=Math.abs(b-a),d=Math.floor(a+Math.random()*c).toString(16),f=Math.floor(a+Math.random()*c).toString(16),c=Math.floor(a+Math.random()*c).toString(16);return 2>d.length&&(d="0"+d),2>f.length&&(f="0"+f),2>c.length&&(c="0"+c),"#"+d+f+c},t.ka("GraphObject",V),t.ji(V),V.prototype.cloneProtected=function(a){var b,c;if(a.oa=6144|this.oa,a.Uf=this.Uf,a.ec=this.ec,a.Qb=this.Qb,a.zc=this.zc,a.Pa.assign(this.Pa),a.qf.assign(this.qf),a.Tj=this.Tj.ba(),a.Sj=this.Sj.ba(),a.Zk=this.Zk.copy(),a.lc=this.lc,a.On=this.On,a.ai=this.ai,a.Hr=this.Hr.ba(),a.bd.assign(this.bd),a.Pb.assign(this.Pb),a.od.assign(this.od),a.cs=this.cs,null!==this.R?(b=this.R,a.R={Qh:b.Qh.ba(),fi:b.fi.ba(),Nh:b.Nh,ci:b.ci,Mh:b.Mh,bi:b.bi,Ph:b.Ph,ei:b.ei}):a.R=null,a.br=this.br,a.cr=this.cr,a.Ns=this.Ns,a.Os=this.Os,a.Ae=this.Ae.ba(),a.Bq=this.Bq.ba(),a.ps=this.ps,a.Yj=this.Yj,a.Iq=this.Iq,a.Gj=this.Gj,a.ts=this.ts,a.ss=this.ss,a.us=this.us.ba(),a.vs=this.vs,a.Pq=this.Pq,null!==this.S?(b=this.S,a.S={Ai:b.Ai,Gi:b.Gi,Ci:b.Ci,Tr:b.Tr,Ur:b.Ur,Ri:b.Ri,Qi:b.Qi,Pi:b.Pi,Rr:b.Rr,Sr:b.Sr,Oi:b.Oi,xq:b.xq,yq:b.yq,zq:b.zq,wq:b.wq,aj:b.aj,Di:b.Di}):a.S=null,a.Qc=this.Qc,Array.isArray(this.Xl))for(a.Xl=this.Xl.slice(0),b=0;b<this.Xl.length;b++)c=this.Xl[b],a[c]=this[c];null!==this.Bi&&(a.Bi=this.Bi.copy())},V.prototype.ki=function(a){a.ds=null,a.Am=null,a.ja()},V.prototype.copy=function(){var a=new this.constructor;return this.cloneProtected(a),a},V.prototype.toString=function(){return t.Hg(Object.getPrototypeOf(this))+"#"+t.ud(this)},V.None=ah=t.w(V,"None",0),V.Default=bh=t.w(V,"Default",0),V.Vertical=ek=t.w(V,"Vertical",4),V.Horizontal=fk=t.w(V,"Horizontal",5),V.Fill=Sc=t.w(V,"Fill",3),V.Uniform=ch=t.w(V,"Uniform",1),V.UniformToFill=dh=t.w(V,"UniformToFill",2),aa=V.prototype,aa.Le=function(){this.R={Qh:Qb,fi:Qb,Nh:10,ci:10,Mh:hk,bi:hk,Ph:0,ei:0}},aa.Oc=function(a,b,c,d,e,f,g){var h=this.U;null!==h&&(h.yn(a,b,c,d,e,f,g),0!==(1024&this.oa)&&c===this&&a===Ld&&jk(this,h,b))},aa.j=function(a,b,c){this.Oc(Ld,a,this,b,c)},aa.fF=function(a,b,c){var d,e;return!1===this.mf?!1:(d=this.Ja,b=a.nk(b),e=!1,c&&(e=mb(a.x,a.y,0,0,0,d.height)<b||mb(a.x,a.y,0,d.height,d.width,d.height)<b||mb(a.x,a.y,d.width,d.height,d.width,0)<b||mb(a.x,a.y,d.width,0,0,0)<b),c||(e=mb(a.x,a.y,0,0,0,d.height)<b&&mb(a.x,a.y,0,d.height,d.width,d.height)<b&&mb(a.x,a.y,d.width,d.height,d.width,0)<b&&mb(a.x,a.y,d.width,0,0,0)<b),e)},aa.Of=function(){return!0},V.prototype.containsPoint=V.prototype.La=function(a){var b,c,d,f,g;return e&&t.l(a,E,V,"containsPoint:p"),b=t.N(),b.assign(a),this.transform.Xa(b),c=this.pa,c.P()?t.FB&&(d=this.Ja,f=this.sk()*(null!==this.h?this.h.scale:1),g=1/f,10>d.width*f&&10>d.height*f)?(a=Gb(c.x-5*g,c.y-5*g,c.width+10*g,c.height+10*g,b.x,b.y),t.B(b),a):(void 0!==this.uc||this instanceof W?Gb(c.x-5,c.y-5,c.width+10,c.height+10,b.x,b.y):c.La(b))?this.Bi&&!this.Bi.La(b)?!1:null!==this.zc&&c.La(b)||null!==this.Qb&&this.od.La(a)?!0:(t.B(b),this.jk(a)):(t.B(b),!1):!1},V.prototype.jk=function(a){var b=this.Ja;return Gb(0,0,b.width,b.height,a.x,a.y)},V.prototype.containsRect=V.prototype.kk=function(a){if(e&&t.l(a,F,V,"containsRect:r"),0===this.angle)return this.pa.kk(a);var b=this.Ja,b=t.wk(0,0,b.width,b.height),c=this.transform,d=!1,f=t.qc(a.x,a.y);return b.La(c.ni(f))&&(f.p(a.x,a.bottom),b.La(c.ni(f))&&(f.p(a.right,a.bottom),b.La(c.ni(f))&&(f.p(a.right,a.y),b.La(c.ni(f))&&(d=!0)))),t.B(f),t.oc(b),d},V.prototype.containedInRect=V.prototype.Zm=function(a,b){if(e&&t.l(a,F,V,"containedInRect:r"),void 0===b)return a.kk(this.pa);var c=this.Ja,d=!1,f=t.qc(0,0);return a.La(b.Xa(f))&&(f.p(0,c.height),a.La(b.Xa(f))&&(f.p(c.width,c.height),a.La(b.Xa(f))&&(f.p(c.width,0),a.La(b.Xa(f))&&(d=!0)))),d},V.prototype.intersectsRect=V.prototype.ag=function(a,b){var c,d,f,g,h,i,j,k;return e&&t.l(a,F,V,"intersectsRect:r"),void 0===b&&(b=this.transform,0===this.angle)?a.ag(this.pa):(c=this.Ja,d=b,f=t.qc(0,0),g=t.qc(0,c.height),h=t.qc(c.width,c.height),i=t.qc(c.width,0),j=!1,a.La(d.Xa(f))||a.La(d.Xa(g))||a.La(d.Xa(h))||a.La(d.Xa(i))?j=!0:(c=t.wk(0,0,c.width,c.height),k=t.qc(a.x,a.y),c.La(d.ni(k))?j=!0:(k.p(a.x,a.bottom),c.La(d.ni(k))?j=!0:(k.p(a.right,a.bottom),c.La(d.ni(k))?j=!0:(k.p(a.right,a.y),c.La(d.ni(k))&&(j=!0)))),t.B(k),t.oc(c),!j&&(K.ix(a,f,g)||K.ix(a,g,h)||K.ix(a,h,i)||K.ix(a,i,f))&&(j=!0)),t.B(f),t.B(g),t.B(h),t.B(i),j)},V.prototype.getDocumentPoint=V.prototype.wb=function(a,b){void 0===b&&(b=new E),a.Me()&&t.m("getDocumentPoint:s Spot must be real: "+a.toString());var c=this.Ja;return b.p(a.x*c.width+a.offsetX,a.y*c.height+a.offsetY),this.ue.Xa(b),b},V.prototype.getDocumentAngle=V.prototype.ul=function(){var a=this.ue,a=180/Math.PI*Math.atan2(a.m12,a.m11);return 0>a&&(a+=360),a},V.prototype.getDocumentScale=V.prototype.sk=function(){var a=this.lc;return null!==this.ia?a*this.ia.sk():a},V.prototype.getLocalPoint=V.prototype.nF=function(a,b){return void 0===b&&(b=new E),b.assign(a),this.ue.ni(b),b},V.prototype.getNearestIntersectionPoint=V.prototype.yl=function(a,b,c){return this.yp(a.x,a.y,b.x,b.y,c)},aa=V.prototype,aa.yp=function(a,b,c,d,e){var f=this.transform,g=1/(f.m11*f.m22-f.m12*f.m21),h=f.m22*g,i=-f.m12*g,j=-f.m21*g,k=f.m11*g,l=g*(f.m21*f.dy-f.m22*f.dx),m=g*(f.m12*f.dx-f.m11*f.dy);return null!==this.hk?(f=this.pa,K.yl(f.left,f.top,f.right,f.bottom,a,b,c,d,e)):(g=a*h+b*j+l,a=a*i+b*k+m,b=c*h+d*j+l,c=c*i+d*k+m,e.p(0,0),d=this.Ja,c=K.yl(0,0,d.width,d.height,g,a,b,c,e),e.transform(f),c)},aa.Sc=function(a,b,c,d,e){var f,g;pk(this),f=t.Nf(),f.assign(this.Pb),this.Pb.Ra(),!1===Ui(this)?(g=this.Pb,g.x=a,g.y=b,g.width=c,g.height=d):this.ik(a,b,c,d),this.Pb.freeze(),this.Bi=void 0===e?null:e,c=!1,void 0!==e?c=!0:this.ia&&(e=this.ia.od,d=this.Ha,null!==this.hk&&(d=this.Pb),c=b+d.height,d=a+d.width,c=!(a+.05>=0&&d<=e.width+.05&&b+.05>=0&&c<=e.height+.05),this instanceof za&&(a=this.od,this.uv>a.height||this.Eo.Kg>a.width))&&(c=!0),this.oa=c?256|this.oa:-257&this.oa,this.Pb.P()||t.m("Non-real actualBounds has been set. Object "+this+", actualBounds: "+this.Pb.toString()),qk(this,f,this.Pb),t.oc(f)},aa.ik=function(){},aa.af=function(a,b){var c,d,f,g,h,i,j,k,l,m,n,o,p,q,r;if(this.visible){if(c=this.opacity,d=1,1!==c){if(0===c)return;d=a.globalAlpha,a.globalAlpha=d*c}if(a instanceof Ac){a:if(this.visible)if(f=null,g=a.qx,this instanceof C&&(this.type===wk||this.type===xk))yk(this,a,b);else if(h=this.Pb,0!==h.width&&0!==h.height&&!isNaN(h.x)&&!isNaN(h.y)){if(i=this.transform,j=this.ia,k=this.Dh,k.reset(),null!==j&&(j.Of()?k.multiply(j.ue):null!==j.ia&&k.multiply(j.ia.ue)),k.multiply(this.Rc),k=0!==(256&this.oa),l=!1,this instanceof za&&zk(this,a),k){if(l=j.Of()?j.Ja:j.pa,this.Bi?(m=this.Bi,n=m.x,o=m.y,p=m.width,m=m.height):(n=Math.max(h.x,l.x),o=Math.max(h.y,l.y),p=Math.min(h.right,l.right)-n,m=Math.min(h.bottom,l.bottom)-o),n>h.width+h.x||h.x>l.width+l.x||o>h.height+h.y||h.y>l.height+l.y)break a;l=!0,Cc(a,1,0,0,1,0,0),a.save(),a.beginPath(),a.rect(n,o,p,m),a.clip()}if(n=!1,this instanceof x&&(n=!0,!this.Va()))break a;o=!1,p=b.el,this.U&&p.drawShadows&&(o=this.U.qi),a.mj.jf=[1,0,0,1,0,0],null!==this.zc&&(Ak(this,a,this.zc,!0,!0),this.zc instanceof qa&&this.zc.type===pe?(a.beginPath(),a.rect(h.x,h.y,h.width,h.height),Bk(a,this.zc,!0)):a.fillRect(h.x,h.y,h.width,h.height)),n&&this.qi&&p.drawShadows&&(Cc(a,1,0,0,1,0,0),h=this.Jm,a.shadowOffsetX=h.x,a.shadowOffsetY=h.y,a.shadowColor=this.Im,a.shadowBlur=this.Hm/b.scale,a.jb()),this instanceof C?Cc(a,i.m11,i.m12,i.m21,i.m22,i.dx,i.dy):a.mj.jf=[i.m11,i.m12,i.m21,i.m22,i.dx,i.dy],null!==this.Qb&&(m=this.Ja,h=i=0,p=m.width,m=m.height,q=0,this instanceof W&&(m=this.Ta.Ub,i=m.x,h=m.y,p=m.width,m=m.height,q=this.se),Ak(this,a,this.Qb,!0),this.Qb instanceof qa&&this.Qb.type===pe?(a.beginPath(),a.rect(i-q/2,h-q/2,p+q,m+q),Bk(a,this.Qb,!0)):a.fillRect(i-q/2,h-q/2,p+q,m+q)),o&&(null!==this.Qb||null!==this.zc||null!==j&&0!==(512&j.oa)||null!==j&&j.type===si&&j.Vw()!==this)?(Ck(this,!0),r=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur],a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0):Ck(this,!1),this.rl(a,b),o&&0!==(512&this.oa)==!0&&(a.shadowOffsetX=r[0],a.shadowOffsetY=r[1],a.shadowBlur=r[2]),n&&o&&(a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),k?(a.restore(),l&&a.Df.pop(),da(b,a)):this instanceof C&&(f=a.Df.pop()),n&&o&&a.Df.pop(),null!==a.bF&&(null===f&&(g===a.qx?(Cc(a,1,0,0,1,0,0),r=a.Df.pop()):r=a.qx,f=r),a.bF(this,f))}}else if(this instanceof C&&(this.type===wk||this.type===xk))yk(this,a,b);else if(k=this.Pb,0!==k.width&&0!==k.height&&!isNaN(k.x)&&!isNaN(k.y)){if(e&&e.hj&&e.XI(a,this),r=this.transform,g=this.ia,j=this.Dh,j.reset(),null!==g&&(g.Of()?j.multiply(g.ue):null!==g.ia&&j.multiply(g.ia.ue)),j.multiply(this.Rc),j=0!==(256&this.oa),this instanceof za&&zk(this,a),j){if(e&&e.aF&&t.trace("clip"+this.toString()),l=g.Of()?g.Ja:g.pa,this.Bi?(o=this.Bi,i=o.x,h=o.y,n=o.width,o=o.height):(i=Math.max(k.x,l.x),h=Math.max(k.y,l.y),n=Math.min(k.right,l.right)-i,o=Math.min(k.bottom,l.bottom)-h),i>k.width+k.x||k.x>l.width+l.x||h>k.height+k.y||k.y>l.height+l.y)return 1!==c&&(a.globalAlpha=d),void 0;e&&e.aF&&e.ZI(a,i,h,n,o),a.save(),a.beginPath(),a.rect(i,h,n,o),a.clip()}if(h=b.el,l=!1,this instanceof x){if(l=!0,!this.Va())return 1!==c&&(a.globalAlpha=d),void 0;this.qi&&h.drawShadows&&(i=this.Jm,a.shadowOffsetX=i.x*b.scale,a.shadowOffsetY=i.y*b.scale,a.shadowColor=this.Im,a.shadowBlur=this.Hm)}i=!1,this.U&&h.drawShadows&&(i=this.U.qi),null!==this.zc&&(Ak(this,a,this.zc,!0,!0),this.zc instanceof qa&&this.zc.type===pe?(a.beginPath(),a.rect(k.x,k.y,k.width,k.height),Bk(a,this.zc,!0)):a.fillRect(k.x,k.y,k.width,k.height)),r.Et()||a.transform(r.m11,r.m12,r.m21,r.m22,r.dx,r.dy),null!==this.Qb&&(o=this.Ja,h=k=0,n=o.width,o=o.height,p=0,this instanceof W&&(o=this.Ta.Ub,k=o.x,h=o.y,n=o.width,o=o.height,p=this.se),Ak(this,a,this.Qb,!0),this.Qb instanceof qa&&this.Qb.type===pe?(a.beginPath(),a.rect(k-p/2,h-p/2,n+p,o+p),Bk(a,this.Qb,!0)):a.fillRect(k-p/2,h-p/2,n+p,o+p)),e&&e.hj&&e.YI(a,this),i&&(null!==this.Qb||null!==this.zc||null!==g&&0!==(512&g.oa)||null!==g&&(g.type===si||g.type===Zg)&&g.Vw()!==this)?(Ck(this,!0),f=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur],a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0):Ck(this,!1),this.rl(a,b),i&&0!==(512&this.oa)==!0&&(a.shadowOffsetX=f[0],a.shadowOffsetY=f[1],a.shadowBlur=f[2]),l&&i&&(a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),j?(a.restore(),this instanceof C?da(b,a,!0):da(b,a,!1)):r.Et()||(f=1/(r.m11*r.m22-r.m12*r.m21),a.transform(r.m22*f,-r.m12*f,-r.m21*f,r.m11*f,f*(r.m21*r.dy-r.m22*r.dx),f*(r.m12*r.dx-r.m11*r.dy)))}1!==c&&(a.globalAlpha=d)}},aa.rl=function(){},V.prototype.isContainedBy=V.prototype.sj=function(a){if(a instanceof C)a:{if(this!==a&&null!==a)for(var b=this.ia;null!==b;){if(b===a){a=!0;break a}b=b.ia}a=!1}else a=!1;return a},V.prototype.isVisibleObject=V.prototype.Cl=function(){if(!this.visible)return!1;var a=this.ia;return null!==a?a.Cl():!0},V.prototype.ja=function(a){var b,c,d;if(!0!==Ti(this)&&(ok(this,!0),sk(this,!0),b=this.ia,null!==b?a||b.ja():(a=this.h,null!==a&&(this.Va()&&a.pg.add(this),this instanceof y&&(a.ma.yb||this.Ef(),null!==this.Dd&&Gk(this.Dd)),a.ze())),this instanceof C))for(c=null,a=this.va,b=a.length,this.ga===si&&(c=Hk(this,a,b))&&c.ja(!0),a=a.n,c=0;b>c;c++)d=a[c],!0!==Ti(d)&&(d.Ea.P()||(d instanceof $g||d instanceof C||d instanceof za||nk(d)!==ah)&&d.ja(!0))},V.prototype.na=function(){if(this instanceof x){var a=this.h;null!==a&&!Ui(this)&&!Vi(this)&&this.Va()&&this.Pb.P()&&a.na($h(this,this.Pb))}else null!==this.U&&this.U.na()},t.g(V,"segmentOrientation",V.prototype.du),t.defineProperty(V,{du:"segmentOrientation"},function(){return this.vs},function(a){var b=this.vs;b!==a&&(e&&t.Fa(a,B,V,"segmentOrientation"),this.vs=a,this.ja(),this.j("segmentOrientation",b,a))}),t.g(V,"segmentIndex",V.prototype.Jf),t.defineProperty(V,{Jf:"segmentIndex"},function(){return this.ts},function(a){e&&t.i(a,"number",V,"segmentIndex"),a=Math.round(a);var b=this.ts;b!==a&&(this.ts=a,this.ja(),this.j("segmentIndex",b,a))}),t.g(V,"segmentFraction",V.prototype.cu),t.defineProperty(V,{cu:"segmentFraction"},function(){return this.ss},function(a){e&&t.i(a,"number",V,"segmentFraction"),isNaN(a)?a=0:0>a?a=0:a>1&&(a=1);var b=this.ss;b!==a&&(this.ss=a,this.ja(),this.j("segmentFraction",b,a))}),t.g(V,"segmentOffset",V.prototype.vB),t.defineProperty(V,{vB:"segmentOffset"},function(){return this.us},function(a){var b=this.us;b.O(a)||(e&&t.l(a,E,V,"segmentOffset"),this.us=a=a.ba(),this.ja(),this.j("segmentOffset",b,a))}),t.g(V,"stretch",V.prototype.ui),t.defineProperty(V,{ui:"stretch"},function(){return this.ai},function(a){var b=this.ai;b!==a&&(e&&t.Fa(a,V,V,"stretch"),this.ai=a,this.ja(),this.j("stretch",b,a))}),t.g(V,"name",V.prototype.name),t.defineProperty(V,{name:"name"},function(){return this.ec},function(a){var b=this.ec;b!==a&&(e&&t.i(a,"string",V,"name"),this.ec=a,this.U&&(this.U.Uj=null),this.j("name",b,a))}),t.g(V,"opacity",V.prototype.opacity),t.defineProperty(V,{opacity:"opacity"},function(){return this.Uf},function(a){var b=this.Uf;b!==a&&(t.i(a,"number",V,"opacity"),(0>a||a>1)&&t.ha(a,"0 <= val <= 1",V,"opacity"),this.Uf=a,this.j("opacity",b,a),a=this.h,b=this.U,null!==a&&null!==b&&a.na($h(b,b.pa)))}),t.g(V,"visible",V.prototype.visible),t.defineProperty(V,{visible:"visible"},function(){return 0!==(1&this.oa)},function(a){var b=0!==(1&this.oa);b!==a&&(e&&t.i(a,"boolean",V,"visible"),this.oa^=1,this.j("visible",b,a),b=this.ia,null!==b?b.ja():this instanceof x&&(this.h&&this.h.na(),tk(this),this.kf(a)),this.na(),Lk(this))}),t.g(V,"pickable",V.prototype.mf),t.defineProperty(V,{mf:"pickable"},function(){return 0!==(2&this.oa)},function(a){var b=0!==(2&this.oa);b!==a&&(e&&t.i(a,"boolean",V,"pickable"),this.oa^=2,this.j("pickable",b,a))}),t.g(V,"fromLinkableDuplicates",V.prototype.iF),t.defineProperty(V,{iF:"fromLinkableDuplicates"},function(){return 0!==(4&this.oa)},function(a){var b=0!==(4&this.oa);b!==a&&(e&&t.i(a,"boolean",V,"fromLinkableDuplicates"),this.oa^=4,this.j("fromLinkableDuplicates",b,a))}),t.g(V,"fromLinkableSelfNode",V.prototype.jF),t.defineProperty(V,{jF:"fromLinkableSelfNode"},function(){return 0!==(8&this.oa)},function(a){var b=0!==(8&this.oa);b!==a&&(e&&t.i(a,"boolean",V,"fromLinkableSelfNode"),this.oa^=8,this.j("fromLinkableSelfNode",b,a))}),t.g(V,"toLinkableDuplicates",V.prototype.XG),t.defineProperty(V,{XG:"toLinkableDuplicates"},function(){return 0!==(16&this.oa)},function(a){var b=0!==(16&this.oa);b!==a&&(e&&t.i(a,"boolean",V,"toLinkableDuplicates"),this.oa^=16,this.j("toLinkableDuplicates",b,a))}),t.g(V,"toLinkableSelfNode",V.prototype.YG),t.defineProperty(V,{YG:"toLinkableSelfNode"},function(){return 0!==(32&this.oa)},function(a){var b=0!==(32&this.oa);b!==a&&(e&&t.i(a,"boolean",V,"toLinkableSelfNode"),this.oa^=32,this.j("toLinkableSelfNode",b,a))}),t.g(V,"isPanelMain",V.prototype.pi),t.defineProperty(V,{pi:"isPanelMain"},function(){return 0!==(64&this.oa)},function(a){var b=0!==(64&this.oa);b!==a&&(e&&t.i(a,"boolean",V,"isPanelMain"),this.oa^=64,this.ja(),this.j("isPanelMain",b,a))}),t.g(V,"isActionable",V.prototype.Bt),t.defineProperty(V,{Bt:"isActionable"},function(){return 0!==(128&this.oa)},function(a){var b=0!==(128&this.oa);b!==a&&(e&&t.i(a,"boolean",V,"isActionable"),this.oa^=128,this.j("isActionable",b,a))}),t.g(V,"areaBackground",V.prototype.hk),t.defineProperty(V,{hk:"areaBackground"},function(){return this.zc},function(a){var b=this.zc;b!==a&&(e&&null!==a&&t.gp(a,"GraphObject.areaBackground"),a instanceof qa&&a.freeze(),this.zc=a,this.na(),this.j("areaBackground",b,a))}),t.g(V,"background",V.prototype.background),t.defineProperty(V,{background:"background"},function(){return this.Qb},function(a){var b=this.Qb;b!==a&&(e&&null!==a&&t.gp(a,"GraphObject.background"),a instanceof qa&&a.freeze(),this.Qb=a,this.na(),this.j("background",b,a))}),t.A(V,{U:"part"},function(){if(this instanceof x)return this;if(this.Am)return this.Am;var a;for(a=this.ia;a;){if(a instanceof x)return this.Am=a;a=a.ia}return null}),V.prototype.Il=function(a){this.Vi=a},t.A(V,{ia:"panel"},function(){return this.Vi}),t.A(V,{layer:"layer"},function(){var a=this.U;return null!==a?a.layer:null}),t.A(V,{h:"diagram"},function(){var a=this.U;return null!==a?a.h:null},{configurable:!0}),t.g(V,"position",V.prototype.position),t.defineProperty(V,{position:"position"},function(){return this.Pa},function(a){var b=this.Pa;b.O(a)||(e&&t.l(a,E,V,"position"),a=a.ba(),this.LG(a,b)&&this.j("position",b,a))}),V.prototype.LG=function(a){return this.Pa=a,Gk(this),pk(this),!0},V.prototype.MG=function(a,b){this.Pa.p(a,b),Nk(this,!1),pk(this)},t.A(V,{pa:"actualBounds"},function(){return this.Pb}),t.g(V,"scale",V.prototype.scale),t.defineProperty(V,{scale:"scale"},function(){return this.lc},function(a){var b=this.lc;b!==a&&(e&&t.q(a,V,"scale"),0>=a&&t.m("GraphObject.scale must be greater than zero"),this.lc=a,pk(this),this.ja(),this.j("scale",b,a))}),t.g(V,"angle",V.prototype.angle),t.defineProperty(V,{angle:"angle"},function(){return this.On},function(a){var b=this.On;b!==a&&(e&&t.q(a,V,"angle"),a%=360,0>a&&(a+=360),b!==a&&(this.On=a,this.ja(),pk(this),this.j("angle",b,a)))}),t.g(V,"desiredSize",V.prototype.Ea),t.defineProperty(V,{Ea:"desiredSize"},function(){return this.qf},function(a){var b=this.qf;b.O(a)||(e&&t.l(a,ra,V,"desiredSize"),this.qf=a=a.ba(),this.ja(),this instanceof W&&this.ef(),this.j("desiredSize",b,a),a=this.U,null!==a&&0!==(1024&this.oa)&&(jk(this,a,"width"),jk(this,a,"height")))}),t.g(V,"width",V.prototype.width),t.defineProperty(V,{width:"width"},function(){return this.qf.width},function(a){if(this.qf.width!==a){e&&t.i(a,"number",V,"width");var b=this.qf;this.qf=a=new ra(a,this.qf.height).freeze(),this.ja(),this instanceof W&&this.ef(),this.j("desiredSize",b,a),b=this.U,null!==b&&0!==(1024&this.oa)&&jk(this,b,"width")}}),t.g(V,"height",V.prototype.height),t.defineProperty(V,{height:"height"},function(){return this.qf.height},function(a){if(this.qf.height!==a){e&&t.i(a,"number",V,"height");var b=this.qf;this.qf=a=new ra(this.qf.width,a).freeze(),this.ja(),this instanceof W&&this.ef(),this.j("desiredSize",b,a),b=this.U,null!==b&&0!==(1024&this.oa)&&jk(this,b,"height")}}),t.g(V,"minSize",V.prototype.cg),t.defineProperty(V,{cg:"minSize"},function(){return this.Tj},function(a){var b=this.Tj;b.O(a)||(e&&t.l(a,ra,V,"minSize"),a=a.copy(),isNaN(a.width)&&(a.width=0),isNaN(a.height)&&(a.height=0),a.freeze(),this.Tj=a,this.ja(),this.j("minSize",b,a))}),t.g(V,"maxSize",V.prototype.Oe),t.defineProperty(V,{Oe:"maxSize"},function(){return this.Sj},function(a){var b=this.Sj;b.O(a)||(e&&t.l(a,ra,V,"maxSize"),a=a.copy(),isNaN(a.width)&&(a.width=1/0),isNaN(a.height)&&(a.height=1/0),a.freeze(),this.Sj=a,this.ja(),this.j("maxSize",b,a))}),t.A(V,{Ha:"measuredBounds"},function(){return this.bd}),t.A(V,{Ja:"naturalBounds"},function(){return this.od},{configurable:!0}),t.g(V,"margin",V.prototype.margin),t.defineProperty(V,{margin:"margin"},function(){return this.Hr},function(a){"number"==typeof a?a=new wb(a):e&&t.l(a,wb,V,"margin");var b=this.Hr;b.O(a)||(this.Hr=a=a.ba(),this.ja(),this.j("margin",b,a))}),t.A(V,{transform:null},function(){return 0!==(2048&this.oa)==!0&&Dk(this),this.Rc}),t.A(V,{ue:null},function(){return 0!==(4096&this.oa)==!0&&Dk(this),this.Dh}),t.g(V,"alignment",V.prototype.alignment),t.defineProperty(V,{alignment:"alignment"},function(){return this.Ae},function(a){var b=this.Ae;b.O(a)||(e?t.l(a,L,V,"alignment"):a.Me()&&!a.Wc()&&t.m("alignment must be a real Spot or Spot.Default"),this.Ae=a=a.ba(),Gk(this),this.j("alignment",b,a))}),t.g(V,"column",V.prototype.column),t.defineProperty(V,{column:"column"},function(){return this.Iq},function(a){e&&t.q(a,V,"column"),a=Math.round(a);var b=this.Iq;b!==a&&(0>a&&t.ha(a,">= 0",V,"column"),this.Iq=a,this.ja(),this.j("column",b,a))}),t.g(V,"columnSpan",V.prototype.CE),t.defineProperty(V,{CE:"columnSpan"},function(){return this.Gj},function(a){e&&t.q(a,V,"columnSpan"),a=Math.round(a);var b=this.Gj;b!==a&&(1>a&&t.ha(a,">= 1",V,"columnSpan"),this.Gj=a,this.ja(),this.j("columnSpan",b,a))}),t.g(V,"row",V.prototype.wc),t.defineProperty(V,{wc:"row"},function(){return this.ps},function(a){e&&t.q(a,V,"row"),a=Math.round(a);var b=this.ps;b!==a&&(0>a&&t.ha(a,">= 0",V,"row"),this.ps=a,this.ja(),this.j("row",b,a))}),t.g(V,"rowSpan",V.prototype.rowSpan),t.defineProperty(V,{rowSpan:"rowSpan"},function(){return this.Yj},function(a){e&&t.q(a,V,"rowSpan"),a=Math.round(a);var b=this.Yj;b!==a&&(1>a&&t.ha(a,">= 1",V,"rowSpan"),this.Yj=a,this.ja(),this.j("rowSpan",b,a))}),t.g(V,"alignmentFocus",V.prototype.ek),t.defineProperty(V,{ek:"alignmentFocus"},function(){return this.Bq},function(a){var b=this.Bq;b.O(a)||(e?t.l(a,L,V,"alignmentFocus"):a.Me()&&!a.Wc()&&t.m("alignmentFocus must be a real Spot or Spot.Default"),this.Bq=a=a.ba(),this.ja(),this.j("alignmentFocus",b,a))}),t.g(V,"portId",V.prototype.Wd),t.defineProperty(V,{Wd:"portId"},function(){return this.cs},function(a){var c,d,b=this.cs;b!==a&&(e&&null!==a&&t.i(a,"string",V,"portId"),c=this.U,null===c||c instanceof y||(t.m("portID being set on a Link: "+a),c=null),null!==b&&c&&Ok(c,this),this.cs=a,null!==a&&c&&(c.Rh=!0,null===c.Ad&&Pk(c),d=this.Wd,null!==d&&c.Ad.add(d,this)),this.j("portId",b,a))}),t.g(V,"toSpot",V.prototype.zb),t.defineProperty(V,{zb:"toSpot"},function(){return null!==this.R?this.R.fi:Qb},function(a){null===this.R&&this.Le();var b=this.R.fi;b.O(a)||(e&&t.l(a,L,V,"toSpot"),a=a.ba(),this.R.fi=a,this.j("toSpot",b,a),Lk(this))}),t.g(V,"toEndSegmentLength",V.prototype.xk),t.defineProperty(V,{xk:"toEndSegmentLength"},function(){return null!==this.R?this.R.ci:10},function(a){null===this.R&&this.Le();var b=this.R.ci;b!==a&&(e&&t.i(a,"number",V,"toEndSegmentLength"),0>a&&t.ha(a,">= 0",V,"toEndSegmentLength"),this.R.ci=a,this.j("toEndSegmentLength",b,a),Lk(this))}),t.g(V,"toEndSegmentDirection",V.prototype.lq),t.defineProperty(V,{lq:"toEndSegmentDirection"},function(){return null!==this.R?this.R.bi:hk},function(a){null===this.R&&this.Le();var b=this.R.bi;b!==a&&(e&&t.Fa(a,y,V,"toEndSegmentDirection"),this.R.bi=a,this.j("toEndSegmentDirection",b,a),Lk(this))}),t.g(V,"toShortLength",V.prototype.mq),t.defineProperty(V,{mq:"toShortLength"},function(){return null!==this.R?this.R.ei:0},function(a){null===this.R&&this.Le();var b=this.R.ei;b!==a&&(e&&t.i(a,"number",V,"toShortLength"),this.R.ei=a,this.j("toShortLength",b,a),Lk(this))}),t.g(V,"toLinkable",V.prototype.JB),t.defineProperty(V,{JB:"toLinkable"},function(){return this.Ns},function(a){var b=this.Ns;b!==a&&(e&&null!==a&&t.i(a,"boolean",V,"toLinkable"),this.Ns=a,this.j("toLinkable",b,a))}),t.g(V,"toMaxLinks",V.prototype.ZG),t.defineProperty(V,{ZG:"toMaxLinks"},function(){return this.Os},function(a){var b=this.Os;b!==a&&(e&&t.q(a,V,"toMaxLinks"),0>a&&t.ha(a,">= 0",V,"toMaxLinks"),this.Os=a,this.j("toMaxLinks",b,a))}),t.g(V,"fromSpot",V.prototype.vb),t.defineProperty(V,{vb:"fromSpot"},function(){return null!==this.R?this.R.Qh:Qb},function(a){null===this.R&&this.Le();var b=this.R.Qh;b.O(a)||(e&&t.l(a,L,V,"fromSpot"),a=a.ba(),this.R.Qh=a,this.j("fromSpot",b,a),Lk(this))}),t.g(V,"fromEndSegmentLength",V.prototype.rk),t.defineProperty(V,{rk:"fromEndSegmentLength"},function(){return null!==this.R?this.R.Nh:10},function(a){null===this.R&&this.Le();var b=this.R.Nh;b!==a&&(e&&t.i(a,"number",V,"fromEndSegmentLength"),0>a&&t.ha(a,">= 0",V,"fromEndSegmentLength"),this.R.Nh=a,this.j("fromEndSegmentLength",b,a),Lk(this))}),t.g(V,"fromEndSegmentDirection",V.prototype.vp),t.defineProperty(V,{vp:"fromEndSegmentDirection"},function(){return null!==this.R?this.R.Mh:hk},function(a){null===this.R&&this.Le();var b=this.R.Mh;b!==a&&(e&&t.Fa(a,y,V,"fromEndSegmentDirection"),this.R.Mh=a,this.j("fromEndSegmentDirection",b,a),Lk(this))}),t.g(V,"fromShortLength",V.prototype.wp),t.defineProperty(V,{wp:"fromShortLength"},function(){return null!==this.R?this.R.Ph:0},function(a){null===this.R&&this.Le();var b=this.R.Ph;b!==a&&(e&&t.i(a,"number",V,"fromShortLength"),this.R.Ph=a,this.j("fromShortLength",b,a),Lk(this))}),t.g(V,"fromLinkable",V.prototype.BA),t.defineProperty(V,{BA:"fromLinkable"},function(){return this.br},function(a){var b=this.br;b!==a&&(e&&null!==a&&t.i(a,"boolean",V,"fromLinkable"),this.br=a,this.j("fromLinkable",b,a))}),t.g(V,"fromMaxLinks",V.prototype.kF),t.defineProperty(V,{kF:"fromMaxLinks"},function(){return this.cr},function(a){var b=this.cr;b!==a&&(e&&t.q(a,V,"fromMaxLinks"),0>a&&t.ha(a,">= 0",V,"fromMaxLinks"),this.cr=a,this.j("fromMaxLinks",b,a))}),t.g(V,"cursor",V.prototype.cursor),t.defineProperty(V,{cursor:"cursor"},function(){return this.Pq},function(a){var b=this.Pq;b!==a&&(t.i(a,"string",V,"cursor"),this.Pq=a,this.j("cursor",b,a))}),t.g(V,"click",V.prototype.click),t.defineProperty(V,{click:"click"},function(){return null!==this.S?this.S.Ai:null},function(a){null===this.S&&gk(this);var b=this.S.Ai;b!==a&&(null!==a&&t.i(a,"function",V,"click"),this.S.Ai=a,this.j("click",b,a))}),t.g(V,"doubleClick",V.prototype.dn),t.defineProperty(V,{dn:"doubleClick"},function(){return null!==this.S?this.S.Gi:null},function(a){null===this.S&&gk(this);var b=this.S.Gi;b!==a&&(null!==a&&t.i(a,"function",V,"doubleClick"),this.S.Gi=a,this.j("doubleClick",b,a))}),t.g(V,"contextClick",V.prototype.jt),t.defineProperty(V,{jt:"contextClick"},function(){return null!==this.S?this.S.Ci:null},function(a){null===this.S&&gk(this);var b=this.S.Ci;b!==a&&(null!==a&&t.i(a,"function",V,"contextClick"),this.S.Ci=a,this.j("contextClick",b,a))}),t.g(V,"mouseEnter",V.prototype.XA),t.defineProperty(V,{XA:"mouseEnter"},function(){return null!==this.S?this.S.Tr:null},function(a){null===this.S&&gk(this);var b=this.S.Tr;b!==a&&(null!==a&&t.i(a,"function",V,"mouseEnter"),this.S.Tr=a,this.j("mouseEnter",b,a))}),t.g(V,"mouseLeave",V.prototype.YA),t.defineProperty(V,{YA:"mouseLeave"},function(){return null!==this.S?this.S.Ur:null},function(a){null===this.S&&gk(this);var b=this.S.Ur;b!==a&&(null!==a&&t.i(a,"function",V,"mouseLeave"),this.S.Ur=a,this.j("mouseLeave",b,a))}),t.g(V,"mouseOver",V.prototype.Pt),t.defineProperty(V,{Pt:"mouseOver"},function(){return null!==this.S?this.S.Ri:null},function(a){null===this.S&&gk(this);var b=this.S.Ri;b!==a&&(null!==a&&t.i(a,"function",V,"mouseOver"),this.S.Ri=a,this.j("mouseOver",b,a))}),t.g(V,"mouseHover",V.prototype.Ot),t.defineProperty(V,{Ot:"mouseHover"},function(){return null!==this.S?this.S.Qi:null},function(a){null===this.S&&gk(this);var b=this.S.Qi;b!==a&&(null!==a&&t.i(a,"function",V,"mouseHover"),this.S.Qi=a,this.j("mouseHover",b,a))}),t.g(V,"mouseHold",V.prototype.Nt),t.defineProperty(V,{Nt:"mouseHold"},function(){return null!==this.S?this.S.Pi:null},function(a){null===this.S&&gk(this);var b=this.S.Pi;b!==a&&(null!==a&&t.i(a,"function",V,"mouseHold"),this.S.Pi=a,this.j("mouseHold",b,a))}),t.g(V,"mouseDragEnter",V.prototype.dG),t.defineProperty(V,{dG:"mouseDragEnter"},function(){return null!==this.S?this.S.Rr:null},function(a){null===this.S&&gk(this);var b=this.S.Rr;b!==a&&(null!==a&&t.i(a,"function",V,"mouseDragEnter"),this.S.Rr=a,this.j("mouseDragEnter",b,a))}),t.g(V,"mouseDragLeave",V.prototype.WA),t.defineProperty(V,{WA:"mouseDragLeave"},function(){return null!==this.S?this.S.Sr:null},function(a){null===this.S&&gk(this);var b=this.S.Sr;b!==a&&(null!==a&&t.i(a,"function",V,"mouseDragLeave"),this.S.Sr=a,this.j("mouseDragLeave",b,a))}),t.g(V,"mouseDrop",V.prototype.Mt),t.defineProperty(V,{Mt:"mouseDrop"},function(){return null!==this.S?this.S.Oi:null},function(a){null===this.S&&gk(this);var b=this.S.Oi;b!==a&&(null!==a&&t.i(a,"function",V,"mouseDrop"),this.S.Oi=a,this.j("mouseDrop",b,a))}),t.g(V,"actionDown",V.prototype.Wz),t.defineProperty(V,{Wz:"actionDown"},function(){return null!==this.S?this.S.xq:null},function(a){null===this.S&&gk(this);var b=this.S.xq;b!==a&&(null!==a&&t.i(a,"function",V,"actionDown"),this.S.xq=a,this.j("actionDown",b,a))}),t.g(V,"actionUp",V.prototype.Yz),t.defineProperty(V,{Yz:"actionUp"},function(){return null!==this.S?this.S.zq:null},function(a){null===this.S&&gk(this);var b=this.S.zq;b!==a&&(null!==a&&t.i(a,"function",V,"actionUp"),this.S.zq=a,this.j("actionUp",b,a))
}),t.g(V,"actionMove",V.prototype.Xz),t.defineProperty(V,{Xz:"actionMove"},function(){return null!==this.S?this.S.yq:null},function(a){null===this.S&&gk(this);var b=this.S.yq;b!==a&&(null!==a&&t.i(a,"function",V,"actionMove"),this.S.yq=a,this.j("actionMove",b,a))}),t.g(V,"actionCancel",V.prototype.Vz),t.defineProperty(V,{Vz:"actionCancel"},function(){return null!==this.S?this.S.wq:null},function(a){null===this.S&&gk(this);var b=this.S.wq;b!==a&&(null!==a&&t.i(a,"function",V,"actionCancel"),this.S.wq=a,this.j("actionCancel",b,a))}),t.g(V,"toolTip",V.prototype.nu),t.defineProperty(V,{nu:"toolTip"},function(){return null!==this.S?this.S.aj:null},function(a){null===this.S&&gk(this);var b=this.S.aj;b!==a&&(null!==a&&t.l(a,ea,V,"toolTip"),this.S.aj=a,this.j("toolTip",b,a))}),t.g(V,"contextMenu",V.prototype.contextMenu),t.defineProperty(V,{contextMenu:"contextMenu"},function(){return null!==this.S?this.S.Di:null},function(a){null===this.S&&gk(this);var b=this.S.Di;b!==a&&(null!==a&&t.l(a,ea,V,"contextMenu"),this.S.Di=a,this.j("contextMenu",b,a))}),V.prototype.bind=V.prototype.bind=function(a){a.zg=this;var b=this.sp();null!==b&&Sk(b)&&t.m("Cannot add a Binding to a template that has already been copied: "+a),null===this.Qc&&(this.Qc=new H(Le)),this.Qc.add(a)},V.prototype.findTemplateBinder=V.prototype.sp=function(){for(var a=this instanceof C?this:this.ia;null!==a;){if(null!==a.Ul&&a instanceof C)return a;a=a.ia}return null},V.fromSvg=V.fromSVG=function(a){return Tk(a)},V.prototype.setProperties=function(a){t.Kx(this,a)},V.make=Uk=function(a){var f,c=arguments,d=null,e=null;for("function"==typeof a?e=a:"string"==typeof a&&(f=Vk.Da(a),"function"==typeof f?(c=Array.prototype.slice.call(arguments),d=f(c)):e=ca[a]),null===d&&(void 0===e&&(d=window.$,void 0!==d&&void 0!==d.noop&&t.m("GraphObject.make failed to complete. Is it conflicting with another $ var? (such as jQuery)"),t.m("GraphObject.make failed to complete, it may be conflicting with another var.")),null!==e&&e.constructor||t.m("GraphObject.make requires a class function or class name, not: "+a),d=new e),f=1,d instanceof v&&1<c.length&&(e=c[1],"string"==typeof e||e instanceof HTMLDivElement)&&(d.oj=null,qi(d,e),f++);f<c.length;f++)e=c[f],void 0===e?t.m("Undefined value at argument "+f+" for object being constructed by GraphObject.make: "+d):Wk(d,e);return d},V.Builders=Vk=new wa("string","function"),Vk.add("Button",function(){var b,c,a=new qa(oe);return a.addColorStop(0,"white"),a.addColorStop(1,"lightgray"),b=new qa(oe),b.addColorStop(0,"white"),b.addColorStop(1,"dodgerblue"),c=Uk(C,si,{Bt:!0},Uk(W,{name:"ButtonBorder",Eb:"RoundedRectangle",fill:a,stroke:"gray"})),c.XA=function(a,c){var d=c.wa(0),e=c._buttonFillOver;void 0===e&&(e=b),c._buttonFillNormal=d.fill,d.fill=e,e=c._buttonStrokeOver,void 0===e&&(e="blue"),c._buttonStrokeNormal=d.stroke,d.stroke=e},c.YA=function(b,c){var d=c.wa(0),e=c._buttonFillNormal;void 0===e&&(e=a),d.fill=e,e=c._buttonStrokeNormal,void 0===e&&(e="gray"),d.stroke=e},c}),Vk.add("TreeExpanderButton",function(){var a=Uk("Button",Uk(W,{name:"ButtonIcon",Eb:"MinusLine",Ea:K.sq},new Le("figure","isTreeExpanded",function(a,b){var c=null,d=b.ia;return d&&(c=a?d._treeExpandedFigure:d._treeCollapsedFigure),c||(c=a?"MinusLine":"PlusLine"),c}).eB("")),{visible:!1},new Le("visible","isTreeLeaf",function(a){return!a}).eB(""));return a.click=function(a,b){var d,c=b.U;if(c instanceof ea&&(c=c.ii),c instanceof y&&(d=c.h,null!==d)){if(d=d.Ze,c.Xc){if(!d.canCollapseTree(c))return}else if(!d.canExpandTree(c))return;a.Ke=!0,c.Xc?d.collapseTree(c):d.expandTree(c)}},a}),Vk.add("SubGraphExpanderButton",function(){var a=Uk("Button",Uk(W,{name:"ButtonIcon",Eb:"MinusLine",Ea:K.sq},new Le("figure","isSubGraphExpanded",function(a,b){var c=null,d=b.ia;return d&&(c=a?d._subGraphExpandedFigure:d._subGraphCollapsedFigure),c||(c=a?"MinusLine":"PlusLine"),c}).eB("")));return a.click=function(a,b){var d,c=b.U;if(c instanceof ea&&(c=c.ii),c instanceof z&&(d=c.h,null!==d)){if(d=d.Ze,c.ie){if(!d.canCollapseSubGraph(c))return}else if(!d.canExpandSubGraph(c))return;a.Ke=!0,c.ie?d.collapseSubGraph(c):d.expandSubGraph(c)}},a}),Vk.add("ContextMenuButton",function(){var b,a=Uk("Button");return a.ui=fk,b=a.we("ButtonBorder"),b instanceof W&&(b.Eb="Rectangle",b.G=new L(0,0,2,2),b.H=new L(1,1,-2,-2)),a}),V.defineBuilder=function(a,b){t.i(a,"string",V,"defineBuilder:name"),t.i(b,"function",V,"defineBuilder:func");var c=a.toLowerCase();""!==a&&"none"!==c&&a!==c||t.m("Shape.defineFigureGenerator name must not be empty or None or all-lower-case: "+a),V.Builders.add(a,b)},t.ka("Panel",C),t.ji(C),t.Qa(C,V),C.prototype.cloneProtected=function(a){var b,c,d,e,f;if(V.prototype.cloneProtected.call(this,a),a.ga=this.ga,a.Ue=this.Ue.ba(),a.fh=this.fh,a.Sq=this.Sq.ba(),a.Ac=this.Ac,a.ga===fa){if(a.Hj=this.Hj.ba(),a.Kh=this.Kh,a.Fi=this.Fi,a.am=this.am,a.Jh=this.Jh,a.Ih=this.Ih,a.$l=this.$l,b=[],0<this.qd.length)for(c=this.qd,d=c.length,e=0;d>e;e++)void 0!==c[e]&&(f=c[e].copy(),f.Il(a),b[e]=f);if(a.qd=b,b=[],0<this.kd.length)for(c=this.kd,d=c.length,e=0;d>e;e++)void 0!==c[e]&&(f=c[e].copy(),f.Il(a),b[e]=f);a.kd=b,a.Fm=this.Fm,a.Wl=this.Wl,a.bj=this.bj,a.Mi=this.Mi}a.Wo=this.Wo,a.gr.assign(this.gr),a.hr=this.hr.ba(),a.Zl=this.Zl,a.Ul=this.Ul,a.wr=this.wr,a.Li=this.Li,a.rg=this.rg,a.xo=this.xo,a.cj.assign(this.cj),a.Rh=this.Rh,this.qs&&(a.qs=this.qs),this._buttonFillNormal&&(a._buttonFillNormal=this._buttonFillNormal),this._buttonFillOver&&(a._buttonFillOver=this._buttonFillOver),this._buttonStrokeNormal&&(a._buttonStrokeNormal=this._buttonStrokeNormal),this._buttonStrokeOver&&(a._buttonStrokeOver=this._buttonStrokeOver),this._treeExpandedFigure&&(a._treeExpandedFigure=this._treeExpandedFigure),this._treeCollapsedFigure&&(a._treeCollapsedFigure=this._treeCollapsedFigure),this._subGraphExpandedFigure&&(a._subGraphExpandedFigure=this._subGraphExpandedFigure),this._subGraphCollapsedFigure&&(a._subGraphCollapsedFigure=this._subGraphCollapsedFigure)},C.prototype.ki=function(a){V.prototype.ki.call(this,a),a.va=this.va;for(var b=a.va.k;b.next();)b.value.Vi=a},C.prototype.copy=function(){var b,c,d,e,f,g,h,i,a=V.prototype.copy.call(this);if(a instanceof C){if(b=this.va,0<b.length)for(c=b.length,d=0;c>d;d++)e=b.n[d].copy(),f=a,e.Il(f),e.Am=null,g=f.va,h=g.count,g.Rd(h,e),g=f.U,null!==g&&(g.Uj=null,null!==e.Wd&&g instanceof y&&(g.Rh=!0),i=f.h,null!==i&&i.ma.yb||g.Oc(Md,"elements",f,null,e,null,h));return a}return null},C.prototype.toString=function(){return"Panel("+this.type+")#"+t.ud(this)},C.Position=fh=t.w(C,"Position",0),C.Horizontal=t.w(C,"Horizontal",1),C.Vertical=ri=t.w(C,"Vertical",2),C.Spot=Zg=t.w(C,"Spot",3),C.Auto=si=t.w(C,"Auto",4),C.Table=fa=t.w(C,"Table",5),C.Viewbox=t.w(C,"Viewbox",6),C.TableRow=wk=t.w(C,"TableRow",7),C.TableColumn=xk=t.w(C,"TableColumn",8),C.Link=Jg=t.w(C,"Link",9),C.Grid=Bi=t.w(C,"Grid",10),t.g(C,"type",C.prototype.type),t.defineProperty(C,{type:"type"},function(){return this.ga},function(a){var b=this.ga;b!==a&&(e&&t.Fa(a,C,C,"type"),b!==wk&&b!==xk||t.m("Cannot change Panel.type when it is already a TableRow or a TableColumn: "+a),this.ga=a,this.ga===Bi?this.fh=!0:this.ga===fa&&Fl(this),this.ja(),this.j("type",b,a))}),t.A(C,{elements:"elements"},function(){return this.va.k}),t.A(C,{Ja:"naturalBounds"},function(){return this.od}),t.g(C,"padding",C.prototype.padding),t.defineProperty(C,{padding:"padding"},function(){return this.Ue},function(a){"number"==typeof a?(0>a&&t.ha(a,">= 0",C,"padding"),a=new wb(a)):(t.l(a,wb,C,"padding"),0>a.left&&t.ha(a.left,">= 0",C,"padding:val.left"),0>a.right&&t.ha(a.right,">= 0",C,"padding:val.right"),0>a.top&&t.ha(a.top,">= 0",C,"padding:val.top"),0>a.bottom&&t.ha(a.bottom,">= 0",C,"padding:val.bottom"));var b=this.Ue;b.O(a)||(this.Ue=a=a.ba(),this.ja(),this.j("padding",b,a))}),t.g(C,"defaultAlignment",C.prototype.lk),t.defineProperty(C,{lk:"defaultAlignment"},function(){return this.Sq},function(a){var b=this.Sq;b.O(a)||(e&&t.l(a,L,C,"defaultAlignment"),this.Sq=a=a.ba(),this.ja(),this.j("defaultAlignment",b,a))}),t.g(C,"defaultStretch",C.prototype.pA),t.defineProperty(C,{pA:"defaultStretch"},function(){return this.Ac},function(a){var b=this.Ac;b!==a&&(t.Fa(a,V,C,"defaultStretch"),this.Ac=a,this.ja(),this.j("defaultStretch",b,a))}),t.g(C,"defaultSeparatorPadding",C.prototype.QI),t.defineProperty(C,{QI:"defaultSeparatorPadding"},function(){return void 0===this.Hj?K.uq:this.Hj},function(a){if(void 0!==this.Hj){"number"==typeof a?a=new wb(a):e&&t.l(a,wb,C,"defaultSeparatorPadding");var b=this.Hj;b.O(a)||(this.Hj=a=a.ba(),this.j("defaultSeparatorPadding",b,a))}}),t.g(C,"defaultRowSeparatorStroke",C.prototype.NI),t.defineProperty(C,{NI:"defaultRowSeparatorStroke"},function(){return void 0===this.Fi?null:this.Fi},function(a){var b=this.Fi;b!==a&&(null===a||"string"==typeof a||a instanceof qa)&&(a instanceof qa&&a.freeze(),this.Fi=a,this.j("defaultRowSeparatorStroke",b,a))}),t.g(C,"defaultRowSeparatorStrokeWidth",C.prototype.OI),t.defineProperty(C,{OI:"defaultRowSeparatorStrokeWidth"},function(){return void 0===this.Kh?1:this.Kh},function(a){if(void 0!==this.Kh){var b=this.Kh;b!==a&&(this.Kh=a,this.j("defaultRowSeparatorStrokeWidth",b,a))}}),t.g(C,"defaultRowSeparatorDashArray",C.prototype.MI),t.defineProperty(C,{MI:"defaultRowSeparatorDashArray"},function(){return void 0===this.am?null:this.am},function(a){if(void 0!==this.am){var b=this.am;b!==a&&(Array.isArray(a)||t.jc(a,"Array",C,"defaultRowSeparatorDashArray:val"),this.am=a,this.j("defaultRowSeparatorDashArray",b,a))}}),t.g(C,"defaultColumnSeparatorStroke",C.prototype.HI),t.defineProperty(C,{HI:"defaultColumnSeparatorStroke"},function(){return void 0===this.Ih?null:this.Ih},function(a){if(void 0!==this.Ih){var b=this.Ih;b!==a&&(null===a||"string"==typeof a||a instanceof qa)&&(a instanceof qa&&a.freeze(),this.Ih=a,this.j("defaultColumnSeparatorStroke",b,a))}}),t.g(C,"defaultColumnSeparatorStrokeWidth",C.prototype.II),t.defineProperty(C,{II:"defaultColumnSeparatorStrokeWidth"},function(){return void 0===this.Jh?1:this.Jh},function(a){if(void 0!==this.Jh){var b=this.Jh;b!==a&&(this.Jh=a,this.j("defaultColumnSeparatorStrokeWidth",b,a))}}),t.g(C,"defaultColumnSeparatorDashArray",C.prototype.GI),t.defineProperty(C,{GI:"defaultColumnSeparatorDashArray"},function(){return void 0===this.$l?null:this.$l},function(a){if(void 0!==this.$l){var b=this.$l;b!==a&&(Array.isArray(a)||t.jc(a,"Array",C,"defaultColumnSeparatorDashArray:val"),this.$l=a,this.j("defaultColumnSeparatorDashArray",b,a))}}),t.g(C,"viewboxStretch",C.prototype.FK),t.defineProperty(C,{FK:"viewboxStretch"},function(){return this.Wo},function(a){var b=this.Wo;b!==a&&(t.Fa(a,V,C,"viewboxStretch"),this.Wo=a,this.j("viewboxStretch",b,a))}),t.g(C,"gridCellSize",C.prototype.vt),t.defineProperty(C,{vt:"gridCellSize"},function(){return this.gr},function(a){var b=this.gr;b.O(a)||(t.l(a,ra,C,"gridCellSize"),a.P()&&0!==a.width&&0!==a.height||t.m("Invalid Panel.gridCellSize: "+a),this.gr=a.ba(),null!==this.h&&this===this.h.zp&&Oi(this.h),this.na(),this.j("gridCellSize",b,a))}),t.g(C,"gridOrigin",C.prototype.EA),t.defineProperty(C,{EA:"gridOrigin"},function(){return this.hr},function(a){var b=this.hr;b.O(a)||(t.l(a,E,C,"gridOrigin"),a.P()||t.m("Invalid Panel.gridOrigin: "+a),this.hr=a.ba(),this.h&&Oi(this.h),this.na(),this.j("gridOrigin",b,a))}),C.prototype.rl=function(a,b){var c,d,f,g,h,i,j,k,l,m,n,o,p,q,r,s,u,v,w,x;if(this.ga===Bi){for(c=this.sk()*b.scale,0>=c&&(c=1),d=this.vt,f=d.width,d=d.height,g=this.Ja,h=g.width,g=g.height,i=Math.ceil(h/f),j=Math.ceil(g/d),k=this.EA,a.save(),a.beginPath(),a.rect(0,0,h,g),a.clip(),l=[],m=this.va.n,n=this.va.length,o=0;n>o;o++)if(p=[],l.push(p),q=m[o],q.visible)for(q=lj(q.Eb),r=o+1;n>r;r++)s=m[r],s.visible&&lj(s.Eb)===q&&(s=s.interval,s>=2&&p.push(s));for(m=this.va.length,n=0;m>n;n++)if(u=this.va.n[n],u.visible){if(o=l[n],p=u.interval,q=!1,v=u.Qx,null!==v&&(w=q=!0,void 0!==a.setLineDash?(a.setLineDash(v),a.lineDashOffset=u.rd):void 0!==a.webkitLineDash?(a.webkitLineDash=v,a.webkitLineDashOffset=u.rd):void 0!==a.mozDash?(a.mozDash=v,a.mozDashOffset=u.rd):w=!1),"LineV"===u.Eb){for(a.lineWidth=u.lb,Ak(this,a,u.stroke,!1),a.beginPath(),s=r=Math.floor(-k.x/f);r+i>=s&&(x=s*f+k.x,!(x>=0&&h>x&&Hl(s,p,o)&&(q&&!w?ik(a,x,0,x,g,v,u.rd):(a.moveTo(x,0),a.lineTo(x,g)),2>f*p*c)));s++);a.stroke()}else if("LineH"===u.Eb){for(a.lineWidth=u.lb,Ak(this,a,u.stroke,!1),a.beginPath(),s=r=Math.floor(-k.y/d);r+j>=s&&(x=s*d+k.y,!(x>=0&&g>=x&&Hl(s,p,o)&&(q&&!w?ik(a,0,x,h,x,v,u.rd):(a.moveTo(0,x),a.lineTo(h,x)),2>d*p*c)));s++);a.stroke()}else if("BarV"===u.Eb)for(Ak(this,a,u.fill,!0),u=u.width,isNaN(u)&&(u=f),s=r=Math.floor(-k.x/f);r+i>=s&&(x=s*f+k.x,!(x>=0&&h>x&&Hl(s,p,o)&&(a.fillRect(x,0,u,g),2>f*p*c)));s++);else if("BarH"===u.Eb)for(Ak(this,a,u.fill,!0),u=u.height,isNaN(u)&&(u=d),s=r=Math.floor(-k.y/d);r+j>=s&&(x=s*d+k.y,!(x>=0&&g>=x&&Hl(s,p,o)&&(a.fillRect(0,x,h,u),2>d*p*c)));s++);q&&(void 0!==a.setLineDash?(a.setLineDash(t.xi),a.lineDashOffset=0):void 0!==a.webkitLineDash?(a.webkitLineDash=t.xi,a.webkitLineDashOffset=0):void 0!==a.mozDash&&(a.mozDash=null,a.mozDashOffset=0))}a.restore(),da(b,a,!1)}else{for(this.ga===fa&&(a.lineCap="butt",Il(this,a,!0,this.qd,!0),Il(this,a,!1,this.kd,!0),Jl(this,a,!0,this.qd),Jl(this,a,!1,this.kd),Il(this,a,!0,this.qd,!1),Il(this,a,!1,this.kd,!1)),c=this.va.length,f=0;c>f;f++)this.va.n[f].af(a,b);e&&e.aJ&&this instanceof B&&e.$I(a,b,this)}},C.prototype.yp=function(a,b,c,d,e){var f=this.Of(),g=this.transform,h=1/(g.m11*g.m22-g.m12*g.m21),i=g.m22*h,j=-g.m12*h,k=-g.m21*h,l=g.m11*h,m=h*(g.m21*g.dy-g.m22*g.dx),n=h*(g.m12*g.dx-g.m11*g.dy);if(null!==this.hk)return g=this.pa,K.yl(g.left,g.top,g.right,g.bottom,a,b,c,d,e);if(null!==this.background)f=a*i+b*k+m,h=a*j+b*l+n,a=c*i+d*k+m,c=c*j+d*l+n,e.p(0,0),d=this.Ja,c=K.yl(0,0,d.width,d.height,f,h,a,c,e),e.transform(g);else{for(f||(i=1,k=j=0,l=1,n=m=0),h=a*i+b*k+m,a=a*j+b*l+n,i=c*i+d*k+m,d=c*j+d*l+n,e.p(i,d),j=(i-h)*(i-h)+(d-a)*(d-a),c=!1,l=this.va.n,n=l.length,k=t.N(),m=0;n>m;m++)b=l[m],b.visible&&b.yp(h,a,i,d,k)&&(c=!0,b=(h-k.x)*(h-k.x)+(a-k.y)*(a-k.y),j>b&&(j=b,e.set(k)));t.B(k),f&&e.transform(g)}return c},C.prototype.Kt=function(a,b,c,d){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,u,v,w,x,y,z,A,B,D,E,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,X,Y,Z,$,_,ab,bb,cb,jb,kb,db,eb,fb,gb,hb,ib,lb,mb,nb,ob,pb,qb,rb,sb,tb,vb,wb,xb,yb,zb,Ab,Bb,Cb,Db,Eb,Gb,Hb,Ib,Jb,Kb,Lb,Mb,Nb,Ob,Pb,Qb,Rb,Sb,Tb,Ub,Vb,Zb,$b,Wb,Xb,_b,ac,bc,cc,dc,ec,fc,gc,hc,ic,jc,kc,lc,mc,nc,oc,pc,qc,rc,sc,tc,uc,vc,wc,xc,yc,zc,Cc,Ac,Bc,Dc,Ec,Fc,Gc,Hc,Ic,Jc,Kc,Lc,Mc,Nc,Oc,Pc,Qc,Rc,Tc,Uc,Vc,Wc,Xc,Yc,Zc,$c,_c,ad,bd,cd,dd,ed,fd,gd,hd,id,jd,kd,ld,md,nd,od,pd,qd,rd,sd,td,ud,vd,wd,xd,yd,zd,Ad,Bd,Cd,Dd,Ed,Fd,Gd,Hd,Id,Jd,Kd,Ld,Md,Nd,Od,Pd,Qd,Rd,Sd,Td,Ud,Vd,Wd,Xd,$d,_d,Yd,Zd,ae,be,ce,de,ee,fe,ge,he,ie,je,ke,le,me,ne,oe,pe,qe,re,e=this.cj;if(e.width=0,e.height=0,f=this.Ea,g=this.cg,void 0===c&&(c=g.width,d=g.height),c=Math.max(c,g.width),d=Math.max(d,g.height),h=this.Oe,isNaN(f.width)||(a=Math.min(f.width,h.width)),isNaN(f.height)||(b=Math.min(f.height,h.height)),a=Math.max(c,a),b=Math.max(d,b),i=this.padding,a=Math.max(a-i.left-i.right,0),b=Math.max(b-i.top-i.bottom,0),j=this.va,k=j.length,0!==k)switch(l=this.ga.ec){case"Position":for(m=a,n=b,o=c,p=d,e.x=0,e.y=0,e.width=0,q=e.height=0;k>q;q++)r=j.n[q],(r.visible||r===this.Zb)&&(s=r.margin,u=s.right+s.left,v=s.top+s.bottom,wh(r,m,n,o,p),w=r.Ha,x=Math.max(w.width+u,0),y=Math.max(w.height+v,0),z=r.position.x,A=r.position.y,isFinite(z)||(z=0),isFinite(A)||(A=0),r instanceof W&&r.MA&&(B=r.lb/2,z-=B,A-=B),Fb(e,z,A,x,y));break;case"Vertical":for(D=a,E=c,G=t.Hb(),H=0;k>H;H++)I=j.n[H],(I.visible||I===this.Zb)&&(J=nk(I),J!==ah&&J!==ek?G.push(I):(K=I.margin,L=K.right+K.left,M=K.top+K.bottom,wh(I,D,1/0,E,0),N=I.Ha,O=Math.max(N.width+L,0),P=Math.max(N.height+M,0),e.width=Math.max(e.width,O),e.height+=P));if(Q=G.length,0!==Q){for(this.Ea.width?D=Math.min(this.Ea.width,this.Oe.width):0!==e.width&&(D=Math.min(e.width,this.Oe.width)),H=0;Q>H;H++)I=G[H],(I.visible||I===this.Zb)&&(K=I.margin,L=K.right+K.left,M=K.top+K.bottom,wh(I,D,1/0,E,0),N=I.Ha,O=Math.max(N.width+L,0),P=Math.max(N.height+M,0),e.width=Math.max(e.width,O),e.height+=P);t.Ca(G)}break;case"Horizontal":for(R=b,S=d,T=t.Hb(),U=0;k>U;U++)V=j.n[U],(V.visible||V===this.Zb)&&(X=nk(V),X!==ah&&X!==fk?T.push(V):(Y=V.margin,Z=Y.right+Y.left,$=Y.top+Y.bottom,wh(V,1/0,R,0,S),_=V.Ha,ab=Math.max(_.width+Z,0),bb=Math.max(_.height+$,0),e.width+=ab,e.height=Math.max(e.height,bb)));if(cb=T.length,0!==cb){for(this.Ea.height?R=Math.min(this.Ea.height,this.Oe.height):0!==e.height&&(R=Math.min(e.height,this.Oe.height)),U=0;cb>U;U++)V=T[U],(V.visible||V===this.Zb)&&(Y=V.margin,Z=Y.right+Y.left,$=Y.top+Y.bottom,wh(V,1/0,R,0,S),_=V.Ha,ab=Math.max(_.width+Z,0),bb=Math.max(_.height+$,0),e.width+=ab,e.height=Math.max(e.height,bb));t.Ca(T)}break;case"Spot":a:{for(db=a,eb=b,fb=c,gb=d,hb=Hk(this,j,k),ib=hb.margin,lb=ib.right+ib.left,mb=ib.top+ib.bottom,wh(hb,db,eb,fb,gb),nb=hb.Ha,ob=nb.width,pb=nb.height,qb=Math.max(ob+lb,0),rb=Math.max(pb+mb,0),e.x=-ib.left,e.y=-ib.top,e.width=qb,e.height=rb,sb=0;k>sb;sb++)tb=j.n[sb],tb===hb||!tb.visible&&tb!==this.Zb||(ib=tb.margin,jb=ib.right+ib.left,kb=ib.top+ib.bottom,wh(tb,db,eb,0,0),nb=tb.Ha,qb=Math.max(nb.width+jb,0),rb=Math.max(nb.height+kb,0),vb=tb.alignment,vb.Wc()&&(vb=this.lk),vb.Cd()||(vb=Yb),wb=tb.ek,wb.Wc()&&(wb=Yb),Fb(e,vb.x*ob+vb.offsetX-(wb.x*nb.width-wb.offsetX)-ib.left,vb.y*pb+vb.offsetY-(wb.y*nb.height-wb.offsetY)-ib.top,qb,rb));switch(xb=hb.ui,xb===bh&&(xb=nk(hb)),xb){case ah:break a;case Sc:if(!isFinite(db)&&!isFinite(eb))break a;break;case fk:if(!isFinite(db))break a;break;case ek:if(!isFinite(eb))break a}for(nb=hb.Ha,ob=nb.width,pb=nb.height,qb=Math.max(ob+lb,0),rb=Math.max(pb+mb,0),ib=hb.margin,e.x=-ib.left,e.y=-ib.top,e.width=qb,e.height=rb,sb=0;k>sb;sb++)tb=j.n[sb],tb===hb||!tb.visible&&tb!==this.Zb||(ib=tb.margin,jb=ib.right+ib.left,kb=ib.top+ib.bottom,nb=tb.Ha,qb=Math.max(nb.width+jb,0),rb=Math.max(nb.height+kb,0),vb=tb.alignment,vb.Wc()&&(vb=this.lk),vb.Cd()||(vb=Yb),wb=tb.ek,wb.Wc()&&(wb=Yb),Fb(e,vb.x*ob+vb.offsetX-(wb.x*nb.width-wb.offsetX)-ib.left,vb.y*pb+vb.offsetY-(wb.y*nb.height-wb.offsetY)-ib.top,qb,rb))}break;case"Auto":for(yb=a,zb=b,Ab=c,Bb=d,Cb=Hk(this,j,k),Db=Cb.margin,Eb=Db.right+Db.left,Gb=Db.top+Db.bottom,wh(Cb,yb,zb,Ab,Bb),Hb=Cb.Ha,Ib=Math.max(Hb.width+Eb,0),Jb=Math.max(Hb.height+Gb,0),Kb=Ll(Cb),Lb=Kb.x*Ib+Kb.offsetX,Mb=Kb.y*Jb+Kb.offsetY,Kb=Ml(Cb),Nb=Kb.x*Ib+Kb.offsetX,Ob=Kb.y*Jb+Kb.offsetY,Pb=yb,Qb=zb,isFinite(yb)&&(Pb=Math.abs(Lb-Nb)),isFinite(zb)&&(Qb=Math.abs(Mb-Ob)),Rb=t.Ml(),Rb.p(0,0),Sb=0;k>Sb;Sb++)Tb=j.n[Sb],Tb===Cb||!Tb.visible&&Tb!==this.Zb||(Db=Tb.margin,Ub=Db.right+Db.left,Vb=Db.top+Db.bottom,wh(Tb,Pb,Qb,0,0),Hb=Tb.Ha,Ib=Math.max(Hb.width+Ub,0),Jb=Math.max(Hb.height+Vb,0),Rb.p(Math.max(Ib,Rb.width),Math.max(Jb,Rb.height)));if(1===k)e.width=Ib,e.height=Jb,t.qk(Rb);else{switch(Wb=Ll(Cb),Xb=Ml(Cb),Xb.x!==Wb.x&&Xb.y!==Wb.y&&(Zb=Rb.width/Math.abs(Xb.x-Wb.x),$b=Rb.height/Math.abs(Xb.y-Wb.y)),t.qk(Rb),_b=0,Cb instanceof W&&(_b=Cb.lb*Cb.scale,Nl(Cb)===ch&&(Zb=Math.max(Zb,$b),$b=Math.max(Zb,$b))),Zb+=Math.abs(Wb.offsetX)+Math.abs(Xb.offsetX)+_b,$b+=Math.abs(Wb.offsetY)+Math.abs(Xb.offsetY)+_b,ac=Cb.ui,ac===bh&&(ac=nk(Cb)),ac){case ah:Bb=Ab=0;break;case Sc:isFinite(yb)&&(Zb=yb),isFinite(zb)&&($b=zb);break;case fk:isFinite(yb)&&(Zb=yb),Bb=0;break;case ek:Ab=0,isFinite(zb)&&($b=zb)}Cb instanceof W&&!Cb.Ea.P()&&(Cb.nh?Cb.Lk=null:Cb.Ta=null),Ik(Cb),wh(Cb,Zb,$b,Ab,Bb),e.width=Cb.Ha.width+Eb,e.height=Cb.Ha.height+Gb}break;case"Table":for(bc=a,cc=b,dc=k,ec=c,fc=d,gc=t.Hb(),hc=t.Hb(),ic=0;dc>ic;ic++)if(jc=j.n[ic],jc instanceof C&&(jc.type===wk||jc.type===xk)&&jc.visible)for(hc.push(jc),kc=jc.va,lc=kc.length,mc=0;lc>mc;mc++)nc=kc.n[mc],jc.type===wk?nc.wc=jc.wc:jc.type===xk&&(nc.column=jc.column),gc.push(nc);else gc.push(jc);for(dc=gc.length,oc=[],ic=0;dc>ic;ic++)jc=gc[ic],ok(jc,!0),sk(jc,!0),oc[jc.wc]||(oc[jc.wc]=[]),oc[jc.wc][jc.column]||(oc[jc.wc][jc.column]=[]),oc[jc.wc][jc.column].push(jc);for(t.Ca(gc),pc=t.Hb(),qc=t.Hb(),rc=t.Hb(),sc={count:0},tc={count:0},uc=bc,vc=cc,wc=this.qd,dc=wc.length,ic=0;dc>ic;ic++)xc=wc[ic],void 0!==xc&&Ol(xc,0);for(wc=this.kd,dc=wc.length,ic=0;dc>ic;ic++)xc=wc[ic],void 0!==xc&&Ol(xc,0);for(yc=oc.length,zc=0,ic=0;yc>ic;ic++)oc[ic]&&(zc=Math.max(zc,oc[ic].length));for(Ac=Math.min(this.bj,yc-1),Bc=Math.min(this.Mi,zc-1),yc=oc.length,ic=Ac;yc>ic;ic++)if(oc[ic])for(zc=oc[ic].length,Dc=this.Qd(ic),Ol(Dc,0),mc=Bc;zc>mc;mc++)if(oc[ic][mc])for(Ec=this.Pd(mc),void 0===pc[mc]&&(Ol(Ec,0),pc[mc]=!0),Fc=oc[ic][mc],Gc=Fc.length,Hc=0;Gc>Hc;Hc++)jc=Fc[Hc],(jc.visible||jc===this.Zb)&&(Ic=1<jc.Yj||1<jc.Gj,Ic&&qc.push(jc),Jc=jc.margin,Kc=Jc.right+Jc.left,Lc=Jc.top+Jc.bottom,Mc=Kk(jc,Dc,Ec),Nc=jc.Ea,Oc=!isNaN(Nc.width),Pc=!isNaN(Nc.height),Qc=Oc&&Pc,Ic||Mc===ah||Qc||(void 0===sc[mc]&&(sc[mc]=-1,sc.count++),void 0===tc[ic]&&(tc[ic]=-1,tc.count++),rc.push(jc)),wh(jc,1/0,1/0,0,0),Rc=jc.Ha,Tc=Math.max(Rc.width+Kc,0),Uc=Math.max(Rc.height+Lc,0),1!==jc.Yj||!Pc&&Mc!==ah&&Mc!==fk||(xc=this.Qd(ic),Cc=Math.max(Uc-xc.mc,0),Cc>vc&&(Cc=vc),Ol(xc,xc.mc+Cc),vc=Math.max(vc-Cc,0)),1!==jc.Gj||!Oc&&Mc!==ah&&Mc!==ek||(xc=this.Pd(mc),Cc=Math.max(Tc-xc.mc,0),Cc>uc&&(Cc=uc),Ol(xc,xc.mc+Cc),uc=Math.max(uc-Cc,0)),Ic&&Ik(jc));for(t.Ca(pc),Vc=0,Wc=0,dc=this.Ew,ic=0;dc>ic;ic++)void 0!==this.kd[ic]&&(Vc+=this.Pd(ic).Ob);for(dc=this.Hx,ic=0;dc>ic;ic++)void 0!==this.qd[ic]&&(Wc+=this.Qd(ic).Ob);for(uc=Math.max(bc-Vc,0),Xc=vc=Math.max(cc-Wc,0),Yc=uc,dc=rc.length,ic=0;dc>ic;ic++)jc=rc[ic],Dc=this.Qd(jc.wc),Ec=this.Pd(jc.column),Zc=jc.Ha,Jc=jc.margin,Kc=Jc.right+Jc.left,Lc=Jc.top+Jc.bottom,sc[jc.column]=0===Ec.mc?Math.max(Zc.width+Kc,sc[jc.column]):null,tc[jc.wc]=0===Dc.mc?Math.max(Zc.height+Lc,tc[jc.wc]):null;$c=0,_c=0;for(ic in tc)"count"!==ic&&($c+=tc[ic]);for(ic in sc)"count"!==ic&&(_c+=sc[ic]);for(ad=t.Ml(),ic=0;dc>ic;ic++)if(jc=rc[ic],jc.visible||jc===this.Zb){switch(Dc=this.Qd(jc.wc),Ec=this.Pd(jc.column),isFinite(Ec.width)?bd=Ec.width:(bd=isFinite(uc)&&null!==sc[jc.column]?0===_c?Ec.mc+uc:sc[jc.column]/_c*Yc:null!==sc[jc.column]?uc:Ec.mc||uc,bd=Math.max(0,bd-Kl(Ec))),isFinite(Dc.height)?cd=Dc.height:(cd=isFinite(vc)&&null!==tc[jc.wc]?0===$c?Dc.mc+vc:tc[jc.wc]/$c*Xc:null!==tc[jc.wc]?vc:Dc.mc||vc,cd=Math.max(0,cd-Kl(Dc))),ad.p(Math.max(Ec.si,Math.min(bd,Ec.Hf)),Math.max(Dc.si,Math.min(cd,Dc.Hf))),Mc=Kk(jc,Dc,Ec)){case fk:ad.height=1/0;break;case ek:ad.width=1/0}Jc=jc.margin,Kc=Jc.right+Jc.left,Lc=Jc.top+Jc.bottom,Ik(jc),wh(jc,ad.width,ad.height,Ec.si,Dc.si),Rc=jc.Ha,Tc=Math.max(Rc.width+Kc,0),Uc=Math.max(Rc.height+Lc,0),isFinite(uc)&&(Tc=Math.min(Tc,ad.width)),isFinite(vc)&&(Uc=Math.min(Uc,ad.height)),dd=Dc.mc,Ol(Dc,Math.max(Dc.mc,Uc)),Cc=Dc.mc-dd,vc=Math.max(vc-Cc,0),dd=Ec.mc,Ol(Ec,Math.max(Ec.mc,Tc)),Cc=Ec.mc-dd,uc=Math.max(uc-Cc,0)}for(t.Ca(rc),ed=t.Ml(),dc=qc.length,ic=0;dc>ic;ic++)if(jc=qc[ic],jc.visible||jc===this.Zb){switch(Dc=this.Qd(jc.wc),Ec=this.Pd(jc.column),ad.p(Math.max(Ec.si,Math.min(bc,Ec.Hf)),Math.max(Dc.si,Math.min(cc,Dc.Hf))),Mc=Kk(jc,Dc,Ec)){case Sc:0!==Ec.mc&&(ad.width=Math.min(ad.width,Ec.mc)),0!==Dc.mc&&(ad.height=Math.min(ad.height,Dc.mc));break;case fk:0!==Ec.mc&&(ad.width=Math.min(ad.width,Ec.mc));break;case ek:0!==Dc.mc&&(ad.height=Math.min(ad.height,Dc.mc))}for(isFinite(Ec.width)&&(ad.width=Ec.width),isFinite(Dc.height)&&(ad.height=Dc.height),ed.p(0,0),fd=1;fd<jc.Yj&&!(jc.wc+fd>=this.Hx);fd++)xc=this.Qd(jc.wc+fd),ed.height+=Math.max(xc.si,isNaN(xc.Vf)?xc.Hf:Math.min(xc.Vf,xc.Hf));for(fd=1;fd<jc.Gj&&!(jc.column+fd>=this.Ew);fd++)xc=this.Pd(jc.column+fd),ed.width+=Math.max(xc.si,isNaN(xc.Vf)?xc.Hf:Math.min(xc.Vf,xc.Hf));for(ad.width+=ed.width,ad.height+=ed.height,Jc=jc.margin,Kc=Jc.right+Jc.left,Lc=Jc.top+Jc.bottom,wh(jc,ad.width,ad.height,ec,fc),Rc=jc.Ha,Tc=Math.max(Rc.width+Kc,0),Uc=Math.max(Rc.height+Lc,0),gd=0,fd=0;fd<jc.Yj;fd++)xc=this.Qd(jc.wc+fd),gd+=xc.total||0;if(Uc>gd)for(hd=Uc-gd;hd>0&&(id=xc.Ob||0,isNaN(xc.height)&&xc.Hf>id&&(Ol(xc,Math.min(xc.Hf,id+hd)),xc.Ob!==id&&(hd-=xc.Ob-id)),-1!==xc.index-1);)xc=this.Qd(xc.index-1);for(jd=0,fd=0;fd<jc.Gj;fd++)xc=this.Pd(jc.column+fd),jd+=xc.total||0;if(Tc>jd)for(hd=Tc-jd;hd>0&&(id=xc.Ob||0,isNaN(xc.width)&&xc.Hf>id&&(Ol(xc,Math.min(xc.Hf,id+hd)),xc.Ob!==id&&(hd-=xc.Ob-id)),-1!==xc.index-1);)xc=this.Pd(xc.index-1)}for(t.Ca(qc),t.qk(ed),t.qk(ad),kd=0,ld=0,Mc=nk(this),md=this.Ea,nd=this.Oe,od=Wc=Vc=0,pd=0,dc=this.Ew,ic=0;dc>ic;ic++)void 0!==this.kd[ic]&&(xc=this.Pd(ic),isFinite(xc.width)?(od+=xc.width,od+=Kl(xc)):Pl(xc)===Ql?(od+=xc.Ob,od+=Kl(xc)):0!==xc.Ob&&(Vc+=xc.Ob,Vc+=Kl(xc)));for(kd=isFinite(md.width)?Math.min(md.width,nd.width):Mc!==ah&&isFinite(bc)?bc:Vc,kd=Math.max(kd,this.cg.width),kd=Math.max(kd-od,0),qd=Math.max(kd/Vc,1),isFinite(qd)||(qd=1),ic=0;dc>ic;ic++)void 0!==this.kd[ic]&&(xc=this.Pd(ic),isFinite(xc.width)||Pl(xc)===Ql||Ol(xc,xc.Ob*qd),xc.Pa=e.width,0!==xc.Ob&&(e.width+=xc.Ob,e.width+=Kl(xc)));for(dc=this.Hx,ic=0;dc>ic;ic++)void 0!==this.qd[ic]&&(xc=this.Qd(ic),isFinite(xc.height)?(pd+=xc.height,pd+=Kl(xc)):Pl(xc)===Ql?(pd+=xc.Ob,pd+=Kl(xc)):0!==xc.Ob&&(Wc+=xc.Ob,Wc+=Kl(xc)));for(ld=isFinite(md.height)?Math.min(md.height,nd.height):Mc!==ah&&isFinite(cc)?cc:Wc,ld=Math.max(ld,this.cg.height),ld=Math.max(ld-pd,0),rd=Math.max(ld/Wc,1),isFinite(rd)||(rd=1),ic=0;dc>ic;ic++)void 0!==this.qd[ic]&&(xc=this.Qd(ic),isFinite(xc.height)||Pl(xc)===Ql||Ol(xc,xc.Ob*rd),xc.Pa=e.height,0!==xc.Ob&&(e.height+=xc.Ob,e.height+=Kl(xc)));for(dc=hc.length,ic=0;dc>ic;ic++)sd=hc[ic],sd.type===wk?(bd=e.width,xc=this.Qd(sd.wc),cd=xc.mc):(xc=this.Pd(sd.column),bd=xc.mc,cd=e.height),sd.bd.p(0,0,bd,cd),ok(sd,!1),oc[sd.wc]||(oc[sd.wc]=[]),oc[sd.wc][sd.column]||(oc[sd.wc][sd.column]=[]),oc[sd.wc][sd.column].push(sd);t.Ca(hc),this.qs=oc;break;case"Viewbox":td=a,ud=b,vd=c,wd=d,k>1&&t.m("Viewbox Panel cannot contain more than one GraphObject."),xd=j.n[0],xd.lc=1,Ik(xd),wh(xd,1/0,1/0,vd,wd),yd=xd.Ha,zd=xd.margin,Ad=zd.right+zd.left,Bd=zd.top+zd.bottom,(isFinite(td)||isFinite(ud))&&(Cd=xd.scale,Dd=yd.width,Ed=yd.height,Fd=Math.max(td-Ad,0),Gd=Math.max(ud-Bd,0),Hd=this.Wo===ch?Math.min(Fd/Dd,Gd/Ed):Math.max(Fd/Dd,Gd/Ed),0===Hd&&(Hd=1e-4),xd.lc*=Hd,Cd!==xd.scale&&(ok(xd,!0),wh(xd,1/0,1/0,vd,wd))),yd=xd.Ha,e.width=isFinite(td)?td:Math.max(yd.width+Ad,0),e.height=isFinite(ud)?ud:Math.max(yd.height+Bd,0);break;case"Link":if(Id=this instanceof ea?this.ii:this,0===k)Jd=this.od,ub(Jd,0,0),Kd=this.Ha,Kd.p(0,0,0,0);else{for(Ld=this.fr(),Md=this.Jj(),Nd=this.cj,Nd.assign(Md),Nd.x=0,Nd.y=0,Pd=this.hz(),Od=void 0!==this.ra?this.ra:Pd.count,this.jh.p(Md.x,Md.y),this.zi.clear(),null!==Ld&&(Rl(Ld,Md.width,Md.height),Kd=Ld.Ha,Nd.zj(Kd),this.zi.add(Kd)),Qd=t.Bh(),Rd=t.N(),Sd=t.N(),Td=0;k>Td;Td++)Ud=j.n[Td],Ud!==Ld&&(Ud.pi&&Ud instanceof W?(Rl(Ud,Md.width,Md.height),Kd=Ud.Ha,Nd.zj(Kd),this.zi.add(Kd)):2>Od?(wh(Ud,1/0,1/0),Kd=Ud.Ha,Nd.zj(Kd),this.zi.add(Kd)):(Vd=Ud.Jf,Wd=Ud.cu,Xd=Ud.ek,Xd.Me()&&(Xd=Yb),Yd=Ud.du,Zd=Ud.vB,ae=0,-Od>Vd||Vd>=Od?(be=Id.bG,ce=Id.aG,Yd!==Ng&&(ae=Id.computeAngle(Ud,Yd,ce),Ud.angle=ae),$d=be.x-Md.x,_d=be.y-Md.y):(Vd>=0?(de=Pd.n[Vd],ee=Od-1>Vd?Pd.n[Vd+1]:de):(fe=Od+Vd,de=Pd.n[fe],ee=fe>0?Pd.n[fe-1]:de),ce=Vd>=0?de.nj(ee):ee.nj(de),Yd!==Ng&&(ae=Id.computeAngle(Ud,Yd,ce),Ud.On=ae),$d=de.x+(ee.x-de.x)*Wd-Md.x,_d=de.y+(ee.y-de.y)*Wd-Md.y),wh(Ud,1/0,1/0),Kd=Ud.Ha,Jd=Ud.Ja,ge=0,Ud instanceof W&&(ge=Ud.lb),he=Jd.width+ge,ie=Jd.height+ge,Qd.reset(),Qd.translate(-Kd.x,-Kd.y),Qd.scale(Ud.scale,Ud.scale),Qd.rotate(Yd===Ng?Ud.angle:ce,he/2,ie/2),je=new F(0,0,he,ie),Rd.fu(je,Xd),Qd.Xa(Rd),ke=-Rd.x+ge/2,le=-Rd.y+ge/2,Sd.assign(Zd),isNaN(Sd.x)&&(Sd.x=Vd>=0?he/2+3:-(he/2+3)),isNaN(Sd.y)&&(Sd.y=-(ie/2+3)),Sd.rotate(ce),$d+=Sd.x,_d+=Sd.y,je.set(Kd),je.x=$d+ke,je.y=_d+le,this.zi.add(je),Nd.zj(je)));if(this.Ce)for(me=this.tj;me.next();)wh(me.value,1/0,1/0);this.cj=Nd,ne=this.jh,ne&&ne.p(ne.x+Nd.x,ne.y+Nd.y),ub(e,Nd.width||0,Nd.height||0),t.cf(Qd),t.B(Rd),t.B(Sd)}break;case"Grid":break;case"TableRow":case"TableColumn":t.m(this.toString()+" is not an element of a Table Panel. TableRow and TableColumn Panels can only be elements of a Table Panel.");break;default:t.m("Unknown panel type: "+l)}oe=e.width,pe=e.height,qe=this.padding,re=qe.top+qe.bottom,oe+=qe.left+qe.right,pe+=re,isFinite(f.width)&&(oe=f.width),isFinite(f.height)&&(pe=f.height),oe=Math.min(h.width,oe),pe=Math.min(h.height,pe),oe=Math.max(g.width,oe),pe=Math.max(g.height,pe),oe=Math.max(c,oe),pe=Math.max(d,pe),e.width=oe,e.height=pe,ub(this.od,oe,pe),kk(this,0,0,oe,pe)},C.prototype.findMainElement=C.prototype.Vw=function(){return null===this.Uo&&Hk(this,this.va,this.va.length),this.Uo},C.prototype.ik=function(a,b,c,d){var i,j,k,l,m,n,o,p,q,r,s,u,v,w,x,y,z,A,B,D,E,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,X,Y,Z,$,_,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb,mb,nb,ob,pb,qb,rb,sb,tb,ub,vb,wb,xb,yb,zb,Ab,Bb,Cb,Db,Eb,Hb,Ib,Jb,Kb,Lb,Qb,Rb,Mb,Nb,Ob,Pb,Sb,Tb,Ub,Vb,Wb,Xb,Zb,$b,_b,ac,bc,cc,dc,ec,fc,gc,hc,ic,jc,kc,lc,mc,nc,oc,pc,qc,sc,tc,uc,vc,rc,wc,xc,yc,zc,Ac,Bc,Cc,Dc,Ec,Fc,Gc,Hc,Ic,Jc,Kc,Lc,Mc,Nc,Oc,Pc,Qc,Rc,Tc,Uc,Vc,Wc,Xc,Yc,Zc,$c,_c,ad,bd,cd,dd,ed,fd,gd,hd,id,jd,kd,ld,md,nd,od,pd,qd,rd,sd,e=this.cj,f=this.va,g=f.length,h=t.wk(0,0,0,0);if(0===g)i=this.pa,i.x=a,i.y=b,i.width=c,i.height=d;else{if(!this.Ea.P())switch(j=nk(this),k=this.bd,l=k.width,m=k.height,n=this.margin,o=n.left+n.right,p=n.top+n.bottom,l===c&&m===d&&(j=ah),j){case ah:(l>c||m>d)&&(this.ja(),wh(this,l>c?c:l,m>d?d:m));break;case Sc:ok(this,!0),wh(this,c+o,d+p,0,0);break;case fk:ok(this,!0),wh(this,c+o,m+p,0,0);break;case ek:ok(this,!0),wh(this,l+o,d+p,0,0)}switch(i=this.pa,i.x=a,i.y=b,i.width=c,i.height=d,q=this.ga.ec){case"Position":for(r=e.x-this.padding.left,s=e.y-this.padding.top,u=0;g>u;u++)v=f.n[u],w=v.Ha,x=v.margin,y=v.position.x,z=v.position.y,h.x=isNaN(y)?-r:y-r,h.y=isNaN(z)?-s:z-s,v instanceof W&&v.MA&&(A=v.lb/2,h.x-=A,h.y-=A),h.x+=x.left,h.y+=x.top,h.width=w.width,h.height=w.height,v.visible&&v.Sc(h.x,h.y,h.width,h.height);break;case"Vertical":for(B=this.padding.left,D=this.padding.top,E=0;g>E;E++)G=B,H=f.n[E],H.visible&&(I=H.Ha,J=H.margin,K=J.left+J.right,L=B+this.padding.right,M=I.width,N=nk(H),(isNaN(H.Ea.width)&&N===Sc||N===fk)&&(M=Math.max(e.width-K-L,0)),O=M+K+L,P=H.alignment,P.Wc()&&(P=this.lk),P.Cd()||(P=Yb),H.Sc(G+P.offsetX+J.left+(e.width*P.x-O*P.x),D+P.offsetY+J.top,M,I.height),D+=I.height+J.bottom+J.top);break;case"Horizontal":for(Q=this.padding.top,R=this.padding.left,S=0;g>S;S++)T=Q,U=f.n[S],U.visible&&(V=U.Ha,X=U.margin,Y=X.top+X.bottom,Z=Q+this.padding.bottom,$=V.height,_=nk(U),(isNaN(U.Ea.height)&&_===Sc||_===ek)&&($=Math.max(e.height-Y-Z,0)),ab=$+Y+Z,bb=U.alignment,bb.Wc()&&(bb=this.lk),bb.Cd()||(bb=Yb),U.Sc(R+bb.offsetX+X.left,T+bb.offsetY+X.top+(e.height*bb.y-ab*bb.y),V.width,$),R+=V.width+X.left+X.right);break;case"Spot":for(cb=Hk(this,f,g),db=cb.Ha,eb=db.width,fb=db.height,gb=this.padding,hb=gb.left,ib=gb.top,h.x=hb-e.x,h.y=ib-e.y,cb.Sc(h.x,h.y,eb,fb),jb=0;g>jb;jb++)kb=f.n[jb],kb!==cb&&(lb=kb.Ha,mb=lb.width,nb=lb.height,ob=kb.alignment,ob.Wc()&&(ob=this.lk),ob.Cd()||(ob=Yb),pb=kb.ek,pb.Wc()&&(pb=Yb),h.x=ob.x*eb+ob.offsetX-(pb.x*mb-pb.offsetX),h.y=ob.y*fb+ob.offsetY-(pb.y*nb-pb.offsetY),h.x-=e.x,h.y-=e.y,kb.visible&&kb.Sc(hb+h.x,ib+h.y,mb,nb));break;case"Auto":for(qb=Hk(this,f,g),rb=qb.Ha,sb=t.Nf(),sb.p(0,0,1,1),tb=qb.margin,ub=tb.left,vb=tb.top,wb=this.padding,xb=wb.left,yb=wb.top,h.x=ub,h.y=vb,h.width=rb.width,h.height=rb.height,qb.Sc(xb+h.x,yb+h.y,h.width,h.height),zb=Ll(qb),Ab=Ml(qb),Bb=0+zb.y*rb.height+zb.offsetY,Cb=0+Ab.x*rb.width+Ab.offsetX,Db=0+Ab.y*rb.height+Ab.offsetY,sb.x=0+zb.x*rb.width+zb.offsetX,sb.y=Bb,Fb(sb,Cb,Db,0,0),sb.x+=ub+xb,sb.y+=vb+yb,Eb=0;g>Eb;Eb++)Hb=f.n[Eb],Hb!==qb&&(Ib=Hb.Ha,tb=Hb.margin,Jb=Math.max(Ib.width+tb.right+tb.left,0),Kb=Math.max(Ib.height+tb.top+tb.bottom,0),Lb=Hb.alignment,Lb.Wc()&&(Lb=this.lk),Lb.Cd()||(Lb=Yb),h.x=sb.width*Lb.x+Lb.offsetX-Jb*Lb.x+tb.left+sb.x,h.y=sb.height*Lb.y+Lb.offsetY-Kb*Lb.y+tb.top+sb.y,h.width=sb.width,h.height=sb.height,Hb.visible&&(Gb(sb.x,sb.y,sb.width,sb.height,h.x,h.y,Ib.width,Ib.height)?Hb.Sc(h.x,h.y,Ib.width,Ib.height):Hb.Sc(h.x,h.y,Ib.width,Ib.height,new F(sb.x,sb.y,sb.width,sb.height))));
t.oc(sb);break;case"Table":for(Mb=this.padding,Nb=Mb.left,Ob=Mb.top,Pb=this.qs,Sb=Pb.length,Tb=0,Ub=0;Sb>Ub;Ub++)Pb[Ub]&&(Tb=Math.max(Tb,Pb[Ub].length));for(Vb=Math.min(this.bj,Sb-1);Vb!==Sb&&(void 0===this.qd[Vb]||0===this.qd[Vb].Ob);)Vb++;for(Vb=Math.min(Vb,Sb-1),Wb=-this.qd[Vb].Pa,Xb=Math.min(this.Mi,Tb-1);Xb!==Tb&&(void 0===this.kd[Xb]||0===this.kd[Xb].Ob);)Xb++;for(Xb=Math.min(Xb,Tb-1),Zb=-this.kd[Xb].Pa,$b=t.Ml(),Ub=0;Sb>Ub;Ub++)if(Pb[Ub])for(Tb=Pb[Ub].length,_b=this.Qd(Ub),Rb=_b.Pa+Wb+Ob+Sl(_b),ac=0;Tb>ac;ac++)if(Pb[Ub][ac])for(bc=this.Pd(ac),Qb=bc.Pa+Zb+Nb+Sl(bc),cc=Pb[Ub][ac],dc=cc.length,ec=0;dc>ec;ec++)if(fc=cc[ec],gc=fc.Ha,fc instanceof C&&(fc.type===wk||fc.type===xk))pk(fc),fc.Pb.Ra(),hc=fc.Pb,hc.x=fc.type===wk?Nb:Qb,hc.y=fc.type===xk?Ob:Rb,hc.width=gc.width,hc.height=gc.height,fc.Pb.freeze(),sk(fc,!1);else{for($b.p(0,0),ic=1;ic<fc.rowSpan&&!(Ub+ic>=this.Hx);ic++)jc=this.Qd(Ub+ic),$b.height+=jc.total;for(ic=1;ic<fc.CE&&!(ac+ic>=this.Ew);ic++)kc=this.Pd(ac+ic),$b.width+=kc.total;lc=bc.Ob+$b.width,mc=_b.Ob+$b.height,h.x=Qb,h.y=Rb,h.width=lc,h.height=mc,nc=Qb,oc=Rb,pc=lc,qc=mc,Qb+lc>e.width&&(pc=Math.max(e.width-Qb,0)),Rb+mc>e.height&&(qc=Math.max(e.height-Rb,0)),rc=fc.alignment,rc.Wc()?(rc=this.lk,rc.Cd()||(rc=Yb),sc=rc.x,tc=rc.y,uc=rc.offsetX,vc=rc.offsetY,wc=bc.alignment,xc=_b.alignment,wc.Cd()&&(sc=wc.x,uc=wc.offsetX),xc.Cd()&&(tc=xc.y,vc=xc.offsetY)):(sc=rc.x,tc=rc.y,uc=rc.offsetX,vc=rc.offsetY),(isNaN(sc)||isNaN(tc))&&(tc=sc=.5,vc=uc=0),yc=gc.width,zc=gc.height,Ac=fc.margin,Bc=Ac.left+Ac.right,Cc=Ac.top+Ac.bottom,Dc=Kk(fc,_b,bc),!isNaN(fc.Ea.width)||Dc!==Sc&&Dc!==fk||(yc=Math.max(lc-Bc,0)),!isNaN(fc.Ea.height)||Dc!==Sc&&Dc!==ek||(zc=Math.max(mc-Cc,0)),Ec=fc.Oe,Fc=fc.cg,yc=Math.min(Ec.width,yc),zc=Math.min(Ec.height,zc),yc=Math.max(Fc.width,yc),zc=Math.max(Fc.height,zc),Gc=zc+Cc,h.x+=h.width*sc-(yc+Bc)*sc+uc+Ac.left,h.y+=h.height*tc-Gc*tc+vc+Ac.top,fc.visible&&(Gb(nc,oc,pc,qc,h.x,h.y,gc.width,gc.height)?fc.Sc(h.x,h.y,yc,zc):fc.Sc(h.x,h.y,yc,zc,new F(nc,oc,pc,qc)))}for(t.qk($b),Ub=0;g>Ub;Ub++)fc=f.n[Ub],fc instanceof C&&(fc.type===wk||fc.type===xk)&&(hc=fc.Pb,fc.od.Ra(),fc.od.gq(0,0,hc.width,hc.height),fc.od.freeze());break;case"Viewbox":Hc=f.n[0],Ic=Hc.Ha,Jc=Hc.margin,Kc=Jc.top+Jc.bottom,Lc=Math.max(Ic.width+(Jc.right+Jc.left),0),Mc=Math.max(Ic.height+Kc,0),Nc=Hc.alignment,Nc.Wc()&&(Nc=this.lk),Nc.Cd()||(Nc=Yb),h.x=e.width*Nc.x-Lc*Nc.x+Nc.offsetX,h.y=e.height*Nc.y-Mc*Nc.y+Nc.offsetY,h.width=Ic.width,h.height=Ic.height,Hc.Sc(h.x,h.y,h.width,h.height);break;case"Link":for(Oc=this.fr(),Pc=0,null!==Oc&&Pc<this.zi.count&&(Qc=this.zi.n[Pc],Pc++,Oc.Sc(Qc.x-this.cj.x,Qc.y-this.cj.y,Qc.width,Qc.height)),Rc=0;g>Rc;Rc++)Tc=f.n[Rc],Tc!==Oc&&Pc<this.zi.count&&(Qc=this.zi.n[Pc],Pc++,Tc.Sc(Qc.x-this.cj.x,Qc.y-this.cj.y,Qc.width,Qc.height));if(Uc=this.hz(),Vc=Uc.count,Vc>=2&&this.Ce)for(Wc=this.tj;Wc.next();)Xc=Wc.value,Yc=Vc,Zc=Uc,$c=Xc.Jf,_c=Xc.cu,ad=Xc.ek,ad.Me()&&(ad=Yb),bd=Xc.du,cd=Xc.vB,dd=void 0,ed=void 0,fd=0,-Yc>$c||$c>=Yc?(gd=this.bG,hd=this.aG,bd!==Ng&&(fd=this.computeAngle(Xc,bd,hd),Xc.angle=fd),dd=gd.x,ed=gd.y):(id=void 0,jd=void 0,$c>=0?(id=Zc.n[$c],jd=Yc-1>$c?Zc.n[$c+1]:id):(kd=Yc+$c,id=Zc.n[kd],jd=kd>0?Zc.n[kd-1]:id),hd=$c>=0?id.nj(jd):jd.nj(id),bd!==Ng&&(fd=this.computeAngle(Xc,bd,hd),Xc.angle=fd),dd=id.x+(jd.x-id.x)*_c,ed=id.y+(jd.y-id.y)*_c),ld=t.Bh(),ld.reset(),ld.scale(Xc.scale,Xc.scale),ld.rotate(Xc.angle,0,0),md=Xc.Ja,nd=t.wk(0,0,md.width,md.height),od=t.N(),od.fu(nd,ad),ld.Xa(od),pd=-od.x,qd=-od.y,rd=cd.copy(),isNaN(rd.x)&&(rd.x=$c>=0?od.x+3:-(od.x+3)),isNaN(rd.y)&&(rd.y=-(od.y+3)),rd.rotate(hd),dd+=rd.x,ed+=rd.y,ld.eH(nd),pd+=nd.x,qd+=nd.y,sd=t.qc(dd+pd,ed+qd),Xc.move(sd),t.B(sd),t.B(od),t.oc(nd),t.cf(ld);this.wx();break;case"Grid":break;case"TableRow":case"TableColumn":t.m(this.toString()+" is not an element of a Table Panel.TableRow and TableColumn panels can only be elements of a Table Panel.");break;default:t.m("Unknown panel type: "+q)}t.oc(h)}},C.prototype.jk=function(a){var c,d,b=this.Ja;if(Gb(0,0,b.width,b.height,a.x,a.y)){for(c=this.va.length,b=t.qc(0,0);c--;)if(d=this.va.n[0],(d.visible||d===this.Zb)&&(hb(b.set(a),d.transform),d.La(b)))return t.B(b),!0;return t.B(b),null===this.Qb&&null===this.zc?!1:!0}return!1},C.prototype.walkVisualTree=function(a){Vl(this,this,a)},C.prototype.findInVisualTree=C.prototype.qt=function(a){return Wl(this,this,a)},C.prototype.findObject=C.prototype.we=function(a){var b,c,d,e;if(this.name===a)return this;for(b=this.va.n,c=b.length,d=0;c>d;d++){if(e=b[d],e.name===a)return e;if(e instanceof C)if(null===e.Li&&null===e.rg){if(e=e.we(a),null!==e)return e}else if(Xl(e)&&(e=e.va.gb(),null!==e&&(e=e.we(a),null!==e)))return e}return null},aa=C.prototype,aa.Of=function(){return!(this.type===wk||this.type===xk)},aa.fe=function(a,b,c){var d,e,f,g,h,i,j;if(!1===this.mf)return null;if(void 0===b&&(b=null),void 0===c&&(c=null),Ui(this))return null;if(d=this.Ja,e=1/this.sk(),f=this.Of(),g=f?a:hb(t.qc(a.x,a.y),this.transform),Gb(-(5*e),-(5*e),d.width+10*e,d.height+10*e,g.x,g.y)){if(!this.fh){for(h=this.va.length,e=t.N();h--;)if(i=this.va.n[h],(i.visible||i===this.Zb)&&(i.Of()?hb(e.set(a),i.transform):e.set(a),j=null,i instanceof C?j=i.fe(e,b,c):!0===i.mf&&i.La(e)&&(j=i),null!==j&&(null!==b&&(j=b(j)),j&&(null===c||c(j)))))return t.B(e),f||t.B(g),j;t.B(e)}return null===this.background&&null===this.hk?(f||t.B(g),null):(a=Gb(0,0,d.width,d.height,g.x,g.y)?this:null,f||t.B(g),a)}return f||t.B(g),null},aa.qp=function(a,b,c,d){var e,f,g,h,i;if(!1===this.mf)return!1;if(void 0===b&&(b=null),void 0===c&&(c=null),d instanceof H||d instanceof I||(d=new H(V)),e=this.Ja,f=this.Of(),g=f?a:hb(t.qc(a.x,a.y),this.transform),Gb(0,0,e.width,e.height,g.x,g.y)){if(!this.fh){for(h=this.va.length,e=t.N();h--;)i=this.va.n[h],(i.visible||i===this.Zb)&&(i.Of()?hb(e.set(a),i.transform):e.set(a),(i instanceof C?i.qp(e,b,c,d):i.La(e))&&!1!==i.mf&&(null!==b&&(i=b(i)),i&&(null===c||c(i))&&d.add(i)));t.B(e)}return f||t.B(g),null!==this.background||null!==this.hk}return f||t.B(g),!1},aa.pk=function(a,b,c,d,e,f){var g,h,i,j,k;if(!1===this.mf)return!1;if(void 0===b&&(b=null),void 0===c&&(c=null),g=f,void 0===f&&(g=t.Bh(),g.reset()),g.multiply(this.transform),this.Zm(a,g))return Zl(this,b,c,e),void 0===f&&t.cf(g),!0;if(this.ag(a,g)){if(!this.fh)for(h=this.va.length;h--;)i=this.va.n[h],(i.visible||i===this.Zb)&&(j=i.pa,k=this.Ja,j.x>k.width||j.y>k.height||0>j.x+j.width||0>j.y+j.height||(j=t.Bh(),j.set(g),(i instanceof C?i.pk(a,b,c,d,e,j):mk(i,a,d,j))&&(null!==b&&(i=b(i)),i&&(null===c||c(i))&&e.add(i)),t.cf(j)));return void 0===f&&t.cf(g),d}return void 0===f&&t.cf(g),!1},aa.fn=function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n;if(!1===this.mf)return!1;if(void 0===c&&(c=null),void 0===d&&(d=null),g=this.Ja,h=this.Of(),i=h?a:hb(t.qc(a.x,a.y),this.transform),j=h?b:hb(t.qc(b.x,b.y),this.transform),k=i.nk(j),l=0<i.x&&i.x<g.width&&0<i.y&&i.y<g.height||mb(i.x,i.y,0,0,0,g.height)<k||mb(i.x,i.y,0,g.height,g.width,g.height)<k||mb(i.x,i.y,g.width,g.height,g.width,0)<k||mb(i.x,i.y,g.width,0,0,0)<k,g=0<i.x&&i.x<g.width&&0<i.y&&i.y<g.height&&mb(i.x,i.y,0,0,0,g.height)<k&&mb(i.x,i.y,0,g.height,g.width,g.height)<k&&mb(i.x,i.y,g.width,g.height,g.width,0)<k&&mb(i.x,i.y,g.width,0,0,0)<k,h||(t.B(i),t.B(j)),l){if(!this.fh){for(h=t.N(),i=t.N(),j=this.va.length;j--;)k=this.va.n[j],(k.visible||k===this.Zb)&&(m=k.pa,n=this.Ja,m.x>n.width||m.y>n.height||0>m.x+m.width||0>m.y+m.height||(k.Of()?(m=k.transform,hb(h.set(a),m),hb(i.set(b),m)):(h.set(a),i.set(b)),k instanceof C?!k.fn(h,i,c,d,e,f):!k.fF(h,i,e))||(null!==c&&(k=c(k)),k&&(null===d||d(k))&&f.add(k)));t.B(h),t.B(i)}return e?l:g}return!1},C.prototype.add=C.prototype.add=function(a){t.l(a,V,C,"add:element"),this.Rd(this.va.count,a)},C.prototype.elt=C.prototype.wa=function(a){return this.va.wa(a)},C.prototype.insertAt=C.prototype.Rd=function(a,b){var c,d,e,f,g,h;if(b instanceof x&&t.m("Cannot add a Part to a Panel: "+b),(this===b||this.sj(b))&&(this===b&&t.m("Cannot make a Panel contain itself: "+this.toString()),t.m("Cannot make a Panel indirectly contain itself: "+this.toString()+" already contains "+b.toString())),c=b.ia,null!==c&&c!==this&&t.m("Cannot add a GraphObject that already belongs to another Panel to this Panel: "+b.toString()+", already contained by "+c.toString()+", cannot be shared by this Panel: "+this.toString()),this.ga!==Bi||b instanceof W||t.m("Can only add Shapes to a Grid Panel, not: "+b),b.Il(this),b.Am=null,null!==this.Ht&&(d=b.data,null!==d&&"object"==typeof d&&(null===this.qg&&(this.qg=new wa(Object,C)),this.qg.add(d,b))),e=this.va,d=-1,c===this){for(f=-1,g=e.count,h=0;g>h;h++)if(e.n[h]===b){f=h;break}if(-1!==f){if(f===a||f+1>=e.count&&a>=e.count)return;e.wd(f),d=f}else t.m("element "+b.toString()+" has panel "+c.toString()+" but is not contained by it.")}(0>a||a>e.count)&&(a=e.count),e.Rd(a,b),this.ja(),b.ja(),null!==b.Wd?this.Rh=!0:b instanceof C&&!0===b.Rh&&(this.Rh=!0),c=this.U,null!==c&&(c.Uj=null,c.Rj=0/0,this.Rh&&c instanceof y&&(c.Rh=!0),c.Rh&&(c.Ad=null),e=this.h,null!==e&&e.ma.yb||(-1!==d&&c.Oc(Nd,"elements",this,b,null,d,null),c.Oc(Md,"elements",this,null,b,null,a)))},C.prototype.remove=C.prototype.remove=function(a){t.l(a,V,C,"remove:element");for(var b=this.va,c=b.count,d=-1,e=0;c>e;e++)if(b.n[e]===a){d=e;break}-1!==d&&this.df(d)},C.prototype.removeAt=C.prototype.wd=function(a){e&&t.q(a,C,"removeAt:idx"),a>=0&&this.df(a)},C.prototype.df=function(a){var d,b=this.va,c=b.wa(a);c.Am=null,c.Il(null),null!==this.qg&&(d=c.data,"object"==typeof d&&this.qg.remove(d)),b.wd(a),ok(this,!1),this.ja(),b=this.U,null!==b&&(b.Uj=null,b.Rj=0/0,d=this.h,null!==d&&d.ma.yb||b.Oc(Nd,"elements",this,c,null,a,null))},t.A(C,{Hx:"rowCount"},function(){return void 0===this.qd?0:this.qd.length}),C.prototype.getRowDefinition=C.prototype.Qd=function(a){var b,c;return void 0===this.qd?null:(e&&t.q(a,C,"getRowDefinition:idx"),0>a&&t.ha(a,">= 0",C,"getRowDefinition:idx"),a=Math.round(a),b=this.qd,void 0===b[a]&&(c=new Ie,c.Il(this),c.im=!0,c.ad=a,b[a]=c),b[a])},C.prototype.removeRowDefinition=C.prototype.rG=function(a){if(void 0!==this.qd){e&&t.q(a,C,"removeRowDefinition:idx"),0>a&&t.ha(a,">= 0",C,"removeRowDefinition:idx"),a=Math.round(a);var b=this.qd;this.Oc(Nd,"coldefs",this,b[a],null,a,null),b[a]&&(b[a]=void 0),this.ja()}},t.A(C,{Ew:"columnCount"},function(){return void 0===this.kd?0:this.kd.length}),C.prototype.getColumnDefinition=C.prototype.Pd=function(a){var b,c;return void 0===this.kd?null:(e&&t.q(a,C,"getColumnDefinition:idx"),0>a&&t.ha(a,">= 0",C,"getColumnDefinition:idx"),a=Math.round(a),b=this.kd,void 0===b[a]&&(c=new Ie,c.Il(this),c.im=!1,c.ad=a,b[a]=c),b[a])},C.prototype.removeColumnDefinition=C.prototype.oG=function(a){if(void 0!==this.kd){e&&t.q(a,C,"removeColumnDefinition:idx"),0>a&&t.ha(a,">= 0",C,"removeColumnDefinition:idx"),a=Math.round(a);var b=this.kd;this.Oc(Nd,"coldefs",this,b[a],null,a,null),b[a]&&(b[a]=void 0),this.ja()}},t.g(C,"rowSizing",C.prototype.CG),t.defineProperty(C,{CG:"rowSizing"},function(){return void 0===this.Fm?Gl:this.Fm},function(a){if(void 0!==this.Fm){var b=this.Fm;b!==a&&(a!==Gl&&a!==Ql&&t.m("rowSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None"),this.Fm=a,this.ja(),this.j("rowSizing",b,a))}}),t.g(C,"columnSizing",C.prototype.BE),t.defineProperty(C,{BE:"columnSizing"},function(){return void 0===this.Wl?Gl:this.Wl},function(a){if(void 0!==this.Wl){var b=this.Wl;b!==a&&(a!==Gl&&a!==Ql&&t.m("columnSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None"),this.Wl=a,this.ja(),this.j("columnSizing",b,a))}}),t.g(C,"topIndex",C.prototype.LB),t.defineProperty(C,{LB:"topIndex"},function(){return void 0===this.bj?0:this.bj},function(a){if(void 0!==this.bj){var b=this.bj;b!==a&&((!isFinite(a)||0>a)&&t.m("topIndex must be greater than zero and a real number. Was "+a),this.bj=a,this.ja(),this.j("topIndex",b,a))}}),t.g(C,"leftIndex",C.prototype.RA),t.defineProperty(C,{RA:"leftIndex"},function(){return void 0===this.Mi?0:this.Mi},function(a){if(void 0!==this.Mi){var b=this.Mi;b!==a&&((!isFinite(a)||0>a)&&t.m("leftIndex must be greater than zero and a real number. Was "+a),this.Mi=a,this.ja(),this.j("leftIndex",b,a))}}),C.prototype.findRowForLocalY=function(a){var b,c,d,e,f;if(0>a)return-1;if(this.type!==fa)return 0/0;for(b=0,c=this.qd,d=c.length,e=this.bj;d>e;e++)if(f=c[e],void 0!==f&&(b+=f.total,b>a))return e;return-1},C.prototype.findColumnForLocalX=function(a){var b,c,d,e,f;if(0>a)return-1;if(this.type!==fa)return 0/0;for(b=0,c=this.kd,d=c.length,e=this.Mi;d>e;e++)if(f=c[e],void 0!==f&&(b+=f.total,b>a))return e;return-1},t.g(C,"data",C.prototype.data),t.defineProperty(C,{data:"data"},function(){return this.Zl},function(a){var c,d,b=this.Zl;b!==a&&(c=this instanceof x&&!(this instanceof ea),c&&t.i(a,"object",C,"data"),bf(this),this.Zl=a,d=this.h,null!==d&&(c?this instanceof B?(null!==b&&d.Nk.remove(b),null!==a&&d.Nk.add(a,this)):(null!==b&&d.Ei.remove(b),null!==a&&d.Ei.add(a,this)):(c=this.ia,null!==c&&null!==c.qg&&(null!==b&&c.qg.remove(b),null!==a&&c.qg.add(a,this)))),this.j("data",b,a),null!==d&&d.ma.yb||null!==a&&this.Wb())}),t.g(C,"itemIndex",C.prototype.LF),t.defineProperty(C,{LF:"itemIndex"},function(){return this.wr},function(a){var b=this.wr;b!==a&&(this.wr=a,this.j("itemIndex",b,a))}),C.prototype.updateTargetBindings=C.prototype.Wb=function(a){var c,d,f,g,b=this.Ul;if(null!==b)for(void 0===a&&(a=""),b=b.k;b.next();)if(c=b.value,d=c.DB,(""===a||""===d||d===a)&&(d=c.lu,null!==c.FE||""!==d))if(d=this.data,f=c.ju,null!==f&&(d=this.we(f)),null===d)e&&t.trace("Binding error: missing GraphObject named "+f+" in "+this.toString());else{if(f=this,g=c.Gn,""!==g){if(f=this.we(g),null===f)continue}else null!==c.zg&&(f=c.zg);if(g=c.Oz,0!==g){if(!(f instanceof C))continue;1===g?f=f.Pd(c.gw):2===g&&(f=f.Qd(c.gw))}void 0!==f&&c.kH(f,d)}},t.g(C,"itemArray",C.prototype.Ht),t.defineProperty(C,{Ht:"itemArray"},function(){return this.Li},function(a){var c,b=this.Li;b!==a&&(e&&null!==a&&!t.isArray(a)&&t.m("Panel.itemArray must be an Array-like object or null, not: "+a),c=this.h,null!==c&&null!==b&&hj(c,this),this.Li=a,null!==c&&null!==a&&ej(c,this),this.j("itemArray",b,a),null!==c&&c.ma.yb||this.lB())}),C.prototype.rebuildItemElements=C.prototype.lB=function(){var b,c,a=0;for(Xl(this)&&(a=1);this.va.length>a;)this.df(a);if(a=this.Ht,null!==a)for(b=t.ub(a),c=0;b>c;c++)vj(this,t.rb(a,c),c)},t.g(C,"itemTemplate",C.prototype.HJ),t.defineProperty(C,{HJ:"itemTemplate"},function(){return null===this.rg?null:this.rg.Da("")},function(a){if(null===this.rg){if(null===a)return;this.rg=new wa("string",C)}var b=this.rg.Da("");b!==a&&(t.l(a,C,C,"itemTemplate"),a instanceof x&&t.m("itemTemplate must not be a Part: "+a),this.rg.add("",a),this.j("itemTemplate",b,a),a=this.h,null!==a&&a.ma.yb||this.lB())}),t.g(C,"itemTemplateMap",C.prototype.MF),t.defineProperty(C,{MF:"itemTemplateMap"},function(){return this.rg},function(a){var c,d,b=this.rg;if(b!==a){for(t.l(a,wa,C,"itemTemplateMap"),c=a.k;c.next();)d=c.value,d instanceof x&&t.m("Template in itemTemplateMap must not be a Part: "+d);this.rg=a,this.j("itemTemplateMap",b,a),a=this.h,null!==a&&a.ma.yb||this.lB()}}),t.g(C,"itemCategoryProperty",C.prototype.GJ),t.defineProperty(C,{GJ:"itemCategoryProperty"},function(){return this.xo},function(a){var b=this.xo;b!==a&&("string"!=typeof a&&"function"!=typeof a&&t.jc(a,"string or function",C,"itemCategoryProperty"),this.xo=a,this.j("itemCategoryProperty",b,a))}),C.prototype.getCategoryForItemData=function(a){if(null===a)return"";var b=this.xo;if("function"==typeof b)b=b(a);else{if("string"!=typeof b||"object"!=typeof a)return"";if(""===b)return"";b=t.nb(a,b)}return void 0===b?"":"string"==typeof b?b:(t.m("Panel.getCategoryForItemData found a non-string category for "+a+": "+b),"")},C.prototype.findTemplateForItemData=function(a,b,c){return a=this.MF,b=null,null!==a&&(b=a.Da(c)),null===b&&(t.pH||(t.pH=!0,t.trace('No item template Panel found for category "'+c+'" on '+this),t.trace("  Using default item template."),c=new C,a=new za,a.bind(new Le("text","",na)),c.add(a),t.PE=c),b=t.PE),b instanceof C?b:null},t.g(C,"isAtomic",C.prototype.xJ),t.defineProperty(C,{xJ:"isAtomic"},function(){return this.fh},function(a){var b=this.fh;b!==a&&(t.i(a,"boolean",C,"isAtomic"),this.fh=a,this.j("isAtomic",b,a))}),t.ka("RowColumnDefinition",Ie),Ie.prototype.copy=function(){var a=new Ie;return a.im=this.im,a.ad=this.ad,a.Vf=this.Vf,a.tm=this.tm,a.sm=this.sm,a.Ae=this.Ae,a.Ob=this.Ob,a.Pa=this.Pa,a.ai=this.ai,a.Ds=this.Ds,a.ak=null===this.ak?null:this.ak.ba(),a.As=this.As,a.Bs=this.Bs,a.Xh=null,this.Xh&&(a.Xh=this.Xh.slice(0)),a.Qb=this.Qb,a.Oq=this.Oq,a.Qc=this.Qc,a},Ie.prototype.toString=function(){return"RowColumnDefinition "+(this.Ff?"(Row ":"(Column ")+this.index+") #"+t.ud(this)},Ie.Default=am=t.w(Ie,"Default",0),Ie.None=Ql=t.w(Ie,"None",1),Ie.ProportionalExtra=Gl=t.w(Ie,"ProportionalExtra",2),Ie.prototype.Il=function(a){this.Vi=a},Ie.prototype.cd=function(a,b,c,d,e){var g,h,i,j,k,f=this.Vi;if(null!==f){for(f.ja(),g=this.Ff,h=f.va,i=h.length,j=0;i>j;j++)k=h.n[j],(g?k.wc:k.column)===this.index&&k.ja();if(f.Oc(Ld,a,this,b,c,d,e),null!==this.Qc&&(b=f.sp(),null!==b&&(b=b.data,null!==b)))for(c=this.Qc.k;c.next();)c.value.PB(this,b,a,null)}},t.A(Ie,{ia:"panel"},function(){return this.Vi}),t.A(Ie,{Ff:"isRow"},function(){return this.im}),t.A(Ie,{index:"index"},function(){return this.ad}),t.g(Ie,"height",Ie.prototype.height),t.defineProperty(Ie,{height:"height"},function(){return this.Vf},function(a){var b=this.Vf;b!==a&&(e&&t.i(a,"number",Ie,"height"),0>a&&t.ha(a,">= 0",Ie,"height"),this.Vf=a,Ol(this,this.Ob),this.cd("height",b,a))}),t.g(Ie,"width",Ie.prototype.width),t.defineProperty(Ie,{width:"width"},function(){return this.Vf},function(a){var b=this.Vf;b!==a&&(e&&t.i(a,"number",Ie,"width"),0>a&&t.ha(a,">= 0",Ie,"width"),this.Vf=a,Ol(this,this.Ob),this.cd("width",b,a))}),t.g(Ie,"minimum",Ie.prototype.si),t.defineProperty(Ie,{si:"minimum"},function(){return this.tm},function(a){var b=this.tm;b!==a&&(e&&t.i(a,"number",Ie,"minimum"),(0>a||!isFinite(a))&&t.ha(a,">= 0",Ie,"minimum"),this.tm=a,Ol(this,this.Ob),this.cd("minimum",b,a))}),t.g(Ie,"maximum",Ie.prototype.Hf),t.defineProperty(Ie,{Hf:"maximum"},function(){return this.sm},function(a){var b=this.sm;b!==a&&(e&&t.i(a,"number",Ie,"maximum"),0>a&&t.ha(a,">= 0",Ie,"maximum"),this.sm=a,Ol(this,this.Ob),this.cd("maximum",b,a))}),t.g(Ie,"alignment",Ie.prototype.alignment),t.defineProperty(Ie,{alignment:"alignment"},function(){return this.Ae},function(a){var b=this.Ae;b.O(a)||(e&&t.l(a,L,Ie,"alignment"),this.Ae=a.ba(),this.cd("alignment",b,a))}),t.g(Ie,"stretch",Ie.prototype.ui),t.defineProperty(Ie,{ui:"stretch"},function(){return this.ai},function(a){var b=this.ai;b!==a&&(e&&t.Fa(a,V,Ie,"stretch"),this.ai=a,this.cd("stretch",b,a))}),t.g(Ie,"separatorPadding",Ie.prototype.xB),t.defineProperty(Ie,{xB:"separatorPadding"},function(){return this.ak},function(a){"number"==typeof a?a=new wb(a):null!==a&&e&&t.l(a,wb,Ie,"separatorPadding");var b=this.ak;null!==a&&null!==b&&b.O(a)||(null!==a&&(a=a.ba()),this.ak=a,this.cd("separatorPadding",b,a))}),t.g(Ie,"separatorStroke",Ie.prototype.Bn),t.defineProperty(Ie,{Bn:"separatorStroke"},function(){return this.As},function(a){var b=this.As;b!==a&&(null===a||"string"==typeof a||a instanceof qa)&&(a instanceof qa&&a.freeze(),this.As=a,this.ia&&this.ia.na(),this.cd("separatorStroke",b,a))}),t.g(Ie,"separatorStrokeWidth",Ie.prototype.Cn),t.defineProperty(Ie,{Cn:"separatorStrokeWidth"},function(){return this.Bs},function(a){var b=this.Bs;b!==a&&(this.Bs=a,this.ia&&this.ia.na(),this.cd("separatorStrokeWidth",b,a))}),t.g(Ie,"separatorDashArray",Ie.prototype.IG),t.defineProperty(Ie,{IG:"separatorDashArray"},function(){return this.Xh},function(a){var b=this.Xh;b!==a&&(Array.isArray(a)||t.jc(a,"Array",Ie,"separatorDashArray:val"),this.Xh=a,this.ia&&this.ia.na(),this.cd("separatorDashArray",b,a))}),t.g(Ie,"background",Ie.prototype.background),t.defineProperty(Ie,{background:"background"},function(){return this.Qb},function(a){var b=this.Qb;b!==a&&(null===a||"string"==typeof a||a instanceof qa)&&(a instanceof qa&&a.freeze(),this.Qb=a,this.ia&&this.ia.na(),this.cd("background",b,a))}),t.g(Ie,"coversSeparators",Ie.prototype.Lw),t.defineProperty(Ie,{Lw:"coversSeparators"},function(){return this.Oq},function(a){var b=this.Oq;b!==a&&(t.i(a,"boolean",Ie,"coversSeparators"),this.Oq=a,this.cd("coversSeparators",b,a))}),t.g(Ie,"sizing",Ie.prototype.hu),t.defineProperty(Ie,{hu:"sizing"},function(){return this.Ds},function(a){var b=this.Ds;b!==a&&(e&&t.Fa(a,Ie,Ie,"sizing"),this.Ds=a,this.cd("sizing",b,a))}),t.A(Ie,{mc:"actual"},function(){return this.Ob}),t.A(Ie,{total:"total"},function(){return this.Ob+Kl(this)}),t.A(Ie,{position:"position"},function(){return this.Pa}),Ie.prototype.bind=Ie.prototype.bind=function(a){a.zg=this;var b=this.ia;null!==b&&(b=b.sp(),null!==b&&Sk(b)&&t.m("Cannot add a Binding to a RowColumnDefinition that is already frozen: "+a)),null===this.Qc&&(this.Qc=new H(Le)),this.Qc.add(a)},t.ka("Shape",W),t.Qa(W,V),W.prototype.cloneProtected=function(a){V.prototype.cloneProtected.call(this,a),a.Ta=this.Ta,a.io=this.io,a.nh=this.nh,a.er=this.er,a.Lk=this.Lk,a.$c=this.$c,a.Kb=this.Kb,a.se=this.se,a.So=this.So,a.To=this.To,a.Lm=this.Lm,a.Km=null,this.Km&&(a.Km=this.Km.slice(0)),a.rd=this.rd,a.Zi=this.Zi.ba(),a.$i=this.$i.ba(),a.Zr=this.Zr,a.$r=this.$r,a.jr=this.jr,a.pr=this.pr,a.bs=this.bs,a.Vo=this.Vo,a.mo=this.mo,a.ir=this.ir},W.prototype.toString=function(){return"Shape("+("None"!==this.Eb?this.Eb:"None"!==this.Hn?this.Hn:this.Zw)+")#"+t.ud(this)},W.prototype.rl=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,u,v,w,x,y,z;if((null!==this.Kb||null!==this.$c)&&(null!==this.$c&&Ak(this,a,this.$c,!0),null!==this.Kb&&Ak(this,a,this.Kb,!1),c=this.se,0===c&&(d=this.U,d instanceof ea&&d.type===Jg&&d.uc instanceof W&&(c=d.uc.lb)),a.lineWidth=c,a.lineJoin=this.To,a.lineCap=this.So,a.miterLimit=this.Lm,e=!1,this.U&&b.el.drawShadows&&(e=this.U.qi),f=!0,null!==this.Kb&&null===this.$c&&(f=!1),d=!1,g=this.Qx,null!==g&&(h=d=!0,void 0!==a.setLineDash?(a.setLineDash(g),a.lineDashOffset=this.rd):void 0!==a.webkitLineDash?(a.webkitLineDash=g,a.webkitLineDashOffset=this.rd):void 0!==a.mozDash?(a.mozDash=g,a.mozDashOffset=this.rd):h=!1),i=this.Ta,null!==i)){if(i.ga===Tc)a.beginPath(),d&&!h?ik(a,i.tc,i.Cc,i.pb,i.Bb,g,this.rd):(a.moveTo(i.tc,i.Cc),a.lineTo(i.pb,i.Bb)),null!==this.$c&&Bk(a,this.$c,!0),0!==c&&null!==this.Kb&&Bk(a,this.Kb,!1);else if(i.ga===Uc)j=i.tc,k=i.Cc,l=i.pb,i=i.Bb,m=Math.min(j,l),n=Math.min(k,i),j=Math.abs(l-j),k=Math.abs(i-k),null!==this.$c&&(this.$c instanceof qa&&this.$c.type===pe?(a.beginPath(),a.rect(m,n,j,k),Bk(a,this.$c,!0)):a.fillRect(m,n,j,k)),null!==this.Kb&&(f&&e&&(o=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur],a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),d&&!h?(h=[[m,n],[m+j,n],[m+j,n+k],[m,n+k],[m,n]],a.beginPath(),cm(a,h,g,this.rd),Bk(a,this.Kb,!1)):0!==c&&(this.Kb instanceof qa&&this.Kb.type===pe?(a.beginPath(),a.rect(m,n,j,k),Bk(a,this.Kb,!1)):a.strokeRect(m,n,j,k)),f&&e&&(a.shadowOffsetX=o[0],a.shadowOffsetY=o[1],a.shadowBlur=o[2]));else if(i.ga===$c)j=i.tc,k=i.Cc,l=i.pb,i=i.Bb,m=Math.abs(l-j)/2,n=Math.abs(i-k)/2,j=Math.min(j,l)+m,k=Math.min(k,i)+n,a.beginPath(),a.moveTo(j,k-n),a.bezierCurveTo(j+K.za*m,k-n,j+m,k-K.za*n,j+m,k),a.bezierCurveTo(j+m,k+K.za*n,j+K.za*m,k+n,j,k+n),a.bezierCurveTo(j-K.za*m,k+n,j-m,k+K.za*n,j-m,k),a.bezierCurveTo(j-m,k-K.za*n,j-K.za*m,k-n,j,k-n),a.closePath(),null!==this.$c&&Bk(a,this.$c,!0),d&&!h&&(h=t.Hb(),K.Fe(j,k-n,j+K.za*m,k-n,j+m,k-K.za*n,j+m,k,.5,h),K.Fe(j+m,k,j+m,k+K.za*n,j+K.za*m,k+n,j,k+n,.5,h),K.Fe(j,k+n,j-K.za*m,k+n,j-m,k+K.za*n,j-m,k,.5,h),K.Fe(j-m,k,j-m,k-K.za*n,j-K.za*m,k-n,j,k-n,.5,h),a.beginPath(),cm(a,h,g,this.rd),t.Ca(h)),0!==c&&null!==this.Kb&&(f&&e&&(o=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur],a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),Bk(a,this.Kb,!1),f&&e&&(a.shadowOffsetX=o[0],a.shadowOffsetY=o[1],a.shadowBlur=o[2]));else if(i.ga===Qc){for(m=i.Pk,n=m.length,p=0;n>p;p++){for(q=m.n[p],a.beginPath(),a.moveTo(q.sa,q.ta),r=q.Ka.n,s=r.length,u=null,v=0;s>v;v++){switch(w=r[v],w.ga){case kd:a.moveTo(w.D,w.F);break;case bd:a.lineTo(w.D,w.F);break;case ld:a.bezierCurveTo(w.pd,w.Ee,w.xg,w.yg,w.pb,w.Bb);break;case md:a.quadraticCurveTo(w.pd,w.Ee,w.pb,w.Bb);break;case sd:if(w.radiusX===w.radiusY)u=Math.PI/180,a.arc(w.pd,w.Ee,w.radiusX,w.zh*u,(w.zh+w.vi)*u,0>w.vi);else for(u=vd(w,q),x=u.length,y=0;x>y;y++)z=u[y],0===y&&a.lineTo(z.x1,z.y1),a.bezierCurveTo(z.x2,z.y2,z.pe,z.qe,z.$b,z.ac);break;case ud:for(u&&u.type===sd?(u=vd(u,q),u=u[u.length-1]||null,null!==u&&(j=u.$b,l=u.ac)):(j=u?u.D:q.sa,l=u?u.F:q.ta),u=wd(w,q,j,l),x=u.length,y=0;x>y;y++)z=u[y],a.bezierCurveTo(z.x2,z.y2,z.pe,z.qe,z.$b,z.ac);break;default:t.m("Segment not of valid type")}w.Th&&a.closePath(),u=w}e?q.vo?(!0===q.hm&&null!==this.$c?(Bk(a,this.$c,!0),f=!0):f=!1,0!==c&&null!==this.Kb&&(f&&(o=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur],a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),d&&!h||Bk(a,this.Kb,!1),f&&(a.shadowOffsetX=o[0],a.shadowOffsetY=o[1],a.shadowBlur=o[2]))):(f&&(o=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur],a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),!0===q.hm&&null!==this.$c&&Bk(a,this.$c,!0),0!==c&&null!==this.Kb&&(d&&!h||Bk(a,this.Kb,!1)),f&&(a.shadowOffsetX=o[0],a.shadowOffsetY=o[1],a.shadowBlur=o[2])):(!0===q.hm&&null!==this.$c&&Bk(a,this.$c,!0),0===c||null===this.Kb||d&&!h||Bk(a,this.Kb,!1))}if(d&&!h)for(c=f,o=i.Pk,f=o.length,h=0;f>h;h++){for(i=o.n[h],a.beginPath(),j=t.Hb(),j.push([i.sa,i.ta]),l=i.sa,m=i.ta,n=l,p=m,q=i.Ka.n,r=q.length,s=0;r>s;s++){switch(v=q[s],v.ga){case kd:cm(a,j,g,this.rd),j.length=0,j.push([v.D,v.F]),l=v.D,m=v.F,n=l,p=m;break;case bd:j.push([v.D,v.F]),l=v.D,m=v.F;break;case ld:K.Fe(l,m,v.pd,v.Ee,v.xg,v.yg,v.pb,v.Bb,.5,j),l=v.D,m=v.F;break;case md:K.Yp(l,m,v.pd,v.Ee,v.pb,v.Bb,.5,j),l=v.D,m=v.F;break;case sd:for(w=vd(v,i),u=w.length,x=0;u>x;x++)y=w[x],K.Fe(l,m,y.x2,y.y2,y.pe,y.qe,y.$b,y.ac,.5,j),l=y.$b,m=y.ac;break;case ud:for(w=wd(v,i,l,m),u=w.length,x=0;u>x;x++)y=w[x],K.Fe(l,m,y.x2,y.y2,y.pe,y.qe,y.$b,y.ac,.5,j),l=y.$b,m=y.ac;break;default:t.m("Segment not of valid type")}v.Th&&(j.push([n,p]),cm(a,j,g,this.rd))}cm(a,j,g,this.rd),t.Ca(j),null!==this.Kb&&(c&&e&&(k=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur],a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),Bk(a,this.Kb,!1),c&&e&&(a.shadowOffsetX=k[0],a.shadowOffsetY=k[1],a.shadowBlur=k[2]))}}if(d&&(void 0!==a.setLineDash?(a.setLineDash(t.xi),a.lineDashOffset=0):void 0!==a.webkitLineDash?(a.webkitLineDash=t.xi,a.webkitLineDashOffset=0):void 0!==a.mozDash&&(a.mozDash=null,a.mozDashOffset=0)),this.fB){for(d=this.fB,wh(d,1/0,1/0),g=d.Ha,d.Sc(0,0,g.width,g.height),a.save(),g=this.td.Fb.gb(),a.beginPath(),k=t.Hb(),k.push([g.sa,g.ta]),c=g.sa,e=g.ta,o=c,f=e,h=g.Ka.n,i=h.length,j=0;i>j;j++){switch(l=h[j],l.ga){case kd:bm(a,b,k,d),k.length=0,k.push([l.D,l.F]),c=l.D,e=l.F,o=c,f=e;break;case bd:k.push([l.D,l.F]),c=l.D,e=l.F;break;case ld:K.Fe(c,e,l.pd,l.Ee,l.xg,l.yg,l.pb,l.Bb,.5,k),c=l.D,e=l.F;break;case md:K.Yp(c,e,l.pd,l.Ee,l.pb,l.Bb,.5,k),c=l.D,e=l.F;break;case sd:for(m=vd(l,g),n=m.length,p=0;n>p;p++)q=m[p],K.Fe(c,e,q.x2,q.y2,q.pe,q.qe,q.$b,q.ac,.5,k),c=q.$b,e=q.ac;break;case ud:for(m=wd(l,g,c,e),n=m.length,p=0;n>p;p++)q=m[p],K.Fe(c,e,q.x2,q.y2,q.pe,q.qe,q.$b,q.ac,.5,k),c=q.$b,e=q.ac;break;default:t.m("Segment not of valid type")}l.Th&&(k.push([o,f]),bm(a,b,k,d))}bm(a,b,k,d),t.Ca(k),a.restore()}}},W.prototype.getDocumentPoint=W.prototype.wb=function(a,b){void 0===b&&(b=new E),a.Me()&&t.m("getDocumentPoint:s Spot must be real: "+a.toString());var c=this.Ja,d=this.lb;return b.p(a.x*(c.width+d)-d/2+c.x+a.offsetX,a.y*(c.height+d)-d/2+c.y+a.offsetY),this.ue.Xa(b),b},W.prototype.jk=function(a,b){var d,e,f,g,h,i,j,k,c=this.Ta;if(null===c||null===this.fill&&null===this.stroke)return!1;if(d=c.Ub,e=this.lb/2,c.type!==Tc||b||(e+=2),f=t.Nf(),f.assign(d),f.$f(e+2,e+2),!f.La(a))return t.oc(f),!1;if(d=e+1e-4,c.type===Tc)return null===this.stroke?!1:(d=(c.D-c.sa)*(a.x-c.sa)+(c.F-c.ta)*(a.y-c.ta),0>(c.sa-c.D)*(a.x-c.D)+(c.ta-c.F)*(a.y-c.F)||0>d?!1:(t.oc(f),K.Ud(c.sa,c.ta,c.D,c.F,e,a.x,a.y)));if(c.type===Uc){if(g=c.sa,h=c.ta,i=c.D,j=c.F,c=Math.min(g,i),k=Math.min(h,j),g=Math.abs(i-g),h=Math.abs(j-h),f.x=c,f.y=k,f.width=g,f.height=h,null===this.fill){if(f.$f(-d,-d),f.La(a))return t.oc(f),!1;f.$f(d,d)}return null!==this.stroke&&f.$f(e,e),e=f.La(a),t.oc(f),e}if(c.type===$c){if(g=c.sa,h=c.ta,i=c.D,j=c.F,c=Math.min(g,i),k=Math.min(h,j),g=Math.abs(i-g),h=Math.abs(j-h),g/=2,h/=2,c=a.x-(c+g),k=a.y-(k+h),null===this.fill){if(g-=d,h-=d,0>=g||0>=h||1>=c*c/(g*g)+k*k/(h*h))return t.oc(f),!1;g+=d,h+=d}return null!==this.stroke&&(g+=e,h+=e),t.oc(f),0>=g||0>=h?!1:1>=c*c/(g*g)+k*k/(h*h)}return c.type===Qc?(t.oc(f),null===this.fill?zd(c,a.x,a.y,e):c.La(a,e,1<this.lb,b)):(t.m("Unknown Geometry type"),!1)},W.prototype.Kt=function(a,b,c,d){var g,h,i,j,k,l,m,n,o,p,q,e=this.Ea,f=this.se;switch(a=Math.max(a,0),b=Math.max(b,0),this.nh?g=this.Ta.Ub:(h=this.Eb,i=K.hB[h],void 0===i&&(j=K.pj[h],"string"==typeof j&&(j=K.pj[j]),"function"==typeof j?(i=j(null,100,100),K.hB[h]=i):t.m("Unsupported Figure:"+h)),g=i.Ub),h=g.width,i=g.height,j=g.width,k=g.height,nk(this)){case ah:d=c=0;break;case Sc:j=Math.max(a-f,0),k=Math.max(b-f,0);break;case fk:j=Math.max(a-f,0),d=0;break;case ek:c=0,k=Math.max(b-f,0)}switch(isFinite(e.width)&&(j=e.width),isFinite(e.height)&&(k=e.height),e=this.Oe,g=this.cg,c=Math.max(c,g.width)-f,d=Math.max(d,g.height)-f,j=Math.min(e.width,j),k=Math.min(e.height,k),j=isFinite(j)?Math.max(c,j):Math.max(h,c),k=isFinite(k)?Math.max(d,k):Math.max(i,d),c=Nl(this)){case ah:break;case Sc:h=j,i=k;break;case ch:c=Math.min(j/h,k/i),isFinite(c)||(c=1),h*=c,i*=c;break;default:t.m(c+" is not a valid geometryStretch.")}if(this.nh){if(g=this.td,d=h,e=i,c=g.copy(),g=g.Ub,d/=g.width,e/=g.height,isFinite(d)||(d=1),isFinite(e)||(e=1),1!==d||1!==e)switch(c.type){case Tc:case Uc:case $c:c.sa*=d,c.ta*=e,c.D*=d,c.F*=e;break;case Qc:for(g=c.Fb,l=g.length,m=0;l>m;m++)for(n=g.n[m],n.sa*=d,n.ta*=e,n=n.Ka,o=n.length,p=0;o>p;p++)switch(q=n.n[p],q.type){case bd:case kd:q.D*=d,q.F*=e;break;case ld:q.Gb*=d,q.Xb*=e,q.xe*=d,q.ye*=e,q.D*=d,q.F*=e;break;case md:q.Gb*=d,q.Xb*=e,q.D*=d,q.F*=e;break;case sd:q.Ia*=d,q.Ua*=e,q.radiusX*=d,void 0!==q.radiusY&&(q.radiusY*=e);break;case ud:q.D*=d,q.F*=e,q.radiusX*=d,q.radiusY*=e;break;default:t.m("Unknown Segment type: "+q.type)}}this.Ta=c}else(null===this.Ta||this.Ta.to!==a-f||this.Ta.so!==b-f)&&(this.Ta=K.makeGeometry(this,h,i));g=this.Ta.Ub,1/0===a||1/0===b?kk(this,g.x-f/2,g.y-f/2,0===a&&0===h?0:g.width+f,0===b&&0===i?0:g.height+f):kk(this,-(f/2),-(f/2),j+f,k+f)},W.prototype.ik=function(a,b,c,d){rk(this,a,b,c,d)},W.prototype.getNearestIntersectionPoint=W.prototype.yl=function(a,b,c){return this.yp(a.x,a.y,b.x,b.y,c)},W.prototype.yp=function(a,b,c,d,e){var n,o,p,q,r,s,u,v,w,z,A,x,y,B,C,D,F,f=this.transform,g=1/(f.m11*f.m22-f.m12*f.m21),h=f.m22*g,i=-f.m12*g,j=-f.m21*g,k=f.m11*g,l=g*(f.m21*f.dy-f.m22*f.dx),m=g*(f.m12*f.dx-f.m11*f.dy);if(f=a*h+b*j+l,g=a*i+b*k+m,h=c*h+d*j+l,i=c*i+d*k+m,j=this.lb/2,l=this.Ta,null===l&&(wh(this,1/0,1/0),l=this.Ta),m=l.Ub,k=!1,l.type===Tc)if(1.5>=this.lb)k=K.vh(l.tc,l.Cc,l.pb,l.Bb,f,g,h,i,e);else{if(l.tc===l.pb?(n=j,o=0):(b=(l.Bb-l.Cc)/(l.pb-l.tc),o=j/Math.sqrt(1+b*b),n=o*b),d=t.Hb(),b=new E,K.vh(l.tc+n,l.Cc+o,l.pb+n,l.Bb+o,f,g,h,i,b)&&d.push(b),b=new E,K.vh(l.tc-n,l.Cc-o,l.pb-n,l.Bb-o,f,g,h,i,b)&&d.push(b),b=new E,K.vh(l.tc+n,l.Cc+o,l.tc-n,l.Cc-o,f,g,h,i,b)&&d.push(b),b=new E,K.vh(l.pb+n,l.Bb+o,l.pb-n,l.Bb-o,f,g,h,i,b)&&d.push(b),b=d.length,0===b)return t.Ca(d),!1;for(k=!0,o=1/0,n=0;b>n;n++)h=d[n],p=(h.x-f)*(h.x-f)+(h.y-g)*(h.y-g),o>p&&(o=p,e.x=h.x,e.y=h.y);t.Ca(d)}else if(l.type===Uc)b=m.x-j,k=K.yl(b,m.y-j,m.x+m.width+j,m.y+m.height+j,f,g,h,i,e);else if(l.type===$c)a:if(b=m.copy().$f(j,j),0===b.width)k=K.vh(b.x,b.y,b.x,b.y+b.height,f,g,h,i,e);else if(0===b.height)k=K.vh(b.x,b.y,b.x+b.width,b.y,f,g,h,i,e);
else{if(a=b.width/2,q=b.height/2,d=b.x+a,b=b.y+q,c=9999,f!==h&&(c=(g-i)/(f-h)),9999>Math.abs(c)){if(k=g-b-c*(f-d),0>a*a*c*c+q*q-k*k){e.x=0/0,e.y=0/0,k=!1;break a}j=Math.sqrt(a*a*c*c+q*q-k*k),h=(-(a*a*c*k)+a*q*j)/(q*q+a*a*c*c)+d,a=(-(a*a*c*k)-a*q*j)/(q*q+a*a*c*c)+d,i=c*(h-d)+k+b,b=c*(a-d)+k+b,d=Math.abs((f-h)*(f-h))+Math.abs((g-i)*(g-i)),g=Math.abs((f-a)*(f-a))+Math.abs((g-b)*(g-b)),g>d?(e.x=h,e.y=i):(e.x=a,e.y=b)}else{if(h=q*q,i=f-d,h-=h/(a*a)*i*i,0>h){e.x=0/0,e.y=0/0,k=!1;break a}j=Math.sqrt(h),i=b+j,b-=j,d=Math.abs(i-g),g=Math.abs(b-g),g>d?(e.x=f,e.y=i):(e.x=f,e.y=b)}k=!0}else if(l.type===Qc){for(m=t.N(),n=h-f,o=i-g,o=n*n+o*o,e.x=h,e.y=i,n=0;n<l.Fb.count;n++)for(v=l.Fb.n[n],w=v.Ka,r=v.sa,s=v.ta,x=r,y=s,B=0;B<w.count;B++){switch(z=w.n[B],A=z.type,p=z.D,u=z.F,C=!1,A){case kd:x=p,y=u;break;case bd:C=dm(r,s,p,u,f,g,h,i,m);break;case ld:C=z.Gb,A=z.Xb,D=z.xe,F=z.ye,C=K.dt(r,s,C,A,D,F,p,u,f,g,h,i,.5,m);break;case md:C=(r+2*z.Gb)/3,A=(s+2*z.Xb)/3,D=(2*z.Gb+p)/3,F=(2*z.Gb+p)/3,C=K.dt(r,s,C,A,D,F,p,u,f,g,h,i,.5,m);break;case sd:case ud:for(u=z.type===sd?vd(z,v):wd(z,v,r,s),A=u.length,D=0;A>D;D++)q=u[D],0===D&&dm(r,s,q.x1,q.y1,f,g,h,i,m)&&(p=em(f,g,m,o,e),o>p&&(o=p,k=!0)),K.dt(q.x1,q.y1,q.x2,q.y2,q.pe,q.qe,q.$b,q.ac,f,g,h,i,.5,m)&&(p=em(f,g,m,o,e),o>p&&(o=p,k=!0));p=q.$b,u=q.ac;break;default:t.m("Unknown Segment type: "+z.type)}r=p,s=u,C&&(p=em(f,g,m,o,e),o>p&&(o=p,k=!0)),z.Ct&&(p=x,u=y,dm(r,s,p,u,f,g,h,i,m)&&(p=em(f,g,m,o,e),o>p&&(o=p,k=!0)))}f=c-a,g=d-b,b=Math.sqrt(f*f+g*g),0!==b&&(f/=b,g/=b),e.x-=f*j,e.y-=g*j,t.B(m)}else t.m("Invalid Geometry type");return k?(this.transform.Xa(e),!0):!1},W.prototype.containedInRect=W.prototype.Zm=function(a,b){var c,d,e,f;return void 0===b?a.kk(this.pa):(c=this.Ta,null===c&&(wh(this,1/0,1/0),c=this.Ta),c=c.Ub,d=this.lb/2,e=!1,f=t.N(),f.p(c.x-d,c.y-d),a.La(b.Xa(f))&&(f.p(c.x-d,c.bottom+d),a.La(b.Xa(f))&&(f.p(c.right+d,c.bottom+d),a.La(b.Xa(f))&&(f.p(c.right+d,c.y-d),a.La(b.Xa(f))&&(e=!0)))),t.B(f),e)},W.prototype.intersectsRect=W.prototype.ag=function(a,b){var c,d,e,f,g,h,i,j,k;return this.Zm(a,b)||void 0===b&&(b=this.transform,a.kk(this.pa))?!0:(c=t.Bh(),c.set(b),c.IA(),d=a.left,e=a.right,f=a.top,g=a.bottom,h=t.N(),h.p(d,f),c.Xa(h),this.jk(h,!0)?(t.B(h),!0):(h.p(e,f),c.Xa(h),this.jk(h,!0)?(t.B(h),!0):(h.p(d,g),c.Xa(h),this.jk(h,!0)?(t.B(h),!0):(h.p(e,g),c.Xa(h),this.jk(h,!0)?(t.B(h),!0):(i=t.N(),j=t.N(),c.set(b),c.$A(this.transform),c.IA(),i.x=e,i.y=f,i.transform(c),h.x=d,h.y=f,h.transform(c),k=!1,fm(this,h,i,j)?k=!0:(h.x=e,h.y=g,h.transform(c),fm(this,h,i,j)?k=!0:(i.x=d,i.y=g,i.transform(c),fm(this,h,i,j)?k=!0:(h.x=d,h.y=f,h.transform(c),fm(this,h,i,j)&&(k=!0)))),t.B(h),t.cf(c),t.B(i),t.B(j),k)))))},W.prototype.fF=function(a,b,c){function d(a,b){var c,d,f;for(c=a.length,d=0;c>d;d++)if(f=a[d],b.nt(f[0],f[1])>e)return!0;return!1}var e,f,g,h,i,j,k,l,m,n,o;if(c&&null!==this.fill&&this.jk(a,!0))return!0;if(e=a.nk(b),b=e,1.5<this.lb&&(e=this.lb/2+Math.sqrt(e),e*=e),f=this.Ta,null===f&&(wh(this,1/0,1/0),f=this.Ta),!c&&(g=f.Ub,h=g.x,i=g.y,j=g.x+g.width,g=g.y+g.height,ob(a.x,a.y,h,i)<=e&&ob(a.x,a.y,j,i)<=e&&ob(a.x,a.y,h,g)<=e&&ob(a.x,a.y,j,g)<=e))return!0;if(h=f.tc,i=f.Cc,j=f.pb,g=f.Bb,f.type===Tc){if(c=mb(a.x,a.y,h,i,j,g),f=(h-j)*(a.x-j)+(i-g)*(a.y-g),c<=(0<=(j-h)*(a.x-h)+(g-i)*(a.y-i)&&f>=0?e:b))return!0}else{if(f.type===Uc)return b=!1,c&&(b=mb(a.x,a.y,h,i,h,g)<=e||mb(a.x,a.y,h,i,j,i)<=e||mb(a.x,a.y,j,i,j,g)<=e||mb(a.x,a.y,h,g,j,g)<=e),b;if(f.type===$c){if(b=a.x-(h+j)/2,f=a.y-(i+g)/2,k=Math.abs(j-h)/2,l=Math.abs(g-i)/2,0===k||0===l)return c=mb(a.x,a.y,h,i,j,g),e>=c?!0:!1;if(!c)return ob(b,f,-k,0)>=e||ob(b,f,0,-l)>=e||ob(b,f,0,l)>=e||ob(b,f,k,0)>=e?!1:!0;if(a=K.UI(k,l,b,f),e>=a*a)return!0}else if(f.type===Qc){if(g=f.Ub,h=g.x,i=g.y,j=g.x+g.width,g=g.y+g.height,a.x>j&&a.x<h&&a.y>g&&a.y<i&&mb(a.x,a.y,h,i,h,g)>e&&mb(a.x,a.y,h,i,j,i)>e&&mb(a.x,a.y,j,g,h,g)>e&&mb(a.x,a.y,j,g,j,i)>e)return!1;if(b=Math.sqrt(e),!c){for(c=f.Fb,b=0;b<c.count;b++){if(h=c.n[b],k=h.sa,l=h.ta,a.nt(k,l)>e)return!1;for(i=h.Ka.n,j=i.length,g=0;j>g;g++)switch(m=i[g],m.type){case kd:case bd:if(k=m.D,l=m.F,a.nt(k,l)>e)return!1;break;case ld:if(f=t.Hb(),K.Fe(k,l,m.Gb,m.Xb,m.xe,m.ye,m.D,m.F,.8,f),k=d(f,a),t.Ca(f),k)return!1;if(k=m.D,l=m.F,a.nt(k,l)>e)return!1;break;case md:if(f=t.Hb(),K.Yp(k,l,m.Gb,m.Xb,m.D,m.F,.8,f),k=d(f,a),t.Ca(f),k)return!1;if(k=m.D,l=m.F,a.nt(k,l)>e)return!1;break;case sd:case ud:for(m=m.type===sd?vd(m,h):wd(m,h,k,l),n=m.length,o=null,f=t.Hb(),b=0;n>b;b++)if(o=m[b],f.length=0,K.Fe(o.x1,o.y1,o.x2,o.y2,o.pe,o.qe,o.$b,o.ac,.8,f),d(f,a))return t.Ca(f),!1;t.Ca(f),null!==o&&(k=o.$b,l=o.ac);break;default:t.m("Unknown Segment type: "+m.type)}}return!0}if(null===this.fill?zd(f,a.x,a.y,b):f.La(a,b,!0))return!0}}return!1},t.g(W,"geometry",W.prototype.td),t.defineProperty(W,{td:"geometry"},function(){return this.Lk?this.Lk:this.Ta},function(a){var c,b=this.Ta;b!==a&&(null!==a?(e&&t.l(a,Pc,W,"geometry"),this.Lk=this.Ta=a.freeze()):this.Lk=this.Ta=null,c=this.U,c&&(c.Rj=0/0),this.nh=!0,this.ja(),this.j("geometry",b,a))}),t.g(W,"geometryString",W.prototype.mF),t.defineProperty(W,{mF:"geometryString"},function(){return this.td.toString()},function(a){var c,b=ed(a);a=b.normalize(),this.td=b,b=t.N(),c=this.position,c.P()?b.p(c.x-a.x,c.y-a.y):b.p(-a.x,-a.y),this.position=b,t.B(b)}),t.defineProperty(W,{MA:"isGeometryPositioned"},function(){return this.jr},function(a){e&&t.i(a,"boolean",W,"isGeometryPositioned");var b=this.jr;b!==a&&(this.jr=a,this.ja(),this.j("isGeometryPositioned",b,a))}),W.prototype.ef=function(){this.nh?this.Lk=null:this.Ta=null,this.ja()},t.g(W,"fill",W.prototype.fill),t.defineProperty(W,{fill:"fill"},function(){return this.$c},function(a){var b=this.$c;b!==a&&(e&&null!==a&&t.gp(a,"Shape.fill"),a instanceof qa&&a.freeze(),this.$c=a,this.na(),this.j("fill",b,a))}),t.g(W,"stroke",W.prototype.stroke),t.defineProperty(W,{stroke:"stroke"},function(){return this.Kb},function(a){var b=this.Kb;b!==a&&(e&&null!==a&&t.gp(a,"Shape.stroke"),a instanceof qa&&a.freeze(),this.Kb=a,this.na(),this.j("stroke",b,a))}),t.g(W,"strokeWidth",W.prototype.lb),t.defineProperty(W,{lb:"strokeWidth"},function(){return this.se},function(a){var c,b=this.se;b!==a&&(e&&t.q(a,W,"strokeWidth"),a>=0?(this.se=a,this.ja(),c=this.U,c&&(c.Rj=0/0),this.j("strokeWidth",b,a)):t.ha(a,"val >= 0",W,"strokeWidth:val"))}),t.g(W,"strokeCap",W.prototype.UG),t.defineProperty(W,{UG:"strokeCap"},function(){return this.So},function(a){var b=this.So;b!==a&&("string"!=typeof a||"butt"!==a&&"round"!==a&&"square"!==a?t.ha(a,'"butt", "round", or "square"',W,"strokeCap"):(this.So=a,this.na(),this.j("strokeCap",b,a)))}),t.g(W,"strokeJoin",W.prototype.yK),t.defineProperty(W,{yK:"strokeJoin"},function(){return this.To},function(a){var b=this.To;b!==a&&("string"!=typeof a||"miter"!==a&&"bevel"!==a&&"round"!==a?t.ha(a,'"miter", "bevel", or "round"',W,"strokeJoin"):(this.To=a,this.na(),this.j("strokeJoin",b,a)))}),t.g(W,"strokeMiterLimit",W.prototype.zK),t.defineProperty(W,{zK:"strokeMiterLimit"},function(){return this.Lm},function(a){var c,b=this.Lm;b!==a&&(e&&t.q(a,W,"strokeMiterLimit"),a>0?(this.Lm=a,this.na(),c=this.U,c&&(c.Rj=0/0),this.j("strokeMiterLimit",b,a)):t.ha(a,"val > 0",W,"strokeWidth:val"))}),t.g(W,"strokeDashArray",W.prototype.Qx),t.defineProperty(W,{Qx:"strokeDashArray"},function(){return this.Km},function(a){var c,d,e,b=this.Km;if(b!==a){if(null===a||Array.isArray(a)||t.jc(a,"Array",W,"strokeDashArray:val"),null!==a)for(c=a.length,d=0;c>d;d++)e=a[d],"number"==typeof e&&e>0&&isFinite(e)||t.m("strokeDashArray:val "+e+" must be a positive non-zero number.");this.Km=a,this.na(),this.j("strokeDashArray",b,a)}}),t.g(W,"strokeDashOffset",W.prototype.VG),t.defineProperty(W,{VG:"strokeDashOffset"},function(){return this.rd},function(a){var b=this.rd;b!==a&&(e&&t.q(a,W,"strokeDashOffset"),a>=0&&(this.rd=a,this.na(),this.j("strokeDashOffset",b,a)))}),t.g(W,"figure",W.prototype.Eb),t.defineProperty(W,{Eb:"figure"},function(){return this.io},function(a){var c,b=this.io;b!==a&&(e&&t.i(a,"string",W,"figure"),c=K.pj[a],"function"==typeof c?c=a:(c=K.pj[a.toLowerCase()])||t.m("Unknown Shape.figure: "+a),b!==c&&((a=this.U)&&(a.Rj=0/0),this.io=c,this.nh=!1,this.ef(),this.j("figure",b,c)))}),t.g(W,"toArrow",W.prototype.Hn),t.defineProperty(W,{Hn:"toArrow"},function(){return this.Vo},function(a){var c,b=this.Vo;!0===a?a="Standard":!1===a&&(a=""),b!==a&&(e&&t.i(a,"string",W,"toArrow"),c=K.uE(a),null===c?t.m("Unknown Shape.toArrow: "+a):b!==c&&(this.Vo=c,this.nh=!1,this.ef(),gm(this),this.j("toArrow",b,c)))}),t.g(W,"fromArrow",W.prototype.Zw),t.defineProperty(W,{Zw:"fromArrow"},function(){return this.mo},function(a){var c,b=this.mo;!0===a?a="Standard":!1===a&&(a=""),b!==a&&(e&&t.i(a,"string",W,"fromArrow"),c=K.uE(a),null===c?t.m("Unknown Shape.fromArrow: "+a):b!==c&&(this.mo=c,this.nh=!1,this.ef(),gm(this),this.j("fromArrow",b,c)))}),t.defineProperty(W,{G:"spot1"},function(){return this.Zi},function(a){t.l(a,L,W,"spot1");var b=this.Zi;b.O(a)||(this.Zi=a=a.ba(),this.ja(),this.j("spot1",b,a))}),t.defineProperty(W,{H:"spot2"},function(){return this.$i},function(a){t.l(a,L,W,"spot2");var b=this.$i;b.O(a)||(this.$i=a=a.ba(),this.ja(),this.j("spot2",b,a))}),t.defineProperty(W,{Lc:"parameter1"},function(){return this.Zr},function(a){var b=this.Zr;b!==a&&(this.Zr=a,this.ja(),this.j("parameter1",b,a))}),t.defineProperty(W,{Vt:"parameter2"},function(){return this.$r},function(a){var b=this.$r;b!==a&&(this.$r=a,this.ja(),this.j("parameter2",b,a))}),t.A(W,{Ja:"naturalBounds"},function(){if(null!==this.Ta)return this.od.assign(this.Ta.Ub),this.od;var a=this.Ea;return new F(0,0,a.width,a.height)}),t.g(W,"isRectangular",W.prototype.BJ),t.defineProperty(W,{BJ:"isRectangular"},function(){return this.pr},function(a){var b=this.pr;b!==a&&(e&&t.i(a,"boolean",W,"isRectangular"),this.pr=a,this.ja(),this.j("isRectangular",b,a))}),t.g(W,"pathObject",W.prototype.fB),t.defineProperty(W,{fB:"pathObject"},function(){return this.bs},function(a){var b=this.bs;b!==a&&(e&&t.l(a,V,W,"pathObject"),this.bs=a,this.na(),this.j("pathObject",b,a))}),t.g(W,"geometryStretch",W.prototype.$w),t.defineProperty(W,{$w:"geometryStretch"},function(){return this.er},function(a){var b=this.er;b!==a&&(t.Fa(a,V,W,"geometryStretch"),this.er=a,this.j("geometryStretch",b,a))}),t.g(W,"interval",W.prototype.interval),t.defineProperty(W,{interval:"interval"},function(){return this.ir},function(a){var b=this.ir;e&&t.q(a,W,"interval"),a=Math.floor(a),b!==a&&a>=0&&(this.ir=a,this.h&&Oi(this.h),this.ja(),this.j("interval",b,a))}),W.defineFigureGenerator=function(a,b){var c,d;t.i(a,"string",W,"defineFigureGenerator:name"),t.i(b,"function",W,"defineFigureGenerator:func"),c=a.toLowerCase(),""!==a&&"none"!==c&&a!==c||t.m("Shape.defineFigureGenerator name must not be empty or None or all-lower-case: "+a),d=W.FigureGenerators,d[a]=b,d[c]=a},W.defineArrowheadGeometry=function(a,b){var c,d;t.i(a,"string",W,"defineArrowheadGeometry:name"),t.i(b,"string",W,"defineArrowheadGeometry:pathstr"),c=a.toLowerCase(),""!==a&&"none"!==c&&a!==c||t.m("Shape.defineArrowheadGeometry name must not be empty or None or all-lower-case: "+a),d=W.ArrowheadGeometries,d[a]=b,d[c]=a},t.ka("TextBlock",za),t.Qa(za,V),za.getEllipsis=function(){return t.ot},za.setEllipsis=function(a){t.ot=a,t.Yw={},t.zA=0},za.prototype.cloneProtected=function(a){V.prototype.cloneProtected.call(this,a),a.te=this.te,a.Kb=this.Kb,a.dh=this.dh,a.ce=this.ce,a.mr=this.mr,a.km=this.km,a.jm=this.jm,a.Om=this.Om,a.cl=this.cl,a.tf=this.tf,a.uv=this.uv,a.wz=this.wz,a.vz=this.vz,a.lo=this.lo,a.Eo=this.Eo,a.Zq=this.Zq,a.Ms=this.Ms,a.fl=this.fl,a.rf=this.rf,a.ck=this.ck,a.dk=this.dk,a.Ni=this.Ni},za.prototype.toString=function(){return 22<this.te.length?'TextBlock("'+this.te.substring(0,20)+'"...)':'TextBlock("'+this.te+'")'},za.None=km=t.w(za,"None",0),za.WrapFit=lm=t.w(za,"WrapFit",1),za.WrapDesiredSize=jm=t.w(za,"WrapDesiredSize",2),za.OverflowClip=im=t.w(za,"OverflowClip",0),za.OverflowEllipsis=mm=t.w(za,"OverflowEllipsis",1),za.prototype.ja=function(){V.prototype.ja.call(this),this.vz=this.wz=null},t.g(za,"font",za.prototype.font),t.defineProperty(za,{font:"font"},function(){return this.dh},function(a){var b=this.dh;b!==a&&(e&&t.i(a,"string",za,"font"),this.dh=a,this.lo=null,this.ja(),this.j("font",b,a))}),t.g(za,"text",za.prototype.text),t.defineProperty(za,{text:"text"},function(){return this.te},function(a){var b=this.te;a=null!==a&&void 0!==a?a.toString():"",b!==a&&(this.te=a,this.ja(),this.j("text",b,a))}),t.g(za,"textAlign",za.prototype.textAlign),t.defineProperty(za,{textAlign:"textAlign"},function(){return this.ce},function(a){var b=this.ce;b!==a&&(e&&t.i(a,"string",za,"textAlign"),"start"===a||"end"===a||"left"===a||"right"===a||"center"===a?(this.ce=a,this.na(),this.j("textAlign",b,a)):t.ha(a,'"start", "end", "left", "right", or "center"',za,"textAlign"))}),t.A(za,{Ja:"naturalBounds"},function(){if(!this.od.P()){var a=nm(this,this.te,{},999999).width,b=om(this,a,{}),c=this.Ea;isNaN(c.width)||(a=c.width),isNaN(c.height)||(b=c.height),ub(this.od,a,b)}return this.od}),t.g(za,"isMultiline",za.prototype.ox),t.defineProperty(za,{ox:"isMultiline"},function(){return this.mr},function(a){var b=this.mr;b!==a&&(e&&t.i(a,"boolean",za,"isMultiline"),this.mr=a,this.ja(),this.j("isMultiline",b,a))}),t.g(za,"isUnderline",za.prototype.EJ),t.defineProperty(za,{EJ:"isUnderline"},function(){return this.km},function(a){var b=this.km;b!==a&&(e&&t.i(a,"boolean",za,"isUnderline"),this.km=a,this.na(),this.j("isUnderline",b,a))}),t.g(za,"isStrikethrough",za.prototype.CJ),t.defineProperty(za,{CJ:"isStrikethrough"},function(){return this.jm},function(a){var b=this.jm;b!==a&&(e&&t.i(a,"boolean",za,"isStrikethrough"),this.jm=a,this.na(),this.j("isStrikethrough",b,a))}),t.g(za,"wrap",za.prototype.RB),t.defineProperty(za,{RB:"wrap"},function(){return this.Om},function(a){var b=this.Om;b!==a&&(e&&t.Fa(a,za,za,"wrap"),this.Om=a,this.ja(),this.j("wrap",b,a))}),t.g(za,"overflow",za.prototype.overflow),t.defineProperty(za,{overflow:"overflow"},function(){return this.cl},function(a){var b=this.cl;b!==a&&(e&&t.Fa(a,za,za,"overflow"),this.cl=a,this.ja(),this.j("overflow",b,a))}),t.g(za,"stroke",za.prototype.stroke),t.defineProperty(za,{stroke:"stroke"},function(){return this.Kb},function(a){var b=this.Kb;b!==a&&(e&&null!==a&&t.gp(a,"TextBlock.stroke"),a instanceof qa&&a.freeze(),this.Kb=a,this.na(),this.j("stroke",b,a))}),t.A(za,{RF:"lineCount"},function(){return this.tf}),t.g(za,"editable",za.prototype.Qw),t.defineProperty(za,{Qw:"editable"},function(){return this.Zq},function(a){var b=this.Zq;b!==a&&(e&&t.i(a,"boolean",za,"editable"),this.Zq=a,this.j("editable",b,a))}),t.g(za,"textEditor",za.prototype.HB),t.defineProperty(za,{HB:"textEditor"},function(){return this.Ms},function(a){var b=this.Ms;b!==a&&(a instanceof HTMLElement||t.m("textEditor must be an HTMLElement"),this.Ms=a,this.j("textEditor",b,a))}),t.g(za,"errorFunction",za.prototype.pt),t.defineProperty(za,{pt:"errorFunction"},function(){return this.rf},function(a){var b=this.rf;b!==a&&(null!==a&&t.i(a,"function",za,"errorFunction"),this.rf=a,this.j("errorFunction",b,a))}),za.prototype.rl=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;if(null!==this.Kb&&0!==this.te.length&&null!==this.dh)for(c=this.Ja.width,d=Gh(this),a.textAlign=this.ce,Ak(this,a,this.Kb,!0),(this.km||this.jm)&&Ak(this,a,this.Kb,!1),e=this.Eo,f=0,g=!1,h=t.qc(0,0),this.ue.Xa(h),i=t.qc(0,d),this.ue.Xa(i),j=h.nk(i),t.B(h),t.B(i),h=b.scale,8>j*h*h&&(g=!0),b.Re!==a&&(g=!1),j=this.ck,h=this.dk,i=e.Eg.length,k=0;i>k;k++)l=e.Eg[k],m=e.Xf[k],l>c&&(l=c),f+=j,n=m,m=a,o=f,p=c,q=d,r=0,g?("start"===this.ce||"left"===this.ce?r=0:"end"===this.ce||"right"===this.ce?r=p-l:"center"===this.ce?r=(p-l)/2:t.m("textAlign must be start, end, left, right, or center"),m.fillRect(0+r,o+.25*q,l,1)):("start"===this.ce||"left"===this.ce?r=0:"end"===this.ce||"right"===this.ce?r=p:"center"===this.ce?r=p/2:t.m("textAlign must be start, end, left, right, or center"),m.fillText(n,0+r,o+q-.25*q),n=0|q/20,this.km&&("end"===this.ce||"right"===this.ce?r-=l:"center"===this.ce&&(r-=l/2),m.beginPath(),m.lineWidth=n,m.moveTo(0+r,o+q-.2*q),m.lineTo(0+r+l,o+q-.2*q),m.stroke()),this.jm&&(m.beginPath(),m.lineWidth=n,o=0|o+q-q/2.2,0!==n%2&&(o+=.5),m.moveTo(0,o),m.lineTo(0+l,o),m.stroke())),f+=d+h},za.prototype.Kt=function(a,b,c,d){var h,i,j,k,e={},f=0,g=0;if(isNaN(this.Ea.width)){if(f=this.te,0===f.length)f=0;else if(this.ox){for(h=g=0,i=!1,j={Ch:0};!i;)k=pm(f,h,j),-1===k&&(k=f.length,i=!0),h=qm(f.substr(h,k-h).replace(/^\s+|\s+$/g,""),this.dh),h>g&&(g=h),h=j.Ch;f=g}else g=pm(f,0,{}),g>=0&&(f=f.substr(0,g)),f=h=qm(f,this.dh);f=Math.min(f,a/this.scale),f=Math.max(8,f)}else f=this.Ea.width;if(this.ia&&(f=Math.min(f,this.ia.Oe.width),f=Math.max(f,this.ia.cg.width)),g=om(this,f,e),j=g=isNaN(this.Ea.height)?Math.min(g,b/this.scale):this.Ea.height,0!==e.Kg&&1!==e.Xf.length&&this.cl===mm&&(b=this.dh,i=this.cl===mm?rm(b):0,h=this.ck+this.dk,h=Math.max(0,Gh(this)+h),j=Math.max(Math.floor(j/h)-1,0),!(j+1>=e.Xf.length))){for(h=e.Xf[j],a=Math.max(1,a-i);qm(h,b)>a&&1<h.length;)h=h.substr(0,h.length-1);h+=t.ot,a=qm(h,b),e.Xf[j]=h,e.Xf=e.Xf.slice(0,j+1),e.Eg[j]=a,e.Eg=e.Eg.slice(0,j+1),e.Ch=e.Xf.length,e.Kg=Math.max(e.Kg,a)}(this.RB===lm||isNaN(this.Ea.width))&&(f=e.Kg,isNaN(this.Ea.width)&&(f=Math.max(8,f))),f=Math.max(c,f),g=Math.max(d,g),ub(this.od,f,g),kk(this,0,0,f,g),this.Eo=e},za.prototype.ik=function(a,b,c,d){rk(this,a,b,c,d)},t.g(za,"textValidation",za.prototype.mu),t.defineProperty(za,{mu:"textValidation"},function(){return this.fl},function(a){var b=this.fl;b!==a&&(null!==a&&t.i(a,"function",za,"textValidation"),this.fl=a,this.j("textValidation",b,a))}),t.g(za,"spacingAbove",za.prototype.vK),t.defineProperty(za,{vK:"spacingAbove"},function(){return this.ck},function(a){var b=this.ck;b!==a&&(this.ck=a,this.j("spacingAbove",b,a))}),t.g(za,"spacingBelow",za.prototype.wK),t.defineProperty(za,{wK:"spacingBelow"},function(){return this.dk},function(a){var b=this.dk;b!==a&&(this.dk=a,this.j("spacingBelow",b,a))}),t.g(za,"maxLines",za.prototype.QJ),t.defineProperty(za,{QJ:"maxLines"},function(){return this.Ni},function(a){var b=this.Ni;b!==a&&(this.Ni=a,this.j("maxLines",b,a))}),t.ka("Picture",Xk),t.Qa(Xk,V),Xk.clearCache=tm=function(a){void 0===a&&(a=""),t.i(a,"string",Xk,"clearCache:url"),""!==a?t.yt[a]&&(delete t.yt[a],t.gx--):(t.yt={},t.gx=0)},Xk.prototype.cloneProtected=function(a){V.prototype.cloneProtected.call(this,a),a.element=this.ng,a.Fs=this.Fs,a.bk.assign(this.bk),a.po=this.po,a.rf=this.rf,a.Po=this.Po},Xk.prototype.toString=function(){return"Picture("+this.source+")#"+t.ud(this)},t.g(Xk,"element",Xk.prototype.element),t.defineProperty(Xk,{element:"element"},function(){return this.ng},function(a){var c,b=this.ng;b!==a&&(a instanceof HTMLImageElement||a instanceof HTMLVideoElement||a instanceof HTMLCanvasElement||t.m("Picture.element must be an instance of Image, Canvas, or Video."),this.cv=!1,c=this,a instanceof HTMLCanvasElement?this.lv=!0:(this.lv=!1,a.onerror=function(a){c.cv=!0,null!==c.rf&&c.rf(c,a)}),this.ng=a,!0===a.complete||void 0===a.complete?(this.rm=!0,this.Ea.P()||(ok(this,!1),this.ja())):(t.NB.push(this),null===t.Dx&&(t.Dx=setInterval(function(){var a,b,c,d,f,e,g,h,i,j;for(a=[],b=t.NB,c=b.length,d=0;c>d;d++){if(e=b[d],f=e,g=f.ng)if(g.complete){if(f.rm=!0,f.Ea.P()||(ok(f,!1),f.ja()),f.h)f.Ea.P()||f.h.Vc(),f.h.na();else{if(f=t.rA,h=f.length,0===h)for(h=document.getElementsByTagName("canvas"),i=h.length,g=0;i>g;g++)j=h[g],j.parentElement&&j.parentElement.W&&f.push(j.parentElement.W);for(h=f.length,g=0;h>g;g++)f[g].na()}f=!0}else f=!1;else f=!0;f||a.push(e)}0===a.length&&(clearInterval(t.Dx),t.Dx=null),t.NB=a},200))),this.j("element",b,a),this.na())}),t.g(Xk,"source",Xk.prototype.source),t.defineProperty(Xk,{source:"source"},function(){return this.Fs},function(a){var c,d,e,f,b=this.Fs;b!==a&&(t.i(a,"string",Xk,"source"),this.Fs=a,this.cv=!1,c=t.yt,void 0!==c[a]?this.element=c[a]:(10<t.gx&&(tm(),c=t.yt),d=document.createElement("img"),d.src=a,e=d.src,f=this.Po,d.crossOrigin=null===f?0===e.indexOf("data")||0===e.indexOf("file")?null:"anonymous":f(),c[a]=d,t.gx++,d instanceof HTMLImageElement&&(this.element=d)),this.na(),this.j("source",b,a))}),t.g(Xk,"sourceCrossOrigin",Xk.prototype.tK),t.defineProperty(Xk,{tK:"sourceCrossOrigin"},function(){return this.Po},function(a){this.Po!==a&&(null!==a&&t.i(a,"function",Xk,"sourceCrossOrigin"),this.Po=a,this.element&&(this.element.crossOrigin=null===a?0===a.indexOf("data")||a.indexOf("file")?null:"anonymous":a()))}),t.g(Xk,"sourceRect",Xk.prototype.ti),t.defineProperty(Xk,{ti:"sourceRect"},function(){return this.bk},function(a){var b=this.bk;b.O(a)||(t.l(a,F,Xk,"sourceRect"),this.bk=a=a.ba(),this.na(),this.j("sourceRect",b,a))}),t.g(Xk,"imageStretch",Xk.prototype.sJ),t.defineProperty(Xk,{sJ:"imageStretch"},function(){return this.po},function(a){var b=this.po;b!==a&&(t.Fa(a,V,Xk,"imageStretch"),this.po=a,this.na(),this.j("imageStretch",b,a))}),t.g(Xk,"errorFunction",Xk.prototype.pt),t.defineProperty(Xk,{pt:"errorFunction"},function(){return this.rf},function(a){var c,b=this.rf;b!==a&&(null!==a&&t.i(a,"function",Xk,"errorFunction"),this.rf=a,this.ng&&(c=this,this.ng.onerror=function(a){null!==c.rf&&c.rf(c,a)}),this.j("errorFunction",b,a))}),Xk.prototype.rl=function(a,b){var c,f,g,h,i,j,k,l,m;if(!b.eo){if(null===this.Ks)if(null===this.ng)this.Ks=!1;else{c=document.createElement("canvas").getContext("2d"),0!==this.ng.width&&0!==this.ng.height&&c.drawImage(this.ng,0,0);try{c.getImageData(0,0,1,1),this.Ks=!1}catch(d){this.Ks=!0}}if(this.Ks)return}if(this.rm&&!this.cv&&(c=this.ng,null!==c)&&(f=c.src,null!==f&&""!==f||t.m("Element has no source attribute: "+c),f=this.Ja,g=0,h=0,i=this.lv,j=i?+c.width:c.naturalWidth,i=i?+c.height:c.naturalHeight,void 0===j&&c.videoWidth&&(j=c.videoWidth),void 0===i&&c.videoHeight&&(i=c.videoHeight),j=j||f.width,i=i||f.height,0!==j&&0!==i)){switch(this.ti.P()&&(g=this.bk.x,h=this.bk.y,j=this.bk.width,i=this.bk.height),k=j,l=i,m=this.po,m){case ah:if(this.ti.P())break;g+=Math.max((k-f.width)/2,0),h+=Math.max((l-f.height)/2,0),j=Math.min(f.width,k),i=Math.min(f.height,l);break;case Sc:k=f.width,l=f.height;break;case ch:case dh:m===ch?(m=Math.min(f.height/l,f.width/k),k*=m,l*=m):m===dh&&(m=Math.max(f.height/l,f.width/k),k*=m,l*=m,g+=(k-f.width)/2,h+=(l-f.height)/2,j*=1/(k/f.width),i*=1/(l/f.height),k=f.width,l=f.height)}try{a.drawImage(c,g,h,j,i,Math.max((f.width-k)/2,0),Math.max((f.height-l)/2,0),Math.min(f.width,k),Math.min(f.height,l))}catch(n){e&&this.IC&&t.trace(n.toString()),this.IC=!1}}},t.A(Xk,{Ja:"naturalBounds"},function(){return this.od}),Xk.prototype.Kt=function(a,b,c,d){var e=this.Ea,f=nk(this),g=this.ng,h=this.lv;(h||!this.rm&&g&&g.complete)&&(this.rm=!0),null===g&&(isFinite(a)||(a=0),isFinite(b)||(b=0)),isFinite(e.width)||f===Sc||f===fk?(isFinite(a)||(a=this.ti.P()?this.ti.width:h?+g.width:g.naturalWidth),c=0):null!==g&&!1!==this.rm&&(a=this.ti.P()?this.ti.width:h?+g.width:g.naturalWidth),isFinite(e.height)||f===Sc||f===ek?(isFinite(b)||(b=this.ti.P()?this.ti.height:h?+g.height:g.naturalHeight),d=0):null!==g&&!1!==this.rm&&(b=this.ti.P()?this.ti.height:h?+g.height:g.naturalHeight),isFinite(e.width)&&(a=e.width),isFinite(e.height)&&(b=e.height),e=this.Oe,f=this.cg,c=Math.max(c,f.width),d=Math.max(d,f.height),a=Math.min(e.width,a),b=Math.min(e.height,b),a=Math.max(c,a),b=Math.max(d,b),null===g||g.complete||(isFinite(a)||(a=0),isFinite(b)||(b=0)),ub(this.od,a,b),kk(this,0,0,a,b)},Xk.prototype.ik=function(a,b,c,d){rk(this,a,b,c,d)},aa=ua.prototype,aa.reset=function(){this.s=new Pc,this.bc=null},aa.jb=function(a){null===this.s&&t.m("StreamGeometryContext has been closed"),null===this.bc&&t.m("Need to call beginFigure first"),this.bc.qi=a},aa.moveTo=function(a,b,c){null===this.s&&t.m("StreamGeometryContext has been closed"),null===this.bc&&t.m("Need to call beginFigure first");var d=new xd(kd);d.D=a,d.F=b,c&&d.close(),this.bc.Ka.add(d)},aa.lineTo=function(a,b,c){null===this.s&&t.m("StreamGeometryContext has been closed"),null===this.bc&&t.m("Need to call beginFigure first");var d=new xd(bd);d.D=a,d.F=b,c&&d.close(),this.bc.Ka.add(d)},aa.arcTo=function(a,b,c,d,e,f,g){null===this.s&&t.m("StreamGeometryContext has been closed"),null===this.bc&&t.m("Need to call beginFigure first");var h=new xd(sd);h.zh=a,h.vi=b,h.Ia=c,h.Ua=d,h.radiusX=e,h.radiusY=f?f:e,g&&h.close(),this.bc.Ka.add(h)},K.makeGeometry=function(a,b,c){var d=a.Ea,e=d.width,d=d.height;return void 0!==b&&!isNaN(b)&&isFinite(b)&&(e=b),void 0!==c&&!isNaN(c)&&isFinite(c)&&(d=c),isFinite(e)||(e=100),isFinite(d)||(d=100),b=void 0,"None"!==a.Hn?b=K.Sm[a.Hn]:"None"!==a.Zw?b=K.Sm[a.Zw]:(c=K.pj[a.Eb],"string"==typeof c&&(c=K.pj[c]),void 0===c&&t.m("Unknown Shape.figure: "+a.Eb),b=c(a,e,d),b.to=e,b.so=d),void 0===b&&(c=K.pj.Rectangle)&&(b=c(a,e,d)),b},K.ij=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=1-i;a=a*o+c*i,b=b*o+d*i,c=c*o+e*i,d=d*o+f*i,e=e*o+g*i,f=f*o+h*i,h=a*o+c*i,g=b*o+d*i,c=c*o+e*i,d=d*o+f*i,j.x=a,j.y=b,k.x=h,k.y=g,l.x=h*o+c*i,l.y=g*o+d*i,m.x=c,m.y=d,n.x=e,n.y=f},K.kp=function(a){var b,c,d;for(a=K.an(a),b=t.Hb(),b[0]=a[0],c=1,d=1;c<a.length;c+=2,d+=3)b[d]=a[c],b[d+1]=a[c],b[d+2]=a[c+1];return t.Ca(a),b},K.an=function(a){var f,g,h,i,j,b=K.pl(a),c=t.Hb(),d=Math.floor(b.length/2),e=b.length-1;for(a=0===a%2?2:1,f=0;e>f;f++)g=b[f],h=b[f+1],i=b[(d+f-1)%e],j=b[(d+f+a)%e],c[2*f]=g,c[2*f+1]=K.wl(g.x,g.y,i.x,i.y,h.x,h.y,j.x,j.y,new E);return c[c.length]=c[0],t.Ca(b),c},K.wl=function(a,b,c,d,e,f,g,h,i){return c=a-c,g=e-g,0===c||0===g?0===c?(g=(f-h)/g,h=a,e=g*h+(f-g*e)):(d=(b-d)/c,h=e,e=d*h+(b-d*a)):(d=(b-d)/c,g=(f-h)/g,a=b-d*a,h=(f-g*e-a)/(d-g),e=d*h+a),i.p(h,e),i},K.pl=function(a){for(var b=t.Hb(),c=1.5*Math.PI,d=0,e=0;a>e;e++)d=2*Math.PI/a*e+c,b[e]=new E(.5+.5*Math.cos(d),.5+.5*Math.sin(d));return b.push(b[0]),b},K.UB=new L(.156,.156).Oa(),K.VB=new L(.844,.844).Oa(),K.pj={None:"Rectangle",Rectangle:function(a,b,c){return a=new Pc,a.type=Uc,a.sa=0,a.ta=0,a.D=b,a.F=c,a},Square:function(a,b,c){return a=new Pc,a.Ac=ch,a.type=Uc,a.sa=0,a.ta=0,a.D=b,a.F=c,a},Ellipse:function(a,b,c){return a=new Pc,a.type=$c,a.sa=0,a.ta=0,a.D=b,a.F=c,a.G=K.UB,a.H=K.VB,a},Circle:function(a,b,c){return a=new Pc,a.Ac=ch,a.type=$c,a.sa=0,a.ta=0,a.D=b,a.F=c,a.G=K.UB,a.H=K.VB,a},Connector:"Ellipse",TriangleRight:function(a,b,c){a=new Pc;var d=new Rc,e=new xd;return e.D=b,e.F=.5*c,d.Ka.add(e),b=new xd,b.D=0,b.F=c,d.Ka.add(b.close()),a.Fb.add(d),a.G=new L(0,.25),a.H=new L(.5,.75),a},TriangleDown:function(a,b,c){a=new Pc;var d=new Rc,e=new xd;return e.D=b,e.F=0,d.Ka.add(e),e=new xd,e.D=.5*b,e.F=c,d.Ka.add(e.close()),a.Fb.add(d),a.G=new L(.25,0),a.H=new L(.75,.5),a},TriangleLeft:function(a,b,c){var d,e;return a=new Pc,d=new Rc,d.sa=b,d.ta=c,e=new xd,e.D=0,e.F=.5*c,d.Ka.add(e),c=new xd,c.D=b,c.F=0,d.Ka.add(c.close()),a.Fb.add(d),a.G=new L(.5,.25),a.H=new L(1,.75),a},TriangleUp:function(a,b,c){var d,e;return a=new Pc,d=new Rc,d.sa=b,d.ta=c,e=new xd,e.D=0,e.F=c,d.Ka.add(e),c=new xd,c.D=.5*b,c.F=0,d.Ka.add(c.close()),a.Fb.add(d),a.G=new L(.25,.5),a.H=new L(.75,1),a},Line1:function(a,b,c){return a=new Pc,a.type=Tc,a.sa=0,a.ta=0,a.D=b,a.F=c,a},Line2:function(a,b,c){return a=new Pc,a.type=Tc,a.sa=b,a.ta=0,a.D=0,a.F=c,a},MinusLine:"LineH",LineH:function(a,b,c){return a=new Pc,a.type=Tc,a.sa=0,a.ta=c/2,a.D=b,a.F=c/2,a},LineV:function(a,b,c){return a=new Pc,a.type=Tc,a.sa=b/2,a.ta=0,a.D=b/2,a.F=c,a},Curve1:function(a,b,c){var d=K.za;return a=t.u(),P(a,0,0,!1),Q(a,d*b,0,1*b,(1-d)*c,b,c),b=a.s,t.v(a),b},Curve2:function(a,b,c){var d=K.za;return a=t.u(),P(a,0,0,!1),Q(a,0,d*c,(1-d)*b,c,b,c),b=a.s,t.v(a),b},Curve3:function(a,b,c){var d=K.za;return a=t.u(),P(a,1*b,0,!1),Q(a,1*b,d*c,d*b,1*c,0,1*c),b=a.s,t.v(a),b},Curve4:function(a,b,c){var d=K.za;return a=t.u(),P(a,1*b,0,!1),Q(a,(1-d)*b,0,0,(1-d)*c,0,1*c),b=a.s,t.v(a),b},Alternative:"Triangle",Merge:"Triangle",Triangle:function(a,b,c){return a=t.u(),P(a,.5*b,0*c,!0),a.lineTo(0*b,1*c),a.lineTo(1*b,1*c,!0),b=a.s,b.G=new L(.25,.5),b.H=new L(.75,1),t.v(a),b},Decision:"Diamond",Diamond:function(a,b,c){return a=t.u(),P(a,.5*b,0,!0),a.lineTo(0,.5*c),a.lineTo(.5*b,1*c),a.lineTo(1*b,.5*c,!0),b=a.s,b.G=new L(.25,.25),b.H=new L(.75,.75),t.v(a),b},Pentagon:function(a,b,c){var e,d=K.pl(5);for(a=t.u(),P(a,d[0].x*b,d[0].y*c,!0),e=1;5>e;e++)a.lineTo(d[e].x*b,d[e].y*c);return t.Ca(d),S(a),b=a.s,b.G=new L(.2,.22),b.H=new L(.8,.9),t.v(a),b},DataTransmission:"Hexagon",Hexagon:function(a,b,c){var e,d=K.pl(6);for(a=t.u(),P(a,d[0].x*b,d[0].y*c,!0),e=1;6>e;e++)a.lineTo(d[e].x*b,d[e].y*c);return t.Ca(d),S(a),b=a.s,b.G=new L(.07,.25),b.H=new L(.93,.75),t.v(a),b},Heptagon:function(a,b,c){var e,d=K.pl(7);for(a=t.u(),P(a,d[0].x*b,d[0].y*c,!0),e=1;7>e;e++)a.lineTo(d[e].x*b,d[e].y*c);return t.Ca(d),S(a),b=a.s,b.G=new L(.2,.15),b.H=new L(.8,.85),t.v(a),b},Octagon:function(a,b,c){var e,d=K.pl(8);for(a=t.u(),P(a,d[0].x*b,d[0].y*c,!0),e=1;8>e;e++)a.lineTo(d[e].x*b,d[e].y*c);return t.Ca(d),S(a),b=a.s,b.G=new L(.15,.15),b.H=new L(.85,.85),t.v(a),b},Nonagon:function(a,b,c){var e,d=K.pl(9);for(a=t.u(),P(a,d[0].x*b,d[0].y*c,!0),e=1;9>e;e++)a.lineTo(d[e].x*b,d[e].y*c);return t.Ca(d),S(a),b=a.s,b.G=new L(.17,.13),b.H=new L(.82,.82),t.v(a),b},Decagon:function(a,b,c){var e,d=K.pl(10);for(a=t.u(),P(a,d[0].x*b,d[0].y*c,!0),e=1;10>e;e++)a.lineTo(d[e].x*b,d[e].y*c);return t.Ca(d),S(a),b=a.s,b.G=new L(.16,.16),b.H=new L(.84,.84),t.v(a),b},Dodecagon:function(a,b,c){var e,d=K.pl(12);for(a=t.u(),P(a,d[0].x*b,d[0].y*c,!0),e=1;12>e;e++)a.lineTo(d[e].x*b,d[e].y*c);return t.Ca(d),S(a),b=a.s,b.G=new L(.16,.16),b.H=new L(.84,.84),t.v(a),b},FivePointedStar:function(a,b,c){var e,d=K.an(5);for(a=t.u(),P(a,d[0].x*b,d[0].y*c,!0),e=1;10>e;e++)a.lineTo(d[e].x*b,d[e].y*c);return t.Ca(d),S(a),b=a.s,b.G=new L(.312,.383),b.H=new L(.693,.765),t.v(a),b},SixPointedStar:function(a,b,c){var e,d=K.an(6);for(a=t.u(),P(a,d[0].x*b,d[0].y*c,!0),e=1;12>e;e++)a.lineTo(d[e].x*b,d[e].y*c);return t.Ca(d),S(a),b=a.s,b.G=new L(.17,.251),b.H=new L(.833,.755),t.v(a),b},SevenPointedStar:function(a,b,c){var e,d=K.an(7);for(a=t.u(),P(a,d[0].x*b,d[0].y*c,!0),e=1;14>e;e++)a.lineTo(d[e].x*b,d[e].y*c);return t.Ca(d),S(a),b=a.s,b.G=new L(.363,.361),b.H=new L(.641,.709),t.v(a),b},EightPointedStar:function(a,b,c){var e,d=K.an(8);for(a=t.u(),P(a,d[0].x*b,d[0].y*c,!0),e=1;16>e;e++)a.lineTo(d[e].x*b,d[e].y*c);return t.Ca(d),S(a),b=a.s,b.G=new L(.252,.255),b.H=new L(.75,.75),t.v(a),b},NinePointedStar:function(a,b,c){var e,d=K.an(9);for(a=t.u(),P(a,d[0].x*b,d[0].y*c,!0),e=1;18>e;e++)a.lineTo(d[e].x*b,d[e].y*c);return t.Ca(d),S(a),b=a.s,b.G=new L(.355,.361),b.H=new L(.645,.651),t.v(a),b},TenPointedStar:function(a,b,c){var e,d=K.an(10);for(a=t.u(),P(a,d[0].x*b,d[0].y*c,!0),e=1;20>e;e++)a.lineTo(d[e].x*b,d[e].y*c);return t.Ca(d),S(a),b=a.s,b.G=new L(.281,.261),b.H=new L(.723,.748),t.v(a),b},FivePointedBurst:function(a,b,c){var e,d=K.kp(5);for(a=t.u(),P(a,d[0].x*b,d[0].y*c,!0),e=1;e<d.length;e+=3)Q(a,d[e].x*b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);return t.Ca(d),S(a),b=a.s,b.G=new L(.312,.383),b.H=new L(.693,.765),t.v(a),b},SixPointedBurst:function(a,b,c){var e,d=K.kp(6);for(a=t.u(),P(a,d[0].x*b,d[0].y*c,!0),e=1;e<d.length;e+=3)Q(a,d[e].x*b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);return t.Ca(d),S(a),b=a.s,b.G=new L(.17,.251),b.H=new L(.833,.755),t.v(a),b},SevenPointedBurst:function(a,b,c){var e,d=K.kp(7);for(a=t.u(),P(a,d[0].x*b,d[0].y*c,!0),e=1;e<d.length;e+=3)Q(a,d[e].x*b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);return t.Ca(d),S(a),b=a.s,b.G=new L(.363,.361),b.H=new L(.641,.709),t.v(a),b},EightPointedBurst:function(a,b,c){var e,d=K.kp(8);for(a=t.u(),P(a,d[0].x*b,d[0].y*c,!0),e=1;e<d.length;e+=3)Q(a,d[e].x*b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);return t.Ca(d),S(a),b=a.s,b.G=new L(.252,.255),b.H=new L(.75,.75),t.v(a),b},NinePointedBurst:function(a,b,c){var e,d=K.kp(9);for(a=t.u(),P(a,d[0].x*b,d[0].y*c,!0),e=1;e<d.length;e+=3)Q(a,d[e].x*b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);return t.Ca(d),S(a),b=a.s,b.G=new L(.355,.361),b.H=new L(.645,.651),t.v(a),b
},TenPointedBurst:function(a,b,c){var e,d=K.kp(10);for(a=t.u(),P(a,d[0].x*b,d[0].y*c,!0),e=1;e<d.length;e+=3)Q(a,d[e].x*b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);return t.Ca(d),S(a),b=a.s,b.G=new L(.281,.261),b.H=new L(.723,.748),t.v(a),b},Cloud:function(a,b,c){return a=t.u(),P(a,.08034461*b,.1944299*c,!0),Q(a,-.09239631*b,.07836421*c,.1406031*b,-.0542823*c,.2008615*b,.05349299*c),Q(a,.2450511*b,-.00697547*c,.3776197*b,-.01112067*c,.4338609*b,.074219*c),Q(a,.4539471*b,0,.6066018*b,-.02526587*c,.6558228*b,.07004196*c),Q(a,.6914277*b,-.01904177*c,.8921095*b,-.01220843*c,.8921095*b,.08370865*c),Q(a,1.036446*b,.04105738*c,1.020377*b,.3022052*c,.9147671*b,.3194596*c),Q(a,1.04448*b,.360238*c,.992256*b,.5219009*c,.9082935*b,.562044*c),Q(a,1.032337*b,.5771781*c,1.018411*b,.8120651*c,.9212406*b,.8217117*c),Q(a,1.028411*b,.9571472*c,.8556702*b,1.052487*c,.7592566*b,.9156953*c),Q(a,.7431877*b,1.009325*c,.5624123*b,1.021761*c,.5101666*b,.9310455*c),Q(a,.4820677*b,1.031761*c,.3030112*b,1.002796*c,.2609328*b,.9344623*c),Q(a,.2329994*b,1.01518*c,.03213784*b,1.01518*c,.08034461*b,.870098*c),Q(a,-.02812061*b,.9032597*c,-.01205169*b,.6835638*c,.06829292*b,.6545475*c),Q(a,-.01812061*b,.6089503*c,-.00606892*b,.4555777*c,.06427569*b,.4265613*c),Q(a,-.01606892*b,.3892545*c,-.01205169*b,.1944299*c,.08034461*b,.1944299*c),S(a),b=a.s,b.G=new L(.1,.1),b.H=new L(.9,.9),t.v(a),b},Gate:"Crescent",Crescent:function(a,b,c){return a=t.u(),P(a,0,0,!0),Q(a,1*b,0,1*b,1*c,0,1*c),Q(a,.5*b,.75*c,.5*b,.25*c,0,0),S(a),b=a.s,b.G=new L(.511,.19),b.H=new L(.776,.76),t.v(a),b},FramedRectangle:function(a,b,c){var d=t.u(),e=a?a.Lc:0;return a=a?a.Vt:0,0===e&&(e=.1),0===a&&(a=.1),P(d,0,0,!0),d.lineTo(1*b,0),d.lineTo(1*b,1*c),d.lineTo(0,1*c,!0),P(d,e*b,a*c,!1,!0),d.lineTo(e*b,(1-a)*c),d.lineTo((1-e)*b,(1-a)*c),d.lineTo((1-e)*b,a*c,!0),b=d.s,b.G=new L(e,a),b.H=new L(1-e,1-a),t.v(d),b},Delay:"HalfEllipse",HalfEllipse:function(a,b,c){var d=K.za;return a=t.u(),P(a,0,0,!0),Q(a,d*b,0,1*b,(.5-d/2)*c,1*b,.5*c),Q(a,1*b,(.5+d/2)*c,d*b,1*c,0,1*c),S(a),b=a.s,b.G=new L(0,.2),b.H=new L(.75,.8),t.v(a),b},Heart:function(a,b,c){return a=t.u(),P(a,.5*b,1*c,!0),Q(a,.1*b,.8*c,0,.5*c,0*b,.3*c),Q(a,0*b,0,.45*b,0,.5*b,.3*c),Q(a,.55*b,0,1*b,0,1*b,.3*c),Q(a,b,.5*c,.9*b,.8*c,.5*b,1*c),S(a),b=a.s,b.G=new L(.15,.29),b.H=new L(.86,.68),t.v(a),b},Spade:function(a,b,c){return a=t.u(),P(a,.5*b,0,!0),a.lineTo(.51*b,.01*c),Q(a,.6*b,.2*c,b,.25*c,b,.5*c),Q(a,b,.8*c,.6*b,.8*c,.55*b,.7*c),Q(a,.5*b,.75*c,.55*b,.95*c,.75*b,c),a.lineTo(.25*b,c),Q(a,.45*b,.95*c,.5*b,.75*c,.45*b,.7*c),Q(a,.4*b,.8*c,0,.8*c,0,.5*c),Q(a,0,.25*c,.4*b,.2*c,.49*b,.01*c),S(a),b=a.s,b.G=new L(.19,.26),b.H=new L(.8,.68),t.v(a),b},Club:function(a,b,c){a=t.u(),P(a,.4*b,.6*c,!0),Q(a,.5*b,.75*c,.45*b,.95*c,.15*b,1*c),a.lineTo(.85*b,c),Q(a,.55*b,.95*c,.5*b,.75*c,.6*b,.6*c);var d=.2,e=.3,f=0,g=4*(Math.SQRT2-1)/3*d;return Q(a,(.5-d+e)*b,(.5+g+f)*c,(.5-g+e)*b,(.5+d+f)*c,(.5+e)*b,(.5+d+f)*c),Q(a,(.5+g+e)*b,(.5+d+f)*c,(.5+d+e)*b,(.5+g+f)*c,(.5+d+e)*b,(.5+f)*c),Q(a,(.5+d+e)*b,(.5-g+f)*c,(.5+g+e)*b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c),Q(a,(.5-g+e)*b,(.5-d+f)*c,(.5-d+e+.05)*b,(.5-g+f-.02)*c,.65*b,.36771243*c),d=.2,e=0,f=-.3,g=4*(Math.SQRT2-1)/3*d,Q(a,(.5+g+e)*b,(.5+d+f)*c,(.5+d+e)*b,(.5+g+f)*c,(.5+d+e)*b,(.5+f)*c),Q(a,(.5+d+e)*b,(.5-g+f)*c,(.5+g+e)*b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c),Q(a,(.5-g+e)*b,(.5-d+f)*c,(.5-d+e)*b,(.5-g+f)*c,(.5-d+e)*b,(.5+f)*c),Q(a,(.5-d+e)*b,(.5+g+f)*c,(.5-g+e)*b,(.5+d+f)*c,.35*b,.36771243*c),d=.2,e=-.3,f=0,g=4*(Math.SQRT2-1)/3*d,Q(a,(.5+d+e-.05)*b,(.5-g+f-.02)*c,(.5+g+e)*b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c),Q(a,(.5-g+e)*b,(.5-d+f)*c,(.5-d+e)*b,(.5-g+f)*c,(.5-d+e)*b,(.5+f)*c),Q(a,(.5-d+e)*b,(.5+g+f)*c,(.5-g+e)*b,(.5+d+f)*c,(.5+e)*b,(.5+d+f)*c),Q(a,(.5+g+e)*b,(.5+d+f)*c,(.5+d+e)*b,(.5+g+f)*c,.4*b,.6*c),S(a),b=a.s,b.G=new L(.06,.39),b.H=new L(.93,.58),t.v(a),b},Ring:function(a,b,c){a=t.u();var d=.5*(4*(Math.SQRT2-1)/3);return P(a,b,.5*c,!0),Q(a,b,(.5-d)*c,(.5+d)*b,0,.5*b,0),Q(a,(.5-d)*b,0,0,(.5-d)*c,0,.5*c),Q(a,0,(.5+d)*c,(.5-d)*b,c,.5*b,c),Q(a,(.5+d)*b,c,b,(.5+d)*c,b,.5*c),d=.4*(4*(Math.SQRT2-1)/3),P(a,.5*b,.1*c,!0,!0),Q(a,(.5+d)*b,.1*c,.9*b,(.5-d)*c,.9*b,.5*c),Q(a,.9*b,(.5+d)*c,(.5+d)*b,.9*c,.5*b,.9*c),Q(a,(.5-d)*b,.9*c,.1*b,(.5+d)*c,.1*b,.5*c),Q(a,.1*b,(.5-d)*c,(.5-d)*b,.1*c,.5*b,.1*c),b=a.s,b.G=new L(.146,.146),b.H=new L(.853,.853),b.Ac=ch,t.v(a),b},YinYang:function(a,b,c){var e,d=.5;return a=t.u(),d=.5,P(a,.5*b,0,!0),a.arcTo(270,180,.5*b,.5*b,.5*b),Q(a,1*b,d*c,0,d*c,d*b,0,!0),d=.1,e=.25,P(a,(.5+d)*b,e*c,!0,!0),a.arcTo(0,-360,.5*b,c*e,d*b),S(a),P(a,.5*b,0,!1),a.arcTo(270,-180,.5*b,.5*b,.5*b),a.jb(!1),e=.75,P(a,(.5+d)*b,e*c,!0),a.arcTo(0,360,.5*b,c*e,d*b),S(a),b=a.s,b.Ac=ch,t.v(a),b},Peace:function(a,b,c){var d,e,f,g;return a=t.u(),d=.5*(4*(Math.SQRT2-1)/3),P(a,b,.5*c,!0),Q(a,b,(.5-d)*c,(.5+d)*b,0,.5*b,0),Q(a,(.5-d)*b,0,0,(.5-d)*c,0,.5*c),Q(a,0,(.5+d)*c,(.5-d)*b,c,.5*b,c),Q(a,(.5+d)*b,c,b,(.5+d)*c,b,.5*c),d=.4*(4*(Math.SQRT2-1)/3),P(a,.5*b,.1*c,!0,!0),Q(a,(.5+d)*b,.1*c,.9*b,(.5-d)*c,.9*b,.5*c),Q(a,.9*b,(.5+d)*c,(.5+d)*b,.9*c,.5*b,.9*c),Q(a,(.5-d)*b,.9*c,.1*b,(.5+d)*c,.1*b,.5*c),Q(a,.1*b,(.5-d)*c,(.5-d)*b,.1*c,.5*b,.1*c),d=.07,e=0,f=.11*-.707,g=4*(Math.SQRT2-1)/3*d,P(a,(.5+d+e)*b,(.5+f)*c,!0),Q(a,(.5+d+e)*b,(.5-g+f)*c,(.5+g+e)*b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c),Q(a,(.5-g+e)*b,(.5-d+f)*c,(.5-d+e)*b,(.5-g+f)*c,(.5-d+e)*b,(.5+f)*c),Q(a,(.5-d+e)*b,(.5+g+f)*c,(.5-g+e)*b,(.5+d+f)*c,(.5+e)*b,(.5+d+f)*c),Q(a,(.5+g+e)*b,(.5+d+f)*c,(.5+d+e)*b,(.5+g+f)*c,(.5+d+e)*b,(.5+f)*c),d=.07,e=.11*-.707,f=.707*.11,g=4*(Math.SQRT2-1)/3*d,P(a,(.5+d+e)*b,(.5+f)*c,!0),Q(a,(.5+d+e)*b,(.5-g+f)*c,(.5+g+e)*b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c),Q(a,(.5-g+e)*b,(.5-d+f)*c,(.5-d+e)*b,(.5-g+f)*c,(.5-d+e)*b,(.5+f)*c),Q(a,(.5-d+e)*b,(.5+g+f)*c,(.5-g+e)*b,(.5+d+f)*c,(.5+e)*b,(.5+d+f)*c),Q(a,(.5+g+e)*b,(.5+d+f)*c,(.5+d+e)*b,(.5+g+f)*c,(.5+d+e)*b,(.5+f)*c),d=.07,e=.707*.11,f=.707*.11,g=4*(Math.SQRT2-1)/3*d,P(a,(.5+d+e)*b,(.5+f)*c,!0),Q(a,(.5+d+e)*b,(.5-g+f)*c,(.5+g+e)*b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c),Q(a,(.5-g+e)*b,(.5-d+f)*c,(.5-d+e)*b,(.5-g+f)*c,(.5-d+e)*b,(.5+f)*c),Q(a,(.5-d+e)*b,(.5+g+f)*c,(.5-g+e)*b,(.5+d+f)*c,(.5+e)*b,(.5+d+f)*c),Q(a,(.5+g+e)*b,(.5+d+f)*c,(.5+d+e)*b,(.5+g+f)*c,(.5+d+e)*b,(.5+f)*c),b=a.s,b.G=new L(.146,.146),b.H=new L(.853,.853),b.Ac=ch,t.v(a),b},NotAllowed:function(a,b,c){var g,h,i,j,k,l,m,n,o,p,q,r,d=K.za,e=.5*d,f=.5;return a=t.u(),P(a,.5*b,(.5-f)*c,!0),Q(a,(.5-e)*b,(.5-f)*c,(.5-f)*b,(.5-e)*c,(.5-f)*b,.5*c),Q(a,(.5-f)*b,(.5+e)*c,(.5-e)*b,(.5+f)*c,.5*b,(.5+f)*c),Q(a,(.5+e)*b,(.5+f)*c,(.5+f)*b,(.5+e)*c,(.5+f)*b,.5*c),Q(a,(.5+f)*b,(.5-e)*c,(.5+e)*b,(.5-f)*c,.5*b,(.5-f)*c),f=.4,e=.4*d,d=t.N(),g=t.N(),h=t.N(),i=t.N(),K.ij(.5,.5-f,.5+e,.5-f,.5+f,.5-e,.5+f,.5,.42,d,g,h,i,i),j=t.N(),k=t.N(),l=t.N(),K.ij(.5,.5-f,.5+e,.5-f,.5+f,.5-e,.5+f,.5,.58,i,i,l,j,k),m=t.N(),n=t.N(),o=t.N(),K.ij(.5,.5+f,.5-e,.5+f,.5-f,.5+e,.5-f,.5,.42,m,n,o,i,i),p=t.N(),q=t.N(),r=t.N(),K.ij(.5,.5+f,.5-e,.5+f,.5-f,.5+e,.5-f,.5,.58,i,i,r,p,q),P(a,r.x*b,r.y*c,!0,!0),Q(a,p.x*b,p.y*c,q.x*b,q.y*c,(.5-f)*b,.5*c),Q(a,(.5-f)*b,(.5-e)*c,(.5-e)*b,(.5-f)*c,.5*b,(.5-f)*c),Q(a,d.x*b,d.y*c,g.x*b,g.y*c,h.x*b,h.y*c),a.lineTo(r.x*b,r.y*c),S(a),P(a,o.x*b,o.y*c,!0,!0),a.lineTo(l.x*b,l.y*c),Q(a,j.x*b,j.y*c,k.x*b,k.y*c,(.5+f)*b,.5*c),Q(a,(.5+f)*b,(.5+e)*c,(.5+e)*b,(.5+f)*c,.5*b,(.5+f)*c),Q(a,m.x*b,m.y*c,n.x*b,n.y*c,o.x*b,o.y*c),S(a),t.B(d),t.B(g),t.B(h),t.B(i),t.B(j),t.B(k),t.B(l),t.B(m),t.B(n),t.B(o),t.B(p),t.B(q),t.B(r),b=a.s,t.v(a),b.Ac=ch,b},Fragile:function(a,b,c){return a=t.u(),P(a,0,0,!0),a.lineTo(.25*b,0),a.lineTo(.2*b,.15*c),a.lineTo(.3*b,.25*c),a.lineTo(.29*b,.33*c),a.lineTo(.35*b,.25*c),a.lineTo(.3*b,.15*c),a.lineTo(.4*b,0),a.lineTo(1*b,0),Q(a,1*b,.25*c,.75*b,.5*c,.55*b,.5*c),a.lineTo(.55*b,.9*c),a.lineTo(.7*b,.9*c),a.lineTo(.7*b,1*c),a.lineTo(.3*b,1*c),a.lineTo(.3*b,.9*c),a.lineTo(.45*b,.9*c),a.lineTo(.45*b,.5*c),Q(a,.25*b,.5*c,0,.25*c,0,0),S(a),b=a.s,b.G=new L(.25,0),b.H=new L(.75,.4),t.v(a),b},HourGlass:function(a,b,c){return a=t.u(),P(a,.65*b,.5*c,!0),a.lineTo(1*b,1*c),a.lineTo(0,1*c),a.lineTo(.35*b,.5*c),a.lineTo(0,0),a.lineTo(1*b,0),S(a),b=a.s,t.v(a),b},Lightning:function(a,b,c){return a=t.u(),P(a,0*b,.55*c,!0),a.lineTo(.75*b,0),a.lineTo(.25*b,.45*c),a.lineTo(.9*b,.48*c),a.lineTo(.4*b,1*c),a.lineTo(.65*b,.55*c),S(a),b=a.s,t.v(a),b},Parallelogram1:function(a,b,c){a=a?a.Lc:0,0===a&&(a=.1);var d=t.u();return P(d,a*b,0,!0),d.lineTo(1*b,0),d.lineTo((1-a)*b,1*c),d.lineTo(0,1*c),S(d),b=d.s,b.G=new L(a,0),b.H=new L(1-a,1),t.v(d),b},Input:"Output",Output:function(a,b,c){return a=t.u(),P(a,0,1*c,!0),a.lineTo(.1*b,0),a.lineTo(1*b,0),a.lineTo(.9*b,1*c),S(a),b=a.s,b.G=new L(.1,0),b.H=new L(.9,1),t.v(a),b},Parallelogram2:function(a,b,c){a=a?a.Lc:0,0===a&&(a=.25);var d=t.u();return P(d,a*b,0,!0),d.lineTo(1*b,0),d.lineTo((1-a)*b,1*c),d.lineTo(0,1*c),S(d),b=d.s,b.G=new L(a,0),b.H=new L(1-a,1),t.v(d),b},ThickCross:function(a,b,c){a=a?a.Lc:0,0===a&&(a=.25);var d=t.u();return P(d,(.5-a/2)*b,0,!0),d.lineTo((.5+a/2)*b,0),d.lineTo((.5+a/2)*b,(.5-a/2)*c),d.lineTo(1*b,(.5-a/2)*c),d.lineTo(1*b,(.5+a/2)*c),d.lineTo((.5+a/2)*b,(.5+a/2)*c),d.lineTo((.5+a/2)*b,1*c),d.lineTo((.5-a/2)*b,1*c),d.lineTo((.5-a/2)*b,(.5+a/2)*c),d.lineTo(0,(.5+a/2)*c),d.lineTo(0,(.5-a/2)*c),d.lineTo((.5-a/2)*b,(.5-a/2)*c),S(d),b=d.s,b.G=new L(.5-a/2,.5-a/2),b.H=new L(.5+a/2,.5+a/2),t.v(d),b},ThickX:function(a,b,c){a=.25/Math.SQRT2;var d=t.u();return P(d,.3*b,0,!0),d.lineTo(.5*b,.2*c),d.lineTo(.7*b,0),d.lineTo(1*b,.3*c),d.lineTo(.8*b,.5*c),d.lineTo(1*b,.7*c),d.lineTo(.7*b,1*c),d.lineTo(.5*b,.8*c),d.lineTo(.3*b,1*c),d.lineTo(0,.7*c),d.lineTo(.2*b,.5*c),d.lineTo(0,.3*c),S(d),b=d.s,b.G=new L(.5-a,.5-a),b.H=new L(.5+a,.5+a),t.v(d),b},ThinCross:function(a,b,c){var d=a?a.Lc:0;return 0===d&&(d=.1),a=t.u(),P(a,(.5-d/2)*b,0,!0),a.lineTo((.5+d/2)*b,0),a.lineTo((.5+d/2)*b,(.5-d/2)*c),a.lineTo(1*b,(.5-d/2)*c),a.lineTo(1*b,(.5+d/2)*c),a.lineTo((.5+d/2)*b,(.5+d/2)*c),a.lineTo((.5+d/2)*b,1*c),a.lineTo((.5-d/2)*b,1*c),a.lineTo((.5-d/2)*b,(.5+d/2)*c),a.lineTo(0,(.5+d/2)*c),a.lineTo(0,(.5-d/2)*c),a.lineTo((.5-d/2)*b,(.5-d/2)*c),S(a),b=a.s,t.v(a),b},ThinX:function(a,b,c){return a=t.u(),P(a,.1*b,0,!0),a.lineTo(.5*b,.4*c),a.lineTo(.9*b,0),a.lineTo(1*b,.1*c),a.lineTo(.6*b,.5*c),a.lineTo(1*b,.9*c),a.lineTo(.9*b,1*c),a.lineTo(.5*b,.6*c),a.lineTo(.1*b,1*c),a.lineTo(0,.9*c),a.lineTo(.4*b,.5*c),a.lineTo(0,.1*c),S(a),a.s},RightTriangle:function(a,b,c){return a=t.u(),P(a,0,0,!0),a.lineTo(1*b,1*c),a.lineTo(0,1*c),S(a),b=a.s,b.G=new L(0,.5),b.H=new L(.5,1),t.v(a),b},RoundedIBeam:function(a,b,c){return a=t.u(),P(a,0,0,!0),a.lineTo(1*b,0),Q(a,.5*b,.25*c,.5*b,.75*c,1*b,1*c),a.lineTo(0,1*c),Q(a,.5*b,.75*c,.5*b,.25*c,0,0),S(a),b=a.s,t.v(a),b},RoundedRectangle:function(a,b,c){var e,d=a?a.Lc:0;return 0>=d&&(d=5),d=Math.min(d,b/3),d=Math.min(d,c/3),a=d*K.za,e=t.u(),P(e,d,0,!0),e.lineTo(b-d,0),Q(e,b-a,0,b,a,b,d),e.lineTo(b,c-d),Q(e,b,c-a,b-a,c,b-d,c),e.lineTo(d,c),Q(e,a,c,0,c-a,0,c-d),e.lineTo(0,d),Q(e,0,a,a,0,d,0),S(e),b=e.s,a>1?(b.G=new L(0,0,a,a),b.H=new L(1,1,-a,-a)):(b.G=Vb,b.H=bc),t.v(e),b},Border:function(a,b,c){var d=a?a.Lc:0;return 0>=d&&(d=5),d=Math.min(d,b/3),d=Math.min(d,c/3),a=t.u(),P(a,d,0,!0),a.lineTo(b-d,0),Q(a,b-0,0,b,0,b,d),a.lineTo(b,c-d),Q(a,b,c-0,b-0,c,b-d,c),a.lineTo(d,c),Q(a,0,c,0,c-0,0,c-d),a.lineTo(0,d),Q(a,0,0,0,0,d,0),S(a),b=a.s,b.G=Vb,b.H=bc,t.v(a),b},SquareIBeam:function(a,b,c){var d=a?a.Lc:0;return 0===d&&(d=.2),a=t.u(),P(a,0,0,!0),a.lineTo(1*b,0),a.lineTo(1*b,d*c),a.lineTo((.5+d/2)*b,d*c),a.lineTo((.5+d/2)*b,(1-d)*c),a.lineTo(1*b,(1-d)*c),a.lineTo(1*b,1*c),a.lineTo(0,1*c),a.lineTo(0,(1-d)*c),a.lineTo((.5-d/2)*b,(1-d)*c),a.lineTo((.5-d/2)*b,d*c),a.lineTo(0,d*c),S(a),b=a.s,t.v(a),b},Trapezoid:function(a,b,c){a=a?a.Lc:0,0===a&&(a=.2);var d=t.u();return P(d,a*b,0,!0),d.lineTo((1-a)*b,0),d.lineTo(1*b,1*c),d.lineTo(0,1*c),S(d),b=d.s,b.G=new L(a,0),b.H=new L(1-a,1),t.v(d),b},ManualLoop:"ManualOperation",ManualOperation:function(a,b,c){var d=a?a.Lc:0;return a=t.u(),P(a,d,0,!0),a.lineTo(0,0),a.lineTo(1*b,0),a.lineTo(.9*b,1*c),a.lineTo(.1*b,1*c),S(a),b=a.s,b.G=new L(.1,0),b.H=new L(.9,1),t.v(a),b},GenderMale:function(a,b,c){var d,e,f,g,h,i,j,k,l;return a=t.u(),d=K.za,e=.4*d,f=.4,g=t.N(),h=t.N(),i=t.N(),j=t.N(),P(a,(.5-f)*b,.5*c,!0),Q(a,(.5-f)*b,(.5-e)*c,(.5-e)*b,(.5-f)*c,.5*b,(.5-f)*c),K.ij(.5,.5-f,.5+e,.5-f,.5+f,.5-e,.5+f,.5,.44,i,j,h,g,g),Q(a,i.x*b,i.y*c,j.x*b,j.y*c,h.x*b,h.y*c),k=t.qc(h.x,h.y),K.ij(.5,.5-f,.5+e,.5-f,.5+f,.5-e,.5+f,.5,.56,g,g,h,i,j),l=t.qc(h.x,h.y),a.lineTo((.1*k.x+.855)*b,.1*k.y*c),a.lineTo(.85*b,.1*k.y*c),a.lineTo(.85*b,0),a.lineTo(1*b,0),a.lineTo(1*b,.15*c),a.lineTo((.1*l.x+.9)*b,.15*c),a.lineTo((.1*l.x+.9)*b,(.1*l.y+.05*.9)*c),a.lineTo(l.x*b,l.y*c),Q(a,i.x*b,i.y*c,j.x*b,j.y*c,(.5+f)*b,.5*c),Q(a,(.5+f)*b,(.5+e)*c,(.5+e)*b,(.5+f)*c,.5*b,(.5+f)*c),Q(a,(.5-e)*b,(.5+f)*c,(.5-f)*b,(.5+e)*c,(.5-f)*b,.5*c),f=.35,e=.35*d,P(a,.5*b,(.5-f)*c,!0,!0),Q(a,(.5-e)*b,(.5-f)*c,(.5-f)*b,(.5-e)*c,(.5-f)*b,.5*c),Q(a,(.5-f)*b,(.5+e)*c,(.5-e)*b,(.5+f)*c,.5*b,(.5+f)*c),Q(a,(.5+e)*b,(.5+f)*c,(.5+f)*b,(.5+e)*c,(.5+f)*b,.5*c),Q(a,(.5+f)*b,(.5-e)*c,(.5+e)*b,(.5-f)*c,.5*b,(.5-f)*c),P(a,(.5-f)*b,.5*c,!0),t.B(g),t.B(h),t.B(i),t.B(j),t.B(k),t.B(l),b=a.s,b.G=new L(.202,.257),b.H=new L(.692,.839),b.Ac=ch,t.v(a),b},GenderFemale:function(a,b,c){a=t.u();var d=.375,e=0,f=-.125,g=4*(Math.SQRT2-1)/3*d;return P(a,(.525+e)*b,(.5+d+f)*c,!0),Q(a,(.5+g+e)*b,(.5+d+f)*c,(.5+d+e)*b,(.5+g+f)*c,(.5+d+e)*b,(.5+f)*c),Q(a,(.5+d+e)*b,(.5-g+f)*c,(.5+g+e)*b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c),Q(a,(.5-g+e)*b,(.5-d+f)*c,(.5-d+e)*b,(.5-g+f)*c,(.5-d+e)*b,(.5+f)*c),Q(a,(.5-d+e)*b,(.5+g+f)*c,(.5-g+e)*b,(.5+d+f)*c,(.475+e)*b,(.5+d+f)*c),a.lineTo(.475*b,.85*c),a.lineTo(.425*b,.85*c),a.lineTo(.425*b,.9*c),a.lineTo(.475*b,.9*c),a.lineTo(.475*b,1*c),a.lineTo(.525*b,1*c),a.lineTo(.525*b,.9*c),a.lineTo(.575*b,.9*c),a.lineTo(.575*b,.85*c),a.lineTo(.525*b,.85*c),S(a),d=.325,e=0,f=-.125,g=4*(Math.SQRT2-1)/3*d,P(a,(.5+d+e)*b,(.5+f)*c,!0,!0),Q(a,(.5+d+e)*b,(.5+g+f)*c,(.5+g+e)*b,(.5+d+f)*c,(.5+e)*b,(.5+d+f)*c),Q(a,(.5-g+e)*b,(.5+d+f)*c,(.5-d+e)*b,(.5+g+f)*c,(.5-d+e)*b,(.5+f)*c),Q(a,(.5-d+e)*b,(.5-g+f)*c,(.5-g+e)*b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c),Q(a,(.5+g+e)*b,(.5-d+f)*c,(.5+d+e)*b,(.5-g+f)*c,(.5+d+e)*b,(.5+f)*c),P(a,(.525+e)*b,(.5+d+f)*c,!0),b=a.s,b.G=new L(.232,.136),b.H=new L(.782,.611),b.Ac=ch,t.v(a),b},PlusLine:function(a,b,c){return a=t.u(),P(a,0,.5*c,!1),a.lineTo(1*b,.5*c),a.moveTo(.5*b,0),a.lineTo(.5*b,1*c),b=a.s,t.v(a),b},XLine:function(a,b,c){return a=t.u(),P(a,0,1*c,!1),a.lineTo(1*b,0),a.moveTo(0,0),a.lineTo(1*b,1*c),b=a.s,t.v(a),b},AsteriskLine:function(a,b,c){a=t.u();var d=.2/Math.SQRT2;return P(a,d*b,(1-d)*c,!1),a.lineTo((1-d)*b,d*c),a.moveTo(d*b,d*c),a.lineTo((1-d)*b,(1-d)*c),a.moveTo(0*b,.5*c),a.lineTo(1*b,.5*c),a.moveTo(.5*b,0*c),a.lineTo(.5*b,1*c),b=a.s,t.v(a),b},CircleLine:function(a,b,c){var d=.5*K.za;return a=t.u(),P(a,1*b,.5*c,!1),Q(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c),Q(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c),Q(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0),Q(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c),b=a.s,b.G=new L(.146,.146),b.H=new L(.853,.853),b.Ac=ch,t.v(a),b},Pie:function(a,b,c){a=t.u();var d=.5*(4*(Math.SQRT2-1)/3);return P(a,(.5*Math.SQRT2/2+.5)*b,(.5-.5*Math.SQRT2/2)*c,!0),Q(a,.7*b,0*c,.5*b,0*c,.5*b,0*c),Q(a,(.5-d+0)*b,0*c,0*b,(.5-d+0)*c,0*b,.5*c),Q(a,0*b,(.5+d+0)*c,(.5-d+0)*b,1*c,.5*b,1*c),Q(a,(.5+d+0)*b,1*c,1*b,(.5+d+0)*c,1*b,.5*c),a.lineTo(.5*b,.5*c),S(a),b=a.s,t.v(a),b},PiePiece:function(a,b,c){var d=.5*(K.za/Math.SQRT2),e=Math.SQRT2/2,f=1-Math.SQRT2/2;return a=t.u(),P(a,b,c,!0),Q(a,b,(1-d)*c,(e+d)*b,(f+d)*c,e*b,f*c),a.lineTo(0,c),S(a),b=a.s,t.v(a),b},StopSign:function(a,b,c){a=1/(Math.SQRT2+2);var d=t.u();return P(d,a*b,0,!0),d.lineTo((1-a)*b,0),d.lineTo(1*b,a*c),d.lineTo(1*b,(1-a)*c),d.lineTo((1-a)*b,1*c),d.lineTo(a*b,1*c),d.lineTo(0,(1-a)*c),d.lineTo(0,a*c),S(d),b=d.s,b.G=new L(a/2,a/2),b.H=new L(1-a/2,1-a/2),t.v(d),b},LogicImplies:function(a,b,c){var d=a?a.Lc:0;return 0===d&&(d=.2),a=t.u(),P(a,(1-d)*b,0*c,!1),a.lineTo(1*b,.5*c),a.lineTo((1-d)*b,c),a.moveTo(0,.5*c),a.lineTo(b,.5*c),b=a.s,b.G=Vb,b.H=new L(.8,.5),t.v(a),b},LogicIff:function(a,b,c){var d=a?a.Lc:0;return 0===d&&(d=.2),a=t.u(),P(a,(1-d)*b,0*c,!1),a.lineTo(1*b,.5*c),a.lineTo((1-d)*b,c),a.moveTo(0,.5*c),a.lineTo(b,.5*c),a.moveTo(d*b,0),a.lineTo(0,.5*c),a.lineTo(d*b,c),b=a.s,b.G=new L(.2,0),b.H=new L(.8,.5),t.v(a),b},LogicNot:function(a,b,c){return a=t.u(),P(a,0,0,!1),a.lineTo(1*b,0),a.lineTo(1*b,1*c),b=a.s,t.v(a),b},LogicAnd:function(a,b,c){return a=t.u(),P(a,0,1*c,!1),a.lineTo(.5*b,0),a.lineTo(1*b,1*c),b=a.s,b.G=new L(.25,.5),b.H=new L(.75,1),t.v(a),b},LogicOr:function(a,b,c){return a=t.u(),P(a,0,0,!1),a.lineTo(.5*b,1*c),a.lineTo(1*b,0),b=a.s,b.G=new L(.219,0),b.H=new L(.78,.409),t.v(a),b},LogicXor:function(a,b,c){a=t.u(),P(a,.5*b,0,!1),a.lineTo(.5*b,1*c),a.moveTo(0,.5*c),a.lineTo(1*b,.5*c);var d=.5*K.za;return Q(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c),Q(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c),Q(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0),Q(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c),b=a.s,b.Ac=ch,t.v(a),b},LogicTruth:function(a,b,c){return a=t.u(),P(a,0,0,!1),a.lineTo(1*b,0),a.moveTo(.5*b,0),a.lineTo(.5*b,1*c),b=a.s,t.v(a),b},LogicFalsity:function(a,b,c){return a=t.u(),P(a,0,1*c,!1),a.lineTo(1*b,1*c),a.moveTo(.5*b,1*c),a.lineTo(.5*b,0),b=a.s,t.v(a),b},LogicThereExists:function(a,b,c){return a=t.u(),P(a,0,0,!1),a.lineTo(1*b,0),a.lineTo(1*b,.5*c),a.lineTo(0,.5*c),a.moveTo(1*b,.5*c),a.lineTo(1*b,1*c),a.lineTo(0,1*c),b=a.s,t.v(a),b},LogicForAll:function(a,b,c){return a=t.u(),P(a,0,0,!1),a.lineTo(.5*b,1*c),a.lineTo(1*b,0),a.moveTo(.25*b,.5*c),a.lineTo(.75*b,.5*c),b=a.s,b.G=new L(.25,0),b.H=new L(.75,.5),t.v(a),b},LogicIsDefinedAs:function(a,b,c){return a=t.u(),P(a,0,0,!1),a.lineTo(b,0),a.moveTo(0,.5*c),a.lineTo(b,.5*c),a.moveTo(0,c),a.lineTo(b,c),b=a.s,b.G=new L(.01,.01),b.H=new L(.99,.49),t.v(a),b},LogicIntersect:function(a,b,c){var d=.5*K.za;return a=t.u(),P(a,0,1*c,!1),a.lineTo(0,.5*c),Q(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0),Q(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c),a.lineTo(1*b,1*c),b=a.s,b.G=new L(0,.5),b.H=bc,t.v(a),b},LogicUnion:function(a,b,c){var d=.5*K.za;return a=t.u(),P(a,1*b,0,!1),a.lineTo(1*b,.5*c),Q(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c),Q(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c),a.lineTo(0,0),b=a.s,b.G=Vb,b.H=new L(1,.5),t.v(a),b},Arrow:function(a,b,c){var d=a?a.Lc:0,e=a?a.Vt:0;return 0===d&&(d=.3),0===e&&(e=.3),a=t.u(),P(a,0,(.5-e/2)*c,!0),a.lineTo((1-d)*b,(.5-e/2)*c),a.lineTo((1-d)*b,0),a.lineTo(1*b,.5*c),a.lineTo((1-d)*b,1*c),a.lineTo((1-d)*b,(.5+e/2)*c),a.lineTo(0,(.5+e/2)*c),S(a),b=a.s,b.G=new L(0,.5-e/2),d=K.wl(0,.5+e/2,1,.5+e/2,1-d,1,1,.5,t.N()),b.H=new L(d.x,d.y),t.B(d),t.v(a),b},ISOProcess:"Chevron",Chevron:function(a,b,c){return a=t.u(),P(a,0,0,!0),a.lineTo(.5*b,0),a.lineTo(1*b,.5*c),a.lineTo(.5*b,1*c),a.lineTo(0,1*c),a.lineTo(.5*b,.5*c),S(a),b=a.s,t.v(a),b},DoubleArrow:function(a,b,c){return a=t.u(),P(a,0,0,!0),a.lineTo(.3*b,.214*c),a.lineTo(.3*b,0),a.lineTo(1*b,.5*c),a.lineTo(.3*b,1*c),a.lineTo(.3*b,.786*c),a.lineTo(0,1*c),S(a),P(a,.3*b,.214*c,!1),a.lineTo(.3*b,.786*c),a.jb(!1),b=a.s,t.v(a),b},DoubleEndArrow:function(a,b,c){return a=t.u(),P(a,1*b,.5*c,!0),a.lineTo(.7*b,1*c),a.lineTo(.7*b,.7*c),a.lineTo(.3*b,.7*c),a.lineTo(.3*b,1*c),a.lineTo(0,.5*c),a.lineTo(.3*b,0),a.lineTo(.3*b,.3*c),a.lineTo(.7*b,.3*c),a.lineTo(.7*b,0),S(a),b=a.s,c=K.wl(0,.5,.3,0,0,.3,.3,.3,t.N()),b.G=new L(c.x,c.y),c=K.wl(.7,1,1,.5,.7,.7,1,.7,c),b.H=new L(c.x,c.y),t.B(c),t.v(a),b},IBeamArrow:function(a,b,c){return a=t.u(),P(a,1*b,.5*c,!0),a.lineTo(.7*b,1*c),a.lineTo(.7*b,.7*c),a.lineTo(.2*b,.7*c),a.lineTo(.2*b,1*c),a.lineTo(0,1*c),a.lineTo(0,0),a.lineTo(.2*b,0),a.lineTo(.2*b,.3*c),a.lineTo(.7*b,.3*c),a.lineTo(.7*b,0),S(a),b=a.s,b.G=new L(0,.3),c=K.wl(.7,1,1,.5,.7,.7,1,.7,t.N()),b.H=new L(c.x,c.y),t.B(c),t.v(a),b},Pointer:function(a,b,c){return a=t.u(),P(a,1*b,.5*c,!0),a.lineTo(0,1*c),a.lineTo(.2*b,.5*c),a.lineTo(0,0),S(a),b=a.s,b.G=new L(.2,.35),c=K.wl(.2,.65,1,.65,0,1,1,.5,t.N()),b.H=new L(c.x,c.y),t.B(c),t.v(a),b},RoundedPointer:function(a,b,c){return a=t.u(),P(a,1*b,.5*c,!0),a.lineTo(0,1*c),Q(a,.5*b,.75*c,.5*b,.25*c,0,0),S(a),b=a.s,b.G=new L(.4,.35),c=K.wl(.2,.65,1,.65,0,1,1,.5,t.N()),b.H=new L(c.x,c.y),t.B(c),t.v(a),b},SplitEndArrow:function(a,b,c){return a=t.u(),P(a,1*b,.5*c,!0),a.lineTo(.7*b,1*c),a.lineTo(.7*b,.7*c),a.lineTo(0,.7*c),a.lineTo(.2*b,.5*c),a.lineTo(0,.3*c),a.lineTo(.7*b,.3*c),a.lineTo(.7*b,0),S(a),b=a.s,b.G=new L(.2,.3),c=K.wl(.7,1,1,.5,.7,.7,1,.7,t.N()),b.H=new L(c.x,c.y),t.B(c),t.v(a),b},MessageToUser:"SquareArrow",SquareArrow:function(a,b,c){return a=t.u(),P(a,1*b,.5*c,!0),a.lineTo(.7*b,1*c),a.lineTo(0,1*c),a.lineTo(0,0),a.lineTo(.7*b,0),S(a),b=a.s,b.G=Vb,b.H=new L(.7,1),t.v(a),b},Cone1:function(a,b,c){var e,d=K.za;return a=.5*d,e=.1*d,d=t.u(),P(d,0,.9*c,!0),d.lineTo(.5*b,0),d.lineTo(1*b,.9*c),Q(d,1*b,(.9+e)*c,(.5+a)*b,1*c,.5*b,1*c),Q(d,(.5-a)*b,1*c,0,(.9+e)*c,0,.9*c),S(d),b=d.s,b.G=new L(.25,.5),b.H=new L(.75,.97),t.v(d),b},Cone2:function(a,b,c){return a=t.u(),P(a,0,.9*c,!0),Q(a,(1-.85/.9)*b,1*c,.85/.9*b,1*c,1*b,.9*c),a.lineTo(.5*b,0),a.lineTo(0,.9*c),S(a),P(a,0,.9*c,!1),Q(a,(1-.85/.9)*b,.8*c,.85/.9*b,.8*c,1*b,.9*c),a.jb(!1),b=a.s,b.G=new L(.25,.5),b.H=new L(.75,.82),t.v(a),b},Cube1:function(a,b,c){return a=t.u(),P(a,.5*b,1*c,!0),a.lineTo(1*b,.85*c),a.lineTo(1*b,.15*c),a.lineTo(.5*b,0*c),a.lineTo(0*b,.15*c),a.lineTo(0*b,.85*c),S(a),P(a,.5*b,1*c,!1),a.lineTo(.5*b,.3*c),a.lineTo(0,.15*c),a.moveTo(.5*b,.3*c),a.lineTo(1*b,.15*c),a.jb(!1),b=a.s,b.G=new L(0,.3),b.H=new L(.5,.85),t.v(a),b},Cube2:function(a,b,c){return a=t.u(),P(a,0,.3*c,!0),a.lineTo(0*b,1*c),a.lineTo(.7*b,c),a.lineTo(1*b,.7*c),a.lineTo(1*b,0*c),a.lineTo(.3*b,0*c),S(a),P(a,0,.3*c,!1),a.lineTo(.7*b,.3*c),a.lineTo(1*b,0*c),a.moveTo(.7*b,.3*c),a.lineTo(.7*b,1*c),a.jb(!1),b=a.s,b.G=new L(0,.3),b.H=new L(.7,1),t.v(a),b},MagneticData:"Cylinder1",Cylinder1:function(a,b,c){var e,d=K.za;return a=.5*d,e=.1*d,d=t.u(),P(d,0,.1*c,!0),Q(d,0,(.1-e)*c,(.5-a)*b,0,.5*b,0),Q(d,(.5+a)*b,0,1*b,(.1-e)*c,1*b,.1*c),d.lineTo(b,.9*c),Q(d,1*b,(.9+e)*c,(.5+a)*b,1*c,.5*b,1*c),Q(d,(.5-a)*b,1*c,0,(.9+e)*c,0,.9*c),d.lineTo(0,.1*c),P(d,0,.1*c,!1),Q(d,0,(.1+e)*c,(.5-a)*b,.2*c,.5*b,.2*c),Q(d,(.5+a)*b,.2*c,1*b,(.1+e)*c,1*b,.1*c),d.jb(!1),b=d.s,b.G=new L(0,.2),b.H=new L(1,.9),t.v(d),b},Cylinder2:function(a,b,c){var e,d=K.za;return a=.5*d,e=.1*d,d=t.u(),P(d,0,.9*c,!0),d.lineTo(0,.1*c),Q(d,0,(.1-e)*c,(.5-a)*b,0,.5*b,0),Q(d,(.5+a)*b,0,1*b,(.1-e)*c,1*b,.1*c),d.lineTo(1*b,.9*c),Q(d,1*b,(.9+e)*c,(.5+a)*b,1*c,.5*b,1*c),Q(d,(.5-a)*b,1*c,0,(.9+e)*c,0,.9*c),P(d,0,.9*c,!1),Q(d,0,(.9-e)*c,(.5-a)*b,.8*c,.5*b,.8*c),Q(d,(.5+a)*b,.8*c,1*b,(.9-e)*c,1*b,.9*c),d.jb(!1),b=d.s,b.G=new L(0,.1),b.H=new L(1,.8),t.v(d),b},Cylinder3:function(a,b,c){var e,d=K.za;return a=.1*d,e=.5*d,d=t.u(),P(d,.1*b,0,!0),d.lineTo(.9*b,0),Q(d,(.9+a)*b,0,1*b,(.5-e)*c,1*b,.5*c),Q(d,1*b,(.5+e)*c,(.9+a)*b,1*c,.9*b,1*c),d.lineTo(.1*b,1*c),Q(d,(.1-a)*b,1*c,0,(.5+e)*c,0,.5*c),Q(d,0,(.5-e)*c,(.1-a)*b,0,.1*b,0),P(d,.1*b,0,!1),Q(d,(.1+a)*b,0,.2*b,(.5-e)*c,.2*b,.5*c),Q(d,.2*b,(.5+e)*c,(.1+a)*b,1*c,.1*b,1*c),d.jb(!1),b=d.s,b.G=new L(.2,0),b.H=new L(.9,1),t.v(d),b},DirectData:"Cylinder4",Cylinder4:function(a,b,c){var e,d=K.za;return a=.1*d,e=.5*d,d=t.u(),P(d,.9*b,0,!0),Q(d,(.9+a)*b,0,1*b,(.5-e)*c,1*b,.5*c),Q(d,1*b,(.5+e)*c,(.9+a)*b,1*c,.9*b,1*c),d.lineTo(.1*b,1*c),Q(d,(.1-a)*b,1*c,0,(.5+e)*c,0,.5*c),Q(d,0,(.5-e)*c,(.1-a)*b,0,.1*b,0),d.lineTo(.9*b,0),P(d,.9*b,0,!1),Q(d,(.9-a)*b,0,.8*b,(.5-e)*c,.8*b,.5*c),Q(d,.8*b,(.5+e)*c,(.9-a)*b,1*c,.9*b,1*c),d.jb(!1),b=d.s,b.G=new L(.1,0),b.H=new L(.8,1),t.v(d),b},Prism1:function(a,b,c){return a=t.u(),P(a,.25*b,.25*c,!0),a.lineTo(.75*b,0),a.lineTo(b,.5*c),a.lineTo(.5*b,c),a.lineTo(0,c),S(a),P(a,.25*b,.25*c,!1),a.lineTo(.5*b,c),a.jb(!1),b=a.s,b.G=new L(.408,.172),b.H=new L(.833,.662),t.v(a),b},Prism2:function(a,b,c){return a=t.u(),P(a,0,.25*c,!0),a.lineTo(.75*b,0),a.lineTo(1*b,.25*c),a.lineTo(.75*b,.75*c),a.lineTo(0,1*c),S(a),P(a,0,c,!1),a.lineTo(.25*b,.5*c),a.lineTo(b,.25*c),a.moveTo(0,.25*c),a.lineTo(.25*b,.5*c),a.jb(!1),b=a.s,b.G=new L(.25,.5),b.H=new L(.75,.75),t.v(a),b},Pyramid1:function(a,b,c){return a=t.u(),P(a,.5*b,0,!0),a.lineTo(b,.75*c),a.lineTo(.5*b,1*c),a.lineTo(0,.75*c),S(a),P(a,.5*b,0,!1),a.lineTo(.5*b,1*c),a.jb(!1),b=a.s,b.G=new L(.25,.367),b.H=new L(.75,.875),t.v(a),b},Pyramid2:function(a,b,c){return a=t.u(),P(a,.5*b,0,!0),a.lineTo(b,.85*c),a.lineTo(.5*b,1*c),a.lineTo(0,.85*c),S(a),P(a,.5*b,0,!1),a.lineTo(.5*b,.7*c),a.lineTo(0,.85*c),a.moveTo(.5*b,.7*c),a.lineTo(1*b,.85*c),a.jb(!1),b=a.s,b.G=new L(.25,.367),b.H=new L(.75,.875),t.v(a),b},Actor:function(a,b,c){var d=K.za,e=.2*d,f=.1*d,g=.5,h=.1;return a=t.u(),P(a,g*b,(h+.1)*c,!0),Q(a,(g-e)*b,(h+.1)*c,(g-.2)*b,(h+f)*c,(g-.2)*b,h*c),Q(a,(g-.2)*b,(h-f)*c,(g-e)*b,(h-.1)*c,g*b,(h-.1)*c),Q(a,(g+e)*b,(h-.1)*c,(g+.2)*b,(h-f)*c,(g+.2)*b,h*c),Q(a,(g+.2)*b,(h+f)*c,(g+e)*b,(h+.1)*c,g*b,(h+.1)*c),e=.05,f=d*e,P(a,.5*b,.2*c,!0),a.lineTo(.95*b,.2*c),g=.95,h=.25,Q(a,(g+f)*b,(h-e)*c,(g+e)*b,(h-f)*c,(g+e)*b,h*c),a.lineTo(1*b,.6*c),a.lineTo(.85*b,.6*c),a.lineTo(.85*b,.35*c),e=.025,f=d*e,g=.825,h=.35,Q(a,(g+e)*b,(h-f)*c,(g+f)*b,(h-e)*c,g*b,(h-e)*c),Q(a,(g-f)*b,(h-e)*c,(g-e)*b,(h-f)*c,(g-e)*b,h*c),a.lineTo(.8*b,1*c),a.lineTo(.55*b,1*c),a.lineTo(.55*b,.7*c),e=.05,f=d*e,g=.5,h=.7,Q(a,(g+e)*b,(h-f)*c,(g+f)*b,(h-e)*c,g*b,(h-e)*c),Q(a,(g-f)*b,(h-e)*c,(g-e)*b,(h-f)*c,(g-e)*b,h*c),a.lineTo(.45*b,1*c),a.lineTo(.2*b,1*c),a.lineTo(.2*b,.35*c),e=.025,f=d*e,g=.175,h=.35,Q(a,(g+e)*b,(h-f)*c,(g+f)*b,(h-e)*c,g*b,(h-e)*c),Q(a,(g-f)*b,(h-e)*c,(g-e)*b,(h-f)*c,(g-e)*b,h*c),a.lineTo(.15*b,.6*c),a.lineTo(0*b,.6*c),a.lineTo(0*b,.25*c),e=.05,f=d*e,g=.05,h=.25,Q(a,(g-e)*b,(h-f)*c,(g-f)*b,(h-e)*c,g*b,(h-e)*c),a.lineTo(.5*b,.2*c),b=a.s,b.G=new L(.2,.2),b.H=new L(.8,.65),t.v(a),b},Card:function(a,b,c){return a=t.u(),P(a,1*b,0*c,!0),a.lineTo(1*b,1*c),a.lineTo(0*b,1*c),a.lineTo(0*b,.2*c),a.lineTo(.2*b,0*c),S(a),b=a.s,b.G=new L(0,.2),b.H=bc,t.v(a),b},Collate:function(a,b,c){return a=t.u(),P(a,.5*b,.5*c,!0),a.lineTo(0,0),a.lineTo(1*b,0),a.lineTo(.5*b,.5*c),P(a,.5*b,.5*c,!0),a.lineTo(1*b,1*c),a.lineTo(0,1*c),a.lineTo(.5*b,.5*c),b=a.s,b.G=new L(.25,0),b.H=new L(.75,.25),t.v(a),b},CreateRequest:function(a,b,c){a=a?a.Lc:0,0===a&&(a=.1);var d=t.u();return P(d,0,0,!0),d.lineTo(1*b,0),d.lineTo(1*b,1*c),d.lineTo(0,1*c),S(d),P(d,0,a*c,!1),d.lineTo(1*b,a*c),d.moveTo(0,(1-a)*c),d.lineTo(1*b,(1-a)*c),d.jb(!1),b=d.s,b.G=new L(0,a),b.H=new L(1,1-a),t.v(d),b},Database:function(a,b,c){a=t.u();var d=K.za,e=.5*d,d=.1*d;return P(a,1*b,.1*c,!0),a.lineTo(1*b,.9*c),Q(a,1*b,(.9+d)*c,(.5+e)*b,1*c,.5*b,1*c),Q(a,(.5-e)*b,1*c,0,(.9+d)*c,0,.9*c),a.lineTo(0,.1*c),Q(a,0,(.1-d)*c,(.5-e)*b,0,.5*b,0),Q(a,(.5+e)*b,0,1*b,(.1-d)*c,1*b,.1*c),P(a,1*b,.1*c,!1),Q(a,1*b,(.1+d)*c,(.5+e)*b,.2*c,.5*b,.2*c),Q(a,(.5-e)*b,.2*c,0,(.1+d)*c,0,.1*c),a.moveTo(1*b,.2*c),Q(a,1*b,(.2+d)*c,(.5+e)*b,.3*c,.5*b,.3*c),Q(a,(.5-e)*b,.3*c,0,(.2+d)*c,0,.2*c),a.moveTo(1*b,.3*c),Q(a,1*b,(.3+d)*c,(.5+e)*b,.4*c,.5*b,.4*c),Q(a,(.5-e)*b,.4*c,0,(.3+d)*c,0,.3*c),a.jb(!1),b=a.s,b.G=new L(0,.4),b.H=new L(1,.9),t.v(a),b},StoredData:"DataStorage",DataStorage:function(a,b,c){return a=t.u(),P(a,0,0,!0),a.lineTo(.75*b,0),Q(a,1*b,0,1*b,1*c,.75*b,1*c),a.lineTo(0,1*c),Q(a,.25*b,.9*c,.25*b,.1*c,0,0),S(a),b=a.s,b.G=new L(.226,0),b.H=new L(.81,1),t.v(a),b},DiskStorage:function(a,b,c){a=t.u();var d=K.za,e=.5*d,d=.1*d;return P(a,1*b,.1*c,!0),a.lineTo(1*b,.9*c),Q(a,1*b,(.9+d)*c,(.5+e)*b,1*c,.5*b,1*c),Q(a,(.5-e)*b,1*c,0,(.9+d)*c,0,.9*c),a.lineTo(0,.1*c),Q(a,0,(.1-d)*c,(.5-e)*b,0,.5*b,0),Q(a,(.5+e)*b,0,1*b,(.1-d)*c,1*b,.1*c),P(a,1*b,.1*c,!1),Q(a,1*b,(.1+d)*c,(.5+e)*b,.2*c,.5*b,.2*c),Q(a,(.5-e)*b,.2*c,0,(.1+d)*c,0,.1*c),a.moveTo(1*b,.2*c),Q(a,1*b,(.2+d)*c,(.5+e)*b,.3*c,.5*b,.3*c),Q(a,(.5-e)*b,.3*c,0,(.2+d)*c,0,.2*c),a.jb(!1),b=a.s,b.G=new L(0,.3),b.H=new L(1,.9),t.v(a),b},Display:function(a,b,c){return a=t.u(),P(a,.25*b,0,!0),a.lineTo(.75*b,0),Q(a,1*b,0,1*b,1*c,.75*b,1*c),a.lineTo(.25*b,1*c),a.lineTo(0,.5*c),S(a),b=a.s,b.G=new L(.25,0),b.H=new L(.75,1),t.v(a),b},DividedEvent:function(a,b,c){a=a?a.Lc:0,0===a?a=.2:.15>a&&(a=.15);var d=t.u(),e=.2*K.za;return P(d,0,.2*c,!0),Q(d,0,(.2-e)*c,(.2-e)*b,0,.2*b,0),d.lineTo(.8*b,0),Q(d,(.8+e)*b,0,1*b,(.2-e)*c,1*b,.2*c),d.lineTo(1*b,.8*c),Q(d,1*b,(.8+e)*c,(.8+e)*b,1*c,.8*b,1*c),d.lineTo(.2*b,1*c),Q(d,(.2-e)*b,1*c,0,(.8+e)*c,0,.8*c),d.lineTo(0,.2*c),P(d,0,a*c,!1),d.lineTo(1*b,a*c),d.jb(!1),b=d.s,b.G=new L(0,a),b.H=new L(1,1-a),t.v(d),b},DividedProcess:function(a,b,c){a=a?a.Lc:0,.1>a&&(a=.1);var d=t.u();return P(d,0,0,!0),d.lineTo(1*b,0),d.lineTo(1*b,1*c),d.lineTo(0,1*c),S(d),P(d,0,a*c,!1),d.lineTo(1*b,a*c),d.jb(!1),b=d.s,b.G=new L(0,a),b.H=bc,t.v(d),b},Document:function(a,b,c){return c/=.8,a=t.u(),P(a,0,.7*c,!0),a.lineTo(0,0),a.lineTo(1*b,0),a.lineTo(1*b,.7*c),Q(a,.5*b,.4*c,.5*b,1*c,0,.7*c),S(a),b=a.s,b.G=Vb,b.H=new L(1,.6),t.v(a),b},ExternalOrganization:function(a,b,c){a=a?a.Lc:0,.2>a&&(a=.2);var d=t.u();return P(d,0,0,!0),d.lineTo(1*b,0),d.lineTo(1*b,1*c),d.lineTo(0,1*c),S(d),P(d,a*b,0,!1),d.lineTo(0,a*c),d.moveTo(1*b,a*c),d.lineTo((1-a)*b,0),d.moveTo(0,(1-a)*c),d.lineTo(a*b,1*c),d.moveTo((1-a)*b,1*c),d.lineTo(1*b,(1-a)*c),d.jb(!1),b=d.s,b.G=new L(a/2,a/2),b.H=new L(1-a/2,1-a/2),t.v(d),b},ExternalProcess:function(a,b,c){return a=t.u(),P(a,.5*b,0,!0),a.lineTo(1*b,.5*c),a.lineTo(.5*b,1*c),a.lineTo(0,.5*c),S(a),P(a,.1*b,.4*c,!1),a.lineTo(.1*b,.6*c),a.moveTo(.9*b,.6*c),a.lineTo(.9*b,.4*c),a.moveTo(.6*b,.1*c),a.lineTo(.4*b,.1*c),a.moveTo(.4*b,.9*c),a.lineTo(.6*b,.9*c),a.jb(!1),b=a.s,b.G=new L(.25,.25),b.H=new L(.75,.75),t.v(a),b},File:function(a,b,c){return a=t.u(),P(a,0,0,!0),a.lineTo(.75*b,0),a.lineTo(1*b,.25*c),a.lineTo(1*b,1*c),a.lineTo(0,1*c),S(a),P(a,.75*b,0,!1),a.lineTo(.75*b,.25*c),a.lineTo(1*b,.25*c),a.jb(!1),b=a.s,b.G=new L(0,.25),b.H=bc,t.v(a),b},Interrupt:function(a,b,c){return a=t.u(),P(a,1*b,.5*c,!0),a.lineTo(0,1*c),a.lineTo(0,0),a.lineTo(1*b,.5*c),P(a,1*b,.5*c,!1),a.lineTo(1*b,1*c),P(a,1*b,.5*c,!1),a.lineTo(1*b,0),b=a.s,b.G=new L(0,.25),b.H=new L(.5,.75),t.v(a),b},InternalStorage:function(a,b,c){var e,d=a?a.Lc:0;return a=a?a.Vt:0,0===d&&(d=.1),0===a&&(a=.1),e=t.u(),P(e,0,0,!0),e.lineTo(1*b,0),e.lineTo(1*b,1*c),e.lineTo(0,1*c),S(e),P(e,d*b,0,!1),e.lineTo(d*b,1*c),e.moveTo(0,a*c),e.lineTo(1*b,a*c),e.jb(!1),b=e.s,b.G=new L(d,a),b.H=bc,t.v(e),b},Junction:function(a,b,c){a=t.u();var d=1/Math.SQRT2,e=(1-1/Math.SQRT2)/2,f=.5*K.za;return P(a,1*b,.5*c,!0),Q(a,1*b,(.5+f)*c,(.5+f)*b,1*c,.5*b,1*c),Q(a,(.5-f)*b,1*c,0,(.5+f)*c,0,.5*c),Q(a,0,(.5-f)*c,(.5-f)*b,0,.5*b,0),Q(a,(.5+f)*b,0,1*b,(.5-f)*c,1*b,.5*c),P(a,(e+d)*b,(e+d)*c,!1),a.lineTo(e*b,e*c),a.moveTo(e*b,(e+d)*c),a.lineTo((e+d)*b,e*c),a.jb(!1),b=a.s,b.Ac=ch,t.v(a),b},LinedDocument:function(a,b,c){return c/=.8,a=t.u(),P(a,0,.7*c,!0),a.lineTo(0,0),a.lineTo(1*b,0),a.lineTo(1*b,.7*c),Q(a,.5*b,.4*c,.5*b,1*c,0,.7*c),S(a),P(a,.1*b,0,!1),a.lineTo(.1*b,.75*c),a.jb(!1),b=a.s,b.G=new L(.1,0),b.H=new L(1,.6),t.v(a),b},LoopLimit:function(a,b,c){return a=t.u(),P(a,0,1*c,!0),a.lineTo(0,.25*c),a.lineTo(.25*b,0),a.lineTo(.75*b,0),a.lineTo(1*b,.25*c),a.lineTo(1*b,1*c),S(a),b=a.s,b.G=new L(0,.25),b.H=bc,t.v(a),b},SequentialData:"MagneticTape",MagneticTape:function(a,b,c){a=t.u();var d=.5*K.za;return P(a,.5*b,1*c,!0),Q(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c),Q(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0),Q(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c),Q(a,1*b,(.5+d)*c,(.5+d)*b,.9*c,.6*b,.9*c),a.lineTo(1*b,.9*c),a.lineTo(1*b,1*c),a.lineTo(.5*b,1*c),b=a.s,b.G=new L(.15,.15),b.H=new L(.85,.8),t.v(a),b},ManualInput:function(a,b,c){return a=t.u(),P(a,1*b,0,!0),a.lineTo(1*b,1*c),a.lineTo(0,1*c),a.lineTo(0,.25*c),S(a),b=a.s,b.G=new L(0,.25),b.H=bc,t.v(a),b},MessageFromUser:function(a,b,c){a=a?a.Lc:0,0===a&&(a=.7);var d=t.u();return P(d,0,0,!0),d.lineTo(1*b,0),d.lineTo(a*b,.5*c),d.lineTo(1*b,1*c),d.lineTo(0,1*c),S(d),b=d.s,b.G=Vb,b.H=new L(a,1),t.v(d),b},MicroformProcessing:function(a,b,c){a=a?a.Lc:0,0===a&&(a=.25);var d=t.u();return P(d,0,0,!0),d.lineTo(.5*b,a*c),d.lineTo(1*b,0),d.lineTo(1*b,1*c),d.lineTo(.5*b,(1-a)*c),d.lineTo(0,1*c),S(d),b=d.s,b.G=new L(0,a),b.H=new L(1,1-a),t.v(d),b},MicroformRecording:function(a,b,c){return a=t.u(),P(a,0,0,!0),a.lineTo(.75*b,.25*c),a.lineTo(1*b,.15*c),a.lineTo(1*b,.85*c),a.lineTo(.75*b,.75*c),a.lineTo(0,1*c),S(a),b=a.s,b.G=new L(0,.25),b.H=new L(1,.75),t.v(a),b
},MultiDocument:function(a,b,c){return c/=.8,a=t.u(),P(a,b,0,!0),a.lineTo(b,.5*c),Q(a,.96*b,.47*c,.93*b,.45*c,.9*b,.44*c),a.lineTo(.9*b,.6*c),Q(a,.86*b,.57*c,.83*b,.55*c,.8*b,.54*c),a.lineTo(.8*b,.7*c),Q(a,.4*b,.4*c,.4*b,1*c,0,.7*c),a.lineTo(0,.2*c),a.lineTo(.1*b,.2*c),a.lineTo(.1*b,.1*c),a.lineTo(.2*b,.1*c),a.lineTo(.2*b,0),S(a),P(a,.1*b,.2*c,!1),a.lineTo(.8*b,.2*c),a.lineTo(.8*b,.54*c),a.moveTo(.2*b,.1*c),a.lineTo(.9*b,.1*c),a.lineTo(.9*b,.44*c),a.jb(!1),b=a.s,b.G=new L(0,.25),b.H=new L(.8,.77),t.v(a),b},MultiProcess:function(a,b,c){return a=t.u(),P(a,.1*b,.1*c,!0),a.lineTo(.2*b,.1*c),a.lineTo(.2*b,0),a.lineTo(1*b,0),a.lineTo(1*b,.8*c),a.lineTo(.9*b,.8*c),a.lineTo(.9*b,.9*c),a.lineTo(.8*b,.9*c),a.lineTo(.8*b,1*c),a.lineTo(0,1*c),a.lineTo(0,.2*c),a.lineTo(.1*b,.2*c),S(a),P(a,.2*b,.1*c,!1),a.lineTo(.9*b,.1*c),a.lineTo(.9*b,.8*c),a.moveTo(.1*b,.2*c),a.lineTo(.8*b,.2*c),a.lineTo(.8*b,.9*c),a.jb(!1),b=a.s,b.G=new L(0,.2),b.H=new L(.8,1),t.v(a),b},OfflineStorage:function(a,b,c){a=a?a.Lc:0,0===a&&(a=.1);var d=1-a,e=t.u();return P(e,0,0,!0),e.lineTo(1*b,0),e.lineTo(.5*b,1*c),S(e),P(e,.5*a*b,a*c,!1),e.lineTo((1-.5*a)*b,a*c),e.jb(!1),b=e.s,b.G=new L(d/4+.5*a,a),b.H=new L(3*d/4+.5*a,a+.5*d),t.v(e),b},OffPageConnector:function(a,b,c){return a=t.u(),P(a,0,0,!0),a.lineTo(.75*b,0),a.lineTo(1*b,.5*c),a.lineTo(.75*b,1*c),a.lineTo(0,1*c),S(a),b=a.s,b.G=Vb,b.H=new L(.75,1),t.v(a),b},Or:function(a,b,c){a=t.u();var d=.5*K.za;return P(a,1*b,.5*c,!0),Q(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c),Q(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c),Q(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0),Q(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c),P(a,1*b,.5*c,!1),a.lineTo(0,.5*c),a.moveTo(.5*b,1*c),a.lineTo(.5*b,0),a.jb(!1),b=a.s,b.Ac=ch,t.v(a),b},PaperTape:function(a,b,c){return c/=.8,a=t.u(),P(a,0,.7*c,!0),a.lineTo(0,.3*c),Q(a,.5*b,.6*c,.5*b,0,1*b,.3),a.lineTo(1*b,.7*c),Q(a,.5*b,.4*c,.5*b,1*c,0,.7*c),S(a),b=a.s,b.G=new L(0,.49),b.H=new L(1,.75),t.v(a),b},PrimitiveFromCall:function(a,b,c){var e,d=a?a.Lc:0;return a=a?a.Vt:0,0===d&&(d=.1),0===a&&(a=.3),e=t.u(),P(e,0,0,!0),e.lineTo(1*b,0),e.lineTo((1-a)*b,.5*c),e.lineTo(1*b,1*c),e.lineTo(0,1*c),S(e),b=e.s,b.G=new L(d,0),b.H=new L(1-a,1),t.v(e),b},PrimitiveToCall:function(a,b,c){var e,d=a?a.Lc:0;return a=a?a.Vt:0,0===d&&(d=.1),0===a&&(a=.3),e=t.u(),P(e,0,0,!0),e.lineTo((1-a)*b,0),e.lineTo(1*b,.5*c),e.lineTo((1-a)*b,1*c),e.lineTo(0,1*c),S(e),b=e.s,b.G=new L(d,0),b.H=new L(1-a,1),t.v(e),b},Subroutine:"Procedure",Procedure:function(a,b,c){a=a?a.Lc:0,0===a&&(a=.1);var d=t.u();return P(d,0,0,!0),d.lineTo(1*b,0),d.lineTo(1*b,1*c),d.lineTo(0,1*c),S(d),P(d,(1-a)*b,0,!1),d.lineTo((1-a)*b,1*c),d.moveTo(a*b,0),d.lineTo(a*b,1*c),d.jb(!1),b=d.s,b.G=new L(a,0),b.H=new L(1-a,1),t.v(d),b},Process:function(a,b,c){a=a?a.Lc:0,0===a&&(a=.1);var d=t.u();return P(d,0,0,!0),d.lineTo(1*b,0),d.lineTo(1*b,1*c),d.lineTo(0,1*c),S(d),P(d,a*b,0,!1),d.lineTo(a*b,1*c),d.jb(!1),b=d.s,b.G=new L(a,0),b.H=bc,t.v(d),b},Sort:function(a,b,c){return a=t.u(),P(a,.5*b,0,!0),a.lineTo(1*b,.5*c),a.lineTo(.5*b,1*c),a.lineTo(0,.5*c),S(a),P(a,0,.5*c,!1),a.lineTo(1*b,.5*c),a.jb(!1),b=a.s,b.G=new L(.25,.25),b.H=new L(.75,.5),t.v(a),b},Start:function(a,b,c){return a=t.u(),P(a,.25*b,0,!0),P(a,.25*b,0,!0),a.arcTo(270,180,.75*b,.5*c,.25*b,.5*c),a.arcTo(90,180,.25*b,.5*c,.25*b,.5*c),P(a,.25*b,0,!1),a.lineTo(.25*b,1*c),a.moveTo(.75*b,0),a.lineTo(.75*b,1*c),a.jb(!1),b=a.s,b.G=new L(.25,0),b.H=new L(.75,1),t.v(a),b},Terminator:function(a,b,c){return a=t.u(),P(a,.25*b,0,!0),a.arcTo(270,180,.75*b,.5*c,.25*b,.5*c),a.arcTo(90,180,.25*b,.5*c,.25*b,.5*c),b=a.s,b.G=new L(.23,0),b.H=new L(.77,1),t.v(a),b},TransmittalTape:function(a,b,c){a=a?a.Lc:0,0===a&&(a=.1);var d=t.u();return P(d,0,0,!0),d.lineTo(1*b,0),d.lineTo(1*b,1*c),d.lineTo(.75*b,(1-a)*c),d.lineTo(0,(1-a)*c),S(d),b=d.s,b.G=Vb,b.H=new L(1,1-a),t.v(d),b},AndGate:function(a,b,c){a=t.u();var d=.5*K.za;return P(a,0,0,!0),a.lineTo(.5*b,0),Q(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c),Q(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c),a.lineTo(0,1*c),S(a),b=a.s,b.G=Vb,b.H=new L(.55,1),t.v(a),b},Buffer:function(a,b,c){return a=t.u(),P(a,0,0,!0),a.lineTo(1*b,.5*c),a.lineTo(0,1*c),S(a),b=a.s,b.G=new L(0,.25),b.H=new L(.5,.75),t.v(a),b},Clock:function(a,b,c){a=t.u();var d=.5*K.za;return P(a,1*b,.5*c,!0),Q(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c),Q(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c),Q(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0),Q(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c),P(a,1*b,.5*c,!1),a.lineTo(1*b,.5*c),P(a,.8*b,.75*c,!1),a.lineTo(.8*b,.25*c),a.lineTo(.6*b,.25*c),a.lineTo(.6*b,.75*c),a.lineTo(.4*b,.75*c),a.lineTo(.4*b,.25*c),a.lineTo(.2*b,.25*c),a.lineTo(.2*b,.75*c),a.jb(!1),b=a.s,b.Ac=ch,t.v(a),b},Ground:function(a,b,c){return a=t.u(),P(a,.5*b,0,!1),a.lineTo(.5*b,.4*c),a.moveTo(.2*b,.6*c),a.lineTo(.8*b,.6*c),a.moveTo(.3*b,.8*c),a.lineTo(.7*b,.8*c),a.moveTo(.4*b,1*c),a.lineTo(.6*b,1*c),b=a.s,t.v(a),b},Inverter:function(a,b,c){a=t.u();var d=.1*K.za;return P(a,.8*b,.5*c,!0),a.lineTo(0,1*c),a.lineTo(0,0),a.lineTo(.8*b,.5*c),P(a,1*b,.5*c,!0),Q(a,1*b,(.5+d)*c,(.9+d)*b,.6*c,.9*b,.6*c),Q(a,(.9-d)*b,.6*c,.8*b,(.5+d)*c,.8*b,.5*c),Q(a,.8*b,(.5-d)*c,(.9-d)*b,.4*c,.9*b,.4*c),Q(a,(.9+d)*b,.4*c,1*b,(.5-d)*c,1*b,.5*c),b=a.s,b.G=new L(0,.25),b.H=new L(.4,.75),t.v(a),b},NandGate:function(a,b,c){a=t.u();var d=K.za,e=.5*d,f=.4*d,d=.1*d;return P(a,.8*b,.5*c,!0),Q(a,.8*b,(.5+f)*c,(.4+e)*b,1*c,.4*b,1*c),a.lineTo(0,1*c),a.lineTo(0,0),a.lineTo(.4*b,0),Q(a,(.4+e)*b,0,.8*b,(.5-f)*c,.8*b,.5*c),P(a,1*b,.5*c,!0),Q(a,1*b,(.5+d)*c,(.9+d)*b,.6*c,.9*b,.6*c),Q(a,(.9-d)*b,.6*c,.8*b,(.5+d)*c,.8*b,.5*c),Q(a,.8*b,(.5-d)*c,(.9-d)*b,.4*c,.9*b,.4*c),Q(a,(.9+d)*b,.4*c,1*b,(.5-d)*c,1*b,.5*c),b=a.s,b.G=new L(0,.05),b.H=new L(.55,.95),t.v(a),b},NorGate:function(a,b,c){a=t.u();var d=K.za,e=.5,f=d*e,g=0,h=.5;return P(a,.8*b,.5*c,!0),Q(a,.7*b,(h+f)*c,(g+f)*b,(h+e)*c,0,1*c),Q(a,.25*b,.75*c,.25*b,.25*c,0,0),Q(a,(g+f)*b,(h-e)*c,.7*b,(h-f)*c,.8*b,.5*c),e=.1,f=.1*d,g=.9,h=.5,P(a,(g-e)*b,h*c,!0),Q(a,(g-e)*b,(h-f)*c,(g-f)*b,(h-e)*c,g*b,(h-e)*c),Q(a,(g+f)*b,(h-e)*c,(g+e)*b,(h-f)*c,(g+e)*b,h*c),Q(a,(g+e)*b,(h+f)*c,(g+f)*b,(h+e)*c,g*b,(h+e)*c),Q(a,(g-f)*b,(h+e)*c,(g-e)*b,(h+f)*c,(g-e)*b,h*c),b=a.s,b.G=new L(.2,.25),b.H=new L(.6,.75),t.v(a),b},OrGate:function(a,b,c){a=t.u();var d=.5*K.za;return P(a,0,0,!0),Q(a,(0+d+d)*b,0*c,.8*b,(.5-d)*c,1*b,.5*c),Q(a,.8*b,(.5+d)*c,(0+d+d)*b,1*c,0,1*c),Q(a,.25*b,.75*c,.25*b,.25*c,0,0),S(a),b=a.s,b.G=new L(.2,.25),b.H=new L(.75,.75),t.v(a),b},XnorGate:function(a,b,c){a=t.u();var d=K.za,e=.5,f=d*e,g=.2,h=.5;return P(a,.1*b,0,!1),Q(a,.35*b,.25*c,.35*b,.75*c,.1*b,1*c),P(a,.8*b,.5*c,!0),Q(a,.7*b,(h+f)*c,(g+f)*b,(h+e)*c,.2*b,1*c),Q(a,.45*b,.75*c,.45*b,.25*c,.2*b,0),Q(a,(g+f)*b,(h-e)*c,.7*b,(h-f)*c,.8*b,.5*c),e=.1,f=.1*d,g=.9,h=.5,P(a,(g-e)*b,h*c,!0),Q(a,(g-e)*b,(h-f)*c,(g-f)*b,(h-e)*c,g*b,(h-e)*c),Q(a,(g+f)*b,(h-e)*c,(g+e)*b,(h-f)*c,(g+e)*b,h*c),Q(a,(g+e)*b,(h+f)*c,(g+f)*b,(h+e)*c,g*b,(h+e)*c),Q(a,(g-f)*b,(h+e)*c,(g-e)*b,(h+f)*c,(g-e)*b,h*c),b=a.s,b.G=new L(.4,.25),b.H=new L(.65,.75),t.v(a),b},XorGate:function(a,b,c){a=t.u();var d=.5*K.za;return P(a,.1*b,0,!1),Q(a,.35*b,.25*c,.35*b,.75*c,.1*b,1*c),P(a,.2*b,0,!0),Q(a,(.2+d)*b,0*c,.9*b,(.5-d)*c,1*b,.5*c),Q(a,.9*b,(.5+d)*c,(.2+d)*b,1*c,.2*b,1*c),Q(a,.45*b,.75*c,.45*b,.25*c,.2*b,0),S(a),b=a.s,b.G=new L(.4,.25),b.H=new L(.8,.75),t.v(a),b},Capacitor:function(a,b,c){return a=t.u(),P(a,0,0,!1),a.lineTo(0,1*c),a.moveTo(1*b,0),a.lineTo(1*b,1*c),b=a.s,t.v(a),b},Resistor:function(a,b,c){return a=t.u(),P(a,0,.5*c,!1),a.lineTo(.1*b,0),a.lineTo(.2*b,1*c),a.lineTo(.3*b,0),a.lineTo(.4*b,1*c),a.lineTo(.5*b,0),a.lineTo(.6*b,1*c),a.lineTo(.7*b,.5*c),b=a.s,t.v(a),b},Inductor:function(a,b,c){a=t.u();var d=.1*K.za,e=.1,f=.5;return P(a,(e-.5*d)*b,(f+.1)*c,!1),Q(a,(e-d)*b,(f+.1)*c,(e-.1)*b,(f+d)*c,(e+.1)*b,(f+d)*c),e=.3,f=.5,Q(a,(e+.1)*b,(f+d)*c,(e+d)*b,(f+.1)*c,e*b,(f+.1)*c),Q(a,(e-d)*b,(f+.1)*c,(e-.1)*b,(f+d)*c,(e+.1)*b,(f+d)*c),f=e=.5,Q(a,(e+.1)*b,(f+d)*c,(e+d)*b,(f+.1)*c,e*b,(f+.1)*c),Q(a,(e-d)*b,(f+.1)*c,(e-.1)*b,(f+d)*c,(e+.1)*b,(f+d)*c),e=.7,f=.5,Q(a,(e+.1)*b,(f+d)*c,(e+d)*b,(f+.1)*c,e*b,(f+.1)*c),Q(a,(e-d)*b,(f+.1)*c,(e-.1)*b,(f+d)*c,(e+.1)*b,(f+d)*c),e=.9,f=.5,Q(a,(e+.1)*b,(f+d)*c,(e+d)*b,(f+.1)*c,(e+.5*d)*b,(f+.1)*c),b=a.s,t.v(a),b},ACvoltageSource:function(a,b,c){a=t.u();var d=.5*K.za;return P(a,0*b,.5*c,!1),Q(a,0*b,(.5-d)*c,(.5-d)*b,0*c,.5*b,0*c),Q(a,(.5+d)*b,0*c,1*b,(.5-d)*c,1*b,.5*c),Q(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c),Q(a,(.5-d)*b,1*c,0*b,(.5+d)*c,0*b,.5*c),a.moveTo(.1*b,.5*c),Q(a,.5*b,0*c,.5*b,1*c,.9*b,.5*c),b=a.s,b.Ac=ch,t.v(a),b},DCvoltageSource:function(a,b,c){return a=t.u(),P(a,0,.75*c,!1),a.lineTo(0,.25*c),a.moveTo(1*b,0),a.lineTo(1*b,1*c),b=a.s,t.v(a),b},Diode:function(a,b,c){return a=t.u(),P(a,1*b,0,!1),a.lineTo(1*b,.5*c),a.lineTo(0,1*c),a.lineTo(0,0),a.lineTo(1*b,.5*c),a.lineTo(1*b,1*c),b=a.s,b.G=new L(0,.25),b.H=new L(.5,.75),t.v(a),b},Wifi:function(a,b,c){var f,g,h,i,j,d=b,e=c;return b*=.38,c*=.6,a=t.u(),f=K.za,g=.8*f,h=.8,i=0,j=.5,d=(d-b)/2,e=(e-c)/2,P(a,i*b+d,(j+h)*c+e,!0),Q(a,(i-g)*b+d,(j+h)*c+e,(i-h)*b+d,(j+g)*c+e,(i-h)*b+d,j*c+e),Q(a,(i-h)*b+d,(j-g)*c+e,(i-g)*b+d,(j-h)*c+e,i*b+d,(j-h)*c+e),Q(a,i*b+d,(j-h)*c+e,(i-h+.5*g)*b+d,(j-g)*c+e,(i-h+.5*g)*b+d,j*c+e),Q(a,(i-h+.5*g)*b+d,(j+g)*c+e,i*b+d,(j+h)*c+e,i*b+d,(j+h)*c+e),S(a),g=.4*f,h=.4,i=.2,j=.5,P(a,i*b+d,(j+h)*c+e,!0),Q(a,(i-g)*b+d,(j+h)*c+e,(i-h)*b+d,(j+g)*c+e,(i-h)*b+d,j*c+e),Q(a,(i-h)*b+d,(j-g)*c+e,(i-g)*b+d,(j-h)*c+e,i*b+d,(j-h)*c+e),Q(a,i*b+d,(j-h)*c+e,(i-h+.5*g)*b+d,(j-g)*c+e,(i-h+.5*g)*b+d,j*c+e),Q(a,(i-h+.5*g)*b+d,(j+g)*c+e,i*b+d,(j+h)*c+e,i*b+d,(j+h)*c+e),S(a),g=.2*f,h=.2,j=i=.5,P(a,(i-h)*b+d,j*c+e,!0),Q(a,(i-h)*b+d,(j-g)*c+e,(i-g)*b+d,(j-h)*c+e,i*b+d,(j-h)*c+e),Q(a,(i+g)*b+d,(j-h)*c+e,(i+h)*b+d,(j-g)*c+e,(i+h)*b+d,j*c+e),Q(a,(i+h)*b+d,(j+g)*c+e,(i+g)*b+d,(j+h)*c+e,i*b+d,(j+h)*c+e),Q(a,(i-g)*b+d,(j+h)*c+e,(i-h)*b+d,(j+g)*c+e,(i-h)*b+d,j*c+e),g=.4*f,h=.4,i=.8,j=.5,P(a,i*b+d,(j-h)*c+e,!0),Q(a,(i+g)*b+d,(j-h)*c+e,(i+h)*b+d,(j-g)*c+e,(i+h)*b+d,j*c+e),Q(a,(i+h)*b+d,(j+g)*c+e,(i+g)*b+d,(j+h)*c+e,i*b+d,(j+h)*c+e),Q(a,i*b+d,(j+h)*c+e,(i+h-.5*g)*b+d,(j+g)*c+e,(i+h-.5*g)*b+d,j*c+e),Q(a,(i+h-.5*g)*b+d,(j-g)*c+e,i*b+d,(j-h)*c+e,i*b+d,(j-h)*c+e),S(a),g=.8*f,h=.8,i=1,j=.5,P(a,i*b+d,(j-h)*c+e,!0),Q(a,(i+g)*b+d,(j-h)*c+e,(i+h)*b+d,(j-g)*c+e,(i+h)*b+d,j*c+e),Q(a,(i+h)*b+d,(j+g)*c+e,(i+g)*b+d,(j+h)*c+e,i*b+d,(j+h)*c+e),Q(a,i*b+d,(j+h)*c+e,(i+h-.5*g)*b+d,(j+g)*c+e,(i+h-.5*g)*b+d,j*c+e),Q(a,(i+h-.5*g)*b+d,(j-g)*c+e,i*b+d,(j-h)*c+e,i*b+d,(j-h)*c+e),S(a),b=a.s,t.v(a),b},Email:function(a,b,c){return a=t.u(),P(a,0,0,!0),a.lineTo(1*b,0),a.lineTo(1*b,1*c),a.lineTo(0,1*c),a.lineTo(0,0),S(a),P(a,0,0,!1),a.lineTo(.5*b,.6*c),a.lineTo(1*b,0),a.moveTo(0,1*c),a.lineTo(.45*b,.54*c),a.moveTo(1*b,1*c),a.lineTo(.55*b,.54*c),a.jb(!1),b=a.s,t.v(a),b},Ethernet:function(a,b,c){return a=t.u(),P(a,.35*b,0,!0),a.lineTo(.65*b,0),a.lineTo(.65*b,.4*c),a.lineTo(.35*b,.4*c),a.lineTo(.35*b,0),S(a),P(a,.1*b,1*c,!0,!0),a.lineTo(.4*b,1*c),a.lineTo(.4*b,.6*c),a.lineTo(.1*b,.6*c),a.lineTo(.1*b,1*c),S(a),P(a,.6*b,1*c,!0,!0),a.lineTo(.9*b,1*c),a.lineTo(.9*b,.6*c),a.lineTo(.6*b,.6*c),a.lineTo(.6*b,1*c),S(a),P(a,0,.5*c,!1),a.lineTo(1*b,.5*c),a.moveTo(.5*b,.5*c),a.lineTo(.5*b,.4*c),a.moveTo(.75*b,.5*c),a.lineTo(.75*b,.6*c),a.moveTo(.25*b,.5*c),a.lineTo(.25*b,.6*c),a.jb(!1),b=a.s,t.v(a),b},Power:function(a,b,c){var d,e,f,g,h,i,j,k;return a=t.u(),d=K.za,e=.4*d,f=.4,g=t.N(),h=t.N(),i=t.N(),j=t.N(),K.ij(.5,.5-f,.5+e,.5-f,.5+f,.5-e,.5+f,.5,.5,g,g,h,i,j),k=t.qc(h.x,h.y),P(a,h.x*b,h.y*c,!0),Q(a,i.x*b,i.y*c,j.x*b,j.y*c,(.5+f)*b,.5*c),Q(a,(.5+f)*b,(.5+e)*c,(.5+e)*b,(.5+f)*c,.5*b,(.5+f)*c),Q(a,(.5-e)*b,(.5+f)*c,(.5-f)*b,(.5+e)*c,(.5-f)*b,.5*c),K.ij(.5-f,.5,.5-f,.5-e,.5-e,.5-f,.5,.5-f,.5,i,j,h,g,g),Q(a,i.x*b,i.y*c,j.x*b,j.y*c,h.x*b,h.y*c),e=.3*d,f=.3,K.ij(.5-f,.5,.5-f,.5-e,.5-e,.5-f,.5,.5-f,.5,i,j,h,g,g),a.lineTo(h.x*b,h.y*c),Q(a,j.x*b,j.y*c,i.x*b,i.y*c,(.5-f)*b,.5*c),Q(a,(.5-f)*b,(.5+e)*c,(.5-e)*b,(.5+f)*c,.5*b,(.5+f)*c),Q(a,(.5+e)*b,(.5+f)*c,(.5+f)*b,(.5+e)*c,(.5+f)*b,.5*c),K.ij(.5,.5-f,.5+e,.5-f,.5+f,.5-e,.5+f,.5,.5,g,g,h,i,j),Q(a,j.x*b,j.y*c,i.x*b,i.y*c,h.x*b,h.y*c),S(a),P(a,.45*b,0,!0),a.lineTo(.45*b,.5*c),a.lineTo(.55*b,.5*c),a.lineTo(.55*b,0),S(a),t.B(g),t.B(h),t.B(i),t.B(j),t.B(k),b=a.s,b.G=new L(.25,.55),b.H=new L(.75,.8),t.v(a),b},Fallout:function(a,b,c){var d,e;return a=t.u(),d=.5*K.za,P(a,0*b,.5*c,!0),Q(a,0*b,(.5-d)*c,(.5-d)*b,0*c,.5*b,0*c),Q(a,(.5+d)*b,0*c,1*b,(.5-d)*c,1*b,.5*c),Q(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c),Q(a,(.5-d)*b,1*c,0*b,(.5+d)*c,0*b,.5*c),e=d=0,P(a,(.3+d)*b,(.8+e)*c,!0,!0),a.lineTo((.5+d)*b,(.5+e)*c),a.lineTo((.1+d)*b,(.5+e)*c),a.lineTo((.3+d)*b,(.8+e)*c),d=.4,e=0,S(a),P(a,(.3+d)*b,(.8+e)*c,!0,!0),a.lineTo((.5+d)*b,(.5+e)*c),a.lineTo((.1+d)*b,(.5+e)*c),a.lineTo((.3+d)*b,(.8+e)*c),d=.2,e=-.3,S(a),P(a,(.3+d)*b,(.8+e)*c,!0,!0),a.lineTo((.5+d)*b,(.5+e)*c),a.lineTo((.1+d)*b,(.5+e)*c),a.lineTo((.3+d)*b,(.8+e)*c),S(a),b=a.s,b.Ac=ch,t.v(a),b},IrritationHazard:function(a,b,c){return a=t.u(),P(a,.2*b,0*c,!0),a.lineTo(.5*b,.3*c),a.lineTo(.8*b,0*c),a.lineTo(1*b,.2*c),a.lineTo(.7*b,.5*c),a.lineTo(1*b,.8*c),a.lineTo(.8*b,1*c),a.lineTo(.5*b,.7*c),a.lineTo(.2*b,1*c),a.lineTo(0*b,.8*c),a.lineTo(.3*b,.5*c),a.lineTo(0*b,.2*c),S(a),b=a.s,b.G=new L(.3,.3),b.H=new L(.7,.7),t.v(a),b},ElectricalHazard:function(a,b,c){return a=t.u(),P(a,.37,0*c,!0),a.lineTo(.5*b,.11*c),a.lineTo(.77*b,.04*c),a.lineTo(.33*b,.49*c),a.lineTo(1*b,.37*c),a.lineTo(.63*b,.86*c),a.lineTo(.77*b,.91*c),a.lineTo(.34*b,1*c),a.lineTo(.34*b,.78*c),a.lineTo(.44*b,.8*c),a.lineTo(.65*b,.56*c),a.lineTo(0*b,.68*c),S(a),b=a.s,t.v(a),b},FireHazard:function(a,b,c){return a=t.u(),P(a,.1*b,1*c,!0),Q(a,-.25*b,.63*c,.45*b,.44*c,.29*b,0*c),Q(a,.48*b,.17*c,.54*b,.35*c,.51*b,.42*c),Q(a,.59*b,.29*c,.58*b,.28*c,.59*b,.18*c),Q(a,.8*b,.34*c,.88*b,.43*c,.75*b,.6*c),Q(a,.87*b,.48*c,.88*b,.43*c,.88*b,.31*c),Q(a,1.17*b,.76*c,.82*b,.8*c,.9*b,1*c),S(a),b=a.s,b.G=new L(.05,.645),b.H=new L(.884,.908),t.v(a),b},BpmnActivityLoop:function(a,b,c){a=t.u();var d=.5*(4*(Math.SQRT2-1)/3);return P(a,(.5*Math.SQRT2/2+.5)*b,(1-(.5-.5*Math.SQRT2/2))*c,!1),Q(a,1*b,.7*c,1*b,.5*c,1*b,.5*c),Q(a,1*b,(.5-d+0)*c,(.5+d+0)*b,0*c,.5*b,0*c),Q(a,(.5-d+0)*b,0*c,0*b,(.5-d+0)*c,0*b,.5*c),Q(a,0*b,(.5+d+0)*c,(.5-d+0)*b,1*c,.35*b,.98*c),a.moveTo(.35*b,.8*c),a.lineTo(.35*b,1*c),a.lineTo(.15*b,1*c),b=a.s,t.v(a),b},BpmnActivityParallel:function(a,b,c){return a=t.u(),P(a,0,0,!1),a.lineTo(0,1*c),a.moveTo(.5*b,0),a.lineTo(.5*b,1*c),a.moveTo(1*b,0),a.lineTo(1*b,1*c),b=a.s,t.v(a),b},BpmnActivitySequential:function(a,b,c){return a=t.u(),P(a,0,0,!1),a.lineTo(1*b,0),a.moveTo(0,.5*c),a.lineTo(1*b,.5*c),a.moveTo(0,1*c),a.lineTo(1*b,1*c),b=a.s,t.v(a),b},BpmnActivityAdHoc:function(a,b,c){return a=t.u(),P(a,0,0,!1),P(a,1*b,1*c,!1),P(a,0,.5*c,!1),Q(a,.2*b,.35*c,.3*b,.35*c,.5*b,.5*c),Q(a,.7*b,.65*c,.8*b,.65*c,1*b,.5*c),b=a.s,t.v(a),b},BpmnActivityCompensation:function(a,b,c){return a=t.u(),P(a,0,.5*c,!0),a.lineTo(.5*b,0),a.lineTo(.5*b,.5*c),a.lineTo(1*b,1*c),a.lineTo(1*b,0),a.lineTo(.5*b,.5*c),a.lineTo(.5*b,1*c),S(a),b=a.s,t.v(a),b},BpmnTaskMessage:function(a,b,c){return a=t.u(),P(a,0,.2*c,!0),a.lineTo(1*b,.2*c),a.lineTo(1*b,.8*c),a.lineTo(0,.8*c),a.lineTo(0,.8*c),S(a),P(a,0,.2*c,!1),a.lineTo(.5*b,.5*c),a.lineTo(1*b,.2*c),a.jb(!1),b=a.s,t.v(a),b},BpmnTaskScript:function(a,b,c){return a=t.u(),P(a,.7*b,1*c,!0),a.lineTo(.3*b,1*c),Q(a,.6*b,.5*c,0,.5*c,.3*b,0),a.lineTo(.7*b,0),Q(a,.4*b,.5*c,1*b,.5*c,.7*b,1*c),S(a),P(a,.45*b,.73*c,!1),a.lineTo(.7*b,.73*c),a.moveTo(.38*b,.5*c),a.lineTo(.63*b,.5*c),a.moveTo(.31*b,.27*c),a.lineTo(.56*b,.27*c),a.jb(!1),b=a.s,t.v(a),b},BpmnTaskUser:function(a,b,c){a=t.u(),P(a,0,0,!1),P(a,.335*b,(1-.555)*c,!0),a.lineTo(.335*b,.595*c),a.lineTo(.665*b,.595*c),a.lineTo(.665*b,(1-.555)*c),Q(a,.88*b,.46*c,.98*b,.54*c,1*b,.68*c),a.lineTo(1*b,1*c),a.lineTo(0,1*c),a.lineTo(0,.68*c),Q(a,.02*b,.54*c,.12*b,.46*c,.335*b,(1-.555)*c),a.lineTo(.365*b,.405*c);var d=.5-.285,e=Math.PI/4,f=4*(1-Math.cos(e))/(3*Math.sin(e)),e=f*d,f=f*d;return Q(a,(.5-(e+d)/2)*b,(d+(d+f)/2)*c,(.5-d)*b,(d+f)*c,(.5-d)*b,d*c),Q(a,(.5-d)*b,(d-f)*c,(.5-e)*b,(d-d)*c,.5*b,(d-d)*c),Q(a,(.5+e)*b,(d-d)*c,(.5+d)*b,(d-f)*c,(.5+d)*b,d*c),Q(a,(.5+d)*b,(d+f)*c,(.5+(e+d)/2)*b,(d+(d+f)/2)*c,.635*b,.405*c),a.lineTo(.635*b,.405*c),a.lineTo(.665*b,(1-.555)*c),a.lineTo(.665*b,.595*c),a.lineTo(.335*b,.595*c),P(a,.2*b,1*c,!1),a.lineTo(.2*b,.8*c),P(a,.8*b,1*c,!1),a.lineTo(.8*b,.8*c),b=a.s,t.v(a),b},BpmnEventConditional:function(a,b,c){return a=t.u(),P(a,.1*b,0,!0),a.lineTo(.9*b,0),a.lineTo(.9*b,1*c),a.lineTo(.1*b,1*c),S(a),P(a,.2*b,.2*c,!1),a.lineTo(.8*b,.2*c),a.moveTo(.2*b,.4*c),a.lineTo(.8*b,.4*c),a.moveTo(.2*b,.6*c),a.lineTo(.8*b,.6*c),a.moveTo(.2*b,.8*c),a.lineTo(.8*b,.8*c),a.jb(!1),b=a.s,t.v(a),b},BpmnEventError:function(a,b,c){return a=t.u(),P(a,0,1*c,!0),a.lineTo(.33*b,0),a.lineTo(.66*b,.5*c),a.lineTo(1*b,0),a.lineTo(.66*b,1*c),a.lineTo(.33*b,.5*c),S(a),b=a.s,t.v(a),b},BpmnEventEscalation:function(a,b,c){return a=t.u(),P(a,0,0,!1),P(a,1*b,1*c,!1),P(a,.1*b,1*c,!0),a.lineTo(.5*b,0),a.lineTo(.9*b,1*c),a.lineTo(.5*b,.5*c),S(a),b=a.s,t.v(a),b},BpmnEventTimer:function(a,b,c){a=t.u();var d=.5*K.za;return P(a,1*b,.5*c,!0),Q(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c),Q(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c),Q(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0),Q(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c),P(a,.5*b,0,!1),a.lineTo(.5*b,.15*c),a.moveTo(.5*b,1*c),a.lineTo(.5*b,.85*c),a.moveTo(0,.5*c),a.lineTo(.15*b,.5*c),a.moveTo(1*b,.5*c),a.lineTo(.85*b,.5*c),a.moveTo(.5*b,.5*c),a.lineTo(.58*b,.1*c),a.moveTo(.5*b,.5*c),a.lineTo(.78*b,.54*c),a.jb(!1),b=a.s,b.Ac=ch,t.v(a),b}},K.hB={};for(um in K.pj)K.pj[um.toLowerCase()]=um;K.xw={"":"",Standard:"F1 m 0,0 l 8,4 -8,4 2,-4 z",Backward:"F1 m 8,0 l -2,4 2,4 -8,-4 z",Triangle:"F1 m 0,0 l 8,4.62 -8,4.62 z",BackwardTriangle:"F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",Boomerang:"F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",BackwardBoomerang:"F1 m 8,0 l -8,4 8,4 -4,-4 4,-4 z",SidewaysV:"m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",BackwardV:"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z",OpenTriangle:"m 0,0 l 8,4 -8,4",BackwardOpenTriangle:"m 8,0 l -8,4 8,4",OpenTriangleLine:"m 0,0 l 8,4 -8,4 m 8.5,0 l 0,-8",BackwardOpenTriangleLine:"m 8,0 l  -8,4 8,4 m -8.5,0 l 0,-8",OpenTriangleTop:"m 0,0 l 8,4 m 0,4",BackwardOpenTriangleTop:"m 8,0 l -8,4 m 0,4",OpenTriangleBottom:"m 0,8 l 8,-4",BackwardOpenTriangleBottom:"m 0,4 l 8,4",HalfTriangleTop:"F1 m 0,0 l 0,4 8,0 z m 0,8",BackwardHalfTriangleTop:"F1 m 8,0 l 0,4 -8,0 z m 0,8",HalfTriangleBottom:"F1 m 0,4 l 0,4 8,-4 z",BackwardHalfTriangleBottom:"F1 m 8,4 l 0,4 -8,-4 z",ForwardSemiCircle:"m 4,0 b 270 180 0 4 4",BackwardSemiCircle:"m 4,8 b 90 180 0 -4 4",Feather:"m 0,0 l 3,4 -3,4",BackwardFeather:"m 3,0 l -3,4 3,4",DoubleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardDoubleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4",TripleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardTripleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4 m 3,-8 l -3,4 3,4",ForwardSlash:"m 0,8 l 5,-8",BackSlash:"m 0,0 l 5,8",DoubleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8",DoubleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8",TripleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",TripleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",Fork:"m 0,4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4",LineFork:"m 0,0 l 0,8 m 0,-4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardLineFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4 m 8,-8 l 0,8",CircleFork:"F1 m 6,4 b 0 360 -3 0 3 z m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",CircleLineFork:"F1 m 6,4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleLineFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3",Circle:"F1 m 8,4 b 0 360 -4 0 4 z",Block:"F1 m 0,0 l 0,8 8,0 0,-8 z",StretchedDiamond:"F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",Diamond:"F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",Chevron:"F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",StretchedChevron:"F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",NormalArrow:"F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",X:"m 0,0 l 8,8 m 0,-8 l -8,8",TailedNormalArrow:"F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",DoubleTriangle:"F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",BigEndArrow:"F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",ConcaveTailArrow:"F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",RoundedTriangle:"F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",SimpleArrow:"F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",AccelerationArrow:"F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",BoxArrow:"F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",TriangleLine:"F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",CircleEndedArrow:"F1 m 10,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -3 0 3 z",DynamicWidthArrow:"F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",EquilibriumArrow:"m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",FastForward:"F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",Kite:"F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",HalfArrowTop:"F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",HalfArrowBottom:"F1 m 0,8 l 4,-4 4,0 -8,4 z",OpposingDirectionDoubleArrow:"F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",PartialDoubleTriangle:"F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",LineCircle:"F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",DoubleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",TripleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",CircleLine:"F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",DiamondCircle:"F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",PlusCircle:"F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m -4 -4 l 0 8",OpenRightTriangleTop:"m 8,0 l 0,4 -8,0 m 0,4",OpenRightTriangleBottom:"m 8,8 l 0,-4 -8,0",Line:"m 0,0 l 0,8",DoubleLine:"m 0,0 l 0,8 m 2,0 l 0,-8",TripleLine:"m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",PentagonArrow:"F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z"},K.Sm={},K.sK=function(){var a,b;if(K.xw){for(a in K.xw)b=ed(K.xw[a],!1),K.Sm[a]=b,a.toLowerCase()!==a&&(K.Sm[a.toLowerCase()]=a);K.xw=void 0}},K.uE=function(a){K.sK();var b=K.Sm[a];if(void 0===b){if(b=a.toLowerCase(),"none"===b)return"None";b=K.Sm[b]}return"string"==typeof b?b:b instanceof Pc?a:null},W.FigureGenerators=K.pj,W.ArrowheadGeometries=K.Sm,t.ka("Part",x),t.Qa(x,C),x.prototype.cloneProtected=function(a){C.prototype.cloneProtected.call(this,a),a.Z=49152|-4097&this.Z,a.Fh=this.Fh,a.Xk=this.Xk,a.yr=this.yr,a.xs=this.xs,a.ks=this.ks,a.ns=this.ns,a.zs=this.zs,a.ys=this.ys,a.Yg=null,a.ms=this.ms,a.ls.assign(this.ls),a.os=this.os,a.te=this.te,a.Mq=this.Mq,a.jh.assign(this.jh),a.Fr=this.Fr,a.Gr=this.Gr.ba(),a.Qr=this.Qr.ba(),a.Ir=this.Ir.ba(),a.Wq=this.Wq,a.zr=this.zr,a.Jm.assign(this.Jm),a.Im=this.Im,a.Hm=this.Hm},x.prototype.ki=function(a){C.prototype.ki.call(this,a),tk(a),a.Gm=null,a.Lo=null,a.Mo=null,a.$k=null,a.Uj=null},x.prototype.toString=function(){var a=t.Hg(Object.getPrototypeOf(this))+"#"+t.ud(this);return this.data&&(a+="("+na(this.data)+")"),a},x.LayoutNone=0,x.LayoutAdded=cj=1,x.LayoutRemoved=ij=2,x.LayoutShown=4,x.LayoutHidden=8,x.LayoutNodeSized=16,x.LayoutGroupLayout=Oj=32,x.LayoutNodeReplaced=64,x.LayoutStandard=vm=64|(28|(cj|ij)|Oj),x.prototype.yn=function(a,b,c,d,e,f,g){var h=this.h;null!==h&&(a===Md&&"elements"===b?e instanceof C&&dj(e,function(a){ej(h,a)}):a===Nd&&"elements"===b&&e instanceof C&&dj(e,function(a){hj(h,a)}),h.Oc(a,b,c,d,e,f,g))},x.prototype.updateTargetBindings=x.prototype.Wb=function(a){var b,c,d;if(C.prototype.Wb.call(this,a),null!==this.data)for(a=this.va.n,b=a.length,c=0;b>c;c++)d=a[c],d instanceof C&&dj(d,function(a){null!==a.data&&a.Wb()})},x.prototype.updateModelDataReferences=function(){var b,c,d,e,a=this.data;null===a||this instanceof ea||(b=this.h,null!==b&&(c=b.ea,c instanceof T&&(d=c.hn(a),b=b.iJ(d),e=this.fb,b!==e&&(b=null!==e?c.Lb(e.data):void 0,e=c.wn,"function"==typeof e?e(a,b):a[e]=b,c.Mx(a,d)))))},t.A(x,{tw:"adornments"},function(){return null===this.Yg?t.jg:this.Yg.NF}),x.prototype.findAdornment=x.prototype.pp=function(a){e&&t.i(a,"string",x,"findAdornment:category");var b=this.Yg;return null===b?null:b.Da(a)},x.prototype.addAdornment=x.prototype.il=function(a,b){var c,d,f;null!==b&&(e&&(t.i(a,"string",x,"addAdornment:category"),t.l(b,ea,x,"addAdornment:ad")),c=null,d=this.Yg,null!==d&&(c=d.Da(a)),c!==b&&(null!==c&&(f=c.h,null!==f&&f.remove(c)),null===d&&(this.Yg=d=new wa("string",ea)),b.Fh!==a&&(b.ed=a),d.add(a,b),c=this.h,null!==c&&(c.add(b),b.data=this.data)))},x.prototype.removeAdornment=x.prototype.Hl=function(a){var b,c,d;e&&t.i(a,"string",x,"removeAdornment:category"),b=this.Yg,null!==b&&(c=b.Da(a),null!==c&&(d=c.h,null!==d&&d.remove(c)),b.remove(a),0===b.count&&(this.Yg=null))},x.prototype.clearAdornments=x.prototype.Yf=function(){var b,c,a=this.Yg;if(null!==a){for(b=t.Hb(),a=a.k;a.next();)b.push(a.key);for(a=b.length,c=0;a>c;c++)this.Hl(b[c]);t.Ca(b)}},x.prototype.updateAdornments=function(){var b,c,d,a=this.h;if(null!==a){for(wm(this,a),a=a.Cb.lf.n,b=a.length,c=0;b>c;c++)d=a[c],d.isEnabled&&d.updateAdornments(this);for(a=this.tw;a.next();)a.value.ja()}},t.A(x,{layer:"layer"},function(){return this.Co}),t.A(x,{h:"diagram"},function(){var a=this.Co;return null!==a?a.h:null}),t.g(x,"layerName",x.prototype.Ne),t.defineProperty(x,{Ne:"layerName"},function(){return this.Xk},function(a){var c,d,e,b=this.Xk;b!==a&&(t.i(a,"string",x,"layerName"),c=this.h,(null===c||null!==c.sl(a)&&!c.Mn)&&(this.Xk=a,this.j("layerName",b,a),b=this.layer,null!==b&&b.name!==a&&(c=b.h,null!==c&&(a=c.sl(a),null!==a&&a!==b))&&(d=b.df(-1,this,!0),d>=0&&c.Oc(Nd,"parts",b,this,null,d,!0),d=a.Bp(99999999,this,!0),d>=0&&c.Oc(Md,"parts",a,null,this,!0,d),d=this.Ip,null!==d&&(e=c.Sa,c.Sa=!0,d(this,b,a),c.Sa=e))))}),t.g(x,"layerChanged",x.prototype.Ip),t.defineProperty(x,{Ip:"layerChanged"},function(){return this.yr},function(a){var b=this.yr;b!==a&&(null!==a&&t.i(a,"function",x,"layerChanged"),this.yr=a,this.j("layerChanged",b,a))}),t.A(x,{Dc:"isTemporary"},function(){return null!==this.Co?this.Co.Dc:!1}),t.g(x,"location",x.prototype.location),t.defineProperty(x,{location:"location"},function(){return this.jh},function(a){var c,d,f,g,h,b=this.jh;b.O(a)||this instanceof B||(e&&t.l(a,E,x,"location"),a=a.ba(),c=this.h,this.jh=a,!1===Ui(this)&&(d=this.Pa,f=a.x-b.x,g=a.y-b.y,h=d.copy(),d.p(h.x+f,h.y+g),Nk(this,!0),!d.O(h)&&c&&this.j("position",h,d)),this.j("location",b,a))}),t.A(x,{Zb:"locationObject"},function(){if(null===this.$k){var a=this.Jt;void 0!==a&&null!==a&&""!==a?(a=this.we(a),this.$k=null!==a?a:this):this.$k=this instanceof ea&&this.ga!==Jg&&null!==this.Nb?this.Nb:this}return this.$k.visible?this.$k:this}),t.g(x,"minLocation",x.prototype.cG),t.defineProperty(x,{cG:"minLocation"},function(){return this.Qr},function(a){var b=this.Qr;b.O(a)||(e&&t.l(a,E,x,"minLocation"),this.Qr=a=a.ba(),this.j("minLocation",b,a))}),t.g(x,"maxLocation",x.prototype.XF),t.defineProperty(x,{XF:"maxLocation"},function(){return this.Ir},function(a){var b=this.Ir;b.O(a)||(e&&t.l(a,E,x,"maxLocation"),this.Ir=a=a.ba(),this.j("maxLocation",b,a))}),t.g(x,"locationObjectName",x.prototype.Jt),t.defineProperty(x,{Jt:"locationObjectName"},function(){return this.Fr},function(a){var b=this.Fr;b!==a&&(e&&t.i(a,"string",x,"locationObjectName"),this.Fr=a,this.$k=null,Gk(this),this.j("locationObjectName",b,a))}),t.g(x,"locationSpot",x.prototype.hf),t.defineProperty(x,{hf:"locationSpot"},function(){return this.Gr},function(a){var b=this.Gr;b.O(a)||(e&&(t.l(a,L,x,"locationSpot"),a.Cd()||t.m("Part.locationSpot must be a specific Spot value, not: "+a)),this.Gr=a=a.ba(),Gk(this),this.j("locationSpot",b,a))}),x.prototype.move=x.prototype.move=function(a){this.position=a},x.prototype.moveTo=x.prototype.moveTo=function(a,b){var c=t.qc(a,b);this.move(c),t.B(c)},x.prototype.isVisible=x.prototype.Va=function(){var a,b,c;if(!this.visible)return!1;if(a=this.layer,null!==a&&!a.visible)return!1;if(a=this.fb,!(null===a||a.ie&&a.Va()))return!1;if(this instanceof y){if(a=this.xA(),null!==a&&!a.Xc)return!1;if(a=this.Dd,null!==a)return a.Va()}else if(this instanceof B){if(b=!0,c=this.h,null!==c&&(b=c.vd),c=this.ca,null!==c){if(this.Jc&&b&&!c.Xc)return!1;if(c=c.findVisibleNode(),null===c||c===a)return!1}if(c=this.fa,null!==c){if(this.Jc&&!b&&!c.Xc)return!1;if(b=c.findVisibleNode(),null===b||b===a)return!1}}return!0},x.prototype.kf=function(a){a?(this.M(4),xm(this),this.na(),a=this.h,null!==a&&a.pg.add(this)):(this.M(8),this.Yf())},x.prototype.findObject=x.prototype.we=function(a){var b,c,d,e,f;if(this.name===a)return this;if(null===this.Uj&&(this.Uj={}),b=this.Uj,void 0!==b[a])return b[a];for(c=this.va.n,d=c.length,e=0;d>e;e++){if(f=c[e],f.name===a)return b[a]=f;if(f instanceof C)if(null===f.Li&&null===f.rg){if(f=f.we(a),null!==f)return b[a]=f}else if(Xl(f)&&(f=f.va.gb(),null!==f&&f.name===a))return b[a]=f}return b[a]=null},x.prototype.ensureBounds=x.prototype.zf=function(){wh(this,1/0,1/0),this.Sc()},aa=x.prototype,aa.Sc=function(){var a,b,c,d;pk(this),!1===Ui(this)?zm(this):(a=t.Nf(),a.assign(this.Pb),Dk(this),this.Pb.Ra(),b=Wh(this),this.ik(0,0,this.bd.width,this.bd.height),c=this.position,Am(this,c,this.location),d=this.Pb,d.x=c.x,d.y=c.y,d.freeze(),pk(this),qk(this,a,d),a.O(d)?this.Kf(b):!this.Td()||K.I(a.width,d.width)&&K.I(a.height,d.height)||0<=this.dD&&this.M(16),t.oc(a),ym(this,!1))},aa.LG=function(a,b){var c,d;return!a.P()||this instanceof B?!1:(!this.h||this instanceof ea||(c=this.h.yi,c.zd&&Mh(c,this,b.copy(),a.copy())),c=this.jh,d=c.copy(),!1===Ui(this)?(c.p(c.x+(a.x-this.Pa.x),c.y+(a.y-this.Pa.y)),this.Pa=a,Nk(this,!0),pk(this),zm(this),c.O(d)||this.j("location",d,c)):(this.Pa=a,c.p(0/0,0/0)),!0)},aa.MG=function(a,b){var c=this.jh;!1===Ui(this)?(this.jh.p(c.x+a-this.Pa.x,c.y+b-this.Pa.y),this.Pa.p(a,b),Nk(this,!1),pk(this)):(c.p(0/0,0/0),this.Pa.p(a,b))},aa.Bl=function(){return!0},aa.Td=function(){return!0},t.g(x,"category",x.prototype.ed),t.defineProperty(x,{ed:"category"},function(){return this.Fh},function(a){var c,d,e,b=this.Fh;b!==a&&(t.i(a,"string",x,"category"),this.Fh=a,this.j("category",b,a),c=this.h,d=this.data,null!==c&&null!==d&&(e=c.ea,this instanceof B?(e instanceof T?e.JG(d,a):e instanceof be&&e.qK(d,a),c=c.findTemplateForLinkData(d,a),c instanceof B&&(bf(c),c=c.copy(),c instanceof B&&Cm(this,c,b,a))):this instanceof ea||(null!==e&&e.Jx(d,a),c=c.findTemplateForNodeData(d,a),c instanceof x&&(bf(c),c=c.copy(),c instanceof x&&!(c instanceof B)&&(c.location=this.location,Cm(this,c,b,a))))),this instanceof ea&&(a=this.ii,null!==a&&(c=a.Yg,null!==c&&c.remove(b),a.il(this.Fh,this))))}),x.prototype.canCopy=function(){if(!this.oA)return!1;var a=this.layer;return null===a?!0:a.ej?(a=a.h,null===a?!0:a.ej?!0:!1):!1},x.prototype.canDelete=function(){if(!this.qA)return!1;var a=this.layer;return null===a?!0:a.ll?(a=a.h,null===a?!0:a.ll?!0:!1):!1},x.prototype.canEdit=function(){if(!this.GB)return!1;var a=this.layer;return null===a?!0:a.dp?(a=a.h,null===a?!0:a.dp?!0:!1):!1},x.prototype.canGroup=function(){if(!this.GA)return!1;var a=this.layer;return null===a?!0:a.$o?(a=a.h,null===a?!0:a.$o?!0:!1):!1},x.prototype.canMove=function(){if(!this.ZA)return!1;var a=this.layer;return null===a?!0:a.fk?(a=a.h,null===a?!0:a.fk?!0:!1):!1},x.prototype.canReshape=function(){if(!this.rB)return!1;var a=this.layer;return null===a?!0:a.ap?(a=a.h,null===a?!0:a.ap?!0:!1):!1},x.prototype.canResize=function(){if(!this.sB)return!1;var a=this.layer;return null===a?!0:a.bp?(a=a.h,null===a?!0:a.bp?!0:!1):!1},x.prototype.canRotate=function(){if(!this.tB)return!1;var a=this.layer;return null===a?!0:a.cp?(a=a.h,null===a?!0:a.cp?!0:!1):!1},x.prototype.canSelect=function(){if(!this.uk)return!1;var a=this.layer;return null===a?!0:a.We?(a=a.h,null===a?!0:a.We?!0:!1):!1},t.g(x,"copyable",x.prototype.oA),t.defineProperty(x,{oA:"copyable"},function(){return 0!==(1&this.Z)},function(a){var b=0!==(1&this.Z);b!==a&&(e&&t.i(a,"boolean",x,"copyable"),this.Z^=1,this.j("copyable",b,a))}),t.g(x,"deletable",x.prototype.qA),t.defineProperty(x,{qA:"deletable"},function(){return 0!==(2&this.Z)
},function(a){var b=0!==(2&this.Z);b!==a&&(e&&t.i(a,"boolean",x,"deletable"),this.Z^=2,this.j("deletable",b,a))}),t.g(x,"textEditable",x.prototype.GB),t.defineProperty(x,{GB:"textEditable"},function(){return 0!==(4&this.Z)},function(a){var b=0!==(4&this.Z);b!==a&&(e&&t.i(a,"boolean",x,"textEditable"),this.Z^=4,this.j("textEditable",b,a),this.updateAdornments())}),t.g(x,"groupable",x.prototype.GA),t.defineProperty(x,{GA:"groupable"},function(){return 0!==(8&this.Z)},function(a){var b=0!==(8&this.Z);b!==a&&(e&&t.i(a,"boolean",x,"groupable"),this.Z^=8,this.j("groupable",b,a))}),t.g(x,"movable",x.prototype.ZA),t.defineProperty(x,{ZA:"movable"},function(){return 0!==(16&this.Z)},function(a){var b=0!==(16&this.Z);b!==a&&(e&&t.i(a,"boolean",x,"movable"),this.Z^=16,this.j("movable",b,a))}),t.g(x,"selectionAdorned",x.prototype.wB),t.defineProperty(x,{wB:"selectionAdorned"},function(){return 0!==(32&this.Z)},function(a){var b=0!==(32&this.Z);b!==a&&(e&&t.i(a,"boolean",x,"selectionAdorned"),this.Z^=32,this.j("selectionAdorned",b,a),this.updateAdornments())}),t.g(x,"isInDocumentBounds",x.prototype.lx),t.defineProperty(x,{lx:"isInDocumentBounds"},function(){return 0!==(64&this.Z)},function(a){var b=0!==(64&this.Z);b!==a&&(e&&t.i(a,"boolean",x,"isInDocumentBounds"),this.Z^=64,this.j("isInDocumentBounds",b,a))}),t.g(x,"isLayoutPositioned",x.prototype.nx),t.defineProperty(x,{nx:"isLayoutPositioned"},function(){return 0!==(128&this.Z)},function(a){var b=0!==(128&this.Z);b!==a&&(e&&t.i(a,"boolean",x,"isLayoutPositioned"),this.Z^=128,this.j("isLayoutPositioned",b,a),this.M(a?4:8))}),t.g(x,"selectable",x.prototype.uk),t.defineProperty(x,{uk:"selectable"},function(){return 0!==(256&this.Z)},function(a){var b=0!==(256&this.Z);b!==a&&(e&&t.i(a,"boolean",x,"selectable"),this.Z^=256,this.j("selectable",b,a),this.updateAdornments())}),t.g(x,"reshapable",x.prototype.rB),t.defineProperty(x,{rB:"reshapable"},function(){return 0!==(512&this.Z)},function(a){var b=0!==(512&this.Z);b!==a&&(e&&t.i(a,"boolean",x,"reshapable"),this.Z^=512,this.j("reshapable",b,a),this.updateAdornments())}),t.g(x,"resizable",x.prototype.sB),t.defineProperty(x,{sB:"resizable"},function(){return 0!==(1024&this.Z)},function(a){var b=0!==(1024&this.Z);b!==a&&(e&&t.i(a,"boolean",x,"resizable"),this.Z^=1024,this.j("resizable",b,a),this.updateAdornments())}),t.g(x,"rotatable",x.prototype.tB),t.defineProperty(x,{tB:"rotatable"},function(){return 0!==(2048&this.Z)},function(a){var b=0!==(2048&this.Z);b!==a&&(e&&t.i(a,"boolean",x,"rotatable"),this.Z^=2048,this.j("rotatable",b,a),this.updateAdornments())}),t.g(x,"isSelected",x.prototype.ib),t.defineProperty(x,{ib:"isSelected"},function(){return 0!==(4096&this.Z)},function(a){var c,d,f,b=0!==(4096&this.Z);b!==a&&(e&&t.i(a,"boolean",x,"isSelected"),c=this.h,a&&(!this.canSelect()||null!==c&&c.selection.count>=c.YF)||(this.Z^=4096,d=!1,null!==c&&(d=c.ab,c.ab=!0,f=c.selection,f.Ra(),a?f.add(this):f.remove(this),f.freeze()),this.j("isSelected",b,a),xm(this),a=this.HG,null!==a&&a(this),null!==c&&(c.ze(),c.ab=d)))}),t.g(x,"isHighlighted",x.prototype.Jg),t.defineProperty(x,{Jg:"isHighlighted"},function(){return 0!==(524288&this.Z)},function(a){var c,b=0!==(524288&this.Z);b!==a&&(e&&t.i(a,"boolean",x,"isHighlighted"),this.Z^=524288,c=this.h,null!==c&&(c=c.ex,c.Ra(),a?c.add(this):c.remove(this),c.freeze()),this.j("isHighlighted",b,a),this.na())}),t.g(x,"isShadowed",x.prototype.qi),t.defineProperty(x,{qi:"isShadowed"},function(){return 0!==(8192&this.Z)},function(a){var b=0!==(8192&this.Z);b!==a&&(e&&t.i(a,"boolean",x,"isShadowed"),this.Z^=8192,this.j("isShadowed",b,a),this.na())}),x.prototype.Kf=function(a){this.Z=a?131072|this.Z:-131073&this.Z},t.g(x,"isAnimated",x.prototype.JA),t.defineProperty(x,{JA:"isAnimated"},function(){return 0!==(262144&this.Z)},function(a){var b=0!==(262144&this.Z);b!==a&&(e&&t.i(a,"boolean",x,"isAnimated"),this.Z^=262144,this.j("isAnimated",b,a))}),t.g(x,"selectionObjectName",x.prototype.eu),t.defineProperty(x,{eu:"selectionObjectName"},function(){return this.zs},function(a){var b=this.zs;b!==a&&(e&&t.i(a,"string",x,"selectionObjectName"),this.zs=a,this.Gm=null,this.j("selectionObjectName",b,a))}),t.g(x,"selectionAdornmentTemplate",x.prototype.GG),t.defineProperty(x,{GG:"selectionAdornmentTemplate"},function(){return this.xs},function(a){var b=this.xs;b!==a&&(e&&t.l(a,ea,x,"selectionAdornmentTemplate"),this instanceof B&&(a.type=Jg),this.xs=a,this.j("selectionAdornmentTemplate",b,a))}),t.A(x,{An:"selectionObject"},function(){if(null===this.Gm){var a=this.eu;null!==a&&""!==a?(a=this.we(a),this.Gm=null!==a?a:this):this instanceof B?(a=this.path,this.Gm=null!==a?a:this):this.Gm=this}return this.Gm}),t.g(x,"selectionChanged",x.prototype.HG),t.defineProperty(x,{HG:"selectionChanged"},function(){return this.ys},function(a){var b=this.ys;b!==a&&(null!==a&&t.i(a,"function",x,"selectionChanged"),this.ys=a,this.j("selectionChanged",b,a))}),t.g(x,"resizeAdornmentTemplate",x.prototype.tG),t.defineProperty(x,{tG:"resizeAdornmentTemplate"},function(){return this.ks},function(a){var b=this.ks;b!==a&&(e&&t.l(a,ea,x,"resizeAdornmentTemplate"),this.ks=a,this.j("resizeAdornmentTemplate",b,a))}),t.g(x,"resizeObjectName",x.prototype.wG),t.defineProperty(x,{wG:"resizeObjectName"},function(){return this.ms},function(a){var b=this.ms;b!==a&&(e&&t.i(a,"string",x,"resizeObjectName"),this.ms=a,this.Lo=null,this.j("resizeObjectName",b,a))}),t.A(x,{vG:"resizeObject"},function(){if(null===this.Lo){var a=this.wG;null!==a&&""!==a?(a=this.we(a),this.Lo=null!==a?a:this):this.Lo=this}return this.Lo}),t.g(x,"resizeCellSize",x.prototype.uG),t.defineProperty(x,{uG:"resizeCellSize"},function(){return this.ls},function(a){var b=this.ls;b.O(a)||(e&&t.l(a,ra,x,"resizeCellSize"),this.ls=a=a.ba(),this.j("resizeCellSize",b,a))}),t.g(x,"rotateAdornmentTemplate",x.prototype.yG),t.defineProperty(x,{yG:"rotateAdornmentTemplate"},function(){return this.ns},function(a){var b=this.ns;b!==a&&(e&&t.l(a,ea,x,"rotateAdornmentTemplate"),this.ns=a,this.j("rotateAdornmentTemplate",b,a))}),t.g(x,"rotateObjectName",x.prototype.AG),t.defineProperty(x,{AG:"rotateObjectName"},function(){return this.os},function(a){var b=this.os;b!==a&&(e&&t.i(a,"string",x,"rotateObjectName"),this.os=a,this.Mo=null,this.j("rotateObjectName",b,a))}),t.A(x,{zG:"rotateObject"},function(){if(null===this.Mo){var a=this.AG;null!==a&&""!==a?(a=this.we(a),this.Mo=null!==a?a:this):this.Mo=this}return this.Mo}),t.g(x,"text",x.prototype.text),t.defineProperty(x,{text:"text"},function(){return this.te},function(a){var b=this.te;b!==a&&(e&&t.i(a,"string",x,"text"),this.te=a,this.j("text",b,a))}),t.g(x,"containingGroup",x.prototype.fb),t.defineProperty(x,{fb:"containingGroup"},function(){return this.Mk},function(a){var b,c,d,f;if(this.Td()){if(b=this.Mk,b!==a){if(e&&null!==a&&t.l(a,z,x,"containingGroup"),null===a||this!==a&&!a.Al(this)||(this===a&&t.m("Cannot make a Group a member of itself: "+this.toString()),t.m("Cannot make a Group indirectly contain itself: "+this.toString()+" already contains "+a.toString())),this.M(ij),c=this.h,null!==b?Dm(b,this):this instanceof z&&null!==c&&c.gl.remove(this),this.Mk=a,null!==a?Em(a,this):this instanceof z&&null!==c&&c.gl.add(this),this.M(cj),null!==c&&(d=this.data,f=c.ea,null!==d&&f instanceof T&&f.Mx(d,f.Lb(null!==a?a.data:null))),d=this.lA,null!==d&&(f=!0,null!==c&&(f=c.Sa,c.Sa=!0),d(this,b,a),null!==c&&(c.Sa=f)),this instanceof z)for(c=new I(x),$e(c,this,!0,0),c=c.k;c.next();)if(d=c.value,d instanceof y)for(d=d.Vd;d.next();)f=d.value,Kj(f);if(this instanceof y)for(d=this.Vd;d.next();)f=d.value,Kj(f);this.j("containingGroup",b,a),null!==a&&a.Ox()}}else t.m("cannot set the Part.containingGroup of a Link or Adornment")}),x.prototype.zt=function(a){var b=this.Mk;null===b||a||Em(b,this)},x.prototype.At=function(a){var b=this.Mk;null===b||a||Dm(b,this)},x.prototype.cn=function(){var b,a=this.data;null!==a&&(b=this.h,null!==b&&(b=b.ea,null!==b&&b.Fx(a)))},t.g(x,"containingGroupChanged",x.prototype.lA),t.defineProperty(x,{lA:"containingGroupChanged"},function(){return this.Mq},function(a){var b=this.Mq;b!==a&&(null!==a&&t.i(a,"function",x,"containingGroupChanged"),this.Mq=a,this.j("containingGroupChanged",b,a))}),x.prototype.findTopLevelPart=function(){return Fm(this,this)},t.A(x,{Hp:"isTopLevel"},function(){return null!==this.fb||this instanceof y&&this.oi?!1:!0}),x.prototype.isMemberOf=x.prototype.Al=function(a){return a instanceof z?Gm(this,this,a):!1},x.prototype.findCommonContainingGroup=x.prototype.hJ=function(a){return Hm(this,this,a)},t.g(x,"layoutConditions",x.prototype.QF),t.defineProperty(x,{QF:"layoutConditions"},function(){return this.zr},function(a){var b=this.zr;b!==a&&(e&&t.i(a,"number",x,"layoutConditions"),this.zr=a,this.j("layoutConditions",b,a))}),x.prototype.canLayout=function(){if(!this.nx||!this.Va())return!1;var a=this.layer;return null!==a&&a.Dc||this instanceof y&&this.oi?!1:!0},x.prototype.invalidateLayout=x.prototype.M=function(a){var b,c;void 0===a&&(a=16777215),this.nx&&0!==(a&this.QF)?(b=this.layer,null!==b&&b.Dc||this instanceof y&&this.oi?b=!1:(b=this.h,b=null!==b&&b.ma.yb?!1:!0)):b=!1,b&&(b=this.Mk,null!==b?(c=b.ic,null!==c?c.M():b.M(a)):(a=this.h,null!==a&&(c=a.ic,null!==c&&c.M())))},t.g(x,"dragComputation",x.prototype.sA),t.defineProperty(x,{sA:"dragComputation"},function(){return this.Wq},function(a){var b=this.Wq;b!==a&&(null!==a&&t.i(a,"function",x,"dragComputation"),this.Wq=a,this.j("dragComputation",b,a))}),t.g(x,"shadowOffset",x.prototype.NG),t.defineProperty(x,{NG:"shadowOffset"},function(){return this.Jm},function(a){var b=this.Jm;b.O(a)||(e&&t.l(a,E,x,"shadowOffset"),this.Jm=a=a.ba(),this.na(),this.j("shadowOffset",b,a))}),t.g(x,"shadowColor",x.prototype.shadowColor),t.defineProperty(x,{shadowColor:"shadowColor"},function(){return this.Im},function(a){var b=this.Im;b!==a&&(e&&t.i(a,"string",x,"shadowColor"),this.Im=a,this.na(),this.j("shadowColor",b,a))}),t.g(x,"shadowBlur",x.prototype.shadowBlur),t.defineProperty(x,{shadowBlur:"shadowBlur"},function(){return this.Hm},function(a){var b=this.Hm;b!==a&&(e&&t.i(a,"number",x,"shadowBlur"),this.Hm=a,this.na(),this.j("shadowBlur",b,a))}),t.ka("Adornment",ea),t.Qa(ea,x),aa=ea.prototype,aa.toString=function(){var a=this.ii;return"Adornment("+this.ed+")"+(null!==a?a.toString():"")},aa.Jj=function(){return this.ob&&this.ob.U instanceof B?this.ob.U.Jj():null},aa.fr=function(){return null},aa.wx=function(){var c,d,e,a=this.uc.U,b=this.uc;if(a instanceof B&&b instanceof W)for(c=a.path,b=c.Ta,a.wx(),b=c.Ta,a=this.va,c=a.length,d=0;c>d;d++)e=a.n[d],e.pi&&e instanceof W&&(e.Ta=b)},aa.hz=function(){var a=this.ii;return a instanceof B?a.Bc:null},t.A(ea,{placeholder:"placeholder"},function(){return this.Nb}),t.g(ea,"adornedObject",ea.prototype.uc),t.defineProperty(ea,{uc:"adornedObject"},function(){return this.ob},function(a){e&&null!==a&&t.l(a,V,x,"adornedObject:val");var b=this.ii,c=null;null!==a&&(c=a.U),null===b||null!==a&&b===c||b.Hl(this.ed),this.ob=a,c&&c.il(this.ed,this)}),t.A(ea,{ii:"adornedPart"},function(){var a=this.ob;return null!==a?a.U:null}),ea.prototype.Bl=function(){var a=this.ob;return null===a?!0:(a=a.U,null===a||!Ui(a))},ea.prototype.Td=function(){return!1},t.A(ea,{fb:"containingGroup"},function(){return null}),ea.prototype.yn=function(a,b,c,d,e,f,g){if(a===Md&&"elements"===b){if(e instanceof $g)null===this.Nb?this.Nb=e:this.Nb!==e&&t.m("Cannot insert a second Placeholder into the visual tree of an Adornment.");else if(e instanceof C){var h=e.qt(function(a){return a instanceof $g});h instanceof $g&&(null===this.Nb?this.Nb=h:this.Nb!==h&&t.m("Cannot insert a second Placeholder into the visual tree of an Adornment."))}}else a===Nd&&"elements"===b&&null!==this.Nb&&(d===this.Nb?this.Nb=null:d instanceof C&&this.Nb.sj(d)&&(this.Nb=null));x.prototype.yn.call(this,a,b,c,d,e,f,g)},ea.prototype.updateAdornments=function(){},ea.prototype.cn=function(){},t.ka("Node",y),t.Qa(y,x),y.prototype.cloneProtected=function(a){x.prototype.cloneProtected.call(this,a),a.Br=this.Br,a.Cr=this.Cr,a.Yk=this.Yk,a.sr=this.sr,a.Vs=this.Vs,a.Qs=this.Qs,a.tr=this.tr,a.Fq=this.Fq,a.Gq=this.Gq.ba(),a.es=this.es},y.prototype.ki=function(a){x.prototype.ki.call(this,a),a.Ef(),a.Eh=this.Eh,a.Ad=null},y.DirectionDefault=Jm=t.w(y,"DirectionDefault",0),y.DirectionAbsolute=t.w(y,"DirectionAbsolute",1),y.DirectionRotatedNode=Km=t.w(y,"DirectionRotatedNode",2),y.DirectionRotatedNodeOrthogonal=hk=t.w(y,"DirectionRotatedNodeOrthogonal",3),y.SpreadingNone=t.w(y,"SpreadingNone",10),y.SpreadingEvenly=Im=t.w(y,"SpreadingEvenly",11),y.SpreadingPacked=Lm=t.w(y,"SpreadingPacked",12),y.prototype.yn=function(a,b,c,d,e,f,g){a===Md&&"elements"===b?this.Ad=null:a===Nd&&"elements"===b&&(null===this.h?this.Ad=null:d instanceof V&&Tl(this,d,function(a,b){Ok(a,b,!0)})),x.prototype.yn.call(this,a,b,c,d,e,f,g)},y.prototype.invalidateConnectedLinks=y.prototype.Ef=function(a){var b,c;for(void 0===a&&(a=null),b=this.Vd;b.next();)c=b.value,null!==a&&a.contains(c)||(Om(this,c.sd),Om(this,c.Xd),c.hc())},y.prototype.Bl=function(){return!0},t.defineProperty(y,{fK:"portSpreading"},function(){return this.es},function(a){var b=this.es;b!==a&&(e&&t.Fa(a,y,y,"portSpreading"),this.es=a,this.j("portSpreading",b,a),a=this.h,null!==a&&a.ma.yb||this.Ef())}),t.g(y,"avoidable",y.prototype.gA),t.defineProperty(y,{gA:"avoidable"},function(){return this.Fq},function(a){var c,b=this.Fq;b!==a&&(e&&t.i(a,"boolean",y,"avoidable"),this.Fq=a,c=this.h,null!==c&&Vj(c,this),this.j("avoidable",b,a))}),t.g(y,"avoidableMargin",y.prototype.sE),t.defineProperty(y,{sE:"avoidableMargin"},function(){return this.Gq},function(a){var b,c;"number"==typeof a?a=new wb(a):t.l(a,wb,y,"avoidableMargin"),b=this.Gq,b.O(a)||(this.Gq=a=a.ba(),c=this.h,null!==c&&Vj(c,this),this.j("avoidableMargin",b,a))}),y.prototype.canAvoid=function(){return this.gA&&!this.oi},y.prototype.getAvoidableRect=function(a){return a.set(this.pa),a.sw(this.sE),a},y.prototype.findVisibleNode=function(){for(var a=this;null!==a&&!a.Va();)a=a.fb;return a},y.prototype.kf=function(a){x.prototype.kf.call(this,a);for(var b=this.Vd;b.next();)b.value.kf(a)},t.A(y,{Vd:"linksConnected"},function(){return this.sc.k}),y.prototype.findLinksConnected=y.prototype.dF=function(a){if(void 0===a&&(a=null),null===a)return this.sc.k;e&&t.i(a,"string",y,"findLinksConnected:pid");var b=new Oa(this.sc),c=this;return b.Fl=function(b){return b.ca===c&&b.Cf===a||b.fa===c&&b.hg===a},b},y.prototype.findLinksOutOf=y.prototype.Uw=function(a){void 0===a&&(a=null),e&&null!==a&&t.i(a,"string",y,"findLinksOutOf:pid");var b=new Oa(this.sc),c=this;return b.Fl=function(b){return b.ca!==c?!1:null===a?!0:b.Cf===a},b},y.prototype.findLinksInto=y.prototype.Gg=function(a){void 0===a&&(a=null),e&&null!==a&&t.i(a,"string",y,"findLinksInto:pid");var b=new Oa(this.sc),c=this;return b.Fl=function(b){return b.fa!==c?!1:null===a?!0:b.hg===a},b},y.prototype.findNodesConnected=y.prototype.eF=function(a){var b,c,d,f;for(void 0===a&&(a=null),e&&null!==a&&t.i(a,"string",y,"findNodesConnected:pid"),b=null,c=null,d=this.sc.k;d.next();)f=d.value,f.ca===this?(null===a||f.Cf===a)&&(f=f.fa,null!==b?b.add(f):null!==c&&c!==f?(b=new I(y),b.add(c),b.add(f)):c=f):f.fa!==this||null!==a&&f.hg!==a||(f=f.ca,null!==b?b.add(f):null!==c&&c!==f?(b=new I(y),b.add(c),b.add(f)):c=f);return null!==b?b.k:null!==c?new Ma(c):t.jg},y.prototype.findNodesOutOf=function(a){var b,c,d,f;for(void 0===a&&(a=null),e&&null!==a&&t.i(a,"string",y,"findNodesOutOf:pid"),b=null,c=null,d=this.sc.k;d.next();)f=d.value,f.ca!==this||null!==a&&f.Cf!==a||(f=f.fa,null!==b?b.add(f):null!==c&&c!==f?(b=new I(y),b.add(c),b.add(f)):c=f);return null!==b?b.k:null!==c?new Ma(c):t.jg},y.prototype.findNodesInto=function(a){var b,c,d,f;for(void 0===a&&(a=null),e&&null!==a&&t.i(a,"string",y,"findNodesInto:pid"),b=null,c=null,d=this.sc.k;d.next();)f=d.value,f.fa!==this||null!==a&&f.hg!==a||(f=f.ca,null!==b?b.add(f):null!==c&&c!==f?(b=new I(y),b.add(c),b.add(f)):c=f);return null!==b?b.k:null!==c?new Ma(c):t.jg},y.prototype.findLinksBetween=function(a,b,c){void 0===b&&(b=null),void 0===c&&(c=null),e&&(t.l(a,y,y,"findLinksBetween:othernode"),null!==b&&t.i(b,"string",y,"findLinksBetween:pid"),null!==c&&t.i(c,"string",y,"findLinksBetween:otherpid"));var d=new Oa(this.sc),f=this;return d.Fl=function(d){return(d.ca!==f||d.fa!==a||null!==b&&d.Cf!==b||null!==c&&d.hg!==c)&&(d.ca!==a||d.fa!==f||null!==c&&d.Cf!==c||null!==b&&d.hg!==b)?!1:!0},d},y.prototype.findLinksTo=function(a,b,c){void 0===b&&(b=null),void 0===c&&(c=null),e&&(t.l(a,y,y,"findLinksTo:othernode"),null!==b&&t.i(b,"string",y,"findLinksTo:pid"),null!==c&&t.i(c,"string",y,"findLinksTo:otherpid"));var d=new Oa(this.sc),f=this;return d.Fl=function(d){return d.ca!==f||d.fa!==a||null!==b&&d.Cf!==b||null!==c&&d.hg===c?!1:!0},d},t.g(y,"linkConnected",y.prototype.SF),t.defineProperty(y,{SF:"linkConnected"},function(){return this.Br},function(a){var b=this.Br;b!==a&&(null!==a&&t.i(a,"function",y,"linkConnected"),this.Br=a,this.j("linkConnected",b,a))}),t.g(y,"linkDisconnected",y.prototype.TF),t.defineProperty(y,{TF:"linkDisconnected"},function(){return this.Cr},function(a){var b=this.Cr;b!==a&&(null!==a&&t.i(a,"function",y,"linkDisconnected"),this.Cr=a,this.j("linkDisconnected",b,a))}),t.g(y,"linkValidation",y.prototype.Pp),t.defineProperty(y,{Pp:"linkValidation"},function(){return this.Yk},function(a){var b=this.Yk;b!==a&&(null!==a&&t.i(a,"function",y,"linkValidation"),this.Yk=a,this.j("linkValidation",b,a))}),y.prototype.updateModelDataReferences=function(){var a,b,c,d,e;x.prototype.updateModelDataReferences.call(this),a=this.data,null!==a&&(b=this.h,null!==b&&(c=b.ea,c instanceof be&&(d=c.jn(a),b=b.bf(d),e=this.xA(),b!==e&&(b=null!==e?c.Lb(e.data):void 0,e=c.xn,"function"==typeof e?e(a,b):a[e]=b,c.yh(a,d)))))},y.prototype.zt=function(a){x.prototype.zt.call(this,a),a||Pj(this);var b=this.Ao;null===b||a||Rm(b,this)},y.prototype.At=function(a){x.prototype.At.call(this,a);var b=this.Ao;null===b||a||null===b.Ce||(b.Ce.remove(this),b.ja())},y.prototype.cn=function(){var a,b;if(0<this.sc.count){if(a=this.h,null===a)return;for(b=this.sc.copy().k;b.next();)a.remove(b.value)}this.Dd=null,x.prototype.cn.call(this)},t.A(y,{oi:"isLinkLabel"},function(){return null!==this.Ao}),t.g(y,"labeledLink",y.prototype.Dd),t.defineProperty(y,{Dd:"labeledLink"},function(){return this.Ao},function(a){var c,d,f,g,h,b=this.Ao;b!==a&&(e&&null!==a&&t.l(a,B,y,"labeledLink"),c=this.h,d=this.data,null===b||(null!==b.Ce&&(b.Ce.remove(this),b.ja()),null===c||null===d||c.ma.yb)||(f=b.data,g=c.ea,null!==f&&g instanceof T&&(h=g.Lb(d),void 0!==h&&g.kK(f,h))),this.Ao=a,null!==a&&(Rm(a,this),null===c||null===d||c.ma.yb||(f=a.data,g=c.ea,null!==f&&g instanceof T&&(h=g.Lb(d),void 0!==h&&g.jE(f,h)))),Gk(this),this.j("labeledLink",b,a))}),y.prototype.findPort=y.prototype.tl=function(a){if(e&&t.i(a,"string",y,"findPort:pid"),null===this.Ad){if(""===a&&!1===this.Rh)return this;Pk(this)}var b=this.Ad.Da(a);return null!==b||""!==a&&(b=this.Ad.Da(""),null!==b)?b:this},t.A(y,{port:"port"},function(){return this.tl("")}),t.A(y,{ports:"ports"},function(){return null===this.Ad&&Pk(this),this.Ad.NF}),y.prototype.isInTreeOf=function(a){var b,c,d,e;if(null===a||a===this)return!1;if(b=!0,c=this.h,null!==c&&(b=c.vd),c=this,b)for(;c!==a;){for(b=null,d=c.sc.k;d.next()&&(e=d.value,!e.Jc||(b=e.ca,b===c||b===this)););if(b===this||null===b||b===c)return!1;c=b}else for(;c!==a;){for(b=null,d=c.sc.k;d.next()&&(e=d.value,!e.Jc||(b=e.fa,b===c||b===this)););if(b===this||null===b||b===c)return!1;c=b}return!0},y.prototype.findTreeRoot=function(){var c,d,a=!0,b=this.h;if(null!==b&&(a=b.vd),b=this,a)for(;;){for(a=null,c=b.sc.k;c.next()&&(d=c.value,!d.Jc||(a=d.ca,a===b||a===this)););if(a===this)return this;if(null===a||a===b)return b;b=a}else for(;;){for(a=null,c=b.sc.k;c.next()&&(d=c.value,!d.Jc||(a=d.fa,a===b||a===this)););if(a===this)return this;if(null===a||a===b)return b;b=a}},y.prototype.findTreeParentLink=y.prototype.tt=function(){var a=!0,b=this.h;if(null!==b&&(a=b.vd),b=this.sc.k,a){for(;b.next();)if(a=b.value,a.Jc&&a.ca!==this)return a}else for(;b.next();)if(a=b.value,a.Jc&&a.fa!==this)return a;return null},y.prototype.findTreeParentNode=y.prototype.xA=function(){var a,b,c,d;if(null===this.gi||this.gi instanceof y)return this.gi;if(a=!0,b=this.h,null!==b&&(a=b.vd),b=this.sc.n,c=b.length,a){for(a=0;c>a;a++)if(d=b[a],d.Jc&&(d=d.ca,d!==this))return this.gi=d}else for(a=0;c>a;a++)if(d=b[a],d.Jc&&(d=d.fa,d!==this))return this.gi=d;return this.gi=null},y.prototype.findTreeChildrenLinks=y.prototype.Xw=function(){var c,a=!0,b=this.h;return null!==b&&(a=b.vd),a?(a=new Oa(this.sc),c=this,a.Fl=function(a){return a.Jc&&a.ca===c?!0:!1}):(a=new Oa(this.sc),c=this,a.Fl=function(a){return a.Jc&&a.fa===c?!0:!1}),a},y.prototype.findTreeChildrenNodes=y.prototype.gF=function(){var c,d,a=!0,b=this.h;if(null!==b&&(a=b.vd),c=b=null,d=this.sc.k,a)for(;d.next();)a=d.value,a.Jc&&a.ca===this&&(a=a.fa,null!==b?b.add(a):null!==c&&c!==a?(b=new H(y),b.add(c),b.add(a)):c=a);else for(;d.next();)a=d.value,a.Jc&&a.fa===this&&(a=a.ca,null!==b?b.add(a):null!==c&&c!==a?(b=new H(y),b.add(c),b.add(a)):c=a);return null!==b?b.k:null!==c?new Ma(c):t.jg},y.prototype.findTreeParts=function(a){void 0===a&&(a=1/0),t.i(a,"number",y,"collapseTree:level");var b=new I(x);return $e(b,this,!1,a),b},y.prototype.collapseTree=y.prototype.collapseTree=function(a){var b,c,d;void 0===a&&(a=1),t.q(a,y,"collapseTree:level"),1>a&&(a=1),b=this.h,null===b||b.ge||(c=b.fc,0!==b.ma.Qe&&c.Gl(),b.ge=!0,c=b.vd,d=new I(y),d.add(this),Sm(this,d,c,a,this.Xc),b.ge=!1,b.na())},y.prototype.expandTree=y.prototype.expandTree=function(a){var b,c,d,e;void 0===a&&(a=2),t.q(a,y,"collapseTree:level"),2>a&&(a=2),b=this.h,null===b||b.ge||(c=b.fc,0!==b.ma.Qe&&c.Gl(),b.ge=!0,d=b.vd,e=new I(y),e.add(this),Um(this,e,d,a,this.Xc,c,this),b.ge=!1)},t.g(y,"isTreeExpanded",y.prototype.Xc),t.defineProperty(y,{Xc:"isTreeExpanded"},function(){return this.sr},function(a){var c,d,b=this.sr;b!==a&&(e&&t.i(a,"boolean",y,"isTreeExpanded"),this.sr=a,c=this.h,this.j("isTreeExpanded",b,a),b=this.gH,null!==b&&(d=!0,null!==c&&(d=c.Sa,c.Sa=!0),b(this),null!==c&&(c.Sa=d)),null!==c&&c.ma.yb?this.kf(a):a?null===c||c.ge||(0!==c.ma.Qe&&c.fc.Gl(),c.ge=!0,a=c.vd,b=new I(y),b.add(this),Um(this,b,a,2,!1,c.fc,this),c.ge=!1):null===c||c.ge||(0!==c.ma.Qe&&c.fc.Gl(),c.ge=!0,a=c.vd,b=new I(y),b.add(this),Tm(this,b,a,!0),c.ge=!1))}),t.g(y,"wasTreeExpanded",y.prototype.In),t.defineProperty(y,{In:"wasTreeExpanded"},function(){return this.Vs},function(a){var b=this.Vs;b!==a&&(e&&t.i(a,"boolean",y,"wasTreeExpanded"),this.Vs=a,this.j("wasTreeExpanded",b,a))}),t.g(y,"treeExpandedChanged",y.prototype.gH),t.defineProperty(y,{gH:"treeExpandedChanged"},function(){return this.Qs},function(a){var b=this.Qs;b!==a&&(null!==a&&t.i(a,"function",y,"treeExpandedChanged"),this.Qs=a,this.j("treeExpandedChanged",b,a))}),t.g(y,"isTreeLeaf",y.prototype.ri),t.defineProperty(y,{ri:"isTreeLeaf"},function(){return this.tr},function(a){var b=this.tr;b!==a&&(e&&t.i(a,"boolean",y,"isTreeLeaf"),this.tr=a,this.j("isTreeLeaf",b,a))}),t.ka("Link",B),t.Qa(B,x),B.prototype.cloneProtected=function(a){if(x.prototype.cloneProtected.call(this,a),a.Oh=this.Oh,a.dr=this.dr,a.di=this.di,a.Ps=this.Ps,a.hs=this.hs,a.is=this.is,a.js=this.js,a.ur=this.ur,a.Aq=this.Aq,a.Nq=this.Nq,a.Qq=this.Qq,a.Rq=this.Rq,a.Cm=this.Cm,a.Es=this.Es,null!==this.R){var b=this.R;a.R={Qh:b.Qh.ba(),fi:b.fi.ba(),Nh:b.Nh,ci:b.ci,Mh:b.Mh,bi:b.bi,Ph:b.Ph,ei:b.ei}}else a.R=null},B.prototype.ki=function(a){x.prototype.ki.call(this,a),this.Oh=a.Oh,this.di=a.di,a.Wi=null,a.De=null,a.hc(),a.Pn=this.Pn,a.pf=this.pf},B.Normal=al=t.w(B,"Normal",1),B.Orthogonal=t.w(B,"Orthogonal",2),B.AvoidsNodes=t.w(B,"AvoidsNodes",6),B.AvoidsNodesStraight=Vm=t.w(B,"AvoidsNodesStraight",7),B.None=Ng=t.w(B,"None",0),B.Bezier=Vg=t.w(B,"Bezier",9),B.JumpGap=Mg=t.w(B,"JumpGap",10),B.JumpOver=Lg=t.w(B,"JumpOver",11),B.End=Yk=t.w(B,"End",17),B.Scale=Zk=t.w(B,"Scale",18),B.Stretch=$k=t.w(B,"Stretch",19),B.OrientAlong=hm=t.w(B,"OrientAlong",21),B.OrientPlus90=Wm=t.w(B,"OrientPlus90",22),B.OrientMinus90=Xm=t.w(B,"OrientMinus90",23),B.OrientOpposite=Ym=t.w(B,"OrientOpposite",24),B.OrientUpright=Zm=t.w(B,"OrientUpright",25),B.OrientPlus90Upright=$m=t.w(B,"OrientPlus90Upright",26),B.OrientMinus90Upright=an=t.w(B,"OrientMinus90Upright",27),B.OrientUpright45=bn=t.w(B,"OrientUpright45",28),B.prototype.Le=function(){this.R={Qh:Ub,fi:Ub,Nh:0/0,ci:0/0,Mh:Jm,bi:Jm,Ph:0/0,ei:0/0}},B.prototype.Bl=function(){var b,a=this.ca;return null!==a&&(b=a.findVisibleNode(),null!==b&&(a=b),Ui(a)||Vi(a))?!1:(a=this.fa,null!==a&&(b=a.findVisibleNode(),null!==b&&(a=b),Ui(a)||Vi(a))?!1:!0)},B.prototype.Td=function(){return!1},B.prototype.computeAngle=function(a,b,c){switch(b){default:case Ng:a=0;break;case hm:a=c;break;case Wm:a=c+90;break;case Xm:a=c-90;break;case Ym:a=c+180;break;case Zm:a=K.Tt(c),a>90&&270>a&&(a-=180);break;case $m:a=K.Tt(c+90),a>90&&270>a&&(a-=180);break;case an:a=K.Tt(c-90),a>90&&270>a&&(a-=180);break;case bn:if(a=K.Tt(c),a>45&&135>a||a>225&&315>a)return 0;a>90&&270>a&&(a-=180)}return K.Tt(a)},t.g(B,"fromNode",B.prototype.ca),t.defineProperty(B,{ca:"fromNode"},function(){return this.og},function(a){var c,d,f,g,h,b=this.og;b!==a&&(e&&null!==a&&t.l(a,y,B,"fromNode"),c=this.sd,null!==b&&(this.Ag!==b&&Qm(b,this,c),cn(this),this.M(ij)),this.og=a,this.Hi=null,this.hc(),d=this.h,null!==d&&(f=this.data,g=d.ea,null!==f&&(g instanceof T?(h=null!==a?a.data:null,g.Lx(f,g.Lb(h))):g instanceof be&&(h=null!==a?a.data:null,d.vd?g.yh(f,g.Lb(h)):(null!==b&&g.yh(b.data,void 0),g.yh(h,g.Lb(null!==this.Ag?this.Ag.data:null)))))),f=this.sd,g=this.CA,null!==g&&(h=!0,null!==d&&(h=d.Sa,d.Sa=!0),g(this,c,f),null!==d&&(d.Sa=h)),null!==a&&(this.Ag!==a&&Pm(a,this,f),dn(this),this.M(cj)),this.j("fromNode",b,a),Kj(this))}),t.g(B,"fromPortId",B.prototype.Cf),t.defineProperty(B,{Cf:"fromPortId"},function(){return this.Oh},function(a){var c,d,f,g,h,b=this.Oh;b!==a&&(e&&t.i(a,"string",B,"fromPortId"),c=this.sd,null!==c&&Om(this.ca,c),cn(this),this.Oh=a,d=this.sd,null!==d&&Om(this.ca,d),f=this.h,null!==f&&(g=this.data,h=f.ea,null!==g&&h instanceof T&&h.yB(g,a)),c!==d&&(this.Hi=null,this.hc(),g=this.CA,null!==g&&(h=!0,null!==f&&(h=f.Sa,f.Sa=!0),g(this,c,d),null!==f&&(f.Sa=h))),dn(this),this.j("fromPortId",b,a))}),t.A(B,{sd:"fromPort"},function(){var a=this.og;return null===a?null:a.tl(this.Oh)}),t.g(B,"fromPortChanged",B.prototype.CA),t.defineProperty(B,{CA:"fromPortChanged"},function(){return this.dr},function(a){var b=this.dr;b!==a&&(null!==a&&t.i(a,"function",B,"fromPortChanged"),this.dr=a,this.j("fromPortChanged",b,a))}),t.g(B,"toNode",B.prototype.fa),t.defineProperty(B,{fa:"toNode"},function(){return this.Ag},function(a){var c,d,f,g,h,b=this.Ag;b!==a&&(e&&null!==a&&t.l(a,y,B,"toNode"),c=this.Xd,null!==b&&(this.og!==b&&Qm(b,this,c),cn(this),this.M(ij)),this.Ag=a,this.Hi=null,this.hc(),d=this.h,null!==d&&(f=this.data,g=d.ea,null!==f&&(g instanceof T?(h=null!==a?a.data:null,g.Nx(f,g.Lb(h))):g instanceof be&&(h=null!==a?a.data:null,d.vd?(null!==b&&g.yh(b.data,void 0),g.yh(h,g.Lb(null!==this.og?this.og.data:null))):g.yh(f,g.Lb(h))))),f=this.Xd,g=this.KB,null!==g&&(h=!0,null!==d&&(h=d.Sa,d.Sa=!0),g(this,c,f),null!==d&&(d.Sa=h)),null!==a&&(this.og!==a&&Pm(a,this,f),dn(this),this.M(cj)),this.j("toNode",b,a),Kj(this))}),t.g(B,"toPortId",B.prototype.hg),t.defineProperty(B,{hg:"toPortId"},function(){return this.di},function(a){var c,d,f,g,h,b=this.di;b!==a&&(e&&t.i(a,"string",B,"toPortId"),c=this.Xd,null!==c&&Om(this.fa,c),cn(this),this.di=a,d=this.Xd,null!==d&&Om(this.fa,d),f=this.h,null!==f&&(g=this.data,h=f.ea,null!==g&&h instanceof T&&h.BB(g,a)),c!==d&&(this.Hi=null,this.hc(),g=this.KB,null!==g&&(h=!0,null!==f&&(h=f.Sa,f.Sa=!0),g(this,c,d),null!==f&&(f.Sa=h))),dn(this),this.j("toPortId",b,a))}),t.A(B,{Xd:"toPort"},function(){var a=this.Ag;return null===a?null:a.tl(this.di)}),t.g(B,"toPortChanged",B.prototype.KB),t.defineProperty(B,{KB:"toPortChanged"},function(){return this.Ps},function(a){var b=this.Ps;b!==a&&(null!==a&&t.i(a,"function",B,"toPortChanged"),this.Ps=a,this.j("toPortChanged",b,a))}),t.defineProperty(B,{vb:"fromSpot"},function(){return null!==this.R?this.R.Qh:Ub},function(a){null===this.R&&this.Le();var b=this.R.Qh;b.O(a)||(e&&t.l(a,L,B,"fromSpot"),a=a.ba(),this.R.Qh=a,this.j("fromSpot",b,a),this.hc())}),t.defineProperty(B,{rk:"fromEndSegmentLength"},function(){return null!==this.R?this.R.Nh:0/0},function(a){null===this.R&&this.Le();var b=this.R.Nh;b!==a&&(e&&t.i(a,"number",B,"fromEndSegmentLength"),0>a&&t.ha(a,">= 0",B,"fromEndSegmentLength"),this.R.Nh=a,this.j("fromEndSegmentLength",b,a),this.hc())}),t.defineProperty(B,{vp:"fromEndSegmentDirection"},function(){return null!==this.R?this.R.Mh:Jm},function(a){null===this.R&&this.Le();var b=this.R.Mh;b!==a&&(e&&t.Fa(a,y,B,"fromEndSegmentDirection"),this.R.Mh=a,this.j("fromEndSegmentDirection",b,a),this.hc())}),t.defineProperty(B,{wp:"fromShortLength"},function(){return null!==this.R?this.R.Ph:0/0},function(a){null===this.R&&this.Le();var b=this.R.Ph;b!==a&&(e&&t.i(a,"number",B,"fromShortLength"),this.R.Ph=a,this.j("fromShortLength",b,a),this.hc())}),t.defineProperty(B,{zb:"toSpot"},function(){return null!==this.R?this.R.fi:Ub},function(a){null===this.R&&this.Le();var b=this.R.fi;b.O(a)||(e&&t.l(a,L,B,"toSpot"),a=a.ba(),this.R.fi=a,this.j("toSpot",b,a),this.hc())}),t.defineProperty(B,{xk:"toEndSegmentLength"},function(){return null!==this.R?this.R.ci:0/0},function(a){null===this.R&&this.Le();var b=this.R.ci;b!==a&&(e&&t.i(a,"number",B,"toEndSegmentLength"),0>a&&t.ha(a,">= 0",B,"toEndSegmentLength"),this.R.ci=a,this.j("toEndSegmentLength",b,a),this.hc())}),t.defineProperty(B,{lq:"toEndSegmentDirection"},function(){return null!==this.R?this.R.bi:Jm},function(a){null===this.R&&this.Le();var b=this.R.bi;b!==a&&(e&&t.Fa(a,y,B,"toEndSegmentDirection"),this.R.bi=a,this.j("toEndSegmentDirection",b,a),this.hc())}),t.defineProperty(B,{mq:"toShortLength"},function(){return null!==this.R?this.R.ei:0/0},function(a){null===this.R&&this.Le();var b=this.R.ei;b!==a&&(e&&t.i(a,"number",B,"toShortLength"),this.R.ei=a,this.j("toShortLength",b,a),this.hc())}),B.prototype.getOtherNode=B.prototype.DA=function(a){e&&t.l(a,y,B,"getOtherNode:node");var b=this.ca;return a===b?this.fa:b},B.prototype.getOtherPort=function(a){e&&t.l(a,V,B,"getOtherPort:port");var b=this.sd;return a===b?this.Xd:b},t.A(B,{QK:"isLabeledLink"},function(){return null===this.Ce?!1:0<this.Ce.count}),t.A(B,{tj:"labelNodes"},function(){return null===this.Ce?t.jg:this.Ce.k}),B.prototype.zt=function(a){if(x.prototype.zt.call(this,a),fn(this)&&Og(this,this.pa),!a){a=this.og;var b=this.Ag;null!==a&&(Pm(a,this,this.sd),dn(this)),null!==b&&(Pm(b,this,this.Xd),dn(this))}},B.prototype.At=function(a){if(x.prototype.At.call(this,a),fn(this)&&Og(this,this.pa),!a){a=this.og;var b=this.Ag;null!==a&&(Qm(a,this,this.sd),cn(this)),null!==b&&(Qm(b,this,this.Xd),cn(this))}},B.prototype.cn=function(){var a,b;if(this.Bg=!0,null!==this.Ce){if(a=this.h,null===a)return;for(b=this.Ce.copy().k;b.next();)a.remove(b.value)}b=this.data,null!==b&&(a=this.h,null!==a&&(a=a.ea,a instanceof T?a.oB(b):a instanceof be&&a.yh(b,void 0)))},B.prototype.updateModelDataReferences=function(){var b,c,d,e,f,a=this.data;null!==a&&(b=this.h,null!==b&&(c=b.ea,c instanceof T&&(d=c.vl(a),e=b.bf(d),f=this.ca,e!==f&&(e=null!==f?c.Lb(f.data):void 0,f=c.qn,"function"==typeof f?f(a,e):a[f]=e,c.Lx(a,d)),d=c.zl(a),e=b.bf(d),f=this.fa,e!==f&&(e=null!==f?c.Lb(f.data):void 0,f=c.rn,"function"==typeof f?f(a,e):a[f]=e,c.Nx(a,d)))))},B.prototype.move=B.prototype.move=function(a){var d,e,b=this.position,c=b.x;for(isNaN(c)&&(c=0),b=b.y,isNaN(b)&&(b=0),c=a.x-c,b=a.y-b,x.prototype.move.call(this,a),this.Dl(c,b),a=this.tj;a.next();)d=a.value,e=d.position,d.moveTo(e.x+c,e.y+b)},t.g(B,"relinkableFrom",B.prototype.mG),t.defineProperty(B,{mG:"relinkableFrom"},function(){return this.hs},function(a){var b=this.hs;b!==a&&(e&&t.i(a,"boolean",B,"relinkableFrom"),this.hs=a,this.j("relinkableFrom",b,a),this.updateAdornments())
}),t.g(B,"relinkableTo",B.prototype.nG),t.defineProperty(B,{nG:"relinkableTo"},function(){return this.is},function(a){var b=this.is;b!==a&&(e&&t.i(a,"boolean",B,"relinkableTo"),this.is=a,this.j("relinkableTo",b,a),this.updateAdornments())}),B.prototype.canRelinkFrom=function(){if(!this.mG)return!1;var a=this.layer;return null===a?!0:a.gk?(a=a.h,null===a||a.gk?!0:!1):!1},B.prototype.canRelinkTo=function(){if(!this.nG)return!1;var a=this.layer;return null===a?!0:a.gk?(a=a.h,null===a||a.gk?!0:!1):!1},t.g(B,"resegmentable",B.prototype.Zp),t.defineProperty(B,{Zp:"resegmentable"},function(){return this.js},function(a){var b=this.js;b!==a&&(e&&t.i(a,"boolean",B,"resegmentable"),this.js=a,this.j("resegmentable",b,a),this.updateAdornments())}),t.g(B,"isTreeLink",B.prototype.Jc),t.defineProperty(B,{Jc:"isTreeLink"},function(){return this.ur},function(a){var b=this.ur;b!==a&&(e&&t.i(a,"boolean",B,"isTreeLink"),this.ur=a,this.j("isTreeLink",b,a),null!==this.ca&&Pj(this.ca),null!==this.fa&&Pj(this.fa))}),t.A(B,{path:"path"},function(){var a=this.Wi;return null!==a?a:(a=this.va,a=Hk(this,a,a.length),a instanceof W?this.Wi=a:null)}),B.prototype.fr=function(){return this.path},B.prototype.hz=function(){return this.Bc},B.prototype.Jj=function(){this.updateRoute();var a=new F;return this.xf(a),this.Fz=a},B.prototype.xf=function(a){var e,f,g,h,i,b=1/0,c=1/0,d=this.ra;if(0===d)return a.p(0/0,0/0,0,0),a;if(1===d)d=this.o(0),b=Math.min(d.x,b),c=Math.min(d.y,c),a.p(d.x,d.y,0,0);else if(2===d)e=this.o(0),f=this.o(1),b=Math.min(e.x,f.x),c=Math.min(e.y,f.y),a.p(e.x,e.y,0,0),a.yj(f);else if(this.computeCurve()===Vg&&d>=3&&!this.pc)if(e=this.o(0),b=e.x,c=e.y,a.p(b,c,0,0),3===d)d=this.o(1),b=Math.min(d.x,b),c=Math.min(d.y,c),f=this.o(2),b=Math.min(f.x,b),c=Math.min(f.y,c),K.fp(e.x,e.y,d.x,d.y,d.x,d.y,f.x,f.y,.5,a);else for(i=3;d>i;i+=3)g=this.o(i-2),i+3>=d&&(i=d-1),h=this.o(i-1),f=this.o(i),K.fp(e.x,e.y,g.x,g.y,h.x,h.y,f.x,f.y,.5,a),b=Math.min(f.x,b),c=Math.min(f.y,c),e=f;else for(e=this.o(0),f=this.o(1),b=Math.min(e.x,f.x),c=Math.min(e.y,f.y),a.p(e.x,e.y,0,0),a.yj(f),i=2;d>i;i++)e=this.o(i),b=Math.min(e.x,b),c=Math.min(e.y,c),a.yj(e);return this.Qz.p(b-a.x,c-a.y),a},t.A(B,{bG:"midPoint"},function(){return this.updateRoute(),this.computeMidPoint(new E)}),B.prototype.computeMidPoint=function(a){var c,d,e,f,g,b=this.ra;if(0===b)return a.assign(K.zH),a;if(1===b)return a.assign(this.o(0)),a;if(2===b)return c=this.o(0),d=this.o(1),a.p((c.x+d.x)/2,(c.y+d.y)/2),a;if(this.computeCurve()===Vg&&b>=3&&!this.pc)return 3===b?this.o(1):(b=0|(b-1)/3,e=3*(0|b/2),1===b%2?(c=this.o(e),d=this.o(e+1),b=this.o(e+2),e=this.o(e+3),K.vI(c.x,c.y,d.x,d.y,b.x,b.y,e.x,e.y,a)):a.assign(this.o(e)),a);for(e=0,f=t.Hb(),g=0;b-1>g;g++)c=this.o(g),d=this.o(g+1),K.sb(c.x,d.x)?(c=d.y-c.y,0>c&&(c=-c)):K.sb(c.y,d.y)?(c=d.x-c.x,0>c&&(c=-c)):c=Math.sqrt(c.nk(d)),f.push(c),e+=c;for(d=g=c=0;e/2>c&&b>g&&(d=f[g],!(c+d>e/2));)c+=d,g++;return t.Ca(f),b=this.o(g),f=this.o(g+1),b.x===f.x?b.y>f.y?a.p(b.x,b.y-(e/2-c)):a.p(b.x,b.y+(e/2-c)):b.y===f.y?b.x>f.x?a.p(b.x-(e/2-c),b.y):a.p(b.x+(e/2-c),b.y):(e=(e/2-c)/d,a.p(b.x+e*(f.x-b.x),b.y+e*(f.y-b.y))),a},t.A(B,{aG:"midAngle"},function(){return this.updateRoute(),this.computeMidAngle()}),B.prototype.computeMidAngle=function(){var b,c,d,e,a=this.ra;if(2>a)return 0/0;if(this.computeCurve()===Vg&&a>=4&&!this.pc){if(b=0|(a-1)/3,c=3*(0|b/2),1===b%2)return c=Math.floor(c),a=this.o(c),b=this.o(c+1),d=this.o(c+2),c=this.o(c+3),K.uI(a.x,a.y,b.x,b.y,d.x,d.y,c.x,c.y);if(c>0&&a>c+1)return a=this.o(c-1),b=this.o(c+1),a.nj(b)}return d=0|a/2,0===a%2?(a=this.o(d-1),b=this.o(d),a.nj(b)):(a=this.o(d-1),b=this.o(d),d=this.o(d+1),c=a.nk(b),e=b.nk(d),c>e?a.nj(b):b.nj(d))},t.g(B,"points",B.prototype.points),t.defineProperty(B,{points:"points"},function(){return this.Bc},function(a){var c,d,f,b=this.Bc;if(b!==a){if(e&&(Array.isArray(a)||a instanceof H||t.m("Link.points value is not an instance of List or Array")),c=a,Array.isArray(a)){if(d=0===a.length%2)for(f=0;f<a.length;f++)if("number"!=typeof a[f]){d=!1;break}if(d)for(c=new H(E),d=0;d<a.length/2;d++)f=new E(a[2*d],a[2*d+1]).freeze(),c.add(f);else t.m("Link.points array must contain only numbers")}else for(c=a.copy(),a=c.k;a.next();)a.value.freeze();c.freeze(),this.Bc=c,this.ef(),gn(this),this.h&&this.h.fc.zd&&(this.No=c),this.j("points",b,c)}}),t.A(B,{ra:"pointsCount"},function(){return this.Bc.count}),B.prototype.getPoint=B.prototype.o=function(a){return this.Bc.n[a]},B.prototype.setPoint=B.prototype.Lf=function(a,b){e&&(t.l(b,E,B,"setPoint"),b.P()||t.m("Link.setPoint called with a Point that does not have real numbers: "+b.toString())),null===this.De&&t.m("Call Link.startRoute before modifying the points of the route."),this.Bc.Wg(a,b)},B.prototype.setPointAt=B.prototype.aa=function(a,b,c){e&&(t.q(b,B,"setPointAt:x"),t.q(c,B,"setPointAt:y")),null===this.De&&t.m("Call Link.startRoute before modifying the points of the route."),this.Bc.Wg(a,new E(b,c))},B.prototype.insertPoint=function(a,b){e&&(t.l(b,E,B,"insertPoint"),b.P()||t.m("Link.insertPoint called with a Point that does not have real numbers: "+b.toString())),null===this.De&&t.m("Call Link.startRoute before modifying the points of the route."),this.Bc.Rd(a,b)},B.prototype.insertPointAt=B.prototype.C=function(a,b,c){e&&(t.q(b,B,"insertPointAt:x"),t.q(c,B,"insertPointAt:y")),null===this.De&&t.m("Call Link.startRoute before modifying the points of the route."),this.Bc.Rd(a,new E(b,c))},B.prototype.addPoint=B.prototype.hi=function(a){e&&(t.l(a,E,B,"addPoint"),a.P()||t.m("Link.addPoint called with a Point that does not have real numbers: "+a.toString())),null===this.De&&t.m("Call Link.startRoute before modifying the points of the route."),this.Bc.add(a)},B.prototype.addPointAt=B.prototype.jl=function(a,b){e&&(t.q(a,B,"insertPointAt:x"),t.q(b,B,"insertPointAt:y")),null===this.De&&t.m("Call Link.startRoute before modifying the points of the route."),this.Bc.add(new E(a,b))},B.prototype.removePoint=B.prototype.qG=function(a){null===this.De&&t.m("Call Link.startRoute before modifying the points of the route."),this.Bc.wd(a)},B.prototype.clearPoints=B.prototype.hp=function(){null===this.De&&t.m("Call Link.startRoute before modifying the points of the route."),this.Bc.clear()},B.prototype.movePoints=B.prototype.Dl=function(a,b){var c,d,e;for(c=new H(E),d=this.Bc.k;d.next();)e=d.value,c.add(new E(e.x+a,e.y+b).freeze());c.freeze(),d=this.Bc,this.Bc=c,this.ef(),gn(this),this.h&&this.h.fc.zd&&(this.No=c),this.j("points",d,c)},B.prototype.startRoute=B.prototype.Kl=function(){null===this.De&&(this.De=this.Bc,this.Bc=this.Bc.copy())},B.prototype.commitRoute=B.prototype.jj=function(){var a,b,c,d,e,f,g,h,i,j;if(null!==this.De){for(a=this.De,b=this.Bc,c=1/0,d=1/0,e=a.count,f=0;e>f;f++)g=a.n[f],c=Math.min(g.x,c),d=Math.min(g.y,d);for(h=1/0,i=1/0,j=b.count,f=0;j>f;f++)g=b.n[f],h=Math.min(g.x,h),i=Math.min(g.y,i),g.freeze();if(b.freeze(),j===e){for(f=0;j>f;f++)if(e=a.n[f],g=b.n[f],e.x-c!==g.x-h||e.y-d!==g.y-i){this.ef();break}}else this.ef();this.De=null,this.h&&this.h.fc.zd&&(this.No=b),gn(this),this.j("points",a,b)}},B.prototype.rollbackRoute=B.prototype.mK=function(){null!==this.De&&(this.Bc=this.De,this.De=null)},B.prototype.invalidateRoute=B.prototype.hc=function(){if(!(this.Mz||this.h&&this.h.ma.yb)){var a=this.fr();null!==a&&(this.Bg=!1,this.ef(),a.ja())}},t.defineProperty(B,{kq:null},function(){return this.Mz},function(a){this.Mz=a}),B.prototype.updateRoute=function(){if(!this.Bg&&!this.Hy){var a=!0;try{this.Hy=!0,this.Kl(),a=this.computePoints()}finally{this.Hy=!1,a?this.jj():this.mK()}}},B.prototype.computePoints=function(){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,u,v,w,a=this.h;return null===a?!1:(b=this.ca,c=null,null===b?(a.Dm||(a.Sv=new W,a.Sv.Ea=K.vq,a.Sv.lb=0,a.Dm=new y,a.Dm.add(a.Sv),a.Dm.zf()),this.Xn&&(a.Dm.position=a.Dm.location=this.Xn,a.Dm.zf(),b=a.Dm,c=a.Sv)):c=this.sd,null!==c&&(d=Qk(c),d!==b&&b.Va()?c=d:(d=b.findVisibleNode(),null!==d&&d!==b?(b=d,c=d.tl("")):b=d)),this.QD=b,null!==b&&null!==c&&b.location.P()?(d=this.fa,e=null,null===d?(a.Em||(a.Tv=new W,a.Tv.Ea=K.vq,a.Tv.lb=0,a.Em=new y,a.Em.add(a.Tv),a.Em.zf()),this.ao&&(a.Em.position=a.Em.location=this.ao,a.Em.zf(),d=a.Em,e=a.Tv)):e=this.Xd,null!==e&&(a=Qk(e),a!==d&&d.Va()?e=a:(a=d.findVisibleNode(),null!==a&&a!==d?(d=a,e=a.tl("")):d=a)),this.SD=d,null!==d&&null!==e&&d.location.P()?(a=this.ra,f=jn(this,c),g=kn(this,e),h=c===e&&null!==c,i=this.pc,j=this.Je===Vg,this.Hi=h&&!i?j=!0:!1,k=this.Zo===Ng||h,i||f!==Qb||g!==Qb||h?(j=this.rj,k&&(i&&j||h)&&this.hp(),l=h?this.computeCurviness():0,m=this.getLinkPoint(b,c,f,!0,i,d,e),n=0,o=0,p=0,(i||f!==Qb||h)&&(q=this.computeEndSegmentLength(b,c,f,!0),p=this.getLinkDirection(b,c,m,f,!0,i,d,e),h&&(p-=i?90:30,0>l&&(p-=180)),0>p?p+=360:p>=360&&(p-=360),h&&(q+=Math.abs(l)),0===p?n=q:90===p?o=q:180===p?n=-q:270===p?o=-q:(n=q*Math.cos(p*Math.PI/180),o=q*Math.sin(p*Math.PI/180)),f.Me()&&h&&(r=c.wb(Yb,t.N()),s=t.qc(r.x+1e3*n,r.y+1e3*o),this.getLinkPointFromPoint(b,c,r,s,!0,m),t.B(r),t.B(s))),q=this.getLinkPoint(d,e,g,!1,i,b,c),u=0,v=0,w=0,(i||g!==Qb||h)&&(r=this.computeEndSegmentLength(d,e,g,!1),w=this.getLinkDirection(d,e,q,g,!1,i,b,c),h&&(w+=i?0:30,0>l&&(w+=180)),0>w?w+=360:w>=360&&(w-=360),h&&(r+=Math.abs(l)),0===w?u=r:90===w?v=r:180===w?u=-r:270===w?v=-r:(u=r*Math.cos(w*Math.PI/180),v=r*Math.sin(w*Math.PI/180)),g.Me()&&h&&(r=e.wb(Yb,t.N()),s=t.qc(r.x+1e3*u,r.y+1e3*v),this.getLinkPointFromPoint(d,e,r,s,!1,q),t.B(r),t.B(s))),e=m,(i||f!==Qb||h)&&(e=new E(m.x+n,m.y+o)),c=q,(i||g!==Qb||h)&&(c=new E(q.x+u,q.y+v)),!k&&!i&&f===Qb&&a>3&&this.adjustPoints(0,m,a-2,c)?this.Lf(a-1,q):!k&&!i&&g===Qb&&a>3&&this.adjustPoints(1,e,a-1,q)?this.Lf(0,m):!k&&!i&&a>4&&this.adjustPoints(1,e,a-2,c)?(this.Lf(0,m),this.Lf(a-1,q)):!k&&i&&a>=6&&!j&&this.adjustPoints(1,e,a-2,c)?(this.Lf(0,m),this.Lf(a-1,q)):(this.hp(),this.hi(m),(i||f!==Qb||h)&&this.hi(e),i&&this.addOrthoPoints(e,p,c,w,b,d),(i||g!==Qb||h)&&this.hi(c),this.hi(q))):(f=!1,!k&&a>=3&&(k=this.getLinkPoint(b,c,Qb,!0,!1,d,e),f=this.getLinkPoint(d,e,Qb,!1,!1,b,c),f=this.adjustPoints(0,k,a-1,f)),f||(this.hp(),j?(a=this.getLinkPoint(b,c,Qb,!0,!1,d,e),k=this.getLinkPoint(d,e,Qb,!1,!1,b,c),f=k.x-a.x,g=k.y-a.y,h=this.computeCurviness(),j=i=0,m=a.x+f/3,p=a.y+g/3,n=m,o=p,K.I(g,0)?o=f>0?o-h:o+h:(i=-f/g,j=Math.sqrt(h*h/(i*i+1)),0>h&&(j=-j),n=(0>g?-1:1)*j+m,o=i*(n-m)+p),m=a.x+2*f/3,p=a.y+2*g/3,q=m,u=p,K.I(g,0)?u=f>0?u-h:u+h:(q=(0>g?-1:1)*j+m,u=i*(q-m)+p),this.hp(),this.hi(a),this.jl(n,o),this.jl(q,u),this.hi(k),this.Lf(0,this.getLinkPoint(b,c,Qb,!0,!1,d,e)),this.Lf(3,this.getLinkPoint(d,e,Qb,!1,!1,b,c))):(a=d,d=this.getLinkPoint(b,c,Qb,!0,!1,a,e),e=this.getLinkPoint(a,e,Qb,!1,!1,b,c),this.hasCurviness()?(g=e.x-d.x,b=e.y-d.y,c=this.computeCurviness(),a=d.x+g/2,k=d.y+b/2,f=a,h=k,K.I(b,0)?h=g>0?h-c:h+c:(g=-g/b,f=Math.sqrt(c*c/(g*g+1)),0>c&&(f=-f),f=(0>b?-1:1)*f+a,h=g*(f-a)+k),this.hi(d),this.jl(f,h)):this.hi(d),this.hi(e)))),!0):!1):!1)},B.prototype.getLinkPointFromPoint=function(a,b,c,d,e,f){var g,h,i,j,k,l;return void 0===f&&(f=new E),null===a||null===b?(f.assign(c),f):(a.Va()||(e=a.findVisibleNode(),null!==e&&e!==a&&(b=e.port)),a=null,e=b.ia,null===e||e.Of()||(e=e.ia),null===e?(e=d.x,d=d.y,g=c.x,c=c.y):(a=e.ue,e=1/(a.m11*a.m22-a.m12*a.m21),g=a.m22*e,h=-a.m12*e,i=-a.m21*e,j=a.m11*e,k=e*(a.m21*a.dy-a.m22*a.dx),l=e*(a.m12*a.dx-a.m11*a.dy),e=d.x*g+d.y*i+k,d=d.x*h+d.y*j+l,g=c.x*g+c.y*i+k,c=c.x*h+c.y*j+l),b.yp(e,d,g,c,f),a&&f.transform(a),f)},B.prototype.getLinkPoint=function(a,b,c,d,e,f,g,h){var i,j,k;return void 0===h&&(h=new E),c.Cd()?(b.wb(c,h),h):c.Gp()&&(c=mn(this,b),null!==c)?(h.assign(c.Mp),e&&this.bu===Vm&&(i=mn(this,g),c.$m<i.$m&&(c=t.N(),i=t.N(),j=new F(b.wb(Vb,c),b.wb(bc,i)),k=this.computeSpot(!d),a=this.getLinkPoint(f,g,k,!d,e,a,b,i),a.x>=j.x&&a.x<=j.x+j.width?h.x=a.x:a.y>=j.y&&a.y<=j.y+j.height&&(h.y=a.y),t.B(c),t.B(i))),h):(f=b.wb(Yb,t.N()),c=null,this.ra>(e?6:2)?(g=d?this.o(1):this.o(this.ra-2),e&&(g=ln(f,g.copy()))):(c=t.N(),g=g.wb(Yb,c),e&&(g=ln(f,g))),this.getLinkPointFromPoint(a,b,f,g,d,h),t.B(f),null!==c&&t.B(c),h)},B.prototype.getLinkDirection=function(a,b,c,d,e,f,g,h){a:if(d.Cd())c=d.x>d.y?d.x>1-d.y?0:d.x<1-d.y?270:315:d.x<d.y?d.x>1-d.y?90:d.x<1-d.y?180:135:.5>d.x?225:.5<d.x?45:0;else{if(d.Gp()&&(a=mn(this,b),null!==a))switch(a.le){case t.hd:c=270;break a;case t.Pc:c=180;break a;default:case t.Zc:c=0;break a;case t.Yc:c=90;break a}a=b.wb(Yb,t.N()),d=null,this.ra>(f?6:2)?(h=e?this.o(1):this.o(this.ra-2),h=f?ln(a,h.copy()):c):(d=t.N(),h=h.wb(Yb,d)),c=Math.abs(h.x-a.x)>Math.abs(h.y-a.y)?h.x>=a.x?0:180:h.y>=a.y?90:270,t.B(a),null!==d&&t.B(d)}switch(f=Jm,f=e?this.vp:this.lq,f===Jm&&(f=e?b.vp:b.lq),f){case Km:b=b.ul(),c+=b,c>=360&&(c-=360);break;case Jm:case hk:if(b=b.ul(),0===b)break;b>=45&&135>b?c+=90:b>=135&&225>b?c+=180:b>=225&&315>b&&(c+=270),c>=360&&(c-=360)}return c},B.prototype.computeEndSegmentLength=function(a,b,c,d){return null!==b&&c.Gp()&&(a=mn(this,b),null!==a)?a.Sw:(a=0/0,a=d?this.rk:this.xk,null!==b&&isNaN(a)&&(a=d?b.rk:b.xk),isNaN(a)&&(a=10),a)},B.prototype.computeSpot=function(a){return a?jn(this,this.sd):kn(this,this.Xd)},B.prototype.computeOtherPoint=function(a,b){var d,c=b.wb(Yb);return d=b.ds,d=null!==d?on(d,this):null,null!==d&&(c=d.Mp),c},B.prototype.computeShortLength=function(a){return a?pn(this):qn(this)},B.prototype.pk=function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s,u;if(!1===this.mf)return!1;if(void 0===b&&(b=null),void 0===c&&(c=null),g=f,void 0===f&&(g=t.Bh(),g.reset()),g.multiply(this.transform),this.Zm(a,g))return Zl(this,b,c,e),void 0===f&&t.cf(g),!0;if(this.ag(a,g)){if(h=!1,!this.fh)for(i=this.va.length;i--;)if(j=this.va.n[i],!(!j.visible&&j!==this.Zb||(k=j.pa,l=this.Ja,k.x>l.width||k.y>l.height||0>k.x+k.width||0>k.y+k.height))){if(k=t.Bh(),k.set(g),j instanceof C)h=j.pk(a,b,c,d,e,k);else if(this.path===j)if(h=j,m=a,n=d,l=k,!1===h.mf)h=!1;else if(l.multiply(h.transform),n)a:if(o=m,p=l,h.Zm(o,p))h=!0;else{if(void 0===p&&(p=h.transform,o.kk(h.pa))){h=!0;break a}l=o.left,m=o.right,n=o.top,o=o.bottom,q=t.N(),r=t.N(),s=t.N(),u=t.Bh(),u.set(p),u.$A(h.transform),u.IA(),r.x=m,r.y=n,r.transform(u),q.x=l,q.y=n,q.transform(u),p=!1,fm(h,q,r,s)?p=!0:(q.x=m,q.y=o,q.transform(u),fm(h,q,r,s)?p=!0:(r.x=l,r.y=o,r.transform(u),fm(h,q,r,s)?p=!0:(q.x=l,q.y=n,q.transform(u),fm(h,q,r,s)&&(p=!0)))),t.cf(u),t.B(q),t.B(r),t.B(s),h=p}else h=h.Zm(m,l);else h=mk(j,a,d,k);h&&(null!==b&&(j=b(j)),j&&(null===c||c(j))&&e.add(j)),t.cf(k)}return void 0===f&&t.cf(g),h||null!==this.background||null!==this.hk}return void 0===f&&t.cf(g),!1},t.A(B,{pc:"isOrthogonal"},function(){return 2===(2&this.Cm.value)}),t.A(B,{rj:"isAvoiding"},function(){return 4===(4&this.Cm.value)}),B.prototype.computeCurve=function(){if(null===this.Hi){var a=this.sd,b=this.pc;this.Hi=null!==a&&a===this.Xd&&!b}return this.Hi?Vg:this.Je},B.prototype.computeCorner=function(){if(this.Je===Vg)return 0;var a=this.Kw;return(isNaN(a)||0>a)&&(a=10),a},B.prototype.computeCurviness=function(){var b,c,a=this.kt;return isNaN(a)&&(b=this.pf,0!==b?(a=10,c=this.h,null!==c&&(a=c.Np),c=Math.abs(b),a=a/2+(0|(c-1)/2)*a,0===c%2&&(a=-a),0>b&&(a=-a)):a=10),a},B.prototype.computeThickness=function(){var a=this.path;return null!==a?Math.max(a.lb,1):1},B.prototype.hasCurviness=function(){return!isNaN(this.kt)||0!==this.pf&&!this.pc},B.prototype.adjustPoints=function(a,b,c,d){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,e=this.Zo;if(this.pc){if(e===Zk)return!1;e===$k&&(e=Yk)}switch(e){case Zk:if(f=this.o(a),g=this.o(c),!(f.O(b)&&g.O(d)||(e=f.x,f=f.y,h=g.x-e,i=g.y-f,j=Math.sqrt(h*h+i*i),K.I(j,0)))){for(K.I(h,0)?k=0>i?-Math.PI/2:Math.PI/2:(k=Math.atan(i/Math.abs(h)),0>h&&(k=Math.PI-k)),g=b.x,l=b.y,h=d.x-g,m=d.y-l,i=Math.sqrt(h*h+m*m),K.I(h,0)?m=0>m?-Math.PI/2:Math.PI/2:(m=Math.atan(m/Math.abs(h)),0>h&&(m=Math.PI-m)),j=i/j,k=m-k,this.Lf(a,b),a+=1;c>a;a++)b=this.o(a),h=b.x-e,i=b.y-f,b=Math.sqrt(h*h+i*i),K.I(b,0)||(K.I(h,0)?i=0>i?-Math.PI/2:Math.PI/2:(i=Math.atan(i/Math.abs(h)),0>h&&(i=Math.PI-i)),h=i+k,b*=j,this.aa(a,g+b*Math.cos(h),l+b*Math.sin(h)));this.Lf(c,d)}return!0;case $k:if(f=this.o(a),l=this.o(c),!f.O(b)||!l.O(d)){for(e=f.x,f=f.y,g=l.x,l=l.y,j=(g-e)*(g-e)+(l-f)*(l-f),h=b.x,k=b.y,i=d.x,m=d.y,n=0,o=1,n=0!==i-h?(m-k)/(i-h):9e9,0!==n&&(o=Math.sqrt(1+1/(n*n))),this.Lf(a,b),a+=1;c>a;a++)b=this.o(a),p=b.x,q=b.y,r=.5,0!==j&&(r=((e-p)*(e-g)+(f-q)*(f-l))/j),s=e+r*(g-e),t=f+r*(l-f),b=Math.sqrt((p-s)*(p-s)+(q-t)*(q-t)),n*(p-s)+t>q&&(b=-b),n>0&&(b=-b),p=h+r*(i-h),r=k+r*(m-k),0!==n?(b=p+b/o,this.aa(a,b,r-(b-p)/n)):this.aa(a,p,r+b);this.Lf(c,d)}return!0;case Yk:return this.pc&&(e=this.o(a),f=this.o(a+1),g=this.o(a+2),K.I(e.y,f.y)?K.I(f.x,g.x)?this.aa(a+1,f.x,b.y):K.I(f.y,g.y)&&this.aa(a+1,b.x,f.y):K.I(e.x,f.x)&&(K.I(f.y,g.y)?this.aa(a+1,b.x,f.y):K.I(f.x,g.x)&&this.aa(a+1,f.x,b.y)),e=this.o(c),f=this.o(c-1),g=this.o(c-2),K.I(e.y,f.y)?K.I(f.x,g.x)?this.aa(c-1,f.x,d.y):K.I(f.y,g.y)&&this.aa(c-1,d.x,f.y):K.I(e.x,f.x)&&(K.I(f.y,g.y)?this.aa(c-1,d.x,f.y):K.I(f.x,g.x)&&this.aa(c-1,f.x,d.y))),this.Lf(a,b),this.Lf(c,d),!0;default:return!1}},B.prototype.addOrthoPoints=function(a,b,c,d,e,f){var g,h,i,j,k,l,n,m;b=b>=-45&&45>b?0:b>=45&&135>b?90:b>=135&&225>b?180:270,d=d>=-45&&45>d?0:d>=45&&135>d?90:d>=135&&225>d?180:270,g=e.pa.copy(),h=f.pa.copy(),g.P()&&h.P()&&(g.$f(8,8),h.$f(8,8),g.yj(a),h.yj(c),0===b?c.x>a.x||270===d&&c.y<a.y&&h.right>a.x||90===d&&c.y>a.y&&h.right>a.x?(i=new E(c.x,a.y),j=new E(c.x,(a.y+c.y)/2),180===d?(i.x=this.computeMidOrthoPosition(a.x,c.x,!1),j.x=i.x,j.y=c.y):270===d&&c.y<a.y||90===d&&c.y>a.y?(i.x=a.x<h.left?this.computeMidOrthoPosition(a.x,h.left,!1):a.x<h.right&&(270===d&&a.y<h.top||90===d&&a.y>h.bottom)?this.computeMidOrthoPosition(a.x,c.x,!1):h.right,j.x=i.x,j.y=c.y):0===d&&a.x<h.left&&a.y>h.top&&a.y<h.bottom&&(i.x=a.x,i.y=a.y<c.y?Math.min(c.y,h.top):Math.max(c.y,h.bottom),j.y=i.y)):(i=new E(a.x,c.y),j=new E((a.x+c.x)/2,c.y),(180===d||90===d&&c.y<g.top||270===d&&c.y>g.bottom)&&(180===d&&(h.La(a)||g.La(c))?i.y=this.computeMidOrthoPosition(a.y,c.y,!0):c.y<a.y&&(180===d||90===d)?i.y=this.computeMidOrthoPosition(g.top,Math.max(c.y,h.bottom),!0):c.y>a.y&&(180===d||270===d)&&(i.y=this.computeMidOrthoPosition(g.bottom,Math.min(c.y,h.top),!0)),j.x=c.x,j.y=i.y),i.y>g.top&&i.y<g.bottom&&(c.x>=g.left&&c.x<=a.x||a.x<=h.right&&a.x>=c.x?(90===d||270===d)&&(i=new E(Math.max((a.x+c.x)/2,a.x),a.y),j=new E(i.x,c.y)):(i.y=270===d||(0===d||180===d)&&c.y<a.y?Math.min(c.y,0===d?g.top:Math.min(g.top,h.top)):Math.max(c.y,0===d?g.bottom:Math.max(g.bottom,h.bottom)),j.x=c.x,j.y=i.y))):180===b?c.x<a.x||270===d&&c.y<a.y&&h.left<a.x||90===d&&c.y>a.y&&h.left<a.x?(i=new E(c.x,a.y),j=new E(c.x,(a.y+c.y)/2),0===d?(i.x=this.computeMidOrthoPosition(a.x,c.x,!1),j.x=i.x,j.y=c.y):270===d&&c.y<a.y||90===d&&c.y>a.y?(i.x=a.x>h.right?this.computeMidOrthoPosition(a.x,h.right,!1):a.x>h.left&&(270===d&&a.y<h.top||90===d&&a.y>h.bottom)?this.computeMidOrthoPosition(a.x,c.x,!1):h.left,j.x=i.x,j.y=c.y):180===d&&a.x>h.right&&a.y>h.top&&a.y<h.bottom&&(i.x=a.x,i.y=a.y<c.y?Math.min(c.y,h.top):Math.max(c.y,h.bottom),j.y=i.y)):(i=new E(a.x,c.y),j=new E((a.x+c.x)/2,c.y),(0===d||90===d&&c.y<g.top||270===d&&c.y>g.bottom)&&(0===d&&(h.La(a)||g.La(c))?i.y=this.computeMidOrthoPosition(a.y,c.y,!0):c.y<a.y&&(0===d||90===d)?i.y=this.computeMidOrthoPosition(g.top,Math.max(c.y,h.bottom),!0):c.y>a.y&&(0===d||270===d)&&(i.y=this.computeMidOrthoPosition(g.bottom,Math.min(c.y,h.top),!0)),j.x=c.x,j.y=i.y),i.y>g.top&&i.y<g.bottom&&(c.x<=g.right&&c.x>=a.x||a.x>=h.left&&a.x<=c.x?(90===d||270===d)&&(i=new E(Math.min((a.x+c.x)/2,a.x),a.y),j=new E(i.x,c.y)):(i.y=270===d||(0===d||180===d)&&c.y<a.y?Math.min(c.y,180===d?g.top:Math.min(g.top,h.top)):Math.max(c.y,180===d?g.bottom:Math.max(g.bottom,h.bottom)),j.x=c.x,j.y=i.y))):90===b?c.y>a.y||180===d&&c.x<a.x&&h.bottom>a.y||0===d&&c.x>a.x&&h.bottom>a.y?(i=new E(a.x,c.y),j=new E((a.x+c.x)/2,c.y),270===d?(i.y=this.computeMidOrthoPosition(a.y,c.y,!0),j.x=c.x,j.y=i.y):180===d&&c.x<a.x||0===d&&c.x>a.x?(i.y=a.y<h.top?this.computeMidOrthoPosition(a.y,h.top,!0):a.y<h.bottom&&(180===d&&a.x<h.left||0===d&&a.x>h.right)?this.computeMidOrthoPosition(a.y,c.y,!0):h.bottom,j.x=c.x,j.y=i.y):90===d&&a.y<h.top&&a.x>h.left&&a.x<h.right&&(i.x=a.x<c.x?Math.min(c.x,h.left):Math.max(c.x,h.right),i.y=a.y,j.x=i.x)):(i=new E(c.x,a.y),j=new E(c.x,(a.y+c.y)/2),(270===d||0===d&&c.x<g.left||180===d&&c.x>g.right)&&(270===d&&(h.La(a)||g.La(c))?i.x=this.computeMidOrthoPosition(a.x,c.x,!1):c.x<a.x&&(270===d||0===d)?i.x=this.computeMidOrthoPosition(g.left,Math.max(c.x,h.right),!1):c.x>a.x&&(270===d||180===d)&&(i.x=this.computeMidOrthoPosition(g.right,Math.min(c.x,h.left),!1)),j.x=i.x,j.y=c.y),i.x>g.left&&i.x<g.right&&(c.y>=g.top&&c.y<=a.y||a.y<=h.bottom&&a.y>=c.y?(0===d||180===d)&&(i=new E(a.x,Math.max((a.y+c.y)/2,a.y)),j=new E(c.x,i.y)):(i.x=180===d||(90===d||270===d)&&c.x<a.x?Math.min(c.x,90===d?g.left:Math.min(g.left,h.left)):Math.max(c.x,90===d?g.right:Math.max(g.right,h.right)),j.x=i.x,j.y=c.y))):c.y<a.y||180===d&&c.x<a.x&&h.top<a.y||0===d&&c.x>a.x&&h.top<a.y?(i=new E(a.x,c.y),j=new E((a.x+c.x)/2,c.y),90===d?(i.y=this.computeMidOrthoPosition(a.y,c.y,!0),j.x=c.x,j.y=i.y):180===d&&c.x<a.x||0===d&&c.x>=a.x?(i.y=a.y>h.bottom?this.computeMidOrthoPosition(a.y,h.bottom,!0):a.y>h.top&&(180===d&&a.x<h.left||0===d&&a.x>h.right)?this.computeMidOrthoPosition(a.y,c.y,!0):h.top,j.x=c.x,j.y=i.y):270===d&&a.y>h.bottom&&a.x>h.left&&a.x<h.right&&(i.x=a.x<c.x?Math.min(c.x,h.left):Math.max(c.x,h.right),i.y=a.y,j.x=i.x)):(i=new E(c.x,a.y),j=new E(c.x,(a.y+c.y)/2),(90===d||0===d&&c.x<g.left||180===d&&c.x>g.right)&&(90===d&&(h.La(a)||g.La(c))?i.x=this.computeMidOrthoPosition(a.x,c.x,!1):c.x<a.x&&(90===d||0===d)?i.x=this.computeMidOrthoPosition(g.left,Math.max(c.x,h.right),!1):c.x>a.x&&(90===d||180===d)&&(i.x=this.computeMidOrthoPosition(g.right,Math.min(c.x,h.left),!1)),j.x=i.x,j.y=c.y),i.x>g.left&&i.x<g.right&&(c.y<=g.bottom&&c.y>=a.y||a.y>=h.top&&a.y<=c.y?(0===d||180===d)&&(i=new E(a.x,Math.min((a.y+c.y)/2,a.y)),j=new E(c.x,i.y)):(i.x=180===d||(90===d||270===d)&&c.x<a.x?Math.min(c.x,270===d?g.left:Math.min(g.left,h.left)):Math.max(c.x,270===d?g.right:Math.max(g.right,h.right)),j.x=i.x,j.y=c.y))),k=i,l=j,this.rj?(m=this.h,(n=null===m)||(m.fc.Ig?n=!1:(n=m.Ya,n=n instanceof kf?!n.ew||n.EF:!0),n=!n),n||g.La(c)||h.La(a)||e===f||this.layer.Dc?a=!1:(e=ia(m,!0,this),rn(e,Math.min(a.x,k.x),Math.min(a.y,k.y),Math.abs(a.x-k.x),Math.abs(a.y-k.y))&&rn(e,Math.min(k.x,l.x),Math.min(k.y,l.y),Math.abs(k.x-l.x),Math.abs(k.y-l.y))&&rn(e,Math.min(l.x,c.x),Math.min(l.y,c.y),Math.abs(l.x-c.x),Math.abs(l.y-c.y))?a=!1:(g=g.copy().zj(h),g.$f(2*e.Wm,2*e.Vm),sn(e,a,b,c,d,g),h=tn(e,c.x,c.y),e.abort||h!==ka||(Tj(e),h=e.QG,g.$f(e.Wm*h,e.Vm*h),sn(e,a,b,c,d,g),h=tn(e,c.x,c.y)),e.abort||h!==ka||(Tj(e),h=e.OF,g.$f(e.Wm*h,e.Vm*h),sn(e,a,b,c,d,g),h=tn(e,c.x,c.y)),!e.abort&&h===ka&&e.sH&&(Tj(e),sn(e,a,b,c,d,e.Ub),h=tn(e,c.x,c.y)),!e.abort&&ka>h&&tn(e,c.x,c.y)!==ja?(un(this,e,c.x,c.y,d,!0),d=this.o(2),4>this.ra?(0===b||180===b?(d.x=a.x,d.y=c.y):(d.x=c.x,d.y=a.y),this.aa(2,d.x,d.y),this.C(3,d.x,d.y)):(c=this.o(3),0===b||180===b?K.I(d.x,c.x)?(b=0===b?Math.max(d.x,a.x):Math.min(d.x,a.x),this.aa(2,b,a.y),this.aa(3,b,c.y)):K.I(d.y,c.y)?(Math.abs(a.y-d.y)<=e.Vm/2&&(this.aa(2,d.x,a.y),this.aa(3,c.x,a.y)),this.C(2,d.x,a.y)):this.aa(2,a.x,d.y):(90===b||270===b)&&(K.I(d.y,c.y)?(b=90===b?Math.max(d.y,a.y):Math.min(d.y,a.y),this.aa(2,a.x,b),this.aa(3,c.x,b)):K.I(d.x,c.x)?(Math.abs(a.x-d.x)<=e.Wm/2&&(this.aa(2,a.x,d.y),this.aa(3,a.x,c.y)),this.C(2,a.x,d.y)):this.aa(2,d.x,a.y))),a=!0):a=!1))):a=!1,a||(this.hi(i),this.hi(j)))},B.prototype.computeMidOrthoPosition=function(a,b){if(this.hasCurviness()){var c=this.computeCurviness();return(a+b)/2+c}return(a+b)/2},B.prototype.findClosestSegment=function(a){var b,c,d,f,g,h,i;for(e&&t.l(a,E,B,"findClosestSegment:p"),b=a.x,a=a.y,c=this.o(0),d=this.o(1),f=mb(b,a,c.x,c.y,d.x,d.y),g=0,h=1;h<this.ra-1;h++)c=this.o(h+1),i=mb(b,a,d.x,d.y,c.x,c.y),d=c,f>i&&(g=h,f=i);return g},B.prototype.invalidateGeometry=B.prototype.ef=function(){this.Wi=this.Ta=null,this.ja()},t.A(B,{td:"geometry"},function(){return null===this.Ta&&(this.updateRoute(),this.Ta=this.makeGeometry()),this.Ta}),B.prototype.wx=function(){var a,b,c,d,e;if(null===this.Ta&&!1!==this.Bg&&(this.Ta=this.makeGeometry(),a=this.fr(),null!==a))for(a.Ta=this.Ta,b=this.va,c=b.length,d=0;c>d;d++)e=b.n[d],e!==a&&e.pi&&e instanceof W&&(e.Ta=this.Ta)},B.prototype.makeGeometry=function(){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,u,v,a=this.ra;if(2>a)return b=new Pc(Qc),c=new Rc(0,0),b.Fb.add(c),b;if(d=!1,b=this.h,null!==b&&0!==b.ma.Qe&&fn(this)&&(d=!0),e=this.o(0).copy(),f=e.copy(),g=this.computeCurve(),g===Vg&&a>=3&&!K.sb(this.En,0))if(3===a)h=this.o(1),b=Math.min(e.x,h.x),c=Math.min(e.y,h.y),h=this.o(2),b=Math.min(b,h.x),c=Math.min(c,h.y);else{if(this.pc)for(h=0;a>h;h++)b=this.Bc.n[h],f.x=Math.min(b.x,f.x),f.y=Math.min(b.y,f.y);else for(h=3;a>h;h+=3)h+3>=a&&(h=a-1),i=this.o(h),f.x=Math.min(i.x,f.x),f.y=Math.min(i.y,f.y);b=f.x,c=f.y}else{for(h=0;a>h;h++)b=this.Bc.n[h],f.x=Math.min(b.x,f.x),f.y=Math.min(b.y,f.y);b=f.x,c=f.y}if(b-=this.Qz.x,c-=this.Qz.y,e.x-=b,e.y-=c,2===a)j=this.o(1).copy(),j.x-=b,j.y-=c,0!==pn(this)&&xn(this,e,!0,f),0!==qn(this)&&xn(this,j,!1,f),b=new Pc(Tc),b.sa=e.x,b.ta=e.y,b.D=j.x,b.F=j.y;else{if(j=t.u(),0!==pn(this)&&xn(this,e,!0,f),P(j,e.x,e.y,!1,!1),g===Vg&&a>=3&&!K.sb(this.En,0))if(3===a)h=this.o(1),a=h.x-b,d=h.y-c,h=this.o(2).copy(),h.x-=b,h.y-=c,0!==qn(this)&&xn(this,h,!1,f),Q(j,a,d,a,d,h.x,h.y);else if(this.pc){for(f=new E(b,c),e=this.o(1).copy(),g=new E(b,c),a=new E(b,c),d=this.o(0),i=null,k=this.En/3,h=1;h<this.ra-1;h++)i=this.o(h),l=d,m=i,n=this.o(yn(this,i,h,!1)),K.sb(l.x,m.x)&&K.sb(m.x,n.x)||K.sb(l.y,m.y)&&K.sb(m.y,n.y)||(o=k,p=g,q=a,isNaN(o)&&(o=this.En/3),r=l.x,l=l.y,s=m.x,m=m.y,u=n.x,n=n.y,v=o*zn(r,l,s,m),o*=zn(s,m,u,n),K.sb(l,m)&&K.sb(s,u)&&(s>r?n>m?(p.x=s-v,p.y=m-v,q.x=s+o,q.y=m+o):(p.x=s-v,p.y=m+v,q.x=s+o,q.y=m-o):n>m?(p.x=s+v,p.y=m-v,q.x=s-o,q.y=m+o):(p.x=s+v,p.y=m+v,q.x=s-o,q.y=m-o)),K.sb(r,s)&&K.sb(m,n)&&(m>l?(u>s?(p.x=s-v,p.y=m-v,q.x=s+o):(p.x=s+v,p.y=m-v,q.x=s-o),q.y=m+o):(u>s?(p.x=s-v,p.y=m+v,q.x=s+o):(p.x=s+v,p.y=m+v,q.x=s-o),q.y=m-o)),(K.sb(r,s)&&K.sb(s,u)||K.sb(l,m)&&K.sb(m,n))&&(r=.5*(r+u),l=.5*(l+n),p.x=r,p.y=l,q.x=r,q.y=l),1===h?(e.x=.5*(d.x+i.x),e.y=.5*(d.y+i.y)):2===h&&K.sb(d.x,this.o(0).x)&&K.sb(d.y,this.o(0).y)&&(e.x=.5*(d.x+i.x),e.y=.5*(d.y+i.y)),Q(j,e.x-b,e.y-c,g.x-b,g.y-c,i.x-b,i.y-c),f.set(g),e.set(a),d=i);h=d.x,d=d.y,f=this.o(this.ra-1),h=.5*(h+f.x),d=.5*(d+f.y),Q(j,a.x-b,a.y-c,h-b,d-c,f.x-b,f.y-c)}else for(h=3;a>h;h+=3)d=this.o(h-2),h+3>=a&&(h=a-1),f=this.o(h-1),i=this.o(h),h===a-1&&0!==qn(this)&&(i=i.copy(),xn(this,i,!1,K.Bj)),Q(j,d.x-b,d.y-c,f.x-b,f.y-c,i.x-b,i.y-c);else{for(f=t.N(),f.assign(this.o(0)),h=1;a>h;){if(h=yn(this,f,h,h>1),p=this.o(h),h>=a-1){f!==p&&(0!==qn(this)&&(p=p.copy(),xn(this,p,!1,K.Bj)),An(this,j,-b,-c,f,p,d));break}h=yn(this,p,h+1,a-3>h),e=j,g=-b,i=-c,k=f,q=this.o(h),r=f,l=d,K.I(k.y,p.y)&&K.I(p.x,q.x)?(o=this.computeCorner(),o=Math.min(o,Math.abs(p.x-k.x)/2),o=s=Math.min(o,Math.abs(q.y-p.y)/2),K.I(o,0)?(An(this,e,g,i,k,p,l),r.assign(p)):(m=p.x,u=p.y,n=m,v=u,m=p.x>k.x?p.x-o:p.x+o,v=q.y>p.y?p.y+s:p.y-s,An(this,e,g,i,k,new E(m,u),l),fd(e,p.x+g,p.y+i,n+g,v+i),r.p(n,v))):K.I(k.x,p.x)&&K.I(p.y,q.y)?(o=this.computeCorner(),s=Math.min(o,Math.abs(p.y-k.y)/2),s=o=Math.min(s,Math.abs(q.x-p.x)/2),K.I(o,0)?(An(this,e,g,i,k,p,l),r.assign(p)):(m=p.x,v=u=p.y,u=p.y>k.y?p.y-s:p.y+s,n=q.x>p.x?p.x+o:p.x-o,An(this,e,g,i,k,new E(m,u),l),fd(e,p.x+g,p.y+i,n+g,v+i),r.p(n,v))):(An(this,e,g,i,k,p,l),r.assign(p))}t.B(f)}b=j.s,t.v(j)}return b},t.A(B,{ut:"firstPickIndex"},function(){return 2>=this.ra?0:this.pc||jn(this)!==Qb?1:0}),t.A(B,{sx:"lastPickIndex"},function(){var a=this.ra;return 0===a?0:2>=a?a-1:this.pc||kn(this)!==Qb?a-2:a-1}),B.prototype.usesSamePort=function(a){var b=this.ra,c=a.ra;if(b>0&&c>0){if(this.o(0).Af(a.o(0))||this.o(b-1).Af(a.o(c-1)))return!0}else if(this.ca===a.ca||this.fa===a.fa)return!0;return!1},B.prototype.kf=function(a){if(x.prototype.kf.call(this,a),a&&this.updateRoute(),null!==this.Ce)for(var b=this.Ce.k;b.next();)b.value.kf(a)},t.g(B,"adjusting",B.prototype.Zo),t.defineProperty(B,{Zo:"adjusting"},function(){return this.Aq},function(a){var b=this.Aq;b!==a&&(e&&t.Fa(a,B,B,"adjusting"),this.Aq=a,this.j("adjusting",b,a))}),t.g(B,"corner",B.prototype.Kw),t.defineProperty(B,{Kw:"corner"},function(){return this.Nq},function(a){var b=this.Nq;b!==a&&(e&&t.i(a,"number",B,"corner"),this.Nq=a,this.ef(),this.j("corner",b,a))}),t.g(B,"curve",B.prototype.Je),t.defineProperty(B,{Je:"curve"},function(){return this.Qq},function(a){var b=this.Qq;b!==a&&(e&&t.Fa(a,B,B,"curve"),this.Qq=a,this.hc(),hn(this,b===Mg||b===Lg||a===Mg||a===Lg),this.j("curve",b,a))}),t.g(B,"curviness",B.prototype.kt),t.defineProperty(B,{kt:"curviness"},function(){return this.Rq},function(a){var b=this.Rq;b!==a&&(e&&t.i(a,"number",B,"curviness"),this.Rq=a,this.hc(),this.j("curviness",b,a))}),t.g(B,"routing",B.prototype.bu),t.defineProperty(B,{bu:"routing"},function(){return this.Cm},function(a){var b=this.Cm;b!==a&&(e&&t.Fa(a,B,B,"routing"),this.Cm=a,this.Hi=null,this.hc(),hn(this,2===(2&b.value)||2===(2&a.value)),this.j("routing",b,a))}),t.g(B,"smoothness",B.prototype.En),t.defineProperty(B,{En:"smoothness"},function(){return this.Es},function(a){var b=this.Es;b!==a&&(e&&t.i(a,"number",B,"smoothness"),this.Es=a,this.ef(),this.j("smoothness",b,a))}),t.ee(Nm,{Wp:!0,Ax:!0,Qt:!0,Bx:!0,links:!0,spacing:!0}),t.ee(Rj,{group:!0,Cp:!0,abort:!0,sH:!0,QG:!0,OF:!0}),ja=0,vn=1,wn=1,ka=999999999,En=ka,Rj.prototype.initialize=function(a){var b,c,d,e,f;if(!(0>=a.width||0>=a.height)){if(b=a.y,c=a.x+a.width,d=a.y+a.height,this.Sf=Math.floor((a.x-this.Fd)/this.Fd)*this.Fd,this.Tf=Math.floor((b-this.xd)/this.xd)*this.xd,this.Jr=Math.ceil((c+2*this.Fd)/this.Fd)*this.Fd,this.Kr=Math.ceil((d+2*this.xd)/this.xd)*this.xd,a=1+(0|Math.ceil((this.Jr-this.Sf)/this.Fd)),b=1+(0|Math.ceil((this.Kr-this.Tf)/this.xd)),null===this.rc||this.Mm<a-1||this.Nm<b-1){for(c=[],d=0;a>=d;d++){for(e=[],f=0;b>=f;f++)e[f]=0;c[d]=e}this.rc=c,this.Mm=a-1,this.Nm=b-1}if(null!==this.rc)for(a=0;a<=this.Mm;a++)for(b=0;b<=this.Nm;b++)this.rc[a][b]=En}},t.A(Rj,{Ub:null},function(){return new F(this.Sf,this.Tf,this.Jr-this.Sf,this.Kr-this.Tf)}),t.g(Rj,"cellWidth",Rj.prototype.Wm),t.defineProperty(Rj,{Wm:null},function(){return this.Fd},function(a){a>0&&a!==this.Fd&&(this.Fd=a,this.initialize(this.Ub))}),t.g(Rj,"cellHeight",Rj.prototype.Vm),t.defineProperty(Rj,{Vm:null},function(){return this.xd},function(a){a>0&&a!==this.xd&&(this.xd=a,this.initialize(this.Ub))}),t.ee(nn,{Kc:!0,port:!0,Pg:!0,Vp:!0}),nn.prototype.toString=function(){var a,b,c,d;for(a=this.Pg,b=this.Kc.toString()+" "+a.length.toString()+":",c=0;c<a.length;c++)d=a[c],null!==d&&(b+="\n  "+d.toString());return b},nn.prototype.UJ=function(a,b){return a===b?0:null===a?-1:null===b?1:a.le<b.le?-1:a.le>b.le?1:a.angle<b.angle?-1:a.angle>b.angle?1:0},nn.prototype.computeEndSegmentLength=function(a){var e,f,b=a.link,c=b.computeEndSegmentLength(this.Kc,this.port,Qb,b.sd===this.port),d=a.Ap;return 0>d?c:(e=a.$m,1>=e||!b.pc?c:(b=a.zx,f=a.Mp,(a.le===t.Pc||a.le===t.Yc)&&(d=e-1-d),((a=a.le===t.Pc||a.le===t.Zc)?b.y<f.y:b.x<f.x)?c+8*d:(a?b.y===f.y:b.x===f.x)?c:c+8*(e-1-d)))},t.ee(Jn,{link:!0,angle:!0,le:!0,zx:!0,Ap:!0,$m:!0,Mp:!0,Sw:!0}),Jn.prototype.toString=function(){return this.link.toString()+" "+this.angle.toString()+" "+this.le.toString()+":"+this.Ap.toString()+"/"+this.$m.toString()+" "+this.Mp.toString()+" "+this.Sw.toString()+" "+this.zx.toString()},t.ka("Group",z),t.Qa(z,y),z.prototype.cloneProtected=function(a){y.prototype.cloneProtected.call(this,a),a.Lr=this.Lr,a.Nr=this.Nr,a.al=this.al,a.Ts=this.Ts,a.qr=this.qr,a.Us=this.Us,a.Is=this.Is;var b=a.qt(function(a){return a instanceof $g});a.Nb=b instanceof $g?b:null,a.Jq=this.Jq,a.Kq=this.Kq,a.Lq=this.Lq,null!==this.$d?(a.$d=this.$d.copy(),a instanceof z&&(a.$d.group=a)):(null!==a.$d&&(a.$d.group=null),a.$d=null)},z.prototype.ki=function(a){var b,c;for(y.prototype.ki.call(this,a),b=a.rp(),a=a.Nc;a.next();)if(c=a.value,c.ja(),c.M(8),c.Yf(),c instanceof z&&(c.pu=c.ie,Kn(c,b)),c instanceof y)c.Ef(b);
else if(c instanceof B)for(c=c.tj;c.next();)c.value.Ef(b)},z.prototype.yn=function(a,b,c,d,e,f,g){if(a===Md&&"elements"===b){if(e instanceof $g)null===this.Nb?this.Nb=e:this.Nb!==e&&t.m("Cannot insert a second Placeholder into the visual tree of a Group.");else if(e instanceof C){var h=e.qt(function(a){return a instanceof $g});h instanceof $g&&(null===this.Nb?this.Nb=h:this.Nb!==h&&t.m("Cannot insert a second Placeholder into the visual tree of a Group."))}}else a===Nd&&"elements"===b&&null!==this.Nb&&(d===this.Nb?this.Nb=null:d instanceof C&&this.Nb.sj(d)&&(this.Nb=null));y.prototype.yn.call(this,a,b,c,d,e,f,g)},z.prototype.ik=function(a,b,c,d){this.$k=this.Nb,C.prototype.ik.call(this,a,b,c,d)},z.prototype.Bl=function(){var a,b;if(!y.prototype.Bl.call(this))return!1;for(a=this.Nc;a.next();)if(b=a.value,b instanceof y){if(b.Va()&&Ui(b))return!1}else if(b instanceof B&&b.Va()&&Ui(b)&&b.ca!==this&&b.fa!==this)return!1;return!0},t.A(z,{placeholder:"placeholder"},function(){return this.Nb}),t.g(z,"computesBoundsAfterDrag",z.prototype.kA),t.defineProperty(z,{kA:"computesBoundsAfterDrag"},function(){return this.Jq},function(a){var b=this.Jq;b!==a&&(t.i(a,"boolean",z,"computesBoundsAfterDrag"),this.Jq=a,this.j("computesBoundsAfterDrag",b,a))}),t.g(z,"computesBoundsIncludingLinks",z.prototype.DE),t.defineProperty(z,{DE:"computesBoundsIncludingLinks"},function(){return this.Kq},function(a){t.i(a,"boolean",z,"computesBoundsIncludingLinks");var b=this.Kq;b!==a&&(this.Kq=a,this.j("computesBoundsIncludingLinks",b,a))}),t.g(z,"computesBoundsIncludingLocation",z.prototype.EE),t.defineProperty(z,{EE:"computesBoundsIncludingLocation"},function(){return this.Lq},function(a){t.i(a,"boolean",z,"computesBoundsIncludingLocation");var b=this.Lq;b!==a&&(this.Lq=a,this.j("computesBoundsIncludingLocation",b,a))}),t.A(z,{Nc:"memberParts"},function(){return this.Mr.k}),z.prototype.cn=function(){var a,b;if(0<this.Mr.count){if(a=this.h,null===a)return;for(b=this.Mr.copy().k;b.next();)a.remove(b.value)}y.prototype.cn.call(this)},z.prototype.Ox=function(){var a=this.layer;null!==a&&a.Ox(this)},t.g(z,"layout",z.prototype.ic),t.defineProperty(z,{ic:"layout"},function(){return this.$d},function(a){var b=this.$d;b!==a&&(null!==a&&t.l(a,ze,z,"layout"),null!==b&&(b.h=null,b.group=null),this.$d=a,null!==a&&(a.h=this.h,a.group=this),this.j("layout",b,a))}),t.g(z,"memberAdded",z.prototype.ZF),t.defineProperty(z,{ZF:"memberAdded"},function(){return this.Lr},function(a){var b=this.Lr;b!==a&&(null!==a&&t.i(a,"function",z,"memberAdded"),this.Lr=a,this.j("memberAdded",b,a))}),t.g(z,"memberRemoved",z.prototype.$F),t.defineProperty(z,{$F:"memberRemoved"},function(){return this.Nr},function(a){var b=this.Nr;b!==a&&(null!==a&&t.i(a,"function",z,"memberRemoved"),this.Nr=a,this.j("memberRemoved",b,a))}),t.g(z,"memberValidation",z.prototype.Lt),t.defineProperty(z,{Lt:"memberValidation"},function(){return this.al},function(a){var b=this.al;b!==a&&(null!==a&&t.i(a,"function",z,"memberValidation"),this.al=a,this.j("memberValidation",b,a))}),z.prototype.canAddMembers=function(a){var b=this.h;if(null===b)return!1;for(b=b.Ze,a=ef(a).k;a.next();)if(!b.isValidMember(this,a.value))return!1;return!0},z.prototype.addMembers=function(a,b){var d,e,f,c=this.h;if(null===c)return!1;for(c=c.Ze,d=!0,e=ef(a).k;e.next();)f=e.value,!b||c.isValidMember(this,f)?f.fb=this:d=!1;return d},t.g(z,"ungroupable",z.prototype.iH),t.defineProperty(z,{iH:"ungroupable"},function(){return this.Ts},function(a){var b=this.Ts;b!==a&&(t.i(a,"boolean",z,"ungroupable"),this.Ts=a,this.j("ungroupable",b,a))}),z.prototype.canUngroup=function(){if(!this.iH)return!1;var a=this.layer;return null===a||a.ep?(a=a.h,null===a||a.ep?!0:!1):!1},z.prototype.invalidateConnectedLinks=z.prototype.Ef=function(a){var b,c,d;for(void 0===a&&(a=null),y.prototype.Ef.call(this,a),b=this.cF();b.next();)c=b.value,null!==a&&a.contains(c)||(d=c.ca,null!==d&&d.Al(this)&&!d.Va()?c.hc():(d=c.fa,null!==d&&d.Al(this)&&!d.Va()&&c.hc()))},z.prototype.findExternalLinksConnected=z.prototype.cF=function(){var b,c,d,e,a=this.rp();for(a.add(this),b=new I(B),c=a.k;c.next();)if(d=c.value,d instanceof y)for(d=d.Vd;d.next();)e=d.value,a.contains(e)||b.add(e);return b.k},z.prototype.findExternalNodesConnected=function(){var b,c,d,e,f,a=this.rp();for(a.add(this),b=new I(y),c=a.k;c.next();)if(d=c.value,d instanceof y)for(d=d.Vd;d.next();)e=d.value,f=e.ca,a.contains(f)&&f!==this||b.add(f),e=e.fa,a.contains(e)&&e!==this||b.add(e);return b.k},z.prototype.findSubGraphParts=z.prototype.rp=function(){var a=new I(x);return $e(a,this,!0,0),a.remove(this),a},z.prototype.kf=function(a){y.prototype.kf.call(this,a);for(var b=this.Nc;b.next();)b.value.kf(a)},z.prototype.collapseSubGraph=z.prototype.collapseSubGraph=function(){var b,a=this.h;null===a||a.ge||(a.ge=!0,b=this.rp(),Kn(this,b),a.ge=!1)},z.prototype.expandSubGraph=z.prototype.expandSubGraph=function(){var b,c,a=this.h;null===a||a.ge||(b=a.fc,0!==a.ma.Qe&&b.Gl(),a.ge=!0,c=this.rp(),Ln(this,c,b,this),a.ge=!1)},t.g(z,"isSubGraphExpanded",z.prototype.ie),t.defineProperty(z,{ie:"isSubGraphExpanded"},function(){return this.qr},function(a){var c,d,b=this.qr;b!==a&&(t.i(a,"boolean",z,"isSubGraphExpanded"),this.qr=a,c=this.h,this.j("isSubGraphExpanded",b,a),b=this.WG,null!==b&&(d=!0,null!==c&&(d=c.Sa,c.Sa=!0),b(this),null!==c&&(c.Sa=d)),null!==c&&c.ma.yb||(a?this.expandSubGraph():this.collapseSubGraph()))}),t.g(z,"wasSubGraphExpanded",z.prototype.pu),t.defineProperty(z,{pu:"wasSubGraphExpanded"},function(){return this.Us},function(a){var b=this.Us;b!==a&&(t.i(a,"boolean",z,"wasSubGraphExpanded"),this.Us=a,this.j("wasSubGraphExpanded",b,a))}),t.g(z,"subGraphExpandedChanged",z.prototype.WG),t.defineProperty(z,{WG:"subGraphExpandedChanged"},function(){return this.Is},function(a){var b=this.Is;b!==a&&(null!==a&&t.i(a,"function",z,"subGraphExpandedChanged"),this.Is=a,this.j("subGraphExpandedChanged",b,a))}),z.prototype.move=z.prototype.move=function(a){var d,e,f,b=this.position,c=b.x;for(isNaN(c)&&(c=0),b=b.y,isNaN(b)&&(b=0),c=a.x-c,b=a.y-b,d=t.qc(c,b),y.prototype.move.call(this,a),a=this.rp().k;a.next();)e=a.value,e instanceof B||e.oi||(f=e.position,d.x=f.x+c,d.y=f.y+b,y.prototype.move.call(e,d));for(a.reset();a.next();)e=a.value,e instanceof B&&(f=e.position,d.x=f.x+c,d.y=f.y+b,e.move(d));t.B(d)},t.ka("Placeholder",$g),t.Qa($g,V),$g.prototype.cloneProtected=function(a){V.prototype.cloneProtected.call(this,a),a.Ue=this.Ue.ba(),a.rs=this.rs.copy()},$g.prototype.jk=function(a){if(null===this.background&&null===this.hk)return!1;var b=this.Ja;return Gb(0,0,b.width,b.height,a.x,a.y)},$g.prototype.Kt=function(){var b,c,d,e,f,g,h,a=this.U;if(null!==a&&(a instanceof z||a instanceof ea)||t.m("Placeholder is not inside a Group or Adornment."),a instanceof z){for(b=this.computeBorder(this.rs),c=this.od,ub(c,b.width||0,b.height||0),kk(this,0,0,c.width,c.height),c=a.Nc,d=!1;c.next();)if(c.value.Va()){d=!0;break}!d||isNaN(b.x)||isNaN(b.y)||(c=new E,c.fu(b,a.hf),a.location=new E(c.x,c.y))}else b=this.Ea,c=this.od,a=this.padding,d=a.left+a.right,e=a.top+a.bottom,b.P()?(ub(c,b.width+d||0,b.height+e||0),kk(this,-a.left,-a.top,c.width,c.height)):(f=this.U,g=f.uc,h=g.wb(Vb,t.N()),b=t.wk(h.x,h.y,0,0),b.yj(g.wb(bc,h)),b.yj(g.wb(Xb,h)),b.yj(g.wb($b,h)),f.jh.p(b.x,b.y),ub(c,b.width+d||0,b.height+e||0),kk(this,-a.left,-a.top,c.width,c.height),t.B(h),t.oc(b))},$g.prototype.ik=function(a,b,c,d){var e=this.pa;e.x=a,e.y=b,e.width=c,e.height=d},$g.prototype.computeBorder=function(a){var c,d,e,b=this.U;return b instanceof z&&b.kA&&this.rs.P()&&(c=b.h,null!==c&&(c=c.Ya,c instanceof kf&&!c.Xq&&null!==c.Ic&&!c.Ic.contains(b)))?(a.assign(this.rs),a):(c=t.Nf(),d=this.computeMemberBounds(c),e=this.padding,a.p(d.x-e.left,d.y-e.top,d.width+e.left+e.right,d.height+e.top+e.bottom),t.oc(c),b instanceof z&&b.EE&&b.location.P()&&a.yj(b.location),a)},$g.prototype.computeMemberBounds=function(a){var c,d,e,f,g,h,b=this.U;if(!(b instanceof z))return a.p(0,0,0,0),a;for(c=1/0,d=1/0,e=-1/0,f=-1/0,g=b.Nc;g.next();)if(h=g.value,h.Va()){if(h instanceof B){if(!b.DE)continue;if(Ti(h))continue;if(h.ca===b||h.fa===b)continue}h=h.pa,h.left<c&&(c=h.left),h.top<d&&(d=h.top),h.right>e&&(e=h.right),h.bottom>f&&(f=h.bottom)}return isFinite(c)&&isFinite(d)?a.p(c,d,e-c,f-d):(b=b.location,c=this.padding,a.p(b.x+c.left,b.y+c.top,0,0)),a},t.g($g,"padding",$g.prototype.padding),t.defineProperty($g,{padding:"padding"},function(){return this.Ue},function(a){"number"==typeof a?(0>a&&t.ha(a,">= 0",$g,"padding"),a=new wb(a)):(t.l(a,wb,$g,"padding"),0>a.left&&t.ha(a.left,">= 0",$g,"padding:val.left"),0>a.right&&t.ha(a.right,">= 0",$g,"padding:val.right"),0>a.top&&t.ha(a.top,">= 0",$g,"padding:val.top"),0>a.bottom&&t.ha(a.bottom,">= 0",$g,"padding:val.bottom"));var b=this.Ue;b.O(a)||(this.Ue=a=a.ba(),this.j("padding",b,a))}),t.ka("Layout",ze),ze.prototype.cloneProtected=function(a){a.nr=this.nr,a.lr=this.lr,this.lr||(a.wo=!0),a.vr=this.vr,a.Cq.assign(this.Cq),a.or=this.or},ze.prototype.copy=function(){var a=new this.constructor;return this.cloneProtected(a),a},ze.prototype.toString=function(){var a=t.Hg(Object.getPrototypeOf(this)),a=a+"(";return null!==this.group&&(a+=" in "+this.group),null!==this.h&&(a+=" for "+this.h),a+")"},t.g(ze,"diagram",ze.prototype.h),t.defineProperty(ze,{h:"diagram"},function(){return this.W},function(a){this.W!==a&&(null!==a&&t.l(a,v,ze,"diagram"),this.W=a)}),t.g(ze,"group",ze.prototype.group),t.defineProperty(ze,{group:"group"},function(){return this.lz},function(a){this.lz!==a&&(null!==a&&t.l(a,z,ze,"group"),this.lz=a,null!==a&&(this.W=a.h))}),t.g(ze,"isOngoing",ze.prototype.JF),t.defineProperty(ze,{JF:"isOngoing"},function(){return this.nr},function(a){this.nr!==a&&(t.i(a,"boolean",ze,"isOngoing"),this.nr=a)}),t.g(ze,"isInitial",ze.prototype.IF),t.defineProperty(ze,{IF:"isInitial"},function(){return this.lr},function(a){t.i(a,"boolean",ze,"isInitial"),this.lr=a,a||(this.wo=!0)}),t.g(ze,"isValidLayout",ze.prototype.gf),t.defineProperty(ze,{gf:"isValidLayout"},function(){return this.wo},function(a){this.wo!==a&&(t.i(a,"boolean",ze,"isValidLayout"),this.wo=a,a||(a=this.h,null!==a&&(a.Du=!0)))}),ze.prototype.invalidateLayout=ze.prototype.M=function(){var a,b;this.wo&&(a=this.h,null===a||a.ma.yb||(b=a.fc,!b.rr&&(b.Ig&&b.Fn(),this.JF&&a.sf||this.IF&&!a.sf)&&(this.gf=!1,a.ze())))},t.g(ze,"isRealtime",ze.prototype.QA),t.defineProperty(ze,{QA:"isRealtime"},function(){return this.or},function(a){this.or!==a&&(t.i(a,"boolean",ze,"isRealtime"),this.or=a)}),t.g(ze,"isViewportSized",ze.prototype.Gt),t.defineProperty(ze,{Gt:"isViewportSized"},function(){return this.vr},function(a){this.vr!==a&&(t.i(a,"boolean",ze,"isViewportSized"),(this.vr=a)&&this.M())}),t.g(ze,"isRouting",ze.prototype.Ft),t.defineProperty(ze,{Ft:"isRouting"},function(){return this.rz},function(a){this.rz!==a&&(t.i(a,"boolean",ze,"isRouting"),this.rz=a)}),t.g(ze,"network",ze.prototype.network),t.defineProperty(ze,{network:"network"},function(){return this.Bz},function(a){var b=this.Bz;b!==a&&(null!==a&&t.l(a,Ea,ze,"network"),null!==b&&Mn(b,null),this.Bz=a,null!==a&&Mn(a,this))}),ze.prototype.createNetwork=function(){var a=new Ea;return Mn(a,this),a},ze.prototype.makeNetwork=function(a){var b=this.createNetwork();return a instanceof v?(b.Zs(a.wh,!0),b.Zs(a.links,!0)):a instanceof z?b.Zs(a.Nc):b.Zs(a.k),b},ze.prototype.updateParts=function(){var b,c,a=this.h;if(null===a&&null!==this.network)for(b=this.network.vertexes.k;b.next()&&(c=b.value.Kc,null===c||(a=c.h,null===a)););this.gf=!0,null!==a&&a.yc("Layout"),this.commitLayout(),null!==a&&a.Ie("Layout")},ze.prototype.commitLayout=function(){},ze.prototype.doLayout=function(a){var b,c,d,e,f,g,h,i,j,k;if(a||t.m("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),b=new I(x),a===this.h?(Nn(this,b,a.wh,!0,this.aB,!0,!1,!0),Nn(this,b,a.wj,!0,this.aB,!0,!1,!0)):a===this.group?Nn(this,b,a.Nc,!1,this.aB,!0,!1,!0):b.Ve(a.k),c=b.count,c>0){for(a=this.h,null!==a&&a.yc("Layout"),c=Math.ceil(Math.sqrt(c)),d=this.Nd.x,e=d,f=this.Nd.y,g=0,h=0,b=b.k;b.next();)i=b.value,i.zf(),j=i.Ha,k=j.width,j=j.height,i.moveTo(e,f),delete i.nD,e+=Math.max(k,50)+20,h=Math.max(h,Math.max(j,50)),g>=c-1?(g=0,e=d,f+=h+20,h=0):g++;null!==a&&a.Ie("Layout")}this.gf=!0},ze.prototype.aB=function(a){return!a.location.P()||a instanceof z&&a.nD?!0:!1},t.g(ze,"arrangementOrigin",ze.prototype.Nd),t.defineProperty(ze,{Nd:"arrangementOrigin"},function(){return this.Cq},function(a){t.l(a,E,ze,"arrangementOrigin"),this.Cq.O(a)||(this.Cq.assign(a),this.M())}),ze.prototype.initialOrigin=function(a){var c,b=this.group;return null!==b?(c=b.location,isNaN(c.x)||isNaN(c.y)?a:(a=b.placeholder,null!==a?(c=a.wb(Vb),c.x+=a.padding.left,c.y+=a.padding.top):c=b.position.copy(),c)):a},t.ka("LayoutNetwork",Ea),Ea.prototype.clear=function(){var a,b;if(this.vertexes)for(a=this.vertexes.k;a.next();)b=a.value,b.clear(),b.network=null;if(this.edges)for(a=this.edges.k;a.next();)b=a.value,b.clear(),b.network=null;this.vertexes=new I(Fa),this.edges=new I(Ha),this.dB=new wa(y,Fa),this.SA=new wa(B,Ha)},Ea.prototype.toString=function(){return"LayoutNetwork"+(null!==this.ic?"("+this.ic.toString()+")":"")},t.A(Ea,{ic:"layout"},function(){return this.$d}),Ea.prototype.createVertex=function(){return new Fa},Ea.prototype.createEdge=function(){return new Ha},Ea.prototype.addParts=Ea.prototype.Zs=function(a,b){var c,d,e,f;if(null!==a){for(void 0===b&&(b=!1),t.i(b,"boolean",Ea,"addParts:toplevelonly"),c=a.k;c.next();)d=c.value,d instanceof y&&(!b||d.Hp)&&d.canLayout()&&!d.oi&&(d instanceof z&&null===d.ic?this.Zs(d.Nc,!1):null===this.gn(d)&&(e=this.createVertex(),e.Kc=d,this.kl(e)));for(c.reset();c.next();)d=c.value,d instanceof B&&(!b||d.Hp)&&d.canLayout()&&null===this.Tw(d)&&(f=d.ca,e=d.fa,f!==e&&(f=this.findGroupVertex(f),e=this.findGroupVertex(e),null!==f&&null!==e&&this.sn(f,e,d)))}},Ea.prototype.findGroupVertex=function(a){if(null===a)return null;var b=a.findVisibleNode();if(null===b)return null;if(a=this.gn(b),null!==a)return a;for(b=b.fb;null!==b;){if(a=this.gn(b),null!==a)return a;b=b.fb}return null},Ea.prototype.addVertex=Ea.prototype.kl=function(a){if(null!==a){e&&t.l(a,Fa,Ea,"addVertex:vertex"),this.vertexes.add(a);var b=a.Kc;null!==b&&this.dB.add(b,a),a.network=this}},Ea.prototype.addNode=Ea.prototype.Yo=function(a){if(null===a)return null;e&&t.l(a,y,Ea,"addNode:node");var b=this.gn(a);return null===b&&(b=this.createVertex(),b.Kc=a,this.kl(b)),b},Ea.prototype.deleteVertex=Ea.prototype.TE=function(a){var b,c,d;if(null!==a&&(e&&t.l(a,Fa,Ea,"deleteVertex:vertex"),On(this,a))){for(b=a.nf,c=b.count-1;c>=0;c--)d=b.wa(c),this.mp(d);for(b=a.$e,c=b.count-1;c>=0;c--)d=b.wa(c),this.mp(d)}},Ea.prototype.deleteNode=function(a){null!==a&&(e&&t.l(a,y,Ea,"deleteNode:node"),a=this.gn(a),null!==a&&this.TE(a))},Ea.prototype.findVertex=Ea.prototype.gn=function(a){return null===a?null:(e&&t.l(a,y,Ea,"findVertex:node"),this.dB.Da(a))},Ea.prototype.addEdge=Ea.prototype.Xo=function(a){if(null!==a){e&&t.l(a,Ha,Ea,"addEdge:edge"),this.edges.add(a);var b=a.link;null!==b&&null===this.Tw(b)&&this.SA.add(b,a),b=a.toVertex,null!==b&&b.kE(a),b=a.fromVertex,null!==b&&b.iE(a),a.network=this}},Ea.prototype.addLink=function(a){if(null===a)return null;e&&t.l(a,B,Ea,"addLink:link");var b=a.ca,c=a.fa,d=this.Tw(a);return null===d?(d=this.createEdge(),d.link=a,null!==b&&(d.fromVertex=this.Yo(b)),null!==c&&(d.toVertex=this.Yo(c)),this.Xo(d)):(d.fromVertex=null!==b?this.Yo(b):null,d.toVertex=null!==c?this.Yo(c):null),d},Ea.prototype.deleteEdge=Ea.prototype.mp=function(a){if(null!==a){e&&t.l(a,Ha,Ea,"deleteEdge:edge");var b=a.toVertex;null!==b&&b.SE(a),b=a.fromVertex,null!==b&&b.RE(a),Pn(this,a)}},Ea.prototype.deleteLink=function(a){null!==a&&(e&&t.l(a,B,Ea,"deleteLink:link"),a=this.Tw(a),null!==a&&this.mp(a))},Ea.prototype.findEdge=Ea.prototype.Tw=function(a){return null===a?null:(e&&t.l(a,B,Ea,"findEdge:link"),this.SA.Da(a))},Ea.prototype.linkVertexes=Ea.prototype.sn=function(a,b,c){if(null===a||null===b)return null;if(e&&(t.l(a,Fa,Ea,"linkVertexes:fromVertex"),t.l(b,Fa,Ea,"linkVertexes:toVertex"),null!==c&&t.l(c,B,Ea,"linkVertexes:link")),a.network===this&&b.network===this){var d=this.createEdge();return d.link=c,d.fromVertex=a,d.toVertex=b,this.Xo(d),d}return null},Ea.prototype.reverseEdge=Ea.prototype.Gx=function(a){if(null!==a){e&&t.l(a,Ha,Ea,"reverseEdge:edge");var b=a.fromVertex,c=a.toVertex;null!==b&&null!==c&&(b.RE(a),c.SE(a),a.Gx(),b.kE(a),c.iE(a))}},Ea.prototype.deleteSelfEdges=Ea.prototype.Pw=function(){var a,b,c;for(a=t.Hb(),b=this.edges.k;b.next();)c=b.value,c.fromVertex===c.toVertex&&a.push(c);for(b=a.length,c=0;b>c;c++)this.mp(a[c]);t.Ca(a)},Ea.prototype.deleteArtificialVertexes=function(){var a,b,c,d;for(a=t.Hb(),b=this.vertexes.k;b.next();)c=b.value,null===c.Kc&&a.push(c);for(c=a.length,b=0;c>b;b++)this.TE(a[b]);for(c=t.Hb(),b=this.edges.k;b.next();)d=b.value,null===d.link&&c.push(d);for(d=c.length,b=0;d>b;b++)this.mp(c[b]);t.Ca(a),t.Ca(c)},Ea.prototype.splitIntoSubNetworks=Ea.prototype.xK=function(){var a,b,c,d;for(this.deleteArtificialVertexes(),Qn(this),this.Pw(),a=new H(Ea),b=!0;b;)for(b=!1,c=this.vertexes.k;c.next();)if(d=c.value,0<d.nf.count||0<d.$e.count){b=this.ic.createNetwork(),a.add(b),Rn(this,b,d),b=!0;break}return a.sort(function(a,b){return null===a||null===b||a===b?0:b.vertexes.count-a.vertexes.count}),a},Ea.prototype.findAllParts=function(){for(var a=new I(x),b=this.vertexes.k;b.next();)a.add(b.value.Kc);for(b=this.edges.k;b.next();)a.add(b.value.link);return a},t.ka("LayoutVertex",Fa),Fa.prototype.clear=function(){this.yd=null,this.nf=new H(Ha),this.$e=new H(Ha)},Fa.prototype.toString=function(){return"LayoutVertex#"+t.ud(this)+(null!==this.Kc?"("+this.Kc.toString()+")":"")},t.g(Fa,"node",Fa.prototype.Kc),t.defineProperty(Fa,{Kc:"node"},function(){return this.yd},function(a){if(this.yd!==a){e&&null!==a&&t.l(a,y,Fa,"node"),this.yd=a,a.zf();var b=a.pa,c=b.x,d=b.y,f=b.width,b=b.height;if(isNaN(c)&&(c=0),isNaN(d)&&(d=0),this.V.p(c,d,f,b),!(a instanceof z)&&(a=a.Zb.wb(Yb),a.P()))return this.Q.p(a.x-c,a.y-d),void 0;this.Q.p(f/2,b/2)}}),t.g(Fa,"bounds",Fa.prototype.Ub),t.defineProperty(Fa,{Ub:"bounds"},function(){return this.V},function(a){this.V.O(a)||(e&&t.l(a,F,Fa,"bounds"),this.V.assign(a))}),t.g(Fa,"focus",Fa.prototype.focus),t.defineProperty(Fa,{focus:"focus"},function(){return this.Q},function(a){this.Q.O(a)||(e&&t.l(a,E,Fa,"focus"),this.Q.assign(a))}),t.g(Fa,"centerX",Fa.prototype.Ia),t.defineProperty(Fa,{Ia:"centerX"},function(){return this.V.x+this.Q.x},function(a){var b=this.V;b.x+this.Q.x!==a&&(e&&t.q(a,Fa,"centerX"),b.Ra(),b.x=a-this.Q.x,b.freeze())}),t.g(Fa,"centerY",Fa.prototype.Ua),t.defineProperty(Fa,{Ua:"centerY"},function(){return this.V.y+this.Q.y},function(a){var b=this.V;b.y+this.Q.y!==a&&(e&&t.q(a,Fa,"centerY"),b.Ra(),b.y=a-this.Q.y,b.freeze())}),t.g(Fa,"focusX",Fa.prototype.tp),t.defineProperty(Fa,{tp:"focusX"},function(){return this.Q.x},function(a){var b=this.Q;b.x!==a&&(b.Ra(),b.x=a,b.freeze())}),t.g(Fa,"focusY",Fa.prototype.up),t.defineProperty(Fa,{up:"focusY"},function(){return this.Q.y},function(a){var b=this.Q;b.y!==a&&(b.Ra(),b.y=a,b.freeze())}),t.g(Fa,"x",Fa.prototype.x),t.defineProperty(Fa,{x:"x"},function(){return this.V.x},function(a){var b=this.V;b.x!==a&&(b.Ra(),b.x=a,b.freeze())}),t.g(Fa,"y",Fa.prototype.y),t.defineProperty(Fa,{y:"y"},function(){return this.V.y},function(a){var b=this.V;b.y!==a&&(b.Ra(),b.y=a,b.freeze())}),t.g(Fa,"width",Fa.prototype.width),t.defineProperty(Fa,{width:"width"},function(){return this.V.width},function(a){var b=this.V;b.width!==a&&(b.Ra(),b.width=a,b.freeze())}),t.g(Fa,"height",Fa.prototype.height),t.defineProperty(Fa,{height:"height"},function(){return this.V.height},function(a){var b=this.V;b.height!==a&&(b.Ra(),b.height=a,b.freeze())}),Fa.prototype.commit=function(){var b,c,d,a=this.Kc;if(null!==a){if(b=this.Ub,!(a instanceof z)&&(c=a.pa,d=a.Zb.wb(Yb),c.P()&&d.P()))return a.moveTo(b.x+this.tp-(d.x-c.x),b.y+this.up-(d.y-c.y)),void 0;a.moveTo(b.x,b.y)}},Fa.prototype.addSourceEdge=Fa.prototype.kE=function(a){null!==a&&(e&&t.l(a,Ha,Fa,"addSourceEdge:edge"),this.nf.contains(a)||this.nf.add(a))},Fa.prototype.deleteSourceEdge=Fa.prototype.SE=function(a){null!==a&&(e&&t.l(a,Ha,Fa,"deleteSourceEdge:edge"),this.nf.remove(a))},Fa.prototype.addDestinationEdge=Fa.prototype.iE=function(a){null!==a&&(e&&t.l(a,Ha,Fa,"addDestinationEdge:edge"),this.$e.contains(a)||this.$e.add(a))},Fa.prototype.deleteDestinationEdge=Fa.prototype.RE=function(a){null!==a&&(e&&t.l(a,Ha,Fa,"deleteDestinationEdge:edge"),this.$e.remove(a))},t.A(Fa,{uK:"sourceVertexes"},function(){var a,b,c;for(a=new I(Fa),b=this.xc;b.next();)c=b.value.fromVertex,null===c||a.contains(c)||a.add(c);return a.k}),t.A(Fa,{TI:"destinationVertexes"},function(){var a,b,c;for(a=new I(Fa),b=this.nc;b.next();)c=b.value.toVertex,null===c||a.contains(c)||a.add(c);return a.k}),t.A(Fa,{vertexes:"vertexes"},function(){var a,b,c;for(a=new I(Fa),b=this.xc;b.next();)c=b.value,c=c.fromVertex,null===c||a.contains(c)||a.add(c);for(b=this.nc;b.next();)c=b.value,c=c.toVertex,null===c||a.contains(c)||a.add(c);return a.k}),t.A(Fa,{xc:"sourceEdges"},function(){return this.nf.k}),t.A(Fa,{nc:"destinationEdges"},function(){return this.$e.k}),t.A(Fa,{edges:"edges"},function(){var a,b,c;for(a=new H(Ha),b=this.xc;b.next();)c=b.value,a.add(c);for(b=this.nc;b.next();)c=b.value,a.add(c);return a.k}),t.A(Fa,{gJ:"edgesCount"},function(){return this.nf.count+this.$e.count}),Fa.standardComparer=Sn=function(a,b){e&&t.l(a,Fa,Fa,"standardComparer:m"),e&&t.l(b,Fa,Fa,"standardComparer:n");var c=a.yd,d=b.yd;return c?d?(c=c.text,d=d.text,d>c?-1:c>d?1:0):1:null!==d?-1:0},Fa.smartComparer=function(a,b){var c,d,f,g,h;if(e&&t.l(a,Fa,Fa,"smartComparer:m"),e&&t.l(b,Fa,Fa,"smartComparer:n"),null!==a){if(null!==b){if(c=a.yd,d=b.yd,null!==c){if(null!==d){for(c=c.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),d=d.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),f=0;f<c.length;f++)if(""!==d[f]&&void 0!==d[f])if(g=parseFloat(c[f]),h=parseFloat(d[f]),isNaN(g)){if(!isNaN(h))return 1;if(0!==c[f].localeCompare(d[f]))return c[f].localeCompare(d[f])}else{if(isNaN(h))return-1;if(0!==g-h)return g-h}else if(""!==c[f])return 1;return""!==d[f]&&void 0!==d[f]?-1:0}return 1}return null!==d?-1:0}return 1}return null!==b?-1:0},t.ka("LayoutEdge",Ha),Ha.prototype.clear=function(){this.toVertex=this.fromVertex=this.link=null},Ha.prototype.toString=function(){return"LayoutEdge#"+t.ud(this)+(null!==this.link?"("+this.link.toString()+")":"")},Ha.prototype.Gx=function(){var a=this.fromVertex;this.fromVertex=this.toVertex,this.toVertex=a},Ha.prototype.commit=function(){},Ha.prototype.getOtherVertex=Ha.prototype.lJ=function(a){return e&&t.l(a,Fa,Ha,"getOtherVertex:v"),this.toVertex===a?this.fromVertex:this.fromVertex===a?this.toVertex:null},t.ka("GridLayout",ak),t.Qa(ak,ze),ak.prototype.cloneProtected=function(a){ze.prototype.cloneProtected.call(this,a),a.Xs=this.Xs,a.Ws=this.Ws,a.Ej.assign(this.Ej),a.$h.assign(this.$h),a.Ae=this.Ae,a.jd=this.jd,a.Zh=this.Zh,a.Hh=this.Hh},ak.prototype.doLayout=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,u,y,v,w,A,C,D,G,H;for(a||t.m("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),b=this.h,null===b&&null===this.group&&t.m("The diagram for this layout is not set."),this.Nd=this.initialOrigin(this.Nd),c=new I(x),a===b?(Nn(this,c,a.wh,!0,null,!0,!0,!0),Nn(this,c,a.links,!0,null,!0,!0,!0),Nn(this,c,a.wj,!0,null,!0,!0,!0)):a===this.group?Nn(this,c,a.Nc,!1,null,!0,!0,!0):c.Ve(a.k),a=c.copy().k;a.next();)if(d=a.value,d instanceof B&&(null!==d.ca||null!==d.fa))c.remove(d);else if(d.zf(),d instanceof z)for(d=d.Nc;d.next();)c.remove(d.value);if(c=c.Pe(),0!==c.length){switch(this.sorting){case el:c.reverse();break;case bl:c.sort(this.comparer);break;case cl:c.sort(this.comparer),c.reverse()}switch(e=this.uH,isNaN(e)&&(e=0),f=this.SB,f=isNaN(f)?Math.max(b.Ab.width-b.padding.left-b.padding.right,0):Math.max(this.SB,0),0>=e&&0>=f&&(e=1),a=this.spacing.width,isFinite(a)||(a=0),d=this.spacing.height,isFinite(d)||(d=0),b.yc("Layout"),g=[],this.alignment){case il:if(h=a,i=d,j=Math.max(this.ml.width,1),!isFinite(j))for(k=j=0;k<c.length;k++)l=c[k],m=l.Ha,j=Math.max(j,m.width);if(j=Math.max(j+h,1),n=Math.max(this.ml.height,1),!isFinite(n))for(k=n=0;k<c.length;k++)l=c[k],m=l.Ha,n=Math.max(n,m.height);for(n=Math.max(n+i,1),o=this.Xe,p=this.Nd.x,q=p,r=this.Nd.y,s=0,u=0,k=0;k<c.length;k++){switch(l=c[k],m=l.Ha,v=Math.ceil((m.width+h)/j)*j,w=Math.ceil((m.height+i)/n)*n,o){case gl:y=Math.abs(q-m.width);break;default:y=q+m.width}switch((e>0&&s>e-1||f>0&&s>0&&y>f)&&(g.push(new F(0,r,f,u+i)),s=0,q=p,r+=u,u=0),u=Math.max(u,w),o){case gl:m=-m.width;break;default:m=0}switch(l.moveTo(q+m,r),o){case gl:q-=v;break;default:q+=v}s++}g.push(new F(0,r,f,u+i));break;case hl:for(h=a,i=d,j=Math.max(this.ml.width,1),k=s=m=0,l=t.N(),n=0;n<c.length;n++)o=c[n],p=o.Ha,q=Bm(o,o.Zb,o.hf,l),m=Math.max(m,q.x),s=Math.max(s,p.width-q.x),k=Math.max(k,q.y);switch(r=this.Xe){case gl:m+=h;break;default:s+=h}for(j=isFinite(j)?Math.max(j+h,1):Math.max(m+s,1),A=s=this.Nd.x,u=this.Nd.y,v=0,f>=m&&(f-=m),m=0,w=Math.max(this.ml.height,1),y=k=0,C=!0,D=t.N(),n=0;n<c.length;n++){if(o=c[n],p=o.Ha,q=Bm(o,o.Zb,o.hf,l),v>0)switch(r){case gl:A=Math.floor((A-s-(p.width-q.x))/j)*j+s;break;default:A=Math.ceil((A-s+q.x)/j)*j+s}else switch(r){case gl:m=A+q.x+p.width;break;default:m=A-q.x}switch(r){case gl:G=-(A+q.x)+m;break;default:G=A+p.width-q.x-m}if(e>0&&v>e-1||f>0&&v>0&&G>f){for(g.push(new F(0,u,f,(C?y:y+k)+i)),A=0;v>A&&n!==v;A++)G=c[n-v+A],H=Bm(G,G.Zb,G.hf,D),G.moveTo(G.position.x,G.position.y+k-H.y);y+=i,u=C?u+y:u+(y+k),v=y=k=0,A=s,C=!1}switch(k=Math.max(k,q.y),y=Math.max(y,p.height-q.y),isFinite(w)&&(y=Math.max(y,Math.max(p.height,w)-q.y)),C?o.moveTo(A-q.x,u-q.y):o.moveTo(A-q.x,u),r){case gl:A-=q.x+h;break;default:A+=p.width-q.x+h}v++}for(g.push(new F(0,u,f,(C?y:y+k)+i)),A=0;v>A&&n!==v;A++)G=c[n-v+A],H=Bm(G,G.Zb,G.hf,l),G.moveTo(G.position.x,G.position.y+k-H.y);t.B(l),t.B(D)}this.commitLayers(g,new E(-a/2,-d/2)),b.Ie("Layout"),this.gf=!0}},ak.prototype.commitLayers=function(){},t.g(ak,"wrappingWidth",ak.prototype.SB),t.defineProperty(ak,{SB:"wrappingWidth"},function(){return this.Xs},function(a){this.Xs!==a&&(t.i(a,"number",ak,"wrappingWidth"),a>0||isNaN(a))&&(this.Xs=a,this.Gt=isNaN(a),this.M())}),t.g(ak,"wrappingColumn",ak.prototype.uH),t.defineProperty(ak,{uH:"wrappingColumn"},function(){return this.Ws},function(a){this.Ws!==a&&(t.i(a,"number",ak,"wrappingColumn"),a>0||isNaN(a))&&(this.Ws=a,this.M())}),t.g(ak,"cellSize",ak.prototype.ml),t.defineProperty(ak,{ml:"cellSize"},function(){return this.Ej},function(a){t.l(a,ra,ak,"cellSize"),this.Ej.O(a)||(this.Ej.assign(a),this.M())}),t.g(ak,"spacing",ak.prototype.spacing),t.defineProperty(ak,{spacing:"spacing"},function(){return this.$h},function(a){t.l(a,ra,ak,"spacing"),this.$h.O(a)||(this.$h.assign(a),this.M())}),t.g(ak,"alignment",ak.prototype.alignment),t.defineProperty(ak,{alignment:"alignment"},function(){return this.Ae},function(a){this.Ae!==a&&(t.Fa(a,ak,ak,"alignment"),a===hl||a===il)&&(this.Ae=a,this.M())}),t.g(ak,"arrangement",ak.prototype.Xe),t.defineProperty(ak,{Xe:"arrangement"},function(){return this.jd},function(a){this.jd!==a&&(t.Fa(a,ak,ak,"arrangement"),a===fl||a===gl)&&(this.jd=a,this.M())}),t.g(ak,"sorting",ak.prototype.sorting),t.defineProperty(ak,{sorting:"sorting"},function(){return this.Zh},function(a){this.Zh!==a&&(t.Fa(a,ak,ak,"sorting"),a===dl||a===el||a===bl||a===cl)&&(this.Zh=a,this.M())}),t.g(ak,"comparer",ak.prototype.comparer),t.defineProperty(ak,{comparer:"comparer"},function(){return this.Hh},function(a){this.Hh!==a&&(t.i(a,"function",ak,"comparer"),this.Hh=a,this.M())}),ak.standardComparer=Tn=function(a,b){e&&t.l(a,x,ak,"standardComparer:a"),e&&t.l(b,x,ak,"standardComparer:b");var c=a.text,d=b.text;return d>c?-1:c>d?1:0},ak.smartComparer=function(a,b){var f,c,d,g,h;if(e&&t.l(a,x,ak,"standardComparer:a"),e&&t.l(b,x,ak,"standardComparer:b"),null!==a){if(null!==b){for(c=a.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),d=b.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),f=0;f<c.length;f++)if(""!==d[f]&&void 0!==d[f])if(g=parseFloat(c[f]),h=parseFloat(d[f]),isNaN(g)){if(!isNaN(h))return 1;if(0!==c[f].localeCompare(d[f]))return c[f].localeCompare(d[f])}else{if(isNaN(h))return-1;if(0!==g-h)return g-h}else if(""!==c[f])return 1;return""!==d[f]&&void 0!==d[f]?-1:0}return 1}return null!==b?-1:0},ak.Position=il=t.w(ak,"Position",0),ak.Location=hl=t.w(ak,"Location",1),ak.LeftToRight=fl=t.w(ak,"LeftToRight",2),ak.RightToLeft=gl=t.w(ak,"RightToLeft",3),ak.Forward=dl=t.w(ak,"Forward",4),ak.Reverse=el=t.w(ak,"Reverse",5),ak.Ascending=bl=t.w(ak,"Ascending",6),ak.Descending=cl=t.w(ak,"Descending",7),t.ka("CircularLayout",jl),t.Qa(jl,ze),jl.prototype.cloneProtected=function(a){ze.prototype.cloneProtected.call(this,a),a.fs=this.fs,a.Eq=this.Eq,a.Hs=this.Hs,a.Js=this.Js,a.jd=this.jd,a.ua=this.ua,a.Zh=this.Zh,a.Hh=this.Hh,a.$h=this.$h,a.Yr=this.Yr},jl.prototype.createNetwork=function(){var a=new Vn;return Mn(a,this),a},jl.prototype.doLayout=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;if(a||t.m("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),null===this.network&&(this.network=this.makeNetwork(a)),a=this.network.vertexes,1>=a.count)1===a.count&&(a=a.gb(),a.Ia=0,a.Ua=0);else{if(b=new H(Wn),b.Ve(a.k),a=new H(Wn),c=new H(Wn),b=this.sort(b),a=new H(Wn),c=new H(Wn),d=this.bz,e=this.HC,f=this.Hd,g=this.fo,h=this.cz,i=this.Yq,j=this.Ok,k=this.$D,l=this.Dg,m=this.Lu,d=this.Xe,e=this.Rt,f=this.lG,(!isFinite(f)||0>=f)&&(f=0/0),g=this.pE,(!isFinite(g)||0>=g)&&(g=1),h=this.zh,isFinite(h)||(h=0),i=this.vi,(!isFinite(i)||i>360||1>i)&&(i=360),j=this.spacing,isFinite(j)||(j=0/0),d===wl&&e===Dl?d=vl:d===wl&&e!==Dl&&(e=Dl,d=this.Xe),(this.direction===pl||this.direction===ql)&&this.sorting!==ol){for(n=0;!(n>=b.length)&&(a.add(b.wa(n)),!(n+1>=b.length));n+=2)c.add(b.wa(n+1));this.direction===pl?(this.Xe===wl&&a.reverse(),b=new H(Wn),b.Ve(a),b.Ve(c)):(this.Xe===wl&&c.reverse(),b=new H(Wn),b.Ve(c),b.Ve(a))}for(o=b.length,p=k=0,n=0;n<b.length;n++)l=h+i*p*(this.direction===rl?1:-1)/o,q=b.wa(n).diameter,isNaN(q)&&(q=Xn(b.wa(n),l)),360>i&&(0===n||n===b.length-1)&&(q/=2),k+=q,p++;if(isNaN(f)||d===wl){if(isNaN(j)&&(j=6),d!==vl&&d!==wl){for(q=-1/0,n=0;o>n;n++)m=b.wa(n),r=b.wa(n===o-1?0:n+1),isNaN(m.diameter)&&Xn(m,0),isNaN(r.diameter)&&Xn(r,0),q=Math.max(q,(m.diameter+r.diameter)/2);m=q+j,d===tl?(l=2*Math.PI/o,f=(q+j)/l):f=Yn(this,m*(i>=360?o:o-1),g,h*Math.PI/180,i*Math.PI/180)}else f=Yn(this,k+(i>=360?o:o-1)*(d!==wl?j:1.6*j),g,h*Math.PI/180,i*Math.PI/180);l=f*g}else if(l=f*g,p=Zn(this,f,l,h*Math.PI/180,i*Math.PI/180),isNaN(j))(d===vl||d===wl)&&(j=(p-k)/(i>=360?o:o-1));else if(d===vl||d===wl)n=(p-k)/(i>=360?o:o-1),j>n?(f=Yn(this,k+j*(i>=360?o:o-1),g,h*Math.PI/180,i*Math.PI/180),l=f*g):j=n;else{for(q=-1/0,n=0;o>n;n++)m=b.wa(n),r=b.wa(n===o-1?0:n+1),isNaN(m.diameter)&&Xn(m,0),isNaN(r.diameter)&&Xn(r,0),q=Math.max(q,(m.diameter+r.diameter)/2);m=q+j,n=Yn(this,m*(i>=360?o:o-1),g,h*Math.PI/180,i*Math.PI/180),n>f?(f=n,l=f*g):m=p/(i>=360?o:o-1)}if(this.bz=d,this.HC=e,this.Hd=f,this.fo=g,this.cz=h,this.Yq=i,this.Ok=j,this.$D=k,this.Dg=l,this.Lu=m,c=[b,a,c],b=c[0],a=c[1],c=c[2],d=this.bz,e=this.Hd,g=this.cz,h=this.Yq,i=this.Ok,j=this.Dg,k=this.Lu,this.direction!==pl&&this.direction!==ql||d!==wl)if(this.direction===pl||this.direction===ql){switch(f=0,d){case ul:f=180*$n(this,e,j,g,k)/Math.PI;break;case vl:k=b=0,f=a.gb(),null!==f&&(b=Xn(f,Math.PI/2)),f=c.gb(),null!==f&&(k=Xn(f,Math.PI/2)),f=180*$n(this,e,j,g,i+(b+k)/2)/Math.PI;break;case tl:f=h/b.length}if(this.direction===pl){switch(d){case ul:ao(this,a,g,sl);break;case vl:bo(this,a,g,sl);break;case tl:co(this,a,h/2,g,sl)}switch(d){case ul:ao(this,c,g+f,rl);break;
case vl:bo(this,c,g+f,rl);break;case tl:co(this,c,h/2,g+f,rl)}}else{switch(d){case ul:ao(this,c,g,sl);break;case vl:bo(this,c,g,sl);break;case tl:co(this,c,h/2,g,sl)}switch(d){case ul:ao(this,a,g+f,rl);break;case vl:bo(this,a,g+f,rl);break;case tl:co(this,a,h/2,g+f,rl)}}}else switch(d){case ul:ao(this,b,g,this.direction);break;case vl:bo(this,b,g,this.direction);break;case tl:co(this,b,h,g,this.direction);break;case wl:eo(this,b,h,g,this.direction)}else eo(this,b,h,g-h/2,rl)}this.updateParts(),this.network=null,this.gf=!0},Un.prototype.commit=function(a){var b,c;if(null!==this.Jn&&null!==this.oq)for(b=0;b<this.Jn.length;b++)c=a.wa(b),c.x=this.Jn[b],c.y=this.oq[b]},jl.prototype.commitLayout=function(){this.commitNodes(),this.Ft&&this.commitLinks()},jl.prototype.commitNodes=function(){for(var c,a=this.WH,b=this.network.vertexes.k;b.next();)c=b.value,c.x+=a.x,c.y+=a.y,c.commit()},jl.prototype.commitLinks=function(){for(var a=this.network.edges.k;a.next();)a.value.commit()},jl.prototype.sort=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,s,r,u,v,w,x,y,z,A,B,C;switch(this.sorting){case ml:break;case nl:a.reverse();break;case kl:a.sort(this.comparer);break;case ll:a.sort(this.comparer),a.reverse();break;case ol:for(b=[],c=0;c<a.length;c++)b.push(0);for(d=new H(Wn),c=0;c<a.length;c++){if(e=-1,f=-1,0===c)for(g=0;g<a.length;g++)h=a.wa(g).gJ,h>e&&(e=h,f=g);else for(g=0;g<a.length;g++)h=b[g],h>e&&(e=h,f=g);for(d.add(a.wa(f)),b[f]=-1,f=a.wa(f),e=f.xc,f=f.nc;e.next();)g=e.value,g=g.fromVertex,g=a.indexOf(g),0>g||0<=b[g]&&b[g]++;for(;f.next();)g=f.value,g=g.toVertex,g=a.indexOf(g),0>g||0<=b[g]&&b[g]++}for(a=[],b=0;b<d.length;b++){for(h=d.wa(b),a[b]=[],c=h.nc,e=h.xc;c.next();)i=c.value,j=d.indexOf(i.toVertex),j!==b&&0>a[b].indexOf(j)&&a[b].push(j);for(;e.next();)i=e.value,j=d.indexOf(i.fromVertex),j!==b&&0>a[b].indexOf(j)&&a[b].push(j)}for(h=[],b=0;b<a.length;b++)h[b]=0;for(c=[],k=[],l=[],e=[],f=new H(Wn),g=b=0;b<a.length;b++)if(m=a[b].length,1===m)e.push(b);else if(0===m)f.add(d.wa(b));else{if(0===g)c.push(b);else{for(n=1/0,o=1/0,p=-1,q=[],m=0;m<c.length;m++)0>a[c[m]].indexOf(c[m===c.length-1?0:m+1])&&q.push(m===c.length-1?0:m+1);if(0===q.length)for(m=0;m<c.length;m++)q.push(m);for(m=0;m<q.length;m++){for(r=q[m],j=a[b],i=k,s=l,u=h,v=r,w=c,x=0,y=0;y<i.length;y++)if(z=u[i[y]],A=u[s[y]],B=0,C=0,A>z?(B=z,C=A):(B=A,C=z),v>B&&C>=v)for(z=0;z<j.length;z++)A=j[z],0>w.indexOf(A)||B<u[A]&&u[A]<C||B===u[A]||C===u[A]||x++;else for(z=0;z<j.length;z++)A=j[z],0>w.indexOf(A)||B<u[A]&&u[A]<C&&B!==u[A]&&C!==u[A]&&x++;for(s=x,i=u=0;i<a[b].length;i++)j=c.indexOf(a[b][i]),j>=0&&(j=Math.abs(r-(j>=r?j+1:j)),u+=j<c.length+1-j?j:c.length+1-j);for(i=0;i<k.length;i++)j=h[k[i]],v=h[l[i]],j>=r&&j++,v>=r&&v++,j>v&&(w=v,v=j,j=w),v-j<(c.length+2)/2==(r>j&&v>=r)&&u++;(n>s||s===n&&o>u)&&(n=s,o=u,p=r)}for(c.splice(p,0,b),m=0;m<c.length;m++)h[c[m]]=m;for(m=0;m<a[b].length;m++)n=a[b][m],0<=c.indexOf(n)&&(k.push(b),l.push(n))}g++}for(k=!1,l=c.length;;){for(k=!0,h=0;h<e.length;h++)if(b=e[h],m=a[b][0],j=c.indexOf(m),j>=0){for(g=o=0;g<a[m].length;g++)n=a[m][g],n=c.indexOf(n),0>n||n===j||(p=n>j?n-j:j-n,o+=j>n!=p>l-p?1:-1);c.splice(0>o?j:j+1,0,b),e.splice(h,1),h--}else k=!1;if(k)break;c.push(e[0]),e.splice(0,1)}for(b=0;b<c.length;b++)j=c[b],f.add(d.wa(j));return f;default:t.m("Invalid sorting type.")}return a},t.g(jl,"radius",jl.prototype.lG),t.defineProperty(jl,{lG:"radius"},function(){return this.fs},function(a){this.fs!==a&&(t.i(a,"number",jl,"radius"),a>0||isNaN(a))&&(this.fs=a,this.M())}),t.g(jl,"aspectRatio",jl.prototype.pE),t.defineProperty(jl,{pE:"aspectRatio"},function(){return this.Eq},function(a){this.Eq!==a&&(t.i(a,"number",jl,"aspectRatio"),a>0&&(this.Eq=a,this.M()))}),t.g(jl,"startAngle",jl.prototype.zh),t.defineProperty(jl,{zh:"startAngle"},function(){return this.Hs},function(a){this.Hs!==a&&(t.i(a,"number",jl,"startAngle"),this.Hs=a,this.M())}),t.g(jl,"sweepAngle",jl.prototype.vi),t.defineProperty(jl,{vi:"sweepAngle"},function(){return this.Js},function(a){this.Js!==a&&(t.i(a,"number",jl,"sweepAngle"),this.Js=a>0&&360>=a?a:360,this.M())}),t.g(jl,"arrangement",jl.prototype.Xe),t.defineProperty(jl,{Xe:"arrangement"},function(){return this.jd},function(a){this.jd!==a&&(t.Fa(a,jl,jl,"arrangement"),a===wl||a===vl||a===ul||a===tl)&&(this.jd=a,this.M())}),t.g(jl,"direction",jl.prototype.direction),t.defineProperty(jl,{direction:"direction"},function(){return this.ua},function(a){this.ua!==a&&(t.Fa(a,jl,jl,"direction"),a===rl||a===sl||a===pl||a===ql)&&(this.ua=a,this.M())}),t.g(jl,"sorting",jl.prototype.sorting),t.defineProperty(jl,{sorting:"sorting"},function(){return this.Zh},function(a){this.Zh!==a&&(t.Fa(a,jl,jl,"sorting"),a===ml||a===nl||a===kl||ll||a===ol)&&(this.Zh=a,this.M())}),t.g(jl,"comparer",jl.prototype.comparer),t.defineProperty(jl,{comparer:"comparer"},function(){return this.Hh},function(a){this.Hh!==a&&(t.i(a,"function",jl,"comparer"),this.Hh=a,this.M())}),t.g(jl,"spacing",jl.prototype.spacing),t.defineProperty(jl,{spacing:"spacing"},function(){return this.$h},function(a){this.$h!==a&&(t.i(a,"number",jl,"spacing"),this.$h=a,this.M())}),t.g(jl,"nodeDiameterFormula",jl.prototype.Rt),t.defineProperty(jl,{Rt:"nodeDiameterFormula"},function(){return this.Yr},function(a){this.Yr!==a&&(t.Fa(a,jl,jl,"nodeDiameterFormula"),a===El||a===Dl)&&(this.Yr=a,this.M())}),t.A(jl,{XH:"actualXRadius"},function(){return this.Hd}),t.A(jl,{YH:"actualYRadius"},function(){return this.Dg}),t.A(jl,{HK:"actualSpacing"},function(){return this.Ok}),t.A(jl,{WH:"actualCenter"},function(){return isNaN(this.Nd.x)||isNaN(this.Nd.y)?new E(0,0):new E(this.Nd.x+this.XH,this.Nd.y+this.YH)}),jl.ConstantSpacing=vl=t.w(jl,"ConstantSpacing",0),jl.ConstantDistance=ul=t.w(jl,"ConstantDistance",1),jl.ConstantAngle=tl=t.w(jl,"ConstantAngle",2),jl.Packed=wl=t.w(jl,"Packed",3),jl.Clockwise=rl=t.w(jl,"Clockwise",4),jl.Counterclockwise=sl=t.w(jl,"Counterclockwise",5),jl.BidirectionalLeft=pl=t.w(jl,"BidirectionalLeft",6),jl.BidirectionalRight=ql=t.w(jl,"BidirectionalRight",7),jl.Forwards=ml=t.w(jl,"Forwards",8),jl.Reverse=nl=t.w(jl,"Reverse",9),jl.Ascending=kl=t.w(jl,"Ascending",10),jl.Descending=ll=t.w(jl,"Descending",11),jl.Optimized=ol=t.w(jl,"Optimized",12),jl.Pythagorean=El=t.w(jl,"Pythagorean",13),jl.Circular=Dl=t.w(jl,"Circular",14),t.ka("CircularNetwork",Vn),t.Qa(Vn,Ea),Vn.prototype.createVertex=function(){return new Wn},Vn.prototype.createEdge=function(){return new lo},t.ka("CircularVertex",Wn),t.Qa(Wn,Fa),t.ka("CircularEdge",lo),t.Qa(lo,Ha),t.ka("ForceDirectedLayout",mo),t.Qa(mo,ze),mo.prototype.cloneProtected=function(a){ze.prototype.cloneProtected.call(this,a),a.kg.assign(this.kg),a.Dq=this.Dq,a.Yh=this.Yh,a.Gh=this.Gh,a.Fo=this.Fo,a.$q=this.$q,a.Sh=this.Sh,a.$n=this.$n,a.Zn=this.Zn,a.Wn=this.Wn,a.Yn=this.Yn,a.Uq=this.Uq,a.Tq=this.Tq},mo.prototype.createNetwork=function(){var a=new no;return Mn(a,this),a},mo.prototype.doLayout=function(a){var b,c,d,f,g,h,i,j,k,l,m,n,o,p,q;if(a||t.m("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),null===this.network&&(this.network=this.makeNetwork(a)),a=this.xx,0<this.network.vertexes.count){for(this.network.Pw(),b=this.network.vertexes.k;b.next();)c=b.value,c.charge=this.electricalCharge(c),c.mass=this.gravitationalMass(c);for(b=this.network.edges.k;b.next();)c=b.value,c.stiffness=this.springStiffness(c),c.length=this.springLength(c);if(this.cA(),this.xr=0,this.needsClusterLayout()){for(b=this.network,d=b.xK().k;d.next();){for(f=d.value,this.network=f,c=this.network.vertexes.k;c.next();){for(f=c.value,g=0,h=f.vertexes;h.next();)g++;f.eg=g,f.tk=1,f.Ym=null,f.xh=null}oo(this,0,a)}for(this.network=b,d.reset(),e&&t.l(b,no,mo,"arrangeConnectedGraphs:singletons"),c=this.ww,i=d.count,j=!0,g=f=0,h=t.Hb(),k=0;k<i+b.vertexes.count+2;k++)h[k]=null;for(i=0,d.reset(),k=t.Nf();d.next();)if(l=d.value,this.xf(l,k),j)j=!1,f=k.x+k.width/2,g=k.y+k.height/2,h[0]=new E(k.x+k.width+c.width,k.y),h[1]=new E(k.x,k.y+k.height+c.height),i=2;else for(m=po(h,i,f,g,k.width,k.height,c),n=h[m],o=new E(n.x+k.width+c.width,n.y),p=new E(n.x,n.y+k.height+c.height),i>m+1&&h.splice(m+1,0,null),h[m]=o,h[m+1]=p,i++,m=n.x-k.x,n=n.y-k.y,l=l.vertexes.k;l.next();)q=l.value,q.Ia+=m,q.Ua+=n;for(t.oc(k),l=b.vertexes.k;l.next();)q=l.value,j=q.V,2>i?(f=j.x+j.width/2,g=j.y+j.height/2,h[0]=new E(j.x+j.width+c.width,j.y),h[1]=new E(j.x,j.y+j.height+c.height),i=2):(m=po(h,i,f,g,j.width,j.height,c),n=h[m],o=new E(n.x+j.width+c.width,n.y),p=new E(n.x,n.y+j.height+c.height),i>m+1&&h.splice(m+1,0,null),h[m]=o,h[m+1]=p,i++,q.Ia=n.x+q.width/2,q.Ua=n.y+q.height/2);for(t.Ca(h),d.reset();d.next();){for(f=d.value,g=f.vertexes.k;g.next();)c=g.value,b.kl(c);for(f=f.edges.k;f.next();)c=f.value,b.Xo(c)}}qo(this,a),this.updateParts()}this.Fo=a,this.network=null,this.gf=!0},mo.prototype.needsClusterLayout=function(){var a,b,c,d;if(3>this.network.vertexes.count)return!1;for(a=0,b=0,c=this.network.vertexes.k,c.next(),d=c.value.V;c.next();){if(c.value.V.ag(d)&&(a++,a>1))return!0;if(b>10)break;b++}return!1},mo.prototype.xf=function(a,b){var c,d,e;for(c=!0,d=a.vertexes.k;d.next();)e=d.value,c?(c=!1,b.set(e.V)):b.zj(e.V);return b},mo.prototype.cA=function(){if(this.comments)for(var a=this.network.vertexes.k;a.next();)this.addComments(a.value)},mo.prototype.addComments=function(a){var c,d,e,b=a.Kc;if(null!==b)for(b=b.eF();b.next();)if(c=b.value,"Comment"===c.ed&&c.Va()){for(d=this.network.gn(c),null===d&&(d=this.network.Yo(c)),d.charge=this.ME,c=null,e=d.nc;e.next();)if(e.value.toVertex===a){c=e.value;break}if(null===c)for(e=d.xc;e.next();)if(e.value.fromVertex===a){c=e.value;break}null===c&&(c=this.network.sn(a,d,null)),c.length=this.NE}},mo.prototype.moveFixedVertex=function(){},mo.prototype.commitLayout=function(){this.AB(),this.commitNodes(),this.Ft&&this.commitLinks()},mo.prototype.AB=function(){var a,b;if(this.Jl)for(a=this.network.edges.k;a.next();)b=a.value.link,null!==b&&(b.vb=Ub,b.zb=Ub)},mo.prototype.commitNodes=function(){var c,d,e,a=0,b=0;for(this.nE&&(c=t.Nf(),this.xf(this.network,c),b=this.Nd,a=b.x-c.x,b=b.y-c.y,t.oc(c)),c=t.Nf(),d=this.network.vertexes.k;d.next();)e=d.value,(0!==a||0!==b)&&(c.assign(e.V),c.x+=a,c.y+=b,e.Ub=c),e.commit();t.oc(c)},mo.prototype.commitLinks=function(){for(var a=this.network.edges.k;a.next();)a.value.commit()},mo.prototype.springStiffness=function(a){return a=a.stiffness,isNaN(a)?this.$n:a},mo.prototype.springLength=function(a){return a=a.length,isNaN(a)?this.Zn:a},mo.prototype.electricalCharge=function(a){return a=a.charge,isNaN(a)?this.Wn:a},mo.prototype.electricalFieldX=function(){return 0},mo.prototype.electricalFieldY=function(){return 0},mo.prototype.gravitationalMass=function(a){return a=a.mass,isNaN(a)?this.Yn:a},mo.prototype.gravitationalFieldX=function(){return 0},mo.prototype.gravitationalFieldY=function(){return 0},mo.prototype.isFixed=function(a){return a.isFixed},t.A(mo,{JK:"currentIteration"},function(){return this.xr}),t.g(mo,"arrangementSpacing",mo.prototype.ww),t.defineProperty(mo,{ww:"arrangementSpacing"},function(){return this.kg},function(a){t.l(a,ra,mo,"arrangementSpacing"),this.kg.O(a)||(this.kg.assign(a),this.M())}),t.g(mo,"arrangesToOrigin",mo.prototype.nE),t.defineProperty(mo,{nE:"arrangesToOrigin"},function(){return this.Dq},function(a){this.Dq!==a&&(t.i(a,"boolean",mo,"arrangesToOrigin"),this.Dq=a,this.M())}),t.g(mo,"setsPortSpots",mo.prototype.Jl),t.defineProperty(mo,{Jl:"setsPortSpots"},function(){return this.Yh},function(a){this.Yh!==a&&(t.i(a,"boolean",mo,"setsPortSpots"),this.Yh=a,this.M())}),t.g(mo,"comments",mo.prototype.comments),t.defineProperty(mo,{comments:"comments"},function(){return this.Gh},function(a){this.Gh!==a&&(t.i(a,"boolean",mo,"comments"),this.Gh=a,this.M())}),t.g(mo,"maxIterations",mo.prototype.xx),t.defineProperty(mo,{xx:"maxIterations"},function(){return this.Fo},function(a){this.Fo!==a&&(t.i(a,"number",mo,"maxIterations"),a>=0&&(this.Fo=a,this.M()))}),t.g(mo,"epsilonDistance",mo.prototype.vA),t.defineProperty(mo,{vA:"epsilonDistance"},function(){return this.$q},function(a){this.$q!==a&&(t.i(a,"number",mo,"epsilonDistance"),a>0&&(this.$q=a,this.M()))}),t.g(mo,"infinityDistance",mo.prototype.tJ),t.defineProperty(mo,{tJ:"infinityDistance"},function(){return this.Sh},function(a){this.Sh!==a&&(t.i(a,"number",mo,"infinityDistance"),a>1&&(this.Sh=a,this.M()))}),t.g(mo,"defaultSpringStiffness",mo.prototype.SI),t.defineProperty(mo,{SI:"defaultSpringStiffness"},function(){return this.$n},function(a){this.$n!==a&&(t.i(a,"number",mo,"defaultSpringStiffness"),this.$n=a,this.M())}),t.g(mo,"defaultSpringLength",mo.prototype.RI),t.defineProperty(mo,{RI:"defaultSpringLength"},function(){return this.Zn},function(a){this.Zn!==a&&(t.i(a,"number",mo,"defaultSpringLength"),this.Zn=a,this.M())}),t.g(mo,"defaultElectricalCharge",mo.prototype.KI),t.defineProperty(mo,{KI:"defaultElectricalCharge"},function(){return this.Wn},function(a){this.Wn!==a&&(t.i(a,"number",mo,"defaultElectricalCharge"),this.Wn=a,this.M())}),t.g(mo,"defaultGravitationalMass",mo.prototype.LI),t.defineProperty(mo,{LI:"defaultGravitationalMass"},function(){return this.Yn},function(a){this.Yn!==a&&(t.i(a,"number",mo,"defaultGravitationalMass"),this.Yn=a,this.M())}),t.g(mo,"defaultCommentSpringLength",mo.prototype.NE),t.defineProperty(mo,{NE:"defaultCommentSpringLength"},function(){return this.Uq},function(a){this.Uq!==a&&(t.i(a,"number",mo,"defaultCommentSpringLength"),this.Uq=a,this.M())}),t.g(mo,"defaultCommentElectricalCharge",mo.prototype.ME),t.defineProperty(mo,{ME:"defaultCommentElectricalCharge"},function(){return this.Tq},function(a){this.Tq!==a&&(t.i(a,"number",mo,"defaultCommentElectricalCharge"),this.Tq=a,this.M())}),t.ka("ForceDirectedNetwork",no),t.Qa(no,Ea),no.prototype.createVertex=function(){return new vo},no.prototype.createEdge=function(){return new zo},t.ka("ForceDirectedVertex",vo),t.Qa(vo,Fa),t.ka("ForceDirectedEdge",zo),t.Qa(zo,Ha),t.ka("LayeredDigraphLayout",Z),t.Qa(Z,ze),Z.prototype.cloneProtected=function(a){ze.prototype.cloneProtected.call(this,a),a.pm=this.pm,a.Gd=this.Gd,a.ua=this.ua,a.Vn=this.Vn,a.Do=this.Do,a.ro=this.ro,a.mm=this.mm,a.Nn=this.Nn,a.Ui=this.Ui,a.Yh=this.Yh,a.Nj=this.Nj},Z.prototype.createNetwork=function(){var a=new Fo;return Mn(a,this),a},Z.prototype.doLayout=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,u,v,w;for(a||t.m("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),null===this.network&&(this.network=this.makeNetwork(a)),this.Nd=this.initialOrigin(this.Nd),this.tv=-1,this.Rf=this.Pr=0,this.Wr=this.Cv=this.um=null,a=0;a<this.kh.length;a++)this.kh[a]=null;if(0<this.network.vertexes.count){for(this.network.Pw(),a=this.network.edges.k;a.next();)a.value.rev=!1;switch(this.Vn){default:case yy:for(b=0,c=this.network.vertexes.count-1,a=[],a.length=c+1,d=this.network.vertexes.k;d.next();)d.value.valid=!0;for(;null!==Ho(this.network);){for(d=Qo(this.network);null!==d;)a[c]=d,c--,d.valid=!1,d=Qo(this.network);for(d=Uo(this.network);null!==d;)a[b]=d,b++,d.valid=!1,d=Uo(this.network);for(d=null,e=0,f=this.network.vertexes.k;f.next();)if(g=f.value,g.valid){for(h=0,i=g.nc;i.next();)i.value.toVertex.valid&&h++;for(i=0,j=g.xc;j.next();)j.value.fromVertex.valid&&i++;(null===d||h-i>e)&&(d=g,e=h-i)}null!==d&&(a[b]=d,b++,d.valid=!1)}for(b=0;b<this.network.vertexes.count;b++)a[b].index=b;for(a=this.network.edges.k;a.next();)b=a.value,b.fromVertex.index>b.toVertex.index&&(this.network.Gx(b),b.rev=!0);break;case Ao:for(b=this.network.vertexes.k;b.next();)b.value.np=-1,b.value.finish=-1;for(a=this.network.edges.k;a.next();)a.value.forest=!1;for(this.Vr=0,b.reset();b.next();)0===b.value.xc.count&&Vo(this,b.value);for(b.reset();b.next();)-1===b.value.np&&Vo(this,b.value);for(a.reset();a.next();)b=a.value,b.forest||(c=b.fromVertex,d=c.finish,e=b.toVertex,f=e.finish,e.np<c.np&&f>d&&(this.network.Gx(b),b.rev=!0))}for(a=this.network.vertexes.k;a.next();)b=a.value,b.layer=-1;for(this.qb=-1,this.assignLayers(),a.reset();a.next();)this.qb=Math.max(this.qb,a.value.layer);for(c=this.network.edges.k,b=[];c.next();)a=c.value,a.valid=!1,b.push(a);for(c=0;c<b.length;c++)if(a=b[c],!a.valid&&(null!==a.fromVertex.yd&&null!==a.toVertex.yd||a.fromVertex.layer!==a.toVertex.layer)){if(f=h=g=i=0,e=a.fromVertex,d=a.toVertex,null!==a.link){if(h=a.link,null===h)continue;if(k=e.yd,f=d.yd,null===k||null===f)continue;l=h.ca,g=h.fa,m=h.sd,i=h.Xd,a.rev&&(h=l,j=m,l=g,m=i,g=h,i=j),n=e.Q,h=a.toVertex.Q,o=a.rev?d.V:e.V,j=t.N(),isNaN(o.x)?j.assign(n):Bm(l,m,Yb,j),k!==l&&!isNaN(o.x)&&l.Va()&&(k=e.V,isNaN(k.x)||(j.x+=o.x-k.x,j.y+=o.y-k.y)),l=a.rev?e.V:d.V,k=t.N(),isNaN(l.x)?k.assign(h):Bm(g,i,Yb,k),f!==g&&!isNaN(l.x)&&g.Va()&&(f=d.V,isNaN(f.x)||(k.x+=l.x-f.x,k.y+=l.y-f.y)),90===this.ua||270===this.ua?(f=Math.round((j.x-n.x)/this.Gd),g=j.x,h=Math.round((k.x-h.x)/this.Gd),i=k.x):(f=Math.round((j.y-n.y)/this.Gd),g=j.y,h=Math.round((k.y-h.y)/this.Gd),i=k.y),t.B(j),t.B(k),a.portFromColOffset=f,a.portFromPos=g,a.portToColOffset=h,a.portToPos=i}else a.portFromColOffset=0,a.portFromPos=0,a.portToColOffset=0,a.portToPos=0;if(j=e.layer,n=d.layer,k=a,l=0,o=k.link,null!==o&&(p=o.sd,q=o.Xd,null!==p&&null!==q&&(r=o.ca,m=o.fa,null!==r&&null!==m&&(s=p.vb,u=q.zb,this.Jl||(o.vb.Wc()||(s=o.vb),o.zb.Wc()||(u=o.zb)),(s.Wc()||s===Qb)&&(s=Wo(this,!0)),(u.Wc()||u===Qb)&&(u=Wo(this,!1)),v=o.pc,w=o.getLinkPoint(r,p,s,!0,v,m,q,t.N()),s=o.getLinkDirection(r,p,w,s,!0,v,m,q),t.B(w),s===Xo(this,k,!0)?l+=1:this.Jl&&null!==r&&1===r.ports.count&&k.rev&&(l+=1),w=o.getLinkPoint(m,q,u,!1,v,r,p,t.N()),o=o.getLinkDirection(m,q,w,u,!1,v,r,p),t.B(w),o===Xo(this,k,!1)?l+=2:this.Jl&&null!==m&&1===m.ports.count&&k.rev&&(l+=2)))),k=1===l||3===l?!0:!1,(l=2===l||3===l?!0:!1)&&(m=this.network.createVertex(),m.yd=null,m.Tm=1,m.layer=j,m.near=e,this.network.kl(m),e=this.network.sn(e,m,a.link),e.valid=!1,e.rev=a.rev,e.portFromColOffset=f,e.portToColOffset=0,e.portFromPos=g,e.portToPos=0,e=m),o=1,k&&o--,j-n>o&&j>0){for(a.valid=!1,m=this.network.createVertex(),m.yd=null,m.Tm=2,m.layer=j-1,this.network.kl(m),e=this.network.sn(e,m,a.link),e.valid=!0,e.rev=a.rev,e.portFromColOffset=l?0:f,e.portToColOffset=0,e.portFromPos=l?0:g,e.portToPos=0,e=m,j--;j-n>o&&j>0;)m=this.network.createVertex(),m.yd=null,m.Tm=3,m.layer=j-1,this.network.kl(m),e=this.network.sn(e,m,a.link),e.valid=!0,e.rev=a.rev,e.portFromColOffset=0,e.portToColOffset=0,e.portFromPos=0,e.portToPos=0,e=m,j--;e=this.network.sn(m,d,a.link),e.valid=!k,k&&(m.near=d),e.rev=a.rev,e.portFromColOffset=0,e.portToColOffset=h,e.portFromPos=0,e.portToPos=i}else a.valid=!0}for(b=this.Zd=[],c=0;c<=this.qb;c++)b[c]=0;for(a=this.network.vertexes.k;a.next();)a.value.index=-1;for(this.initializeIndices(),this.tv=-1,c=this.Rf=this.Pr=0;c<=this.qb;c++)b[c]>b[this.Rf]&&(this.tv=b[c]-1,this.Rf=c),b[c]<b[this.Pr]&&(this.Pr=c);for(this.Wr=[],c=0;c<b.length;c++)this.Wr[c]=[];for(a.reset();a.next();)c=a.value,b=c.layer,this.Wr[b][c.index]=c;for(this.Mb=-1,a=0;a<=this.qb;a++){for(b=Yo(this,a),c=0,d=this.Zd[a],e=0;d>e;e++)f=b[e],c+=this.nodeMinColumnSpace(f,!0),f.column=c,c+=1,c+=this.nodeMinColumnSpace(f,!1);this.Mb=Math.max(this.Mb,c-1),Zo(this,a,b)}this.reduceCrossings(),this.straightenAndPack(),this.updateParts()}this.network=null,this.gf=!0},Z.prototype.linkMinLength=function(a){var b=a.toVertex,c=0;for(a=a.fromVertex.nc;a.next();)a.value.toVertex===b&&c++;return c>1?2:1},Z.prototype.nodeMinLayerSpace=function(a,b){return null===a.yd?0:90===this.ua||270===this.ua?b?a.Q.y+10:a.V.height-a.Q.y+10:b?a.Q.x+10:a.V.width-a.Q.x+10},Z.prototype.nodeMinColumnSpace=function(a,b){if(null===a.yd)return 0;var c=b?a.cB:a.bB;return void 0!==c?c:(c=this.ua,90===c||270===c?b?a.cB=0|a.Q.x/this.Gd+1:a.bB=0|(a.V.width-a.Q.x)/this.Gd+1:b?a.cB=0|a.Q.y/this.Gd+1:a.bB=0|(a.V.height-a.Q.y)/this.Gd+1)},Z.prototype.countCrossings=function(){var a,c,d,e,f,b=0;for(a=0;a<=this.qb;a++)for(c=cp(this,a,1),d=this.Zd[a],e=0;d>e;e++)for(f=e;d>f;f++)b+=c[e*d+f];return b},Z.prototype.normalize=function(){var c,b,a=1/0;for(this.Mb=-1,b=this.network.vertexes.k;b.next();)c=b.value,a=Math.min(a,c.column-this.nodeMinColumnSpace(c,!0)),this.Mb=Math.max(this.Mb,c.column+this.nodeMinColumnSpace(c,!1));for(b.reset();b.next();)b.value.column-=a;this.Mb-=a},Z.prototype.assignLayers=function(){switch(this.Do){case ip:jp(this);break;case kp:for(var a,b=this.network.vertexes.k;b.next();)a=lp(this,b.value),this.qb=Math.max(a,this.qb);for(b.reset();b.next();)a=b.value,a.layer=this.qb-a.layer;break;default:case Bo:for(jp(this),b=this.network.vertexes.k;b.next();)b.value.valid=!1;for(b.reset();b.next();)0===b.value.xc.count&&mp(this,b.value);for(a=1/0,b.reset();b.next();)a=Math.min(a,b.value.layer);for(this.qb=-1,b.reset();b.next();)b.value.layer-=a,this.qb=Math.max(this.qb,b.value.layer)}},Z.prototype.initializeIndices=function(){var a,b,c;switch(this.ro){default:case op:for(b=this.network.vertexes.k;b.next();)c=b.value,a=c.layer,c.index=this.Zd[a],this.Zd[a]++;break;case Co:for(b=this.network.vertexes.k,a=this.qb;a>=0;a--){for(;b.next();)b.value.layer===a&&-1===b.value.index&&pp(this,b.value);b.reset()}break;case qp:for(b=this.network.vertexes.k,a=0;a<=this.qb;a++){for(;b.next();)b.value.layer===a&&-1===b.value.index&&rp(this,b.value);b.reset()}}},Z.prototype.reduceCrossings=function(){var c,d,e,f,g,h,a=this.countCrossings(),b=ap(this);for(c=0;c<this.mm;c++){for(d=0;d<=this.qb;d++)sp(this,d,1),tp(this,d,1);for(e=this.countCrossings(),a>e&&(a=e,b=ap(this)),d=this.qb;d>=0;d--)sp(this,d,-1),tp(this,d,-1);e=this.countCrossings(),a>e&&(a=e,b=ap(this))}for(bp(this,b),c=0;c<this.mm;c++){for(d=0;d<=this.qb;d++)sp(this,d,0),tp(this,d,0);for(e=this.countCrossings(),a>e&&(a=e,b=ap(this)),d=this.qb;d>=0;d--)sp(this,d,0),tp(this,d,0);e=this.countCrossings(),a>e&&(a=e,b=ap(this))}switch(bp(this,b),this.Nn){case up:break;case vp:for(h=a+1;(d=this.countCrossings())<h;)for(h=d,c=this.qb;c>=0;c--)for(g=0;c>=g;g++){for(f=!0;f;)for(f=!1,d=c;d>=g;d--)f=tp(this,d,-1)||f;for(e=this.countCrossings(),e>=a?bp(this,b):(a=e,b=ap(this)),f=!0;f;)for(f=!1,d=c;d>=g;d--)f=tp(this,d,1)||f;for(e=this.countCrossings(),e>=a?bp(this,b):(a=e,b=ap(this)),f=!0;f;)for(f=!1,d=g;c>=d;d++)f=tp(this,d,1)||f;for(e>=a?bp(this,b):(a=e,b=ap(this)),f=!0;f;)for(f=!1,d=g;c>=d;d++)f=tp(this,d,-1)||f;for(e>=a?bp(this,b):(a=e,b=ap(this)),f=!0;f;)for(f=!1,d=c;d>=g;d--)f=tp(this,d,0)||f;for(e>=a?bp(this,b):(a=e,b=ap(this)),f=!0;f;)for(f=!1,d=g;c>=d;d++)f=tp(this,d,0)||f;e>=a?bp(this,b):(a=e,b=ap(this))}break;default:case Do:for(c=this.qb,g=0,h=a+1;(d=this.countCrossings())<h;){for(h=d,f=!0;f;)for(f=!1,d=c;d>=g;d--)f=tp(this,d,-1)||f;for(e=this.countCrossings(),e>=a?bp(this,b):(a=e,b=ap(this)),f=!0;f;)for(f=!1,d=c;d>=g;d--)f=tp(this,d,1)||f;for(e=this.countCrossings(),e>=a?bp(this,b):(a=e,b=ap(this)),f=!0;f;)for(f=!1,d=g;c>=d;d++)f=tp(this,d,1)||f;for(e>=a?bp(this,b):(a=e,b=ap(this)),f=!0;f;)for(f=!1,d=g;c>=d;d++)f=tp(this,d,-1)||f;for(e>=a?bp(this,b):(a=e,b=ap(this)),f=!0;f;)for(f=!1,d=c;d>=g;d--)f=tp(this,d,0)||f;for(e>=a?bp(this,b):(a=e,b=ap(this)),f=!0;f;)for(f=!1,d=g;c>=d;d++)f=tp(this,d,0)||f;e>=a?bp(this,b):(a=e,b=ap(this))}}bp(this,b)},Z.prototype.straightenAndPack=function(){var b,e,f,d,c=0!==(this.Ui&wp),a=this.Ui===Eo;if(1e3<this.network.edges.count&&!a&&(c=!1),c){for(b=[],a=0;a<=this.qb;a++)b[a]=0;for(d=this.network.vertexes.k;d.next();)e=d.value,a=e.layer,f=e.column,e=this.nodeMinColumnSpace(e,!1),b[a]=Math.max(b[a],f+e);for(d.reset();d.next();)e=d.value,a=e.layer,f=e.column,e.column=(8*(this.Mb-b[a])>>1)+8*f;this.Mb*=8}if(0!==(this.Ui&xp))for(b=!0;b;){for(b=!1,a=this.Rf+1;a<=this.qb;a++)b=yp(this,a,1)||b;for(a=this.Rf-1;a>=0;a--)b=yp(this,a,-1)||b;b=yp(this,this.Rf,0)||b}if(0!==(this.Ui&zp)){for(a=this.Rf+1;a<=this.qb;a++)Ap(this,a,1);for(a=this.Rf-1;a>=0;a--)Ap(this,a,-1);Ap(this,this.Rf,0)}if(c&&(Bp(this,-1),Bp(this,1)),0!==(this.Ui&xp))for(b=!0;b;){for(b=!1,b=yp(this,this.Rf,0)||b,a=this.Rf+1;a<=this.qb;a++)b=yp(this,a,0)||b;for(a=this.Rf-1;a>=0;a--)b=yp(this,a,0)||b}},Z.prototype.commitLayout=function(){if(this.Jl)for(var d,a=Wo(this,!0),b=Wo(this,!1),c=this.network.edges.k;c.next();)d=c.value.link,null!==d&&(d.vb=a,d.zb=b);this.commitNodes(),this.jA(),this.Ft&&this.commitLinks()},Z.prototype.commitNodes=function(){var a,b,c,d,e,f;for(this.gh=[],this.sg=[],this.Qf=[],this.Sb=[],a=0;a<=this.qb;a++)this.gh[a]=0,this.sg[a]=0,this.Qf[a]=0,this.Sb[a]=0;for(a=this.network.vertexes.k;a.next();)b=a.value,c=b.layer,this.gh[c]=Math.max(this.gh[c],this.nodeMinLayerSpace(b,!0)),this.sg[c]=Math.max(this.sg[c],this.nodeMinLayerSpace(b,!1));for(d=0,e=this.pm,b=0;b<=this.qb;b++)c=e,0>=this.gh[b]+this.sg[b]&&(c=0),b>0&&(d+=c/2),90===this.ua||0===this.ua?(d+=this.sg[b],this.Qf[b]=d,d+=this.gh[b]):(d+=this.gh[b],this.Qf[b]=d,d+=this.sg[b]),b<this.qb&&(d+=c/2),this.Sb[b]=d;for(e=d,d=this.Nd,b=0;b<=this.qb;b++)270===this.ua?this.Qf[b]=d.y+this.Qf[b]:90===this.ua?(this.Qf[b]=d.y+e-this.Qf[b],this.Sb[b]=e-this.Sb[b]):180===this.ua?this.Qf[b]=d.x+this.Qf[b]:(this.Qf[b]=d.x+e-this.Qf[b],this.Sb[b]=e-this.Sb[b]);for(a.reset();a.next();)b=a.value,c=b.layer,f=0|b.column,270===this.ua||90===this.ua?(e=d.x+this.Gd*f,c=this.Qf[c]):(e=this.Qf[c],c=d.y+this.Gd*f),b.Ia=e,b.Ua=c,b.commit()},Z.prototype.jA=function(){var a,b,c,d;for(a=0,b=this.pm,c=0;c<=this.qb;c++)a+=this.gh[c],a+=this.sg[c];for(a+=this.qb*b,b=[],c=this.Gd*this.Mb,d=this.PJ;d>=0;d--)270===this.ua?0===d?b.push(new F(0,0,c,Math.abs(this.Sb[0]))):b.push(new F(0,this.Sb[d-1],c,Math.abs(this.Sb[d-1]-this.Sb[d]))):90===this.ua?0===d?b.push(new F(0,this.Sb[0],c,Math.abs(this.Sb[0]-a))):b.push(new F(0,this.Sb[d],c,Math.abs(this.Sb[d-1]-this.Sb[d]))):180===this.ua?0===d?b.push(new F(0,0,Math.abs(this.Sb[0]),c)):b.push(new F(this.Sb[d-1],0,Math.abs(this.Sb[d-1]-this.Sb[d]),c)):0===d?b.push(new F(this.Sb[0],0,Math.abs(this.Sb[0]-a),c)):b.push(new F(this.Sb[d],0,Math.abs(this.Sb[d-1]-this.Sb[d]),c));this.commitLayers(b,K.Bj)},Z.prototype.commitLayers=function(){},Z.prototype.commitLinks=function(){var b,c,a,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,z,x,y,A,C,D,G,I,E,F,J,K,M,L,O,N,P,Q,R,S,T,U,V,W,X,Y,Z,ab,$,_,eb,fb,gb,bb,cb,db,hb,ib,jb,kb,lb,mb,nb,ob,pb,qb,rb,sb,tb,ub,xb,vb,wb,yb,zb,Ab,Bb,Cb,Gb,Hb,Ib,Db,Eb,Fb,Jb,Kb,Lb,Mb,Nb,Ob,Pb,Rb,Sb,Tb,Ub,Vb,Wb,Xb,$b,Yb,Zb,_b,ac,bc,cc,dc;for(a=this.network.edges.k;a.next();)c=a.value.link,"undefined"!=typeof c&&null!==c&&(c.Kl(),c.hp(),c.jj());for(a.reset();a.next();)c=a.value.link,"undefined"!=typeof c&&null!==c&&c.updateRoute();for(a.reset();a.next();)if(b=a.value,c=b.link)if(c.Kl(),d=c,e=d.ca,f=d.fa,g=d.sd,h=d.Xd,b.valid)c.Je===Vg&&4===c.ra&&(b.rev&&(i=e,e=f,f=i,j=g,g=h,h=j),b.fromVertex.column===b.toVertex.column?(k=c.getLinkPoint(e,g,c.computeSpot(!0),!0,!1,f,h),l=c.getLinkPoint(f,h,c.computeSpot(!1),!1,!1,e,g),c.hp(),c.jl(k.x,k.y),c.jl((2*k.x+l.x)/3,(2*k.y+l.y)/3),c.jl((k.x+2*l.x)/3,(k.y+2*l.y)/3),c.jl(l.x,l.y)):(m=!1,n=!1,null!==g&&c.computeSpot(!0)===Qb&&(m=!0),null!==h&&c.computeSpot(!1)===Qb&&(n=!0),(m||n)&&(o=c.o(0).x,p=c.o(0).y,q=c.o(1).x,r=c.o(1).y,s=c.o(2).x,t=c.o(2).y,u=c.o(3).x,v=c.o(3).y,m&&(90===this.ua||270===this.ua?(q=o,r=(p+v)/2):(q=(o+u)/2,r=p),c.aa(1,q,r),w=c.getLinkPoint(e,g,c.computeSpot(!0),!0,!1,f,h),c.aa(0,w.x,w.y)),n&&(90===this.ua||270===this.ua?(s=u,t=(p+v)/2):(s=(o+u)/2,t=v),c.aa(2,s,t),w=c.getLinkPoint(f,h,c.computeSpot(!1),!1,!1,e,g),c.aa(3,w.x,w.y))))),c.jj();else if(b.fromVertex.layer===b.toVertex.layer)c.jj();else{if(x=!1,y=!1,A=c.ut+1,c.pc?(y=!0,z=c.ra,z>4&&c.points.removeRange(2,z-3)):c.Je===Vg?(x=!0,z=c.ra,z>4&&c.points.removeRange(2,z-3),A=2):(z=c.ra,C=c.computeSpot(!0)===Qb,D=c.computeSpot(!1)===Qb,z>2&&C&&D?c.points.removeRange(1,z-2):z>3&&C&&!D?c.points.removeRange(1,z-3):z>3&&!C&&D?c.points.removeRange(2,z-2):z>4&&!C&&!D&&c.points.removeRange(2,z-3)),E=b.fromVertex,F=b.toVertex,b.rev){for(;null!==F&&E!==F;){for(I=G=null,K=F.xc.k;K.next()&&(O=K.value,O.link!==b.link||(G=O.fromVertex,I=O.toVertex,null!==G.yd)););G!==E&&(P=c.o(A-1).x,Q=c.o(A-1).y,R=G.Ia,S=G.Ua,y?180===this.ua||0===this.ua?2===A?(c.C(A++,P,Q),c.C(A++,P,S)):(W=null!==I?I.Ua:Q,W!==S&&(T=this.Sb[G.layer-1],c.C(A++,T,Q),c.C(A++,T,S))):2===A?(c.C(A++,P,Q),c.C(A++,R,Q)):(X=null!==I?I.Ia:P,X!==R&&(T=this.Sb[G.layer-1],c.C(A++,P,T),c.C(A++,R,T))):2===A?x?(U=Math.max(10,this.gh[F.layer]),V=Math.max(10,this.sg[F.layer]),180===this.ua?(J=F.V.x,c.C(A++,J-U,S),c.C(A++,J,S),c.C(A++,J+V,S)):90===this.ua?(J=F.V.y+F.V.height,c.C(A++,R,J+V),c.C(A++,R,J),c.C(A++,R,J-U)):270===this.ua?(J=F.V.y,c.C(A++,R,J-U),c.C(A++,R,J),c.C(A++,R,J+V)):(J=F.V.x+F.V.width,c.C(A++,J+V,S),c.C(A++,J,S),c.C(A++,J-U,S))):(c.C(A++,P,Q),180===this.ua||0===this.ua?c.C(A++,P,S):c.C(A++,R,Q),c.C(A++,R,S)):(U=Math.max(10,this.gh[G.layer]),V=Math.max(10,this.sg[G.layer]),180===this.ua?(x&&c.C(A++,R-U,S),c.C(A++,R,S),x&&c.C(A++,R+V,S)):90===this.ua?(x&&c.C(A++,R,S+V),c.C(A++,R,S),x&&c.C(A++,R,S-U)):270===this.ua?(x&&c.C(A++,R,S-U),c.C(A++,R,S),x&&c.C(A++,R,S+V)):(x&&c.C(A++,R+V,S),c.C(A++,R,S),x&&c.C(A++,R-U,S)))),F=G}(null===h||c.computeSpot(!1)!==Qb)&&(P=c.o(A-1).x,Q=c.o(A-1).y,R=c.o(A).x,S=c.o(A).y,y?(L=this.sg[E.layer],180===this.ua||0===this.ua?(M=Q,M>=E.V.y&&M<=E.V.bottom&&(J=E.Ia+L,M=M<E.V.y+E.V.height/2?E.V.y-this.Gd/2:E.V.bottom+this.Gd/2,c.C(A++,J,Q),c.C(A++,J,M)),c.C(A++,R,M)):(M=P,M>=E.V.x&&M<=E.V.right&&(J=E.Ua+L,M=M<E.V.x+E.V.width/2?E.V.x-this.Gd/2:E.V.right+this.Gd/2,c.C(A++,P,J),c.C(A++,M,J)),c.C(A++,M,S)),c.C(A++,R,S)):x?(U=Math.max(10,this.gh[E.layer]),V=Math.max(10,this.sg[E.layer]),180===this.ua?(J=E.V.x+E.V.width,c.aa(A-2,J,Q),c.aa(A-1,J+V,Q)):90===this.ua?(J=E.V.y,c.aa(A-2,P,J),c.aa(A-1,P,J-U)):270===this.ua?(J=E.V.y+E.V.height,c.aa(A-2,P,J),c.aa(A-1,P,J+V)):(J=E.V.x,c.aa(A-2,J,Q),c.aa(A-1,J-U,Q))):(180===this.ua||0===this.ua?c.C(A++,R,Q):c.C(A++,P,S),c.C(A++,R,S)))}else{for(;null!==E&&E!==F;){for(I=G=null,N=E.nc.k;N.next()&&(O=N.value,O.link!==b.link||(G=O.toVertex,I=O.fromVertex,null!==I.yd&&(I=null),null!==G.yd)););G!==F&&(P=c.o(A-1).x,Q=c.o(A-1).y,R=G.Ia,S=G.Ua,y?180===this.ua||0===this.ua?(W=null!==I?I.Ua:Q,W!==S&&(T=this.Sb[G.layer],2===A&&(T=0===this.ua?Math.max(T,P):Math.min(T,P)),c.C(A++,T,Q),c.C(A++,T,S))):(X=null!==I?I.Ia:P,X!==R&&(T=this.Sb[G.layer],2===A&&(T=90===this.ua?Math.max(T,Q):Math.min(T,Q)),c.C(A++,P,T),c.C(A++,R,T))):(U=Math.max(10,this.gh[G.layer]),V=Math.max(10,this.sg[G.layer]),180===this.ua?(c.C(A++,R+V,S),x&&c.C(A++,R,S),c.C(A++,R-U,S)):90===this.ua?(c.C(A++,R,S-U),x&&c.C(A++,R,S),c.C(A++,R,S+V)):270===this.ua?(c.C(A++,R,S+V),x&&c.C(A++,R,S),c.C(A++,R,S-U)):(c.C(A++,R-U,S),x&&c.C(A++,R,S),c.C(A++,R+V,S)))),E=G}y&&(P=c.o(A-1).x,Q=c.o(A-1).y,R=c.o(A).x,S=c.o(A).y,180===this.ua||0===this.ua?Q!==S&&(T=0===this.ua?Math.min(Math.max((R+P)/2,this.Sb[F.layer]),R):Math.max(Math.min((R+P)/2,this.Sb[F.layer]),R),c.C(A++,T,Q),c.C(A++,T,S)):P!==R&&(T=90===this.ua?Math.min(Math.max((S+Q)/2,this.Sb[F.layer]),S):Math.max(Math.min((S+Q)/2,this.Sb[F.layer]),S),c.C(A++,P,T),c.C(A++,R,T)))}null!==d&&x&&(null!==g&&(c.computeSpot(!0)===Qb&&(Y=c.o(0),Z=c.o(2),Y.O(Z)||c.aa(1,(Y.x+Z.x)/2,(Y.y+Z.y)/2)),w=c.getLinkPoint(e,g,Qb,!0,!1,f,h),c.aa(0,w.x,w.y)),null!==h&&(c.computeSpot(!1)===Qb&&(Y=c.o(c.ra-1),Z=c.o(c.ra-3),Y.O(Z)||c.aa(c.ra-2,(Y.x+Z.x)/2,(Y.y+Z.y)/2)),w=c.getLinkPoint(f,h,Qb,!1,!1,e,g),c.aa(c.ra-1,w.x,w.y))),c.jj(),b.commit()}for($=new H(B),_=this.network.edges.k;_.next();)ab=_.value.link,null!==ab&&ab.pc&&!$.contains(ab)&&$.add(ab);if(0<$.count)if(90===this.ua||270===this.ua){for(bb=0,cb=new H(Gp),db=$.k;db.next();)if(eb=db.value,null!==eb&&eb.pc)for(hb=2;hb<eb.ra-3;hb++)fb=eb.o(hb),gb=eb.o(hb+1),this.I(fb.y,gb.y)&&!this.I(fb.x,gb.x)&&(ib=new Gp,ib.layer=Math.floor(fb.y/2),jb=eb.o(0),kb=eb.o(eb.ra-1),ib.gb=jb.x*jb.x+jb.y,ib.ke=kb.x*kb.x+kb.y,ib.He=Math.min(fb.x,gb.x),ib.de=Math.max(fb.x,gb.x),ib.index=hb,ib.link=eb,hb+2<eb.ra&&(lb=eb.o(hb-1),mb=eb.o(hb+2),nb=0,lb.y<fb.y?nb=mb.y<fb.y?3:fb.x<gb.x?2:1:lb.y>fb.y&&(nb=mb.y>fb.y?0:gb.x<fb.x?2:1),ib.wi=nb),cb.add(ib));if(1<cb.count)for(cb.sort(this.EG),ob=0;ob<cb.count;){for(pb=cb.n[ob].layer,qb=ob+1;qb<cb.count&&cb.n[qb].layer===pb;)qb++;if(qb-ob>1)for(rb=ob;qb>rb;){for(sb=cb.n[rb].de,tb=ob+1;qb>tb&&cb.n[tb].He<sb;)sb=Math.max(sb,cb.n[tb].de),tb++;
if(ub=tb-rb,ub>1){for(cb.iq(this.Ix,rb,rb+ub),vb=1,wb=cb.n[rb].ke,hb=rb;tb>hb;hb++)xb=cb.n[hb],xb.ke!==wb&&(vb++,wb=xb.ke);for(cb.iq(this.DG,rb,rb+ub),yb=1,wb=cb.n[rb].gb,hb=rb;tb>hb;hb++)xb=cb.n[hb],xb.gb!==wb&&(yb++,wb=xb.gb);for(yb>vb?(zb=!1,Ab=vb,wb=cb.n[rb].ke,cb.iq(this.Ix,rb,rb+ub)):(zb=!0,Ab=yb,wb=cb.n[rb].gb),Bb=0,hb=rb;tb>hb;hb++)xb=cb.n[hb],(zb?xb.gb:xb.ke)!==wb&&(Bb++,wb=zb?xb.gb:xb.ke),eb=xb.link,fb=eb.o(xb.index),gb=eb.o(xb.index+1),Cb=this.Np*(Bb-(Ab-1)/2),(!eb.rj||Hp(fb.x,fb.y+Cb,gb.x,gb.y+Cb))&&(bb++,eb.Kl(),eb.aa(xb.index,fb.x,fb.y+Cb),eb.aa(xb.index+1,gb.x,gb.y+Cb),eb.jj())}rb=tb}ob=qb}}else{for(Db=0,Eb=new H(Gp),Fb=$.k;Fb.next();)if(Gb=Fb.value,null!==Gb&&Gb.pc)for(Jb=2;Jb<Gb.ra-3;Jb++)Hb=Gb.o(Jb),Ib=Gb.o(Jb+1),this.I(Hb.x,Ib.x)&&!this.I(Hb.y,Ib.y)&&(Kb=new Gp,Kb.layer=Math.floor(Hb.x/2),Lb=Gb.o(0),Mb=Gb.o(Gb.ra-1),Kb.gb=Lb.x+Lb.y*Lb.y,Kb.ke=Mb.x+Mb.y*Mb.y,Kb.He=Math.min(Hb.y,Ib.y),Kb.de=Math.max(Hb.y,Ib.y),Kb.index=Jb,Kb.link=Gb,Jb+2<Gb.ra&&(Nb=Gb.o(Jb-1),Ob=Gb.o(Jb+2),Pb=0,Nb.x<Hb.x?Pb=Ob.x<Hb.x?3:Hb.y<Ib.y?2:1:Nb.x>Hb.x&&(Pb=Ob.x>Hb.x?0:Ib.y<Hb.y?2:1),Kb.wi=Pb),Eb.add(Kb));if(1<Eb.count)for(Eb.sort(this.EG),Rb=0;Rb<Eb.count;){for(Sb=Eb.n[Rb].layer,Tb=Rb+1;Tb<Eb.count&&Eb.n[Tb].layer===Sb;)Tb++;if(Tb-Rb>1)for(Ub=Rb;Tb>Ub;){for(Vb=Eb.n[Ub].de,Wb=Rb+1;Tb>Wb&&Eb.n[Wb].He<Vb;)Vb=Math.max(Vb,Eb.n[Wb].de),Wb++;if(Xb=Wb-Ub,Xb>1){for(Eb.iq(this.Ix,Ub,Ub+Xb),Yb=1,Zb=Eb.n[Ub].ke,Jb=Ub;Wb>Jb;Jb++)$b=Eb.n[Jb],$b.ke!==Zb&&(Yb++,Zb=$b.ke);for(Eb.iq(this.DG,Ub,Ub+Xb),_b=1,Zb=Eb.n[Ub].gb,Jb=Ub;Wb>Jb;Jb++)$b=Eb.n[Jb],$b.gb!==Zb&&(_b++,Zb=$b.gb);for(_b>Yb?(ac=!1,bc=Yb,Zb=Eb.n[Ub].ke,Eb.iq(this.Ix,Ub,Ub+Xb)):(ac=!0,bc=_b,Zb=Eb.n[Ub].gb),cc=0,Jb=Ub;Wb>Jb;Jb++)$b=Eb.n[Jb],(ac?$b.gb:$b.ke)!==Zb&&(cc++,Zb=ac?$b.gb:$b.ke),Gb=$b.link,Hb=Gb.o($b.index),Ib=Gb.o($b.index+1),dc=this.Np*(cc-(bc-1)/2),(!Gb.rj||Hp(Hb.x+dc,Hb.y,Ib.x+dc,Ib.y))&&(Db++,Gb.Kl(),Gb.aa($b.index,Hb.x+dc,Hb.y),Gb.aa($b.index+1,Ib.x+dc,Ib.y),Gb.jj())}Ub=Wb}Rb=Tb}}},t.ee(Gp,{layer:!0,gb:!0,ke:!0,He:!0,de:!0,index:!0,link:!0,wi:!0}),Z.prototype.EG=function(a,b){return a instanceof Gp&&b instanceof Gp&&a!==b?a.layer<b.layer?-1:a.layer>b.layer?1:a.He<b.He?-1:a.He>b.He?1:a.de<b.de?-1:a.de>b.de?1:0:0},Z.prototype.DG=function(a,b){return a instanceof Gp&&b instanceof Gp&&a!==b?a.gb<b.gb?-1:a.gb>b.gb||a.wi<b.wi?1:a.wi>b.wi||a.He<b.He?-1:a.He>b.He?1:a.de<b.de?-1:a.de>b.de?1:0:0},Z.prototype.Ix=function(a,b){return a instanceof Gp&&b instanceof Gp&&a!==b?a.ke<b.ke?-1:a.ke>b.ke||a.wi<b.wi?1:a.wi>b.wi||a.He<b.He?-1:a.He>b.He?1:a.de<b.de?-1:a.de>b.de?1:0:0},Z.prototype.I=function(a,b){e&&(t.q(a,Z,"isApprox:a"),t.q(b,Z,"isApprox:b"));var c=a-b;return c>-1&&1>c},t.g(Z,"layerSpacing",Z.prototype.layerSpacing),t.defineProperty(Z,{layerSpacing:"layerSpacing"},function(){return this.pm},function(a){this.pm!==a&&(t.i(a,"number",Z,"layerSpacing"),a>=0&&(this.pm=a,this.M()))}),t.g(Z,"columnSpacing",Z.prototype.zI),t.defineProperty(Z,{zI:"columnSpacing"},function(){return this.Gd},function(a){this.Gd!==a&&(t.i(a,"number",Z,"columnSpacing"),a>=0&&(this.Gd=a,this.M()))}),t.g(Z,"direction",Z.prototype.direction),t.defineProperty(Z,{direction:"direction"},function(){return this.ua},function(a){this.ua!==a&&(t.i(a,"number",Z,"direction"),this.ua=a,this.M())}),t.g(Z,"cycleRemoveOption",Z.prototype.KE),t.defineProperty(Z,{KE:"cycleRemoveOption"},function(){return this.Vn},function(a){this.Vn!==a&&(t.Fa(a,Z,Z,"cycleRemoveOption"),a===yy||a===Ao)&&(this.Vn=a,this.M())}),t.g(Z,"layeringOption",Z.prototype.PF),t.defineProperty(Z,{PF:"layeringOption"},function(){return this.Do},function(a){this.Do!==a&&(t.Fa(a,Z,Z,"layeringOption"),a===Bo||a===ip||a===kp)&&(this.Do=a,this.M())}),t.g(Z,"initializeOption",Z.prototype.CF),t.defineProperty(Z,{CF:"initializeOption"},function(){return this.ro},function(a){this.ro!==a&&(t.Fa(a,Z,Z,"initializeOption"),a===Co||a===qp||a===op)&&(this.ro=a,this.M())}),t.g(Z,"iterations",Z.prototype.IJ),t.defineProperty(Z,{IJ:"iterations"},function(){return this.mm},function(a){this.mm!==a&&(t.q(a,Fo,"iterations"),a>=0&&(this.mm=a,this.M()))}),t.g(Z,"aggressiveOption",Z.prototype.lE),t.defineProperty(Z,{lE:"aggressiveOption"},function(){return this.Nn},function(a){this.Nn!==a&&(t.Fa(a,Z,Z,"aggressiveOption"),a===up||a===Do||a===vp)&&(this.Nn=a,this.M())}),t.g(Z,"packOption",Z.prototype.dK),t.defineProperty(Z,{dK:"packOption"},function(){return this.Ui},function(a){this.Ui!==a&&(t.i(a,"number",Z,"packOption"),a>=0&&8>a&&(this.Ui=a,this.M()))}),t.g(Z,"setsPortSpots",Z.prototype.Jl),t.defineProperty(Z,{Jl:"setsPortSpots"},function(){return this.Yh},function(a){this.Yh!==a&&(t.i(a,"boolean",Z,"setsPortSpots"),this.Yh=a,this.M())}),t.g(Z,"linkSpacing",Z.prototype.Np),t.defineProperty(Z,{Np:"linkSpacing"},function(){return this.Nj},function(a){this.Nj!==a&&(t.i(a,"number",Z,"linkSpacing"),a>=0&&(this.Nj=a,this.M()))}),t.A(Z,{PJ:"maxLayer"},function(){return this.qb}),t.A(Z,{VK:"maxIndex"},function(){return this.tv}),t.A(Z,{UK:"maxColumn"},function(){return this.Mb}),t.A(Z,{XK:"minIndexLayer"},function(){return this.Pr}),t.A(Z,{WK:"maxIndexLayer"},function(){return this.Rf}),Z.CycleDepthFirst=Ao=t.w(Z,"CycleDepthFirst",0),Z.CycleGreedy=yy=t.w(Z,"CycleGreedy",1),Z.LayerOptimalLinkLength=Bo=t.w(Z,"LayerOptimalLinkLength",0),Z.LayerLongestPathSink=ip=t.w(Z,"LayerLongestPathSink",1),Z.LayerLongestPathSource=kp=t.w(Z,"LayerLongestPathSource",2),Z.InitDepthFirstOut=Co=t.w(Z,"InitDepthFirstOut",0),Z.InitDepthFirstIn=qp=t.w(Z,"InitDepthFirstIn",1),Z.InitNaive=op=t.w(Z,"InitNaive",2),Z.AggressiveNone=up=t.w(Z,"AggressiveNone",0),Z.AggressiveLess=Do=t.w(Z,"AggressiveLess",1),Z.AggressiveMore=vp=t.w(Z,"AggressiveMore",2),Z.PackNone=0,Z.PackExpand=wp=1,Z.PackStraighten=xp=2,Z.PackMedian=zp=4,Z.PackAll=Eo=7,t.ka("LayeredDigraphNetwork",Fo),t.Qa(Fo,Ea),Fo.prototype.createVertex=function(){return new Ip},Fo.prototype.createEdge=function(){return new Jp},t.ka("LayeredDigraphVertex",Ip),t.Qa(Ip,Fa),t.ka("LayeredDigraphEdge",Jp),t.Qa(Jp,Ha),t.ka("TreeLayout",X),t.Qa(X,ze),X.prototype.cloneProtected=function(a){ze.prototype.cloneProtected.call(this,a),a.Wi=this.Wi,a.Rs=this.Rs,a.pv=this.pv,a.Gh=this.Gh,a.jd=this.jd,a.kg.assign(this.kg),a.ya.copyInheritedPropertiesFrom(this.ya),a.xa.copyInheritedPropertiesFrom(this.xa)},X.prototype.createNetwork=function(){var a=new Qp;return Mn(a,this),a},X.prototype.makeNetwork=function(a){var b=this.createNetwork();return a instanceof v?(Rp(this,b,a.wh,!0),Rp(this,b,a.links,!0)):a instanceof z?Rp(this,b,a.Nc,!1):Rp(this,b,a.k,!1),b},X.prototype.doLayout=function(a){var b,c,d,e,f;if(a||t.m("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),null===this.network&&(this.network=this.makeNetwork(a)),this.Xe!==Sp&&(this.Nd=this.initialOrigin(this.Nd)),b=this.h,null===b&&a instanceof v&&(b=a),this.Pf=this.path===Kp&&null!==b?b.vd?Lp:Tp:this.path===Kp?Lp:this.path,0<this.network.vertexes.count){for(this.network.Pw(),b=this.network.vertexes.k;b.next();)a=b.value,a.initialized=!1,a.level=0,a.parent=null,a.children=[];if(0<this.dd.count)for(b=this.dd.k,this.dd=new I(Pp);b.next();)a=b.value,a instanceof y?(a=this.network.gn(a),null!==a&&this.dd.add(a)):a instanceof Pp&&this.dd.add(a);for(0===this.dd.count&&this.findRoots(),b=this.dd.copy().k;b.next();)a=b.value,a.initialized||(a.initialized=!0,Up(this,a));for(a=this.dd.k;a.next();)Vp(this,a.value);for(a=this.dd.k;a.next();)Wp(this,a.value);for(a=this.dd.k;a.next();)Xp(this,a.value);if(this.cA(),this.tx===Yp){for(c=[],a=this.network.vertexes.k;a.next();)b=a.value,d=b.parent,d||(d=b),d=0===d.angle||180===d.angle,e=c[b.level],void 0===e&&(e=0),c[b.level]=Math.max(e,d?b.width:b.height);for(e=0;e<c.length;e++)void 0===c[e]&&(c[e]=0);for(this.fC=c,a=this.network.vertexes.k;a.next();)b=a.value,(d=b.parent)||(d=b),0===d.angle||180===d.angle?(180===d.angle&&(b.tp+=c[b.level]-b.width),b.width=c[b.level]):(270===d.angle&&(b.up+=c[b.level]-b.height),b.height=c[b.level])}else if(this.tx===Zp)for(a=this.network.vertexes.k;a.next();){for(b=a.value,d=0===b.angle||180===b.angle,c=-1,e=0;e<b.children.length;e++)f=b.children[e],c=Math.max(c,d?f.width:f.height);if(c>=0)for(e=0;e<b.children.length;e++)f=b.children[e],d?(180===b.angle&&(f.tp+=c-f.width),f.width=c):(270===b.angle&&(f.up+=c-f.height),f.height=c)}for(a=this.dd.k;a.next();)this.layoutTree(a.value);this.arrangeTrees(),this.updateParts()}this.network=null,this.dd=new I(Object),this.gf=!0},X.prototype.findRoots=function(){var a,b,c,d;for(a=this.network.vertexes.k;a.next();)switch(b=a.value,this.Pf){case Lp:0===b.xc.count&&this.dd.add(b);break;case Tp:0===b.nc.count&&this.dd.add(b);break;default:t.m("Unhandled path value "+this.Pf.toString())}if(0===this.dd.count){for(a=999999,b=null,c=this.network.vertexes.k;c.next();)switch(d=c.value,this.Pf){case Lp:d.xc.count<a&&(a=d.xc.count,b=d);break;case Tp:d.nc.count<a&&(a=d.nc.count,b=d);break;default:t.m("Unhandled path value "+this.Pf.toString())}null!==b&&this.dd.add(b)}},X.prototype.removeChild=function(a,b){var c,d,f,g;if(null!==a&&null!==b){for(e&&t.l(a,Pp,X,"removeChild:p"),e&&t.l(b,Pp,X,"removeChild:c"),c=a.children,d=0,f=0;f<c.length;f++)c[f]===b&&d++;if(d>0){for(d=Array(c.length-d),g=0,f=0;f<c.length;f++)c[f]!==b&&(d[g++]=c[f]);a.children=d}}},X.prototype.initializeTreeVertexValues=function(a){var b,c,d;if(e&&t.l(a,Pp,X,"initializeTreeVertexValues:v"),b=bq(this,a),a.copyInheritedPropertiesFrom(b),null!==a.parent&&a.parent.alignment===aq){for(b=a.angle,c=a.parent.children,d=0;d<c.length&&a!==c[d];)d++;0===d%2?d!==c.length-1&&(b=90===b?180:180===b?270:270===b?180:270):b=90===b?0:180===b?90:270===b?0:90,a.angle=b}a.initialized=!0},X.prototype.assignTreeVertexValues=function(){},X.prototype.sortTreeVertexChildren=function(a){switch(e&&t.l(a,Pp,X,"sortTreeVertexChildren:v"),a.sorting){case fq:break;case gq:a.children.reverse();break;case hq:a.children.sort(a.comparer);break;case iq:a.children.sort(a.comparer),a.children.reverse();break;default:t.m("Unhandled sorting value "+a.sorting.toString())}},X.prototype.cA=function(){if(this.comments)for(var a=this.network.vertexes.k;a.next();)this.addComments(a.value)},X.prototype.addComments=function(a){var b,c,d,f,g,h,i,j,k,l;if(e&&t.l(a,Pp,X,"addComments:v"),b=a.angle,c=a.parent,d=0,f=jq,f=!1,null!==c&&(d=c.angle,f=c.alignment,f=kq(f)),b=90===b||270===b,d=90===d||270===d,c=0===a.Xm,g=0,h=0,i=0,j=a.commentSpacing,null!==a.Kc)for(k=a.Kc.eF();k.next();)l=k.value,"Comment"===l.ed&&l.Va()&&(null===a.comments&&(a.comments=[]),a.comments.push(l),l.zf(),l=l.Ha,b&&!c||!f&&!d&&c||f&&d&&c?(g=Math.max(g,l.width),h+=l.height+Math.abs(i)):(g+=l.width+Math.abs(i),h=Math.max(h,l.height)),i=j);null!==a.comments&&(b&&!c||!f&&!d&&c||f&&d&&c?(g+=Math.abs(a.commentMargin),h=Math.max(0,h-a.height)):(h+=Math.abs(a.commentMargin),g=Math.max(0,g-a.width)),f=t.wk(0,0,a.V.width+g,a.V.height+h),a.Ub=f,t.oc(f))},X.prototype.layoutComments=function(a){var b,c,d,f,g,h,i,j,k,l,m,n,o,p,q;if(e&&t.l(a,Pp,X,"layoutComments:v"),null!==a.comments){for(b=a.Kc.Ha,c=a.parent,d=a.angle,f=0,g=jq,g=!1,null!==c&&(f=c.angle,g=c.alignment,g=kq(g)),d=90===d||270===d,h=90===f||270===f,i=0===a.Xm,j=pq(a),k=0,l=a.comments,m=l.length,n=t.N(),o=0;m>o;o++)if(c=l[o],p=c.Ha,d&&!i||!g&&!h&&i||g&&h&&i){if(f>135&&!g||h&&j)if(0<=a.commentMargin)for(n.p(a.V.x-a.commentMargin-p.width,a.V.y+k),c.move(n),q=c.Gg();q.next();)c=q.value,c.vb=gc,c.zb=hc;else for(n.p(a.V.x+2*a.Q.x-a.commentMargin,a.V.y+k),c.move(n),q=c.Gg();q.next();)c=q.value,c.vb=hc,c.zb=gc;else if(0<=a.commentMargin)for(n.p(a.V.x+2*a.Q.x+a.commentMargin,a.V.y+k),c.move(n),q=c.Gg();q.next();)c=q.value,c.vb=hc,c.zb=gc;else for(n.p(a.V.x+a.commentMargin-p.width,a.V.y+k),c.move(n),q=c.Gg();q.next();)c=q.value,c.vb=gc,c.zb=hc;k=0<=a.commentSpacing?k+(p.height+a.commentSpacing):k+(a.commentSpacing-p.height)}else{if(f>135&&!g||!h&&j)if(0<=a.commentMargin)for(n.p(a.V.x+k,a.V.y-a.commentMargin-p.height),c.move(n),q=c.Gg();q.next();)c=q.value,c.vb=cc,c.zb=mc;else for(n.p(a.V.x+k,a.V.y+2*a.Q.y-a.commentMargin),c.move(n),q=c.Gg();q.next();)c=q.value,c.vb=mc,c.zb=cc;else if(0<=a.commentMargin)for(n.p(a.V.x+k,a.V.y+2*a.Q.y+a.commentMargin),c.move(n),q=c.Gg();q.next();)c=q.value,c.vb=mc,c.zb=cc;else for(n.p(a.V.x+k,a.V.y+a.commentMargin-p.height),c.move(n),q=c.Gg();q.next();)c=q.value,c.vb=cc,c.zb=mc;k=0<=a.commentSpacing?k+(p.width+a.commentSpacing):k+(a.commentSpacing-p.width)}if(t.B(n),b=k-a.commentSpacing-(d?b.height:b.width),this.Pf===Lp)for(a=a.nc;a.next();)f=a.value,(c=f.link)&&!c.rj&&(c.rk=b>0?b:0/0);else for(a=a.xc;a.next();)f=a.value,(c=f.link)&&!c.rj&&(c.xk=b>0?b:0/0)}},X.prototype.layoutTree=function(a){var b,c,d,f,g,h,i,j,k,l,m,n,o,p,q,r,s,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J;if(null!==a){for(e&&t.l(a,Pp,X,"layoutTree:v"),b=a.children,c=b.length,d=0;c>d;d++)this.layoutTree(b[d]);switch(a.compaction){case qq:rq(this,a);break;case sq:if(a.alignment===aq)rq(this,a);else if(e&&t.l(a,Pp,X,"layoutTreeBlock:v"),0===a.Xm)d=a.parent,b=!1,c=0,f=jq,null!==d&&(c=d.angle,f=d.alignment,b=kq(f)),d=pq(a),a.qa.p(0,0),a.eb.p(a.width,a.height),null===a.parent||null===a.comments||(180!==c&&270!==c||b)&&!d?a.Na.p(0,0):180===c&&!b||(90===c||270===c)&&d?a.Na.p(a.width-2*a.Q.x,0):a.Na.p(0,a.height-2*a.Q.y),a.It=null,a.au=null;else{for(g=tq(a),b=90===g||270===g,h=0,i=a.children,j=i.length,k=0;j>k;k++)l=i[k],h=Math.max(h,b?l.eb.width:l.eb.height);if(m=a.alignment,d=m===uq,n=m===vq,o=kq(m),p=Math.max(0,a.breadthLimit),c=wq(a),q=a.nodeSpacing,r=xq(a),s=a.rowSpacing,u=0,(d||n||a.cq||a.dq&&1===a.maxGenerationCount)&&(u=Math.max(0,a.rowIndent)),d=a.width,f=a.height,v=0,w=0,x=0,y=null,z=null,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0,l=0,o&&!oq(m)&&g>135&&i.reverse(),oq(m))if(j>1)for(k=0;j>k;k++)0===k%2&&k!==j-1?H=Math.max(H,b?i[k].eb.width:i[k].eb.height):0!==k%2&&(l=Math.max(l,b?i[k].eb.width:i[k].eb.height));else 1===j&&(H=b?i[0].eb.width:i[0].eb.height);if(o){switch(m){case lq:B=135>g?yq(a,i,H,v,w):zq(a,i,H,v,w),H=B[0],v=B[1],w=B[2];break;case mq:for(k=0;j>k;k++)l=i[k],I=l.eb,y=0===F?0:s,b?(l.qa.p(h-I.width,D+y),v=Math.max(v,I.width),w=Math.max(w,D+y+I.height),D+=y+I.height):(l.qa.p(C+y,h-I.height),v=Math.max(v,C+y+I.width),w=Math.max(w,I.height),C+=y+I.width),F++;break;case nq:for(k=0;j>k;k++)l=i[k],I=l.eb,y=0===F?0:s,b?(l.qa.p(q/2+a.Q.x,D+y),v=Math.max(v,I.width),w=Math.max(w,D+y+I.height),D+=y+I.height):(l.qa.p(C+y,q/2+a.Q.y),v=Math.max(v,C+y+I.width),w=Math.max(w,I.height),C+=y+I.width),F++}y=Aq(this,2),z=Aq(this,2),b?(y[0].p(0,0),y[1].p(0,w),z[0].p(v,0)):(y[0].p(0,0),y[1].p(v,0),z[0].p(0,w)),z[1].p(v,w)}else for(k=0;j>k;k++)l=i[k],I=l.eb,b?(p>0&&F>0&&C+q+I.width>p&&(h>C&&Bq(a,m,h-C,0,G,k-1),E++,F=0,G=k,x=w,C=0,D=g>135?-w-s:w+s),Cq(this,l,0,D),J=0,0===F?(y=l.It,z=l.au,A=I.width,B=I.height,(null===y||null===z||g!==tq(l))&&(y=Aq(this,2),z=Aq(this,2),y[0].p(0,0),y[1].p(0,B),z[0].p(A,0),z[1].p(A,B))):(B=Dq(this,a,l,y,z,A,B),J=B[0],y=B[1],z=B[2],A=B[3],B=B[4],C<I.width&&0>J&&(Eq(a,-J,0,G,k-1),Fq(y,-J,0),Fq(z,-J,0),J=0)),l.qa.p(J,D),v=Math.max(v,A),w=Math.max(w,x+(0===E?0:s)+I.height),C=A):(p>0&&F>0&&D+q+I.height>p&&(h>D&&Bq(a,m,0,h-D,G,k-1),E++,F=0,G=k,x=v,D=0,C=g>135?-v-s:v+s),Cq(this,l,C,0),J=0,0===F?(y=l.It,z=l.au,A=I.width,B=I.height,(null===y||null===z||g!==tq(l))&&(y=Aq(this,2),z=Aq(this,2),y[0].p(0,0),y[1].p(A,0),z[0].p(0,B),z[1].p(A,B))):(B=Dq(this,a,l,y,z,A,B),J=B[0],y=B[1],z=B[2],A=B[3],B=B[4],D<I.height&&0>J&&(Eq(a,0,-J,G,k-1),Fq(y,0,-J),Fq(z,0,-J),J=0)),l.qa.p(C,J),w=Math.max(w,B),v=Math.max(v,x+(0===E?0:s)+I.width),D=B),F++;switch(E>0&&(b?(w+=Math.max(0,c),v>C&&Bq(a,m,v-C,0,G,j-1),u>0&&(n||Eq(a,u,0,0,j-1),v+=u)):(v+=Math.max(0,c),w>D&&Bq(a,m,0,w-D,G,j-1),u>0&&(n||Eq(a,0,u,0,j-1),w+=u))),n=h=0,m){case Gq:b?h+=v/2-a.Q.x-r/2:n+=w/2-a.Q.y-r/2;break;case jq:E>0?b?h+=v/2-a.Q.x-r/2:n+=w/2-a.Q.y-r/2:b?(k=i[0].qa.x+i[0].Na.x,H=i[j-1].qa.x+i[j-1].Na.x+2*i[j-1].Q.x,h+=k+(H-k)/2-a.Q.x-r/2):(k=i[0].qa.y+i[0].Na.y,H=i[j-1].qa.y+i[j-1].Na.y+2*i[j-1].Q.y,n+=k+(H-k)/2-a.Q.y-r/2);break;case uq:b?(h-=r,v+=r):(n-=r,w+=r);break;case vq:b?(h+=v-a.width+r,v+=r):(n+=w-a.height+r,w+=r);break;case lq:b?h=j>1?h+(H+q/2-a.Q.x):h+(i[0].Q.x-a.Q.x+i[0].Na.x):n=j>1?n+(H+q/2-a.Q.y):n+(i[0].Q.y-a.Q.y+i[0].Na.y);break;case mq:b?h+=v+q/2-a.Q.x:n+=w+q/2-a.Q.y;break;case nq:break;default:t.m("Unhandled alignment value "+m.toString())}for(k=0;j>k;k++)l=i[k],b?l.qa.p(l.qa.x+l.Na.x-h,l.qa.y+(g>135?(o?-w:-l.eb.height)+l.Na.y-c:f+c+l.Na.y)):l.qa.p(l.qa.x+(g>135?(o?-v:-l.eb.width)+l.Na.x-c:d+c+l.Na.x),l.qa.y+l.Na.y-n);if(j=i=0,o?b?(v=Hq(a,v,h),0>h&&(h=0),g>135&&(n+=w+c),w+=f+c,m===nq&&(i+=q/2+a.Q.x),j+=f+c):(g>135&&(h+=v+c),v+=d+c,w=Iq(a,w,n),0>n&&(n=0),m===nq&&(j+=q/2+a.Q.y),i+=d+c):b?(null===a.comments?d>v&&(m=Jq(m,d-v,0),i=m[0],j=m[1],v=d,h=0):v=Hq(a,v,h),0>h&&(i-=h,h=0),g>135&&(n+=w+c),w=Math.max(Math.max(w,f),w+f+c),j+=f+c):(g>135&&(h+=v+c),v=Math.max(Math.max(v,d),v+d+c),null===a.comments?f>w&&(m=Jq(m,0,f-w),i=m[0],j=m[1],w=f,n=0):w=Iq(a,w,n),0>n&&(j-=n,n=0),i+=d+c),E>0)g=Aq(this,4),m=Aq(this,4),b?(g[2].p(0,f+c),g[3].p(g[2].x,w),m[2].p(v,g[2].y),m[3].p(m[2].x,g[3].y)):(g[2].p(d+c,0),g[3].p(v,g[2].y),m[2].p(g[2].x,w),m[3].p(g[3].x,m[2].y));else{for(g=Aq(this,y.length+2),m=Aq(this,z.length+2),k=0;k<y.length;k++)o=y[k],g[k+2].p(o.x+i,o.y+j);for(k=0;k<z.length;k++)o=z[k],m[k+2].p(o.x+i,o.y+j)}b?(g[0].p(h,0),g[1].p(g[0].x,f),g[2].y<g[1].y&&(g[2].x>g[0].x?g[2].assign(g[1]):g[1].assign(g[2])),g[3].y<g[2].y&&(g[3].x>g[0].x?g[3].assign(g[2]):g[2].assign(g[3])),m[0].p(h+d,0),m[1].p(m[0].x,f),m[2].y<m[1].y&&(m[2].x<m[0].x?m[2].assign(m[1]):m[1].assign(m[2])),m[3].y<m[2].y&&(m[3].x<m[0].x?m[3].assign(m[2]):m[2].assign(m[3])),g[2].y-=c/2,m[2].y-=c/2):(g[0].p(0,n),g[1].p(d,g[0].y),g[2].x<g[1].x&&(g[2].y>g[0].y?g[2].assign(g[1]):g[1].assign(g[2])),g[3].x<g[2].x&&(g[3].y>g[0].y?g[3].assign(g[2]):g[2].assign(g[3])),m[0].p(0,n+f),m[1].p(d,m[0].y),m[2].x<m[1].x&&(m[2].y<m[0].y?m[2].assign(m[1]):m[1].assign(m[2])),m[3].x<m[2].x&&(m[3].y<m[0].y?m[3].assign(m[2]):m[2].assign(m[3])),g[2].x-=c/2,m[2].x-=c/2),Kq(this,y),Kq(this,z),a.It=g,a.au=m,a.Na.p(h,n),a.eb.p(v,w)}break;default:t.m("Unhandled compaction value "+a.compaction.toString())}}},X.prototype.arrangeTrees=function(){var a,b,c,d;if(this.jd===Sp)for(a=this.dd.k;a.next();)b=a.value,c=b.Kc,null!==c&&(d=c.position,c=d.x,d=d.y,isFinite(c)||(c=0),isFinite(d)||(d=0),Tq(this,b,c,d));else for(a=this.Nd,c=a.x,d=a.y,a=this.dd.k;a.next();)switch(b=a.value,Tq(this,b,c+b.Na.x,d+b.Na.y),this.jd){case Op:d+=b.eb.height+this.kg.height;break;case Uq:c+=b.eb.width+this.kg.width;break;default:t.m("Unhandled arrangement value "+this.jd.toString())}},X.prototype.commitLayout=function(){this.AB(),this.commitNodes(),this.jA(),this.Ft&&this.commitLinks()},X.prototype.commitNodes=function(){for(var b,a=this.network.vertexes.k;a.next();)b=a.value,b.commit();for(a.reset();a.next();)b=a.value,this.layoutComments(b)},X.prototype.jA=function(){var a,b,c,d,e,f,g,h;if(this.tx===Yp){for(a=this.fC,b=[],c=null,d=this.network.vertexes.k;d.next();)e=d.value,null===c?c=e.Ub.copy():c.zj(e.Ub),f=b[e.level],f=void 0===f?wq(e):Math.max(f,wq(e)),b[e.level]=f;for(d=0;d<b.length;d++)void 0===b[d]&&(b[d]=0);if(90===this.angle||270===this.angle?(c.$f(this.nodeSpacing/2,this.layerSpacing),e=new E(-this.nodeSpacing/2,-this.layerSpacing/2)):(c.$f(this.layerSpacing,this.nodeSpacing/2),e=new E(-this.layerSpacing/2,-this.nodeSpacing/2)),f=[],c=90===this.angle||270===this.angle?c.width:c.height,g=0,180===this.angle||270===this.angle)for(d=0;d<a.length;d++)g+=a[d]+b[d];for(d=0;d<a.length;d++)h=a[d]+b[d],270===this.angle?(g-=h,f.push(new F(0,g,c,h))):90===this.angle?(f.push(new F(0,g,c,h)),g+=h):180===this.angle?(g-=h,f.push(new F(g,0,h,c))):(f.push(new F(g,0,h,c)),g+=h);this.commitLayers(f,e)}},X.prototype.commitLayers=function(){},X.prototype.commitLinks=function(){for(var a=this.network.edges.k;a.next();)a.value.commit()},X.prototype.AB=function(){for(var a=this.dd.k;a.next();)Vq(this,a.value)},X.prototype.setPortSpots=function(a){var b,f,c,d,g,h,i,j,k;if(e&&t.l(a,Pp,X,"setPortSpots:v"),b=a.alignment,kq(b)){switch(e&&t.l(a,Pp,X,"setPortSpotsBus:v"),e&&t.l(b,oa,X,"setPortSpots:align"),c=this.Pf===Lp,d=tq(a),d){case 0:f=hc;break;case 90:f=mc;break;case 180:f=gc;break;default:f=cc}switch(g=a.children,h=g.length,b){case lq:case aq:for(b=0;h>b;b++)if(i=g[b],i=c?i.xc:i.nc,i.next()&&(j=i.value,j=j.link,null!==j)){if(k=90===d||270===d?gc:cc,1===h||b===h-1&&1===h%2)switch(d){case 0:k=gc;break;case 90:k=cc;break;case 180:k=hc;break;default:k=mc}else 0===b%2&&(k=90===d||270===d?hc:mc);c?(a.setsPortSpot&&(j.vb=f),a.setsChildPortSpot&&(j.zb=k)):(a.setsPortSpot&&(j.vb=k),a.setsChildPortSpot&&(j.zb=f))}break;case mq:for(k=90===d||270===d?hc:mc,i=c?a.nc:a.xc;i.next();)j=i.value,j=j.link,null!==j&&(c?(a.setsPortSpot&&(j.vb=f),a.setsChildPortSpot&&(j.zb=k)):(a.setsPortSpot&&(j.vb=k),a.setsChildPortSpot&&(j.zb=f)));break;case nq:for(k=90===d||270===d?gc:cc,i=c?a.nc:a.xc;i.next();)j=i.value,j=j.link,null!==j&&(c?(a.setsPortSpot&&(j.vb=f),a.setsChildPortSpot&&(j.zb=k)):(a.setsPortSpot&&(j.vb=k),a.setsChildPortSpot&&(j.zb=f)))}}else if(c=tq(a),this.Pf===Lp){for(d=a.nc;d.next();)if(f=d.value,f=f.link,null!==f){if(a.setsPortSpot)if(a.portSpot.Wc())switch(c){case 0:f.vb=hc;break;case 90:f.vb=mc;break;case 180:f.vb=gc;break;default:f.vb=cc}else f.vb=a.portSpot;if(a.setsChildPortSpot)if(a.childPortSpot.Wc())switch(c){case 0:f.zb=gc;break;case 90:f.zb=cc;break;case 180:f.zb=hc;break;default:f.zb=mc}else f.zb=a.childPortSpot}}else for(d=a.xc;d.next();)if(f=d.value,f=f.link,null!==f){if(a.setsPortSpot)if(a.portSpot.Wc())switch(c){case 0:f.zb=hc;break;case 90:f.zb=mc;break;case 180:f.zb=gc;break;default:f.zb=cc}else f.zb=a.portSpot;if(a.setsChildPortSpot)if(a.childPortSpot.Wc())switch(c){case 0:f.vb=gc;break;case 90:f.vb=cc;break;case 180:f.vb=hc;break;default:f.vb=mc}else f.vb=a.childPortSpot}},t.g(X,"roots",X.prototype.oK),t.defineProperty(X,{oK:"roots"},function(){return this.dd},function(a){this.dd!==a&&(t.l(a,I,X,"roots"),this.dd=a,this.M())}),t.g(X,"path",X.prototype.path),t.defineProperty(X,{path:"path"},function(){return this.Wi},function(a){this.Wi!==a&&(t.Fa(a,X,X,"path"),this.Wi=a,this.M())}),t.g(X,"treeStyle",X.prototype.hH),t.defineProperty(X,{hH:"treeStyle"},function(){return this.Rs},function(a){this.jd!==a&&(t.Fa(a,X,X,"treeStyle"),a===Mp||a===dq||a===eq||a===cq)&&(this.Rs=a,this.M())}),t.g(X,"layerStyle",X.prototype.tx),t.defineProperty(X,{tx:"layerStyle"},function(){return this.pv},function(a){this.jd!==a&&(t.Fa(a,X,X,"layerStyle"),a===Np||a===Zp||a===Yp)&&(this.pv=a,this.M())}),t.g(X,"comments",X.prototype.comments),t.defineProperty(X,{comments:"comments"},function(){return this.Gh},function(a){this.Gh!==a&&(t.i(a,"boolean",X,"comments"),this.Gh=a,this.M())}),t.g(X,"arrangement",X.prototype.Xe),t.defineProperty(X,{Xe:"arrangement"},function(){return this.jd},function(a){this.jd!==a&&(t.Fa(a,X,X,"arrangement"),a===Op||a===Uq||a===Sp)&&(this.jd=a,this.M())}),t.g(X,"arrangementSpacing",X.prototype.ww),t.defineProperty(X,{ww:"arrangementSpacing"},function(){return this.kg},function(a){t.l(a,ra,X,"arrangementSpacing"),this.kg.O(a)||(this.kg.assign(a),this.M())}),t.g(X,"rootDefaults",X.prototype.nK),t.defineProperty(X,{nK:"rootDefaults"},function(){return this.ya},function(a){this.ya!==a&&(t.l(a,Pp,X,"rootDefaults"),this.ya=a,this.M())}),t.g(X,"alternateDefaults",X.prototype.iI),t.defineProperty(X,{iI:"alternateDefaults"},function(){return this.xa},function(a){this.xa!==a&&(t.l(a,Pp,X,"alternateDefaults"),this.xa=a,this.M())}),t.g(X,"sorting",X.prototype.sorting),t.defineProperty(X,{sorting:"sorting"},function(){return this.ya.sorting},function(a){this.ya.sorting!==a&&(t.Fa(a,X,X,"sorting"),a===fq||a===gq||a===hq||iq)&&(this.ya.sorting=a,this.M())}),t.g(X,"comparer",X.prototype.comparer),t.defineProperty(X,{comparer:"comparer"},function(){return this.ya.comparer},function(a){this.ya.comparer!==a&&(t.i(a,"function",X,"comparer"),this.ya.comparer=a,this.M())}),t.g(X,"angle",X.prototype.angle),t.defineProperty(X,{angle:"angle"},function(){return this.ya.angle},function(a){this.ya.angle!==a&&(t.i(a,"number",X,"angle"),0===a||90===a||180===a||270===a)&&(this.ya.angle=a,this.M())}),t.g(X,"alignment",X.prototype.alignment),t.defineProperty(X,{alignment:"alignment"},function(){return this.ya.alignment},function(a){this.ya.alignment!==a&&(t.Fa(a,X,X,"alignment"),this.ya.alignment=a,this.M())}),t.g(X,"nodeIndent",X.prototype.nodeIndent),t.defineProperty(X,{nodeIndent:"nodeIndent"},function(){return this.ya.nodeIndent},function(a){this.ya.nodeIndent!==a&&(t.i(a,"number",X,"nodeIndent"),a>=0&&(this.ya.nodeIndent=a,this.M()))}),t.g(X,"nodeIndentPastParent",X.prototype.nodeIndentPastParent),t.defineProperty(X,{nodeIndentPastParent:"nodeIndentPastParent"},function(){return this.ya.nodeIndentPastParent},function(a){this.ya.nodeIndentPastParent!==a&&(t.i(a,"number",X,"nodeIndentPastParent"),a>=0&&1>=a&&(this.ya.nodeIndentPastParent=a,this.M()))}),t.g(X,"nodeSpacing",X.prototype.nodeSpacing),t.defineProperty(X,{nodeSpacing:"nodeSpacing"},function(){return this.ya.nodeSpacing},function(a){this.ya.nodeSpacing!==a&&(t.i(a,"number",X,"nodeSpacing"),this.ya.nodeSpacing=a,this.M())}),t.g(X,"layerSpacing",X.prototype.layerSpacing),t.defineProperty(X,{layerSpacing:"layerSpacing"},function(){return this.ya.layerSpacing},function(a){this.ya.layerSpacing!==a&&(t.i(a,"number",X,"layerSpacing"),this.ya.layerSpacing=a,this.M())}),t.g(X,"layerSpacingParentOverlap",X.prototype.layerSpacingParentOverlap),t.defineProperty(X,{layerSpacingParentOverlap:"layerSpacingParentOverlap"},function(){return this.ya.layerSpacingParentOverlap},function(a){this.ya.layerSpacingParentOverlap!==a&&(t.i(a,"number",X,"layerSpacingParentOverlap"),a>=0&&1>=a&&(this.ya.layerSpacingParentOverlap=a,this.M()))}),t.g(X,"compaction",X.prototype.compaction),t.defineProperty(X,{compaction:"compaction"},function(){return this.ya.compaction},function(a){this.ya.compaction!==a&&(t.Fa(a,X,X,"compaction"),a===qq||a===sq)&&(this.ya.compaction=a,this.M())}),t.g(X,"breadthLimit",X.prototype.breadthLimit),t.defineProperty(X,{breadthLimit:"breadthLimit"},function(){return this.ya.breadthLimit},function(a){this.ya.breadthLimit!==a&&(t.i(a,"number",X,"breadthLimit"),a>=0&&(this.ya.breadthLimit=a,this.M()))}),t.g(X,"rowSpacing",X.prototype.rowSpacing),t.defineProperty(X,{rowSpacing:"rowSpacing"},function(){return this.ya.rowSpacing},function(a){this.ya.rowSpacing!==a&&(t.i(a,"number",X,"rowSpacing"),this.ya.rowSpacing=a,this.M())}),t.g(X,"rowIndent",X.prototype.rowIndent),t.defineProperty(X,{rowIndent:"rowIndent"},function(){return this.ya.rowIndent},function(a){this.ya.rowIndent!==a&&(t.i(a,"number",X,"rowIndent"),a>=0&&(this.ya.rowIndent=a,this.M()))}),t.g(X,"commentSpacing",X.prototype.commentSpacing),t.defineProperty(X,{commentSpacing:"commentSpacing"},function(){return this.ya.commentSpacing},function(a){this.ya.commentSpacing!==a&&(t.i(a,"number",X,"commentSpacing"),this.ya.commentSpacing=a,this.M())}),t.g(X,"commentMargin",X.prototype.commentMargin),t.defineProperty(X,{commentMargin:"commentMargin"},function(){return this.ya.commentMargin},function(a){this.ya.commentMargin!==a&&(t.i(a,"number",X,"commentMargin"),this.ya.commentMargin=a,this.M())}),t.g(X,"setsPortSpot",X.prototype.setsPortSpot),t.defineProperty(X,{setsPortSpot:"setsPortSpot"},function(){return this.ya.setsPortSpot},function(a){this.ya.setsPortSpot!==a&&(t.i(a,"boolean",X,"setsPortSpot"),this.ya.setsPortSpot=a,this.M())}),t.g(X,"portSpot",X.prototype.portSpot),t.defineProperty(X,{portSpot:"portSpot"},function(){return this.ya.portSpot},function(a){t.l(a,L,X,"portSpot"),this.ya.portSpot.O(a)||(this.ya.portSpot=a,this.M())}),t.g(X,"setsChildPortSpot",X.prototype.setsChildPortSpot),t.defineProperty(X,{setsChildPortSpot:"setsChildPortSpot"},function(){return this.ya.setsChildPortSpot},function(a){this.ya.setsChildPortSpot!==a&&(t.i(a,"boolean",X,"setsChildPortSpot"),this.ya.setsChildPortSpot=a,this.M())}),t.g(X,"childPortSpot",X.prototype.childPortSpot),t.defineProperty(X,{childPortSpot:"childPortSpot"},function(){return this.ya.childPortSpot},function(a){t.l(a,L,X,"childPortSpot"),this.ya.childPortSpot.O(a)||(this.ya.childPortSpot=a,this.M())}),t.g(X,"alternateSorting",X.prototype.tI),t.defineProperty(X,{tI:"alternateSorting"},function(){return this.xa.sorting},function(a){this.xa.sorting!==a&&(t.Fa(a,X,X,"alternateSorting"),a===fq||a===gq||a===hq||iq)&&(this.xa.sorting=a,this.M())}),t.g(X,"alternateComparer",X.prototype.hI),t.defineProperty(X,{hI:"alternateComparer"},function(){return this.xa.comparer},function(a){this.xa.comparer!==a&&(t.i(a,"function",X,"alternateComparer"),this.xa.comparer=a,this.M())}),t.g(X,"alternateAngle",X.prototype.bI),t.defineProperty(X,{bI:"alternateAngle"},function(){return this.xa.angle},function(a){this.xa.angle!==a&&(t.i(a,"number",X,"alternateAngle"),0===a||90===a||180===a||270===a)&&(this.xa.angle=a,this.M())}),t.g(X,"alternateAlignment",X.prototype.aI),t.defineProperty(X,{aI:"alternateAlignment"},function(){return this.xa.alignment},function(a){this.xa.alignment!==a&&(t.Fa(a,X,X,"alternateAlignment"),this.xa.alignment=a,this.M())}),t.g(X,"alternateNodeIndent",X.prototype.lI),t.defineProperty(X,{lI:"alternateNodeIndent"},function(){return this.xa.nodeIndent},function(a){this.xa.nodeIndent!==a&&(t.i(a,"number",X,"alternateNodeIndent"),a>=0&&(this.xa.nodeIndent=a,this.M()))}),t.g(X,"alternateNodeIndentPastParent",X.prototype.mI),t.defineProperty(X,{mI:"alternateNodeIndentPastParent"},function(){return this.xa.nodeIndentPastParent},function(a){this.xa.nodeIndentPastParent!==a&&(t.i(a,"number",X,"alternateNodeIndentPastParent"),a>=0&&1>=a&&(this.xa.nodeIndentPastParent=a,this.M()))}),t.g(X,"alternateNodeSpacing",X.prototype.nI),t.defineProperty(X,{nI:"alternateNodeSpacing"},function(){return this.xa.nodeSpacing},function(a){this.xa.nodeSpacing!==a&&(t.i(a,"number",X,"alternateNodeSpacing"),this.xa.nodeSpacing=a,this.M())}),t.g(X,"alternateLayerSpacing",X.prototype.jI),t.defineProperty(X,{jI:"alternateLayerSpacing"},function(){return this.xa.layerSpacing},function(a){this.xa.layerSpacing!==a&&(t.i(a,"number",X,"alternateLayerSpacing"),this.xa.layerSpacing=a,this.M())}),t.g(X,"alternateLayerSpacingParentOverlap",X.prototype.kI),t.defineProperty(X,{kI:"alternateLayerSpacingParentOverlap"},function(){return this.xa.layerSpacingParentOverlap},function(a){this.xa.layerSpacingParentOverlap!==a&&(t.i(a,"number",X,"alternateLayerSpacingParentOverlap"),a>=0&&1>=a&&(this.xa.layerSpacingParentOverlap=a,this.M()))}),t.g(X,"alternateCompaction",X.prototype.gI),t.defineProperty(X,{gI:"alternateCompaction"},function(){return this.xa.compaction},function(a){this.xa.compaction!==a&&(t.Fa(a,X,X,"alternateCompaction"),a===qq||a===sq)&&(this.xa.compaction=a,this.M())}),t.g(X,"alternateBreadthLimit",X.prototype.cI),t.defineProperty(X,{cI:"alternateBreadthLimit"},function(){return this.xa.breadthLimit},function(a){this.xa.breadthLimit!==a&&(t.i(a,"number",X,"alternateBreadthLimit"),a>=0&&(this.xa.breadthLimit=a,this.M()))}),t.g(X,"alternateRowSpacing",X.prototype.qI),t.defineProperty(X,{qI:"alternateRowSpacing"},function(){return this.xa.rowSpacing},function(a){this.xa.rowSpacing!==a&&(t.i(a,"number",X,"alternateRowSpacing"),this.xa.rowSpacing=a,this.M())}),t.g(X,"alternateRowIndent",X.prototype.pI),t.defineProperty(X,{pI:"alternateRowIndent"},function(){return this.xa.rowIndent},function(a){this.xa.rowIndent!==a&&(t.i(a,"number",X,"alternateRowIndent"),a>=0&&(this.xa.rowIndent=a,this.M()))}),t.g(X,"alternateCommentSpacing",X.prototype.fI),t.defineProperty(X,{fI:"alternateCommentSpacing"},function(){return this.xa.commentSpacing},function(a){this.xa.commentSpacing!==a&&(t.i(a,"number",X,"alternateCommentSpacing"),this.xa.commentSpacing=a,this.M())}),t.g(X,"alternateCommentMargin",X.prototype.eI),t.defineProperty(X,{eI:"alternateCommentMargin"},function(){return this.xa.commentMargin},function(a){this.xa.commentMargin!==a&&(t.i(a,"number",X,"alternateCommentMargin"),this.xa.commentMargin=a,this.M())}),t.g(X,"alternateSetsPortSpot",X.prototype.sI),t.defineProperty(X,{sI:"alternateSetsPortSpot"},function(){return this.xa.setsPortSpot
},function(a){this.xa.setsPortSpot!==a&&(t.i(a,"boolean",X,"alternateSetsPortSpot"),this.xa.setsPortSpot=a,this.M())}),t.g(X,"alternatePortSpot",X.prototype.oI),t.defineProperty(X,{oI:"alternatePortSpot"},function(){return this.xa.portSpot},function(a){t.l(a,L,X,"alternatePortSpot"),this.xa.portSpot.O(a)||(this.xa.portSpot=a,this.M())}),t.g(X,"alternateSetsChildPortSpot",X.prototype.rI),t.defineProperty(X,{rI:"alternateSetsChildPortSpot"},function(){return this.xa.setsChildPortSpot},function(a){this.xa.setsChildPortSpot!==a&&(t.i(a,"boolean",X,"alternateSetsChildPortSpot"),this.xa.setsChildPortSpot=a,this.M())}),t.g(X,"alternateChildPortSpot",X.prototype.dI),t.defineProperty(X,{dI:"alternateChildPortSpot"},function(){return this.xa.childPortSpot},function(a){t.l(a,L,X,"alternateChildPortSpot"),this.xa.childPortSpot.O(a)||(this.xa.childPortSpot=a,this.M())}),X.PathDefault=Kp=t.w(X,"PathDefault",-1),X.PathDestination=Lp=t.w(X,"PathDestination",0),X.PathSource=Tp=t.w(X,"PathSource",1),X.SortingForwards=fq=t.w(X,"SortingForwards",10),X.SortingReverse=gq=t.w(X,"SortingReverse",11),X.SortingAscending=hq=t.w(X,"SortingAscending",12),X.SortingDescending=iq=t.w(X,"SortingDescending",13),X.AlignmentCenterSubtrees=Gq=t.w(X,"AlignmentCenterSubtrees",20),X.AlignmentCenterChildren=jq=t.w(X,"AlignmentCenterChildren",21),X.AlignmentStart=uq=t.w(X,"AlignmentStart",22),X.AlignmentEnd=vq=t.w(X,"AlignmentEnd",23),X.AlignmentBus=lq=t.w(X,"AlignmentBus",24),X.AlignmentBusBranching=aq=t.w(X,"AlignmentBusBranching",25),X.AlignmentTopLeftBus=mq=t.w(X,"AlignmentTopLeftBus",26),X.AlignmentBottomRightBus=nq=t.w(X,"AlignmentBottomRightBus",27),X.CompactionNone=qq=t.w(X,"CompactionNone",30),X.CompactionBlock=sq=t.w(X,"CompactionBlock",31),X.StyleLayered=Mp=t.w(X,"StyleLayered",40),X.StyleLastParents=eq=t.w(X,"StyleLastParents",41),X.StyleAlternating=dq=t.w(X,"StyleAlternating",42),X.StyleRootOnly=cq=t.w(X,"StyleRootOnly",43),X.ArrangementVertical=Op=t.w(X,"ArrangementVertical",50),X.ArrangementHorizontal=Uq=t.w(X,"ArrangementHorizontal",51),X.ArrangementFixedRoots=Sp=t.w(X,"ArrangementFixedRoots",52),X.LayerIndividual=Np=t.w(X,"LayerIndividual",60),X.LayerSiblings=Zp=t.w(X,"LayerSiblings",61),X.LayerUniform=Yp=t.w(X,"LayerUniform",62),t.ka("TreeNetwork",Qp),t.Qa(Qp,Ea),Qp.prototype.createVertex=function(){return new Pp},Qp.prototype.createEdge=function(){return new Wq},t.ka("TreeVertex",Pp),t.Qa(Pp,Fa),Pp.prototype.copyInheritedPropertiesFrom=function(a){null!==a&&(this.sorting=a.sorting,this.comparer=a.comparer,this.angle=a.angle,this.alignment=a.alignment,this.nodeIndent=a.nodeIndent,this.nodeIndentPastParent=a.nodeIndentPastParent,this.nodeSpacing=a.nodeSpacing,this.layerSpacing=a.layerSpacing,this.layerSpacingParentOverlap=a.layerSpacingParentOverlap,this.compaction=a.compaction,this.breadthLimit=a.breadthLimit,this.rowSpacing=a.rowSpacing,this.rowIndent=a.rowIndent,this.commentSpacing=a.commentSpacing,this.commentMargin=a.commentMargin,this.setsPortSpot=a.setsPortSpot,this.portSpot=a.portSpot,this.setsChildPortSpot=a.setsChildPortSpot,this.childPortSpot=a.childPortSpot)},t.A(Pp,{Xm:"childrenCount"},function(){return this.children.length}),t.g(Pp,"relativePosition",Pp.prototype.jK),t.defineProperty(Pp,{jK:"relativePosition"},function(){return this.qa},function(a){this.qa.set(a)}),t.g(Pp,"subtreeSize",Pp.prototype.CK),t.defineProperty(Pp,{CK:"subtreeSize"},function(){return this.eb},function(a){this.eb.set(a)}),t.g(Pp,"subtreeOffset",Pp.prototype.BK),t.defineProperty(Pp,{BK:"subtreeOffset"},function(){return this.Na},function(a){this.Na.set(a)}),t.ka("TreeEdge",Wq),t.Qa(Wq,Ha),Wq.prototype.commit=function(){var b,c,d,f,g,h,k,l,m,n,i,j,a=this.link;if(null!==a&&!a.rj){switch(b=this.network.ic,c=null,d=null,b.Pf){case Lp:c=this.fromVertex,d=this.toVertex;break;case Tp:c=this.toVertex,d=this.fromVertex;break;default:t.m("Unhandled path value "+b.Pf.toString())}if(null!==c&&null!==d)if(b=this.gs,0!==b.x||0!==b.y||c.pK){if(d=c.Ub,f=tq(c),g=wq(c),h=c.rowSpacing,a.updateRoute(),i=a.Je===Vg,j=a.pc,a.Kl(),j||i){for(k=2;4<a.ra;)a.qG(2);l=a.o(1),m=a.o(2)}else{for(k=1;3<a.ra;)a.qG(1);l=a.o(0),m=a.o(a.ra-1)}n=a.o(a.ra-1),0===f?(c.alignment===vq?(f=d.bottom+b.y,0===b.y&&l.y>n.y+c.rowIndent&&(f=Math.min(f,Math.max(l.y,f-xq(c))))):c.alignment===uq?(f=d.top+b.y,0===b.y&&l.y<n.y-c.rowIndent&&(f=Math.max(f,Math.min(l.y,f+xq(c))))):f=c.cq||c.dq&&1===c.maxGenerationCount?d.top-c.Na.y+b.y:d.y+d.height/2+b.y,i?(a.C(k,l.x,f),k++,a.C(k,d.right+g,f),k++,a.C(k,d.right+g+(b.x-h)/3,f),k++,a.C(k,d.right+g+2*(b.x-h)/3,f),k++,a.C(k,d.right+g+(b.x-h),f),k++,a.C(k,m.x,f)):(j&&(a.C(k,d.right+g/2,l.y),k++),a.C(k,d.right+g/2,f),k++,a.C(k,d.right+g+b.x-(j?h/2:h),f),k++,j&&a.C(k,a.o(k-1).x,m.y))):90===f?(c.alignment===vq?(f=d.right+b.x,0===b.x&&l.x>n.x+c.rowIndent&&(f=Math.min(f,Math.max(l.x,f-xq(c))))):c.alignment===uq?(f=d.left+b.x,0===b.x&&l.x<n.x-c.rowIndent&&(f=Math.max(f,Math.min(l.x,f+xq(c))))):f=c.cq||c.dq&&1===c.maxGenerationCount?d.left-c.Na.x+b.x:d.x+d.width/2+b.x,i?(a.C(k,f,l.y),k++,a.C(k,f,d.bottom+g),k++,a.C(k,f,d.bottom+g+(b.y-h)/3),k++,a.C(k,f,d.bottom+g+2*(b.y-h)/3),k++,a.C(k,f,d.bottom+g+(b.y-h)),k++,a.C(k,f,m.y)):(j&&(a.C(k,l.x,d.bottom+g/2),k++),a.C(k,f,d.bottom+g/2),k++,a.C(k,f,d.bottom+g+b.y-(j?h/2:h)),k++,j&&a.C(k,m.x,a.o(k-1).y))):180===f?(c.alignment===vq?(f=d.bottom+b.y,0===b.y&&l.y>n.y+c.rowIndent&&(f=Math.min(f,Math.max(l.y,f-xq(c))))):c.alignment===uq?(f=d.top+b.y,0===b.y&&l.y<n.y-c.rowIndent&&(f=Math.max(f,Math.min(l.y,f+xq(c))))):f=c.cq||c.dq&&1===c.maxGenerationCount?d.top-c.Na.y+b.y:d.y+d.height/2+b.y,i?(a.C(k,l.x,f),k++,a.C(k,d.left-g,f),k++,a.C(k,d.left-g+(b.x+h)/3,f),k++,a.C(k,d.left-g+2*(b.x+h)/3,f),k++,a.C(k,d.left-g+(b.x+h),f),k++,a.C(k,m.x,f)):(j&&(a.C(k,d.left-g/2,l.y),k++),a.C(k,d.left-g/2,f),k++,a.C(k,d.left-g+b.x+(j?h/2:h),f),k++,j&&a.C(k,a.o(k-1).x,m.y))):270===f?(c.alignment===vq?(f=d.right+b.x,0===b.x&&l.x>n.x+c.rowIndent&&(f=Math.min(f,Math.max(l.x,f-xq(c))))):c.alignment===uq?(f=d.left+b.x,0===b.x&&l.x<n.x-c.rowIndent&&(f=Math.max(f,Math.min(l.x,f+xq(c))))):f=c.cq||c.dq&&1===c.maxGenerationCount?d.left-c.Na.x+b.x:d.x+d.width/2+b.x,i?(a.C(k,f,l.y),k++,a.C(k,f,d.top-g),k++,a.C(k,f,d.top-g+(b.y+h)/3),k++,a.C(k,f,d.top-g+2*(b.y+h)/3),k++,a.C(k,f,d.top-g+(b.y+h)),k++,a.C(k,f,m.y)):(j&&(a.C(k,l.x,d.top-g/2),k++),a.C(k,f,d.top-g/2),k++,a.C(k,f,d.top-g+b.y+(j?h/2:h)),k++,j&&a.C(k,m.x,a.o(k-1).y))):t.m("Invalid angle "+f),a.jj()}else g=c,h=d,e&&t.l(g,Pp,Wq,"adjustRouteForAngleChange:parent"),e&&t.l(h,Pp,Wq,"adjustRouteForAngleChange:child"),a=this.link,c=tq(g),c!==tq(h)&&(b=wq(g),d=g.Ub,g=h.Ub,0===c&&g.left-d.right<b+1||90===c&&g.top-d.bottom<b+1||180===c&&d.left-g.right<b+1||270===c&&d.top-g.bottom<b+1||(a.updateRoute(),g=a.Je===Vg,h=a.pc,i=kq(this.fromVertex.alignment),a.Kl(),0===c?(c=d.right+b/2,g?4===a.ra&&(b=a.o(3).y,a.aa(1,c-20,a.o(1).y),a.C(2,c-20,b),a.C(3,c,b),a.C(4,c+20,b),a.aa(5,a.o(5).x,b)):h?i?a.aa(3,a.o(2).x,a.o(4).y):6===a.ra&&(a.aa(2,c,a.o(2).y),a.aa(3,c,a.o(3).y)):4===a.ra?a.C(2,c,a.o(2).y):3===a.ra?a.aa(1,c,a.o(2).y):2===a.ra&&a.C(1,c,a.o(1).y)):90===c?(b=d.bottom+b/2,g?4===a.ra&&(c=a.o(3).x,a.aa(1,a.o(1).x,b-20),a.C(2,c,b-20),a.C(3,c,b),a.C(4,c,b+20),a.aa(5,c,a.o(5).y)):h?i?a.aa(3,a.o(2).x,a.o(4).y):6===a.ra&&(a.aa(2,a.o(2).x,b),a.aa(3,a.o(3).x,b)):4===a.ra?a.C(2,a.o(2).x,b):3===a.ra?a.aa(1,a.o(2).x,b):2===a.ra&&a.C(1,a.o(1).x,b)):180===c?(c=d.left-b/2,g?4===a.ra&&(b=a.o(3).y,a.aa(1,c+20,a.o(1).y),a.C(2,c+20,b),a.C(3,c,b),a.C(4,c-20,b),a.aa(5,a.o(5).x,b)):h?i?a.aa(3,a.o(2).x,a.o(4).y):6===a.ra&&(a.aa(2,c,a.o(2).y),a.aa(3,c,a.o(3).y)):4===a.ra?a.C(2,c,a.o(2).y):3===a.ra?a.aa(1,c,a.o(2).y):2===a.ra&&a.C(1,c,a.o(1).y)):270===c&&(b=d.top-b/2,g?4===a.ra&&(c=a.o(3).x,a.aa(1,a.o(1).x,b+20),a.C(2,c,b+20),a.C(3,c,b),a.C(4,c,b-20),a.aa(5,c,a.o(5).y)):h?i?a.aa(3,a.o(2).x,a.o(4).y):6===a.ra&&(a.aa(2,a.o(2).x,b),a.aa(3,a.o(3).x,b)):4===a.ra?a.C(2,a.o(2).x,b):3===a.ra?a.aa(1,a.o(2).x,b):2===a.ra&&a.C(1,a.o(1).x,b)),a.jj()))}},t.g(Wq,"relativePoint",Wq.prototype.iK),t.defineProperty(Wq,{iK:"relativePoint"},function(){return this.gs},function(a){this.gs.set(a)}),Xq.prototype.Ss=function(a){var b=a.sa,c=a.ta,d=a.D,e=a.F,f=Math.min(b,d),g=Math.min(c,e),b=Math.abs(d-b),c=Math.abs(e-c),e=new Rc(f,g);return e.Ka.add(new xd(bd,f+b,g)),e.Ka.add(new xd(bd,f+b,g+c)),e.Ka.add(new xd(bd,f,g+c).close()),a.type=Qc,a.Fb.add(e),a},ca.version="1.4.20",window&&(window.module&&"object"==typeof window.module&&"object"==typeof window.module.exports?window.module.exports=ca:window.define&&"function"==typeof window.define&&window.define.amd?(window.yy=ca,window.define(ca)):window.yy=ca)}(window),yy.Diagram.inherit(DrawCommandHandler,yy.CommandHandler),DrawCommandHandler.prototype.canAlignSelection=function(){var a=this.diagram;return null===a||a.isReadOnly||a.isModelReadOnly?!1:a.selection.count<2?!1:!0},DrawCommandHandler.prototype.alignLeft=function(){var b,a=this.diagram;a.startTransaction("aligning left"),b=1/0,a.selection.each(function(a){a instanceof yy.Link||(b=Math.min(a.position.x,b))}),a.selection.each(function(a){a instanceof yy.Link||a.move(new yy.Point(b,a.position.y))}),a.commitTransaction("aligning left")},DrawCommandHandler.prototype.alignRight=function(){var b,a=this.diagram;a.startTransaction("aligning right"),b=-1/0,a.selection.each(function(a){if(!(a instanceof yy.Link)){var c=a.actualBounds.x+a.actualBounds.width;b=Math.max(c,b)}}),a.selection.each(function(a){a instanceof yy.Link||a.move(new yy.Point(b-a.actualBounds.width,a.position.y))}),a.commitTransaction("aligning right")},DrawCommandHandler.prototype.alignTop=function(){var b,a=this.diagram;a.startTransaction("alignTop"),b=1/0,a.selection.each(function(a){a instanceof yy.Link||(b=Math.min(a.position.y,b))}),a.selection.each(function(a){a instanceof yy.Link||a.move(new yy.Point(a.position.x,b))}),a.commitTransaction("alignTop")},DrawCommandHandler.prototype.alignBottom=function(){var b,a=this.diagram;a.startTransaction("aligning bottom"),b=-1/0,a.selection.each(function(a){if(!(a instanceof yy.Link)){var c=a.actualBounds.y+a.actualBounds.height;b=Math.max(c,b)}}),a.selection.each(function(a){a instanceof yy.Link||a.move(new yy.Point(a.actualBounds.x,b-a.actualBounds.height))}),a.commitTransaction("aligning bottom")},DrawCommandHandler.prototype.alignCenterX=function(){var c,a=this.diagram,b=a.selection.first();b&&(a.startTransaction("aligning Center X"),c=b.actualBounds.x+b.actualBounds.width/2,a.selection.each(function(a){a instanceof yy.Link||a.move(new yy.Point(c-a.actualBounds.width/2,a.actualBounds.y))}),a.commitTransaction("aligning Center X"))},DrawCommandHandler.prototype.alignCenterY=function(){var c,a=this.diagram,b=a.selection.first();b&&(a.startTransaction("aligning Center Y"),c=b.actualBounds.y+b.actualBounds.height/2,a.selection.each(function(a){a instanceof yy.Link||a.move(new yy.Point(a.actualBounds.x,c-a.actualBounds.height/2))}),a.commitTransaction("aligning Center Y"))},DrawCommandHandler.prototype.alignColumn=function(a){var c,d,e,f,g,b=this.diagram;for(b.startTransaction("align Column"),void 0===a&&(a=0),a=parseFloat(a),c=new Array,b.selection.each(function(a){a instanceof yy.Link||c.push(a)}),d=0;d<c.length-1;d++)e=c[d],f=e.actualBounds.y+e.actualBounds.height+a,g=c[d+1],g.move(new yy.Point(e.actualBounds.x,f));b.commitTransaction("align Column")},DrawCommandHandler.prototype.alignRow=function(a){var b,c,d,e,f,g;for(void 0===a&&(a=0),a=parseFloat(a),b=this.diagram,b.startTransaction("align Row"),c=new Array,b.selection.each(function(a){a instanceof yy.Link||c.push(a)}),d=0;d<c.length-1;d++)e=c[d],f=e.actualBounds.x+e.actualBounds.width+a,g=c[d+1],g.move(new yy.Point(f,e.actualBounds.y));b.commitTransaction("align Row")},DrawCommandHandler.prototype.canRotate=function(){var b=this.diagram;return null===b||b.isReadOnly||b.isModelReadOnly?!1:b.selection.count<1?!1:!0},DrawCommandHandler.prototype.rotate=function(a){var b;void 0===a&&(a=90),b=this.diagram,b.startTransaction("rotate "+a.toString()),b=this.diagram,b.selection.each(function(b){b instanceof yy.Link||b instanceof yy.Group||(b.angle+=a)}),b.commitTransaction("rotate "+a.toString())},DrawCommandHandler.prototype.doKeyDown=function(){var b,c,a=this.diagram;if(null!==a){if(b=a.lastInput,"Up"===b.key||"Down"===b.key||"Left"===b.key||"Right"===b.key){if(c=this.arrowKeyBehavior,"none"===c)return;if("select"===c)return this._arrowKeySelect(),void 0;if("move"===c)return this._arrowKeyMove(),void 0}yy.CommandHandler.prototype.doKeyDown.call(this)}},DrawCommandHandler.prototype._getAllParts=function(){var a=new Array;return this.diagram.nodes.each(function(b){a.push(b)}),this.diagram.parts.each(function(b){a.push(b)}),a},DrawCommandHandler.prototype._arrowKeyMove=function(){var e,a=this.diagram,b=a.lastInput,c=0,d=0;b.control||b.meta?(c=1,d=1):null!==a.grid&&(e=a.grid.gridCellSize,d=e.width,c=e.height),a.startTransaction("arrowKeyMove"),a.selection.each(function(a){"Up"===b.key?a.move(new yy.Point(a.actualBounds.x,a.actualBounds.y-c)):"Down"===b.key?a.move(new yy.Point(a.actualBounds.x,a.actualBounds.y+c)):"Left"===b.key?a.move(new yy.Point(a.actualBounds.x-d,a.actualBounds.y)):"Right"===b.key&&a.move(new yy.Point(a.actualBounds.x+d,a.actualBounds.y))}),a.commitTransaction("arrowKeyMove")},DrawCommandHandler.prototype._arrowKeySelect=function(){var a=this.diagram,b=a.lastInput,c=null;"Up"===b.key?c=this._findNearestPartTowards(270):"Down"===b.key?c=this._findNearestPartTowards(90):"Left"===b.key?c=this._findNearestPartTowards(180):"Right"===b.key&&(c=this._findNearestPartTowards(0)),null!==c&&(b.shift?c.isSelected=!0:b.control||b.meta?c.isSelected=!c.isSelected:a.select(c))},DrawCommandHandler.prototype._findNearestPartTowards=function(a){var c,d,e,f,g,h,i,j,k,l,b=this.diagram.selection.first();if(null===b)return null;for(c=b.actualBounds.center,d=this._getAllParts(),e=1/0,f=b,g=0;g<d.length;g++)h=d[g],h!==b&&(i=h.actualBounds.center,j=c.directionPoint(i),k=this._angleCloseness(j,a),45>=k&&(l=c.distanceSquaredPoint(i),l*=1+Math.sin(k*Math.PI/180),e>l&&(e=l,f=h)));return f},DrawCommandHandler.prototype._angleCloseness=function(a,b){return Math.min(Math.abs(b-a),Math.min(Math.abs(b+360-a),Math.abs(b-360-a)))},Object.defineProperty(DrawCommandHandler.prototype,"arrowKeyBehavior",{get:function(){return this._arrowKeyBehavior},set:function(a){if("move"!==a&&"select"!==a&&"scroll"!==a&&"none"!==a)throw new Error('DrawCommandHandler.arrowKeyBehavior must be either "move", "select", "scroll", or "none", not: '+a);this._arrowKeyBehavior=a}}),yy.Diagram.inherit(PoolLink,yy.Link),PoolLink.prototype.getLinkPoint=function(a,b,c,d,e,f,g){var h=new yy.Rect(b.getDocumentPoint(yy.Spot.TopLeft),b.getDocumentPoint(yy.Spot.BottomRight)),i=yy.Link.prototype.getLinkPoint.call(this,f,g,c,d,e,a,b),j=i.y>h.centerY,k=j?h.bottom:h.top;return"privateProcess"===a.category?i.x<h.left?new yy.Point(h.left,k):i.x>h.right?new yy.Point(h.right,k):new yy.Point(i.x,k):yy.Link.prototype.getLinkPoint.call(this,a,b,c,d,e,f,g)},PoolLink.prototype.computeOtherPoint=function(a,b){var c=yy.Link.prototype.computeOtherPoint(this,a,b),d=this.toNode;return d===a&&(d=this.fromNode),"privateProcess"===a.category&&(c.x=d.getDocumentPoint(yy.Spot.MiddleBottom).x),c},PoolLink.prototype.getLinkDirection=function(a,b,c,d,e,f,g,h){var i,j,k;return"privateProcess"===a.category?(i=b.getDocumentPoint(yy.Spot.Center),j=h.getDocumentPoint(yy.Spot.Center),k=j.y>i.y,k?90:270):yy.Link.prototype.getLinkDirection.call(this,a,b,c,d,e,f,g,h)},yy.Diagram.inherit(BPMNLinkingTool,yy.LinkingTool),BPMNLinkingTool.prototype.insertLink=function(a,b,c,d){var f,g,e=null;return("privateProcess"===a.category||"privateProcess"===c.category)&&(e=this.archetypeLinkData,this.archetypeLinkData={category:"msg"}),f=yy.LinkingTool.prototype.insertLink.call(this,a,b,c,d),"gateway"===a.category&&(g=f.findObject("Label"),null!==g&&(g.visible=!0)),null!==e&&(this.archetypeLinkData=e),f};var UnsavedFileName="(Unsaved File)";!function(){var a={},b={},c=0,d=0,e=!1;"file:"===window.location.protocol&&(c=window.setInterval(function(){a=document.getElementById("coFrameDiv"),a&&(b=a.parentNode,b&&(b.removeChild(a),e=!0,document.body&&document.body.style&&document.body.style.setProperty("margin-top","0px","important"))),d+=1,(d>10||e)&&window.clearInterval(c)},10))}(),window.onload=function(){init();};